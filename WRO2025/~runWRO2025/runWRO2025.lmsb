DATA16 FD_NATIVECODECOMMAND
DATA16 FD_NATIVECODERESPONSE
DATA32 STOPLCDUPDATE
DATA32 NUMMAILBOXES
ARRAY8 MOTORISINVERTED 4     
ARRAY8 FIRSTOF2  16
ARRAY16 LOCKS 2           
DATA32 s1out1
DATA32 s1out2
DATA32 s1out3
DATA32 s2out1
DATA32 s2out2
DATA32 s2out3
DATA32 s3out1
DATA32 s3out2
DATA32 s3out3
DATA32 s4out1
DATA32 s4out2
DATA32 s4out3
DATA32 getTachoA
DATA32 tmpTachoA
DATA8 getSpeedA
DATA8 setSpeedA
DATA8 setPowerA
DATA32 getTachoB
DATA32 tmpTachoB
DATA8 getSpeedB
DATA8 setSpeedB
DATA8 setPowerB
DATA32 getTachoC
DATA32 tmpTachoC
DATA8 getSpeedC
DATA8 setSpeedC
DATA8 setPowerC
DATA32 getTachoD
DATA32 tmpTachoD
DATA8 getSpeedD
DATA8 setSpeedD
DATA8 setPowerD
DATA16 newArray1d
DATA32 newSize1d
DATA32 newIndex1d
DATA32 timeMC1
DATA32 timeMC2
DATA32 timeMC3
DATA32 timeMC4
DATA32 timeMC5
DATA32 timeMC6
DATA32 timeMC7
DATA32 timeMC8
DATA32 timeMC9
DATA32 timeMC1tmp
DATA32 timeMC2tmp
DATA32 timeMC3tmp
DATA32 timeMC4tmp
DATA32 timeMC5tmp
DATA32 timeMC6tmp
DATA32 timeMC7tmp
DATA32 timeMC8tmp
DATA32 timeMC9tmp
DATAF VPR_GIRO_G1
DATAF VPR_RGB_VALUENEGRO
DATAF VPR_RGB_VALUEBLANCO
DATAF VPR_RGB_RWHITE
DATAF VPR_RGB_GWHITE
DATAF VPR_RGB_BWHITE
DATAF VPR_RECTO_DIAMETRO
DATAF VPR_GIRO_DIAMETRO
DATAF VPR_SIGUELINEAS_DIAMETRO
DATAF VPR_SMART_DIAMETRO
DATAF VPR_SIGUELINEAS_NEGRO1
DATAF VPR_SIGUELINEAS_NEGRO3
DATAF VPR_SIGUELINEAS_NEGRO4
DATAF VPR_SIGUELINEAS_BLANCO1
DATAF VPR_SIGUELINEAS_BLANCO3
DATAF VPR_SIGUELINEAS_BLANCO4
DATAF VPR_SMART_NEGRO1
DATAF VPR_SMART_NEGRO3
DATAF VPR_SMART_NEGRO4
DATAF VPR_SMART_BLANCO1
DATAF VPR_SMART_BLANCO3
DATAF VPR_SMART_BLANCO4
DATAF VPR_RECTO_NEGRO
DATAF VPR_RECTO_BLANCO
DATAF VPR_GIRO_NEGRO
DATAF VPR_GIRO_BLANCO
DATAF VLV_VELOCIDAD_9
DATAF VLV_TIMER_9
DATAF VLV_VELOCIDAD_10
DATAF VLV_ENCODER_10
DATAF VLV_VELOCIDAD_11
DATAF VLV_DISTANCIA_11
DATAF VLV_VELOCIDAD_19
DATAF VLV_ENCODER_19
DATAF VLV_VELOCIDAD1_26
DATAF VLV_VELOCIDAD2_26
DATAF VLV_GRADOS_26
DATAF VLV_VELOCIDAD1_27
DATAF VLV_VELOCIDAD2_27
DATAF VLV_DISTANCIA_27
DATAF VLV_VELOCIDAD_12
DATAF VLV_SENSOR_12
DATAF VLV_VELOCIDAD_20
DATAF VLV_VELOCIDAD_21
DATAF VLV_ENCODER_21
DATAF VLV_VELOCIDAD_13
DATAF VLV_DISTANCIA_13
DATAF VLV_SENS_32
DATAF VLV_REPS_32
DATAF VLV_COLOR_32
DATAF VLV_VELOCIDAD_14
DATAF VLV_TIEMPO_14
DATAF VLV_VELOCIDAD1_28
DATAF VLV_VELOCIDAD2_28
DATAF VLV_SENS_28
DATAF VLV_VELOCIDAD1_29
DATAF VLV_VELOCIDAD2_29
DATAF VLV_SENS_29
DATAF VLV_VELOCIDAD_22
DATAF VLV_READER_22
DATAF VLV_VELOCIDAD_15
DATAF VLV_SENSOR_15
DATAF VLV_COLOR_15
DATAF VLV_VELOCIDAD1_30
DATAF VLV_VELOCIDAD2_30
DATAF VLV_DISTANCIA_30
DATAF VLV_VELOCIDAD_16
DATAF VLV_SENSOR_16
DATAF VLV_VELOCIDAD_23
DATAF VLV_READER_23
DATAF VLV_VELOCIDAD_17
DATAF VLV_SENSOR_17
ARRAY16 VLV_MARKING_6 2
DATAF VLV_VELOCIDAD1_31
DATAF VLV_VELOCIDAD2_31
DATAF VLV_TIEMPO_31
DATAF VLV_VELOCIDAD_18
DATAF VLV_SENSOR_18
DATAF VLV_VELOCIDAD_24
DATAF VLV_ENCODER_24
DATAF VLV_VELOCIDAD_25
DATAF VLV_ENCODER_25
DATAF VLV_COLOR_33
DATAF VLV_NUMERO_2
ARRAY16 VLV_MARKING_4 2
DATAS VLV_CODIGO_4 252
DATAF VLV_GRADOS_5
DATAF VGV_MARKINGGRANDE
DATAS VLV_CODIGO_6 252
DATAF VGV_DIAMETRO
DATAF VGV_NEGRO1
DATAF VGV_NEGRO3
DATAF VGV_NEGRO4
DATAF VGV_BLANCO1
DATAF VGV_BLANCO3
DATAF VGV_BLANCO4
DATAF VGV_COLOR
ARRAY16 VGV_MARKING 2
DATAF VGV_TIEMPO
DATAF VLV_VOLTAJE_1
DATAF VLV_AUX_4
DATAF VLV_I_4
DATAF VLV_SIGNO_5
DATAF VLV_ENCDIFF_10
DATAF VLV_SIGNO_10
DATAF VLV_SAFETYTIMER_11
DATAF VLV_CORRECCION_11
DATAF VLV_ENC_11
DATAF VLV_CORRECCION_12
DATAF VLV_LECTURA_12
DATAF VLV_SAFETYTIMER_13
DATAF VLV_CORRECCION_13
DATAF VLV_ENC_13
DATAF VLV_CORRECCION_14
DATAF VLV_CORRECCION_15
DATAF VLV_MODE_15
DATAF VLV_CORRECCION_16
DATAF VLV_LECTURA_16
DATAF VLV_CORRECCION_17
DATAF VLV_LECTURA_17
DATAF VLV_CORRECCION_18
DATAF VLV_LECTURA_18
DATAF VLV_LECTURA1_19
DATAF VLV_LECTURA3_19
DATAF VLV_LECTURA4_19
DATAF VLV_KP_19
DATAF VLV_KD_19
DATAF VLV_ERROR_19
DATAF VLV_OLDERROR_19
DATAF VLV_U_19
DATAF VLV_SENTIDO_19
DATAF VLV_STARTC_19
DATAF VLV_ENCODERC_19
DATAF VLV_SAFETYTIMER_19
DATAF VLV_LECTURA1_20
DATAF VLV_LECTURA3_20
DATAF VLV_LECTURA4_20
DATAF VLV_KP_20
DATAF VLV_KD_20
DATAF VLV_ERROR_20
DATAF VLV_OLDERROR_20
DATAF VLV_U_20
DATAF VLV_SENTIDO_20
DATAF VLV_LECTURA1_21
DATAF VLV_LECTURA3_21
DATAF VLV_LECTURA4_21
DATAF VLV_KP_21
DATAF VLV_KD_21
DATAF VLV_ERROR_21
DATAF VLV_OLDERROR_21
DATAF VLV_U_21
DATAF VLV_SENTIDO_21
DATAF VLV_STARTC_21
DATAF VLV_ENCODERC_21
DATAF VLV_SAFETYTIMER_21
DATAF VLV_LECTURA1_22
DATAF VLV_LECTURA3_22
DATAF VLV_LECTURA4_22
DATAF VLV_KP_22
DATAF VLV_KD_22
DATAF VLV_ERROR_22
DATAF VLV_OLDERROR_22
DATAF VLV_U_22
DATAF VLV_SENTIDO_22
DATAF VLV_LECTURA_22
DATAF VLV_LECTURAIZQ_22
DATAF VLV_LECTURADCH_22
DATAF VLV_LECTURA1_23
DATAF VLV_LECTURA3_23
DATAF VLV_LECTURA4_23
DATAF VLV_KP_23
DATAF VLV_KD_23
DATAF VLV_ERROR_23
DATAF VLV_OLDERROR_23
DATAF VLV_U_23
DATAF VLV_SENTIDO_23
DATAF VLV_LECTURA_23
DATAF VLV_LECTURAIZQ_23
DATAF VLV_LECTURADCH_23
DATAF VLV_LECTURA1_24
DATAF VLV_LECTURA3_24
DATAF VLV_LECTURA4_24
DATAF VLV_KP_24
DATAF VLV_KD_24
DATAF VLV_ERROR_24
DATAF VLV_OLDERROR_24
DATAF VLV_U_24
DATAF VLV_SENTIDO_24
DATAF VLV_STARTC_24
DATAF VLV_ENCODERC_24
DATAF VLV_SAFETYTIMER_24
DATAF VLV_LECTURA1_25
DATAF VLV_LECTURA3_25
DATAF VLV_LECTURA4_25
DATAF VLV_KP_25
DATAF VLV_KD_25
DATAF VLV_ERROR_25
DATAF VLV_OLDERROR_25
DATAF VLV_U_25
DATAF VLV_SENTIDO_25
DATAF VLV_STARTC_25
DATAF VLV_ENCODERC_25
DATAF VLV_SAFETYTIMER_25
DATAF VLV_SIGNO_26
DATAF VLV_VMIN_26
DATAF VLV_VMAX_26
DATAF VLV_ENCODER_26
DATAF VLV_ENCODER_27
DATAF VLV_LECTURA_28
DATAF VLV_LECTURA_29
DATAF VLV_ENCODER_30
DATAF VLV_SENS_MODE_32
DATAF VLV_RED_32
DATAF VLV_YELLOW_32
DATAF VLV_GREEN_32
DATAF VLV_BLUE_32
DATAF VLV_HUE_32
DATAF VLV_SAT_32
DATAF VLV_VALUE_32
ARRAY16 VLV_RNORMARRAY_32 2
ARRAY16 VLV_GNORMARRAY_32 2
ARRAY16 VLV_BNORMARRAY_32 2
DATAF VLV_J_32
ARRAY16 VLV_RGB_32 2
DATAF VLV_RRAW_32
DATAF VLV_GRAW_32
DATAF VLV_BRAW_32
DATAF VLV_RNORM_32
DATAF VLV_GNORM_32
DATAF VLV_BNORM_32
DATAF VLV_MAX_32
DATAF VLV_MIN_32
DATAF VLV_RGBGREY_32
DATA32 RUNCOUNTER_F_GRITARCOLOR_0
DATA32 RUNCOUNTER_F_SAFETYTIMERBRAZO_0

vmthread MAIN
{
    MOVE32_32 0 STOPLCDUPDATE
    MOVE32_32 0 NUMMAILBOXES
    OUTPUT_RESET 0 15

	WRITE8 0 0 MOTORISINVERTED
	WRITE8 0 1 MOTORISINVERTED
	WRITE8 0 2 MOTORISINVERTED
	WRITE8 0 3 MOTORISINVERTED
	WRITE8 0 0 FIRSTOF2
	WRITE8 0 1 FIRSTOF2
	WRITE8 0 2 FIRSTOF2
	WRITE8 1 3 FIRSTOF2
	WRITE8 0 4 FIRSTOF2
	WRITE8 1 5 FIRSTOF2
	WRITE8 2 6 FIRSTOF2
	WRITE8 0 7 FIRSTOF2
	WRITE8 0 8 FIRSTOF2
	WRITE8 1 9 FIRSTOF2
	WRITE8 2 10 FIRSTOF2
	WRITE8 0 11 FIRSTOF2
	WRITE8 4 12 FIRSTOF2
	WRITE8 0 13 FIRSTOF2
	WRITE8 0 14 FIRSTOF2
	WRITE8 0 15 FIRSTOF2
    INPUT_DEVICE CLR_ALL -1
    ARRAY CREATE8 0 LOCKS
    MOVE32_32 0 s1out1
	MOVE32_32 0 s1out2
	MOVE32_32 0 s1out3
    MOVE32_32 0 s2out1
	MOVE32_32 0 s2out2
	MOVE32_32 0 s2out3
    MOVE32_32 0 s3out1
	MOVE32_32 0 s3out2
	MOVE32_32 0 s3out3
    MOVE32_32 0 s4out1
	MOVE32_32 0 s4out2
	MOVE32_32 0 s4out3
    MOVE32_32 0 timeMC1
	MOVE32_32 0 timeMC2
	MOVE32_32 0 timeMC3
	MOVE32_32 0 timeMC4
	MOVE32_32 0 timeMC5
	MOVE32_32 0 timeMC6
	MOVE32_32 0 timeMC7
	MOVE32_32 0 timeMC8
	MOVE32_32 0 timeMC9
    MOVEF_F 0.0 VPR_GIRO_G1
    MOVEF_F 0.0 VPR_RGB_VALUENEGRO
    MOVEF_F 0.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 0.0 VPR_RGB_RWHITE
    MOVEF_F 0.0 VPR_RGB_GWHITE
    MOVEF_F 0.0 VPR_RGB_BWHITE
    MOVEF_F 0.0 VPR_RECTO_DIAMETRO
    MOVEF_F 0.0 VPR_GIRO_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F 0.0 VPR_SMART_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F 0.0 VPR_SMART_NEGRO1
    MOVEF_F 0.0 VPR_SMART_NEGRO3
    MOVEF_F 0.0 VPR_SMART_NEGRO4
    MOVEF_F 0.0 VPR_SMART_BLANCO1
    MOVEF_F 0.0 VPR_SMART_BLANCO3
    MOVEF_F 0.0 VPR_SMART_BLANCO4
    MOVEF_F 0.0 VPR_RECTO_NEGRO
    MOVEF_F 0.0 VPR_RECTO_BLANCO
    MOVEF_F 0.0 VPR_GIRO_NEGRO
    MOVEF_F 0.0 VPR_GIRO_BLANCO
    MOVEF_F 0.0 VLV_VELOCIDAD_9
    MOVEF_F 0.0 VLV_TIMER_9
    MOVEF_F 0.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    MOVEF_F 0.0 VLV_VELOCIDAD_11
    MOVEF_F 0.0 VLV_DISTANCIA_11
    MOVEF_F 0.0 VLV_VELOCIDAD_19
    MOVEF_F 0.0 VLV_ENCODER_19
    MOVEF_F 0.0 VLV_VELOCIDAD1_26
    MOVEF_F 0.0 VLV_VELOCIDAD2_26
    MOVEF_F 0.0 VLV_GRADOS_26
    MOVEF_F 0.0 VLV_VELOCIDAD1_27
    MOVEF_F 0.0 VLV_VELOCIDAD2_27
    MOVEF_F 0.0 VLV_DISTANCIA_27
    MOVEF_F 0.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_SENSOR_12
    MOVEF_F 0.0 VLV_VELOCIDAD_20
    MOVEF_F 0.0 VLV_VELOCIDAD_21
    MOVEF_F 0.0 VLV_ENCODER_21
    MOVEF_F 0.0 VLV_VELOCIDAD_13
    MOVEF_F 0.0 VLV_DISTANCIA_13
    MOVEF_F 0.0 VLV_SENS_32
    MOVEF_F 0.0 VLV_REPS_32
    MOVEF_F 0.0 VLV_COLOR_32
    MOVEF_F 0.0 VLV_VELOCIDAD_14
    MOVEF_F 0.0 VLV_TIEMPO_14
    MOVEF_F 0.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 0.0 VLV_SENS_28
    MOVEF_F 0.0 VLV_VELOCIDAD1_29
    MOVEF_F 0.0 VLV_VELOCIDAD2_29
    MOVEF_F 0.0 VLV_SENS_29
    MOVEF_F 0.0 VLV_VELOCIDAD_22
    MOVEF_F 0.0 VLV_READER_22
    MOVEF_F 0.0 VLV_VELOCIDAD_15
    MOVEF_F 0.0 VLV_SENSOR_15
    MOVEF_F 0.0 VLV_COLOR_15
    MOVEF_F 0.0 VLV_VELOCIDAD1_30
    MOVEF_F 0.0 VLV_VELOCIDAD2_30
    MOVEF_F 0.0 VLV_DISTANCIA_30
    MOVEF_F 0.0 VLV_VELOCIDAD_16
    MOVEF_F 0.0 VLV_SENSOR_16
    MOVEF_F 0.0 VLV_VELOCIDAD_23
    MOVEF_F 0.0 VLV_READER_23
    MOVEF_F 0.0 VLV_VELOCIDAD_17
    MOVEF_F 0.0 VLV_SENSOR_17
    CALL ARRAYCREATE_FLOAT VLV_MARKING_6
    MOVEF_F 0.0 VLV_VELOCIDAD1_31
    MOVEF_F 0.0 VLV_VELOCIDAD2_31
    MOVEF_F 0.0 VLV_TIEMPO_31
    MOVEF_F 0.0 VLV_VELOCIDAD_18
    MOVEF_F 0.0 VLV_SENSOR_18
    MOVEF_F 0.0 VLV_VELOCIDAD_24
    MOVEF_F 0.0 VLV_ENCODER_24
    MOVEF_F 0.0 VLV_VELOCIDAD_25
    MOVEF_F 0.0 VLV_ENCODER_25
    MOVEF_F 0.0 VLV_COLOR_33
    MOVEF_F 0.0 VLV_NUMERO_2
    CALL ARRAYCREATE_FLOAT VLV_MARKING_4
    STRINGS DUPLICATE '' VLV_CODIGO_4
    MOVEF_F 0.0 VLV_GRADOS_5
    MOVEF_F 0.0 VGV_MARKINGGRANDE
    STRINGS DUPLICATE '' VLV_CODIGO_6
    MOVEF_F 0.0 VGV_DIAMETRO
    MOVEF_F 0.0 VGV_NEGRO1
    MOVEF_F 0.0 VGV_NEGRO3
    MOVEF_F 0.0 VGV_NEGRO4
    MOVEF_F 0.0 VGV_BLANCO1
    MOVEF_F 0.0 VGV_BLANCO3
    MOVEF_F 0.0 VGV_BLANCO4
    MOVEF_F 0.0 VGV_COLOR
    CALL ARRAYCREATE_FLOAT VGV_MARKING
    MOVEF_F 0.0 VGV_TIEMPO
    MOVEF_F 0.0 VLV_VOLTAJE_1
    MOVEF_F 0.0 VLV_AUX_4
    MOVEF_F 0.0 VLV_I_4
    MOVEF_F 0.0 VLV_SIGNO_5
    MOVEF_F 0.0 VLV_ENCDIFF_10
    MOVEF_F 0.0 VLV_SIGNO_10
    MOVEF_F 0.0 VLV_SAFETYTIMER_11
    MOVEF_F 0.0 VLV_CORRECCION_11
    MOVEF_F 0.0 VLV_ENC_11
    MOVEF_F 0.0 VLV_CORRECCION_12
    MOVEF_F 0.0 VLV_LECTURA_12
    MOVEF_F 0.0 VLV_SAFETYTIMER_13
    MOVEF_F 0.0 VLV_CORRECCION_13
    MOVEF_F 0.0 VLV_ENC_13
    MOVEF_F 0.0 VLV_CORRECCION_14
    MOVEF_F 0.0 VLV_CORRECCION_15
    MOVEF_F 0.0 VLV_MODE_15
    MOVEF_F 0.0 VLV_CORRECCION_16
    MOVEF_F 0.0 VLV_LECTURA_16
    MOVEF_F 0.0 VLV_CORRECCION_17
    MOVEF_F 0.0 VLV_LECTURA_17
    MOVEF_F 0.0 VLV_CORRECCION_18
    MOVEF_F 0.0 VLV_LECTURA_18
    MOVEF_F 0.0 VLV_LECTURA1_19
    MOVEF_F 0.0 VLV_LECTURA3_19
    MOVEF_F 0.0 VLV_LECTURA4_19
    MOVEF_F 0.0 VLV_KP_19
    MOVEF_F 0.0 VLV_KD_19
    MOVEF_F 0.0 VLV_ERROR_19
    MOVEF_F 0.0 VLV_OLDERROR_19
    MOVEF_F 0.0 VLV_U_19
    MOVEF_F 0.0 VLV_SENTIDO_19
    MOVEF_F 0.0 VLV_STARTC_19
    MOVEF_F 0.0 VLV_ENCODERC_19
    MOVEF_F 0.0 VLV_SAFETYTIMER_19
    MOVEF_F 0.0 VLV_LECTURA1_20
    MOVEF_F 0.0 VLV_LECTURA3_20
    MOVEF_F 0.0 VLV_LECTURA4_20
    MOVEF_F 0.0 VLV_KP_20
    MOVEF_F 0.0 VLV_KD_20
    MOVEF_F 0.0 VLV_ERROR_20
    MOVEF_F 0.0 VLV_OLDERROR_20
    MOVEF_F 0.0 VLV_U_20
    MOVEF_F 0.0 VLV_SENTIDO_20
    MOVEF_F 0.0 VLV_LECTURA1_21
    MOVEF_F 0.0 VLV_LECTURA3_21
    MOVEF_F 0.0 VLV_LECTURA4_21
    MOVEF_F 0.0 VLV_KP_21
    MOVEF_F 0.0 VLV_KD_21
    MOVEF_F 0.0 VLV_ERROR_21
    MOVEF_F 0.0 VLV_OLDERROR_21
    MOVEF_F 0.0 VLV_U_21
    MOVEF_F 0.0 VLV_SENTIDO_21
    MOVEF_F 0.0 VLV_STARTC_21
    MOVEF_F 0.0 VLV_ENCODERC_21
    MOVEF_F 0.0 VLV_SAFETYTIMER_21
    MOVEF_F 0.0 VLV_LECTURA1_22
    MOVEF_F 0.0 VLV_LECTURA3_22
    MOVEF_F 0.0 VLV_LECTURA4_22
    MOVEF_F 0.0 VLV_KP_22
    MOVEF_F 0.0 VLV_KD_22
    MOVEF_F 0.0 VLV_ERROR_22
    MOVEF_F 0.0 VLV_OLDERROR_22
    MOVEF_F 0.0 VLV_U_22
    MOVEF_F 0.0 VLV_SENTIDO_22
    MOVEF_F 0.0 VLV_LECTURA_22
    MOVEF_F 0.0 VLV_LECTURAIZQ_22
    MOVEF_F 0.0 VLV_LECTURADCH_22
    MOVEF_F 0.0 VLV_LECTURA1_23
    MOVEF_F 0.0 VLV_LECTURA3_23
    MOVEF_F 0.0 VLV_LECTURA4_23
    MOVEF_F 0.0 VLV_KP_23
    MOVEF_F 0.0 VLV_KD_23
    MOVEF_F 0.0 VLV_ERROR_23
    MOVEF_F 0.0 VLV_OLDERROR_23
    MOVEF_F 0.0 VLV_U_23
    MOVEF_F 0.0 VLV_SENTIDO_23
    MOVEF_F 0.0 VLV_LECTURA_23
    MOVEF_F 0.0 VLV_LECTURAIZQ_23
    MOVEF_F 0.0 VLV_LECTURADCH_23
    MOVEF_F 0.0 VLV_LECTURA1_24
    MOVEF_F 0.0 VLV_LECTURA3_24
    MOVEF_F 0.0 VLV_LECTURA4_24
    MOVEF_F 0.0 VLV_KP_24
    MOVEF_F 0.0 VLV_KD_24
    MOVEF_F 0.0 VLV_ERROR_24
    MOVEF_F 0.0 VLV_OLDERROR_24
    MOVEF_F 0.0 VLV_U_24
    MOVEF_F 0.0 VLV_SENTIDO_24
    MOVEF_F 0.0 VLV_STARTC_24
    MOVEF_F 0.0 VLV_ENCODERC_24
    MOVEF_F 0.0 VLV_SAFETYTIMER_24
    MOVEF_F 0.0 VLV_LECTURA1_25
    MOVEF_F 0.0 VLV_LECTURA3_25
    MOVEF_F 0.0 VLV_LECTURA4_25
    MOVEF_F 0.0 VLV_KP_25
    MOVEF_F 0.0 VLV_KD_25
    MOVEF_F 0.0 VLV_ERROR_25
    MOVEF_F 0.0 VLV_OLDERROR_25
    MOVEF_F 0.0 VLV_U_25
    MOVEF_F 0.0 VLV_SENTIDO_25
    MOVEF_F 0.0 VLV_STARTC_25
    MOVEF_F 0.0 VLV_ENCODERC_25
    MOVEF_F 0.0 VLV_SAFETYTIMER_25
    MOVEF_F 0.0 VLV_SIGNO_26
    MOVEF_F 0.0 VLV_VMIN_26
    MOVEF_F 0.0 VLV_VMAX_26
    MOVEF_F 0.0 VLV_ENCODER_26
    MOVEF_F 0.0 VLV_ENCODER_27
    MOVEF_F 0.0 VLV_LECTURA_28
    MOVEF_F 0.0 VLV_LECTURA_29
    MOVEF_F 0.0 VLV_ENCODER_30
    MOVEF_F 0.0 VLV_SENS_MODE_32
    MOVEF_F 0.0 VLV_RED_32
    MOVEF_F 0.0 VLV_YELLOW_32
    MOVEF_F 0.0 VLV_GREEN_32
    MOVEF_F 0.0 VLV_BLUE_32
    MOVEF_F 0.0 VLV_HUE_32
    MOVEF_F 0.0 VLV_SAT_32
    MOVEF_F 0.0 VLV_VALUE_32
    CALL ARRAYCREATE_FLOAT VLV_RNORMARRAY_32
    CALL ARRAYCREATE_FLOAT VLV_GNORMARRAY_32
    CALL ARRAYCREATE_FLOAT VLV_BNORMARRAY_32
    MOVEF_F 0.0 VLV_J_32
    CALL ARRAYCREATE_FLOAT VLV_RGB_32
    MOVEF_F 0.0 VLV_RRAW_32
    MOVEF_F 0.0 VLV_GRAW_32
    MOVEF_F 0.0 VLV_BRAW_32
    MOVEF_F 0.0 VLV_RNORM_32
    MOVEF_F 0.0 VLV_GNORM_32
    MOVEF_F 0.0 VLV_BNORM_32
    MOVEF_F 0.0 VLV_MAX_32
    MOVEF_F 0.0 VLV_MIN_32
    MOVEF_F 0.0 VLV_RGBGREY_32
    MOVE32_32 0 RUNCOUNTER_F_GRITARCOLOR_0
    MOVE32_32 0 RUNCOUNTER_F_SAFETYTIMERBRAZO_0
    ARRAY CREATE8 1 LOCKS
    CALL PROGRAM_MAIN -1
    PROGRAM_STOP -1
}
vmthread TF_GRITARCOLOR_0
{
    DATA32 tmp
  launch:
    CALL PROGRAM_F_GRITARCOLOR_0 0
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 -1 RUNCOUNTER_F_GRITARCOLOR_0 tmp
    JR_GT32 tmp 1 launch
}
vmthread TF_SAFETYTIMERBRAZO_0
{
    DATA32 tmp
  launch:
    CALL PROGRAM_F_SAFETYTIMERBRAZO_0 1
    CALL GETANDINC32 RUNCOUNTER_F_SAFETYTIMERBRAZO_0 -1 RUNCOUNTER_F_SAFETYTIMERBRAZO_0 tmp
    JR_GT32 tmp 1 launch
}
subcall PROGRAM_MAIN
subcall PROGRAM_F_GRITARCOLOR_0
subcall PROGRAM_F_SAFETYTIMERBRAZO_0
{
    IN_32 SUBPROGRAM
    DATA32 INDEX
    ARRAY8 STACKPOINTER 4
    DATAF F.0
    DATAF F.1
    DATAF F.2
    DATAF F.3
    DATAF F.4
    ARRAY32 RETURNSTACK2 128
    ARRAY32 RETURNSTACK 128
    DATAS S.0 252
    DATAS S.1 252
    DATAS S.2 252
    MOVE8_8 0 STACKPOINTER
    JR_NEQ32 SUBPROGRAM 0 dispatch1045
    WRITE32 ENDSUB_F_GRITARCOLOR_0:ENDTHREAD STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARCOLOR_0
  dispatch1045:
    JR_NEQ32 SUBPROGRAM 1 dispatch1046
    WRITE32 ENDSUB_F_SAFETYTIMERBRAZO_0:ENDTHREAD STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SAFETYTIMERBRAZO_0
  dispatch1046:
    MOVEF_F 0.0 VPR_GIRO_G1
    MOVEF_F 0.0 VPR_RGB_VALUENEGRO
    MOVEF_F 0.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 0.0 VPR_RGB_RWHITE
    MOVEF_F 0.0 VPR_RGB_GWHITE
    MOVEF_F 0.0 VPR_RGB_BWHITE
    MOVEF_F 0.0 VPR_RECTO_DIAMETRO
    MOVEF_F 0.0 VPR_GIRO_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F 0.0 VPR_SMART_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F 0.0 VPR_SMART_NEGRO1
    MOVEF_F 0.0 VPR_SMART_NEGRO3
    MOVEF_F 0.0 VPR_SMART_NEGRO4
    MOVEF_F 0.0 VPR_SMART_BLANCO1
    MOVEF_F 0.0 VPR_SMART_BLANCO3
    MOVEF_F 0.0 VPR_SMART_BLANCO4
    MOVEF_F 0.0 VPR_RECTO_NEGRO
    MOVEF_F 0.0 VPR_RECTO_BLANCO
    MOVEF_F 0.0 VPR_GIRO_NEGRO
    MOVEF_F 0.0 VPR_GIRO_BLANCO
    MOVEF_F 0.0 VLV_VELOCIDAD_9
    MOVEF_F 0.0 VLV_TIMER_9
    MOVEF_F 0.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    MOVEF_F 0.0 VLV_VELOCIDAD_11
    MOVEF_F 0.0 VLV_DISTANCIA_11
    MOVEF_F 0.0 VLV_VELOCIDAD_19
    MOVEF_F 0.0 VLV_ENCODER_19
    MOVEF_F 0.0 VLV_VELOCIDAD1_26
    MOVEF_F 0.0 VLV_VELOCIDAD2_26
    MOVEF_F 0.0 VLV_GRADOS_26
    MOVEF_F 0.0 VLV_VELOCIDAD1_27
    MOVEF_F 0.0 VLV_VELOCIDAD2_27
    MOVEF_F 0.0 VLV_DISTANCIA_27
    MOVEF_F 0.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_SENSOR_12
    MOVEF_F 0.0 VLV_VELOCIDAD_20
    MOVEF_F 0.0 VLV_VELOCIDAD_21
    MOVEF_F 0.0 VLV_ENCODER_21
    MOVEF_F 0.0 VLV_VELOCIDAD_13
    MOVEF_F 0.0 VLV_DISTANCIA_13
    MOVEF_F 0.0 VLV_SENS_32
    MOVEF_F 0.0 VLV_REPS_32
    MOVEF_F 0.0 VLV_COLOR_32
    MOVEF_F 0.0 VLV_VELOCIDAD_14
    MOVEF_F 0.0 VLV_TIEMPO_14
    MOVEF_F 0.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 0.0 VLV_SENS_28
    MOVEF_F 0.0 VLV_VELOCIDAD1_29
    MOVEF_F 0.0 VLV_VELOCIDAD2_29
    MOVEF_F 0.0 VLV_SENS_29
    MOVEF_F 0.0 VLV_VELOCIDAD_22
    MOVEF_F 0.0 VLV_READER_22
    MOVEF_F 0.0 VLV_VELOCIDAD_15
    MOVEF_F 0.0 VLV_SENSOR_15
    MOVEF_F 0.0 VLV_COLOR_15
    MOVEF_F 0.0 VLV_VELOCIDAD1_30
    MOVEF_F 0.0 VLV_VELOCIDAD2_30
    MOVEF_F 0.0 VLV_DISTANCIA_30
    MOVEF_F 0.0 VLV_VELOCIDAD_16
    MOVEF_F 0.0 VLV_SENSOR_16
    MOVEF_F 0.0 VLV_VELOCIDAD_23
    MOVEF_F 0.0 VLV_READER_23
    MOVEF_F 0.0 VLV_VELOCIDAD_17
    MOVEF_F 0.0 VLV_SENSOR_17
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_MARKING_6
    MOVEF_F 0.0 VLV_VELOCIDAD1_31
    MOVEF_F 0.0 VLV_VELOCIDAD2_31
    MOVEF_F 0.0 VLV_TIEMPO_31
    MOVEF_F 0.0 VLV_VELOCIDAD_18
    MOVEF_F 0.0 VLV_SENSOR_18
    MOVEF_F 0.0 VLV_VELOCIDAD_24
    MOVEF_F 0.0 VLV_ENCODER_24
    MOVEF_F 0.0 VLV_VELOCIDAD_25
    MOVEF_F 0.0 VLV_ENCODER_25
    MOVEF_F 0.0 VLV_COLOR_33
    MOVEF_F 0.0 VLV_NUMERO_2
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_MARKING_4
    STRINGS DUPLICATE '' VLV_CODIGO_4
    MOVEF_F 0.0 VLV_GRADOS_5
    MOVEF_F 0.0 VGV_MARKINGGRANDE
    STRINGS DUPLICATE '' VLV_CODIGO_6
    MOVEF_F 0.0 VGV_DIAMETRO
    MOVEF_F 0.0 VGV_NEGRO1
    MOVEF_F 0.0 VGV_NEGRO3
    MOVEF_F 0.0 VGV_NEGRO4
    MOVEF_F 0.0 VGV_BLANCO1
    MOVEF_F 0.0 VGV_BLANCO3
    MOVEF_F 0.0 VGV_BLANCO4
    MOVEF_F 0.0 VGV_COLOR
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VGV_MARKING
    MOVEF_F 0.0 VGV_TIEMPO
    WRITE32 ENDSUB_F_SETUP_0:CALLSUB3 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SETUP_0
CALLSUB3:
    TIMER_READ timeMC9
    WRITE32 ENDSUB_F_MAIN_0:CALLSUB5 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_MAIN_0
CALLSUB5:
    TIMER_READ timeMC9tmp
	SUB32 timeMC9tmp timeMC9 timeMC9tmp
	MOVE32_F timeMC9tmp VGV_TIEMPO
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    DATAF tmpf9
    DATA8 flag9
    DIVF VGV_TIEMPO 1000.0 tmpf9
    CP_EQF 0.0 1000.0 flag9
    SELECTF flag9 0.0 tmpf9 F.0

    STRINGS VALUE_FORMATTED F.0 '%g' 99 S.2
    CALL TEXT.APPEND 'Tiempo: ' S.2 S.1
    CALL TEXT.APPEND S.1 ' s' S.0
    CALL LCD.WRITE 5.0 5.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Good job'
    SOUND_READY
ENDTHREAD:
    RETURN
SUB_F_SETUP_0:
    DATA8 layer17
	DATA8 no17
	DATA8 mode817
	
	MOVEF_8 1.0 no17
	SUB8 no17 1 no17
	DIV8 no17 4 layer17
	MATH MOD8 no17 4 no17

	MOVEF_8 0.0 mode817
	
	INPUT_DEVICE READY_RAW layer17 no17 0 mode817 0
    DATA8 layer18
	DATA8 no18
	DATA8 mode818
	
	MOVEF_8 2.0 no18
	SUB8 no18 1 no18
	DIV8 no18 4 layer18
	MATH MOD8 no18 4 no18

	MOVEF_8 4.0 mode818
	
	INPUT_DEVICE READY_RAW layer18 no18 0 mode818 0
    DATA8 layer19
	DATA8 no19
	DATA8 mode819
	
	MOVEF_8 3.0 no19
	SUB8 no19 1 no19
	DIV8 no19 4 layer19
	MATH MOD8 no19 4 no19

	MOVEF_8 0.0 mode819
	
	INPUT_DEVICE READY_RAW layer19 no19 0 mode819 0
    DATA8 layer20
	DATA8 no20
	DATA8 mode820
	
	MOVEF_8 4.0 no20
	SUB8 no20 1 no20
	DIV8 no20 4 layer20
	MATH MOD8 no20 4 no20

	MOVEF_8 0.0 mode820
	
	INPUT_DEVICE READY_RAW layer20 no20 0 mode820 0
    MOVEF_F 6.24 VGV_DIAMETRO
    MOVEF_F 2.68055555555556 VPR_GIRO_G1
    MOVEF_F 10.0 VGV_NEGRO1
    MOVEF_F 9.0 VGV_NEGRO3
    MOVEF_F 8.0 VGV_NEGRO4
    MOVEF_F 65.0 VGV_BLANCO1
    MOVEF_F 59.0 VGV_BLANCO3
    MOVEF_F 55.0 VGV_BLANCO4
    MOVEF_F 4.0 VPR_RGB_VALUENEGRO
    MOVEF_F 32.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 57.0 VPR_RGB_RWHITE
    MOVEF_F 71.0 VPR_RGB_GWHITE
    MOVEF_F 73.0 VPR_RGB_BWHITE
    MOVEF_F VGV_DIAMETRO VPR_RECTO_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_GIRO_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_SMART_DIAMETRO
    MOVEF_F VGV_NEGRO1 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F VGV_NEGRO3 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F VGV_NEGRO4 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F VGV_BLANCO1 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F VGV_BLANCO3 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F VGV_BLANCO4 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F VGV_NEGRO1 VPR_SMART_NEGRO1
    MOVEF_F VGV_NEGRO3 VPR_SMART_NEGRO3
    MOVEF_F VGV_NEGRO4 VPR_SMART_NEGRO4
    MOVEF_F VGV_BLANCO1 VPR_SMART_BLANCO1
    MOVEF_F VGV_BLANCO3 VPR_SMART_BLANCO3
    MOVEF_F VGV_BLANCO4 VPR_SMART_BLANCO4
    ADDF VGV_NEGRO1 VGV_NEGRO3 F.1
    ADDF F.1 VGV_NEGRO4 F.0
    DATAF tmpf23
    DATA8 flag23
    DIVF F.0 3.0 tmpf23
    CP_EQF 0.0 3.0 flag23
    SELECTF flag23 0.0 tmpf23 VPR_RECTO_NEGRO

    ADDF VGV_BLANCO1 VGV_BLANCO3 F.1
    ADDF F.1 VGV_BLANCO4 F.0
    DATAF tmpf26
    DATA8 flag26
    DIVF F.0 3.0 tmpf26
    CP_EQF 0.0 3.0 flag26
    SELECTF flag26 0.0 tmpf26 VPR_RECTO_BLANCO

    ADDF VGV_NEGRO1 VGV_NEGRO3 F.1
    ADDF F.1 VGV_NEGRO4 F.0
    DATAF tmpf29
    DATA8 flag29
    DIVF F.0 3.0 tmpf29
    CP_EQF 0.0 3.0 flag29
    SELECTF flag29 0.0 tmpf29 VPR_GIRO_NEGRO

    ADDF VGV_BLANCO1 VGV_BLANCO3 F.1
    ADDF F.1 VGV_BLANCO4 F.0
    DATAF tmpf32
    DATA8 flag32
    DIVF F.0 3.0 tmpf32
    CP_EQF 0.0 3.0 flag32
    SELECTF flag32 0.0 tmpf32 VPR_GIRO_BLANCO

    MOVEF_F 0.0 VGV_COLOR
RETSUB_F_SETUP_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SETUP_0:
SUB_F_STARTARM_0:
    MOVEF_F 100.0 VLV_VELOCIDAD_9
    MOVEF_F 1000.0 VLV_TIMER_9
    WRITE32 ENDSUB_M_BRAZO_ATIMER_2:CALLSUB33 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_ATIMER_2
CALLSUB33:
    OUTPUT_CLR_COUNT 0 1
    DATA32 milliseconds35
	MOVEF_32 100.0 milliseconds35
	DATA32 timer35
	TIMER_WAIT milliseconds35 timer35
	TIMER_READY timer35
    MOVEF_F 35.0 VLV_VELOCIDAD_10
    MOVEF_F -200.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB36 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB36:
    OUTPUT_CLR_COUNT 0 1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Connect'
    SOUND_READY
RETSUB_F_STARTARM_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_STARTARM_0:
SUB_F_MAIN_0:
    WRITE32 ENDSUB_F_GRITARVOLTAJE_0:CALLSUB40 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARVOLTAJE_0
CALLSUB40:
    WRITE32 ENDSUB_F_STARTARM_0:CALLSUB41 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_STARTARM_0
CALLSUB41:
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/One'
    WRITE32 ENDSUB_F_S_0:CALLSUB43 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_S_0
CALLSUB43:
    DATA32 milliseconds44
	MOVEF_32 100.0 milliseconds44
	DATA32 timer44
	TIMER_WAIT milliseconds44 timer44
	TIMER_READY timer44
    MOVEF_F 35.0 VLV_VELOCIDAD_10
    MOVEF_F -260.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB45 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB45:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 5.0 VLV_DISTANCIA_11
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB46 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB46:
    MOVEF_F 50.0 VLV_VELOCIDAD_19
    MOVEF_F 23.0 VLV_ENCODER_19
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB47 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB47:
    MOVEF_F 10.0 VLV_VELOCIDAD1_26
    MOVEF_F 45.0 VLV_VELOCIDAD2_26
    MOVEF_F 70.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB48 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB48:
    MOVEF_F 24.0 VLV_VELOCIDAD1_26
    MOVEF_F 5.0 VLV_VELOCIDAD2_26
    MOVEF_F 70.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB49 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB49:
    MOVEF_F 50.0 VLV_VELOCIDAD1_27
    MOVEF_F 47.0 VLV_VELOCIDAD2_27
    MOVEF_F 44.0 VLV_DISTANCIA_27
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB50 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB50:
    MOVEF_F 50.0 VLV_VELOCIDAD_12
    MOVEF_F 4.0 VLV_SENSOR_12
    WRITE32 ENDSUB_M_RECTO_NEGRO1_2:CALLSUB51 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1_2
CALLSUB51:
    MOVEF_F 50.0 VLV_VELOCIDAD1_26
    MOVEF_F -17.0 VLV_VELOCIDAD2_26
    MOVEF_F 94.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB52 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB52:
    MOVEF_F 40.0 VLV_VELOCIDAD_20
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE14_1:CALLSUB53 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE14_1
CALLSUB53:
    MOVEF_F 70.0 VLV_VELOCIDAD1_26
    MOVEF_F -62.0 VLV_VELOCIDAD2_26
    MOVEF_F 185.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB54 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB54:
    MOVEF_F 30.0 VLV_VELOCIDAD_21
    MOVEF_F 40.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB55 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB55:
    MOVEF_F 30.0 VLV_VELOCIDAD_13
    MOVEF_F 9.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB56 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB56:
    MOVEF_F -30.0 VLV_VELOCIDAD1_26
    MOVEF_F 30.0 VLV_VELOCIDAD2_26
    MOVEF_F 90.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB57 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB57:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 13.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB58 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB58:
    MOVEF_F 20.0 VLV_VELOCIDAD1_26
    MOVEF_F -20.0 VLV_VELOCIDAD2_26
    MOVEF_F 90.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB59 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB59:
    DATA32 milliseconds60
	MOVEF_32 100.0 milliseconds60
	DATA32 timer60
	TIMER_WAIT milliseconds60 timer60
	TIMER_READY timer60
    MOVEF_F -40.0 VLV_VELOCIDAD_13
    MOVEF_F 2.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB61 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB61:
    MOVEF_F 2.0 VLV_SENS_32
    MOVEF_F 5.0 VLV_REPS_32
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB62 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB62:
    MOVEF_F VLV_COLOR_32 VGV_MARKINGGRANDE
    MOVEF_F VGV_MARKINGGRANDE VGV_COLOR
    DATA32 tmp63
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 1  RUNCOUNTER_F_GRITARCOLOR_0 tmp63
    JR_NEQ32 0 tmp63 alreadylaunched63
    OBJECT_START TF_GRITARCOLOR_0
  alreadylaunched63:
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VGV_MARKING
    MOVEF_F 40.0 VLV_VELOCIDAD1_26
    MOVEF_F 9.0 VLV_VELOCIDAD2_26
    MOVEF_F 45.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB65 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB65:
    MOVEF_F 9.0 VLV_VELOCIDAD1_26
    MOVEF_F 40.0 VLV_VELOCIDAD2_26
    MOVEF_F 36.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB66 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB66:
    MOVEF_F 42.0 VLV_VELOCIDAD1_27
    MOVEF_F 40.0 VLV_VELOCIDAD2_27
    MOVEF_F 15.0 VLV_DISTANCIA_27
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB67 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB67:
    MOVEF_F 50.0 VLV_VELOCIDAD_14
    MOVEF_F 250.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB68 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB68:
    MOVEF_F -30.0 VLV_VELOCIDAD_13
    MOVEF_F 7.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB69 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB69:
    MOVEF_F 2.0 VLV_SENS_32
    MOVEF_F 5.0 VLV_REPS_32
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB70 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB70:
    CALL ARRAYSTORE_FLOAT 1.0 VLV_COLOR_32 VGV_MARKING
    CALL ARRAYGET_FLOAT 1.0 VGV_COLOR VGV_MARKING
    DATA32 tmp73
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 1  RUNCOUNTER_F_GRITARCOLOR_0 tmp73
    JR_NEQ32 0 tmp73 alreadylaunched73
    OBJECT_START TF_GRITARCOLOR_0
  alreadylaunched73:
    MOVEF_F -30.0 VLV_VELOCIDAD_13
    MOVEF_F 5.8 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB74 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB74:
    MOVEF_F 30.0 VLV_VELOCIDAD1_26
    MOVEF_F -30.0 VLV_VELOCIDAD2_26
    MOVEF_F 96.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB75 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB75:
    MOVEF_F 30.0 VLV_VELOCIDAD_13
    MOVEF_F 8.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB76 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB76:
    MOVEF_F 30.0 VLV_VELOCIDAD1_26
    MOVEF_F -30.0 VLV_VELOCIDAD2_26
    MOVEF_F 86.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB77 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB77:
    MOVEF_F -20.0 VLV_VELOCIDAD_14
    MOVEF_F 500.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB78 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB78:
    MOVEF_F 2.0 VLV_SENS_32
    MOVEF_F 5.0 VLV_REPS_32
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB79 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB79:
    CALL ARRAYSTORE_FLOAT 2.0 VLV_COLOR_32 VGV_MARKING
    CALL ARRAYGET_FLOAT 2.0 VGV_COLOR VGV_MARKING
    DATA32 tmp82
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 1  RUNCOUNTER_F_GRITARCOLOR_0 tmp82
    JR_NEQ32 0 tmp82 alreadylaunched82
    OBJECT_START TF_GRITARCOLOR_0
  alreadylaunched82:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 8.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB83 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB83:
    MOVEF_F 2.0 VLV_SENS_32
    MOVEF_F 5.0 VLV_REPS_32
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB84 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB84:
    CALL ARRAYSTORE_FLOAT 3.0 VLV_COLOR_32 VGV_MARKING
    CALL ARRAYGET_FLOAT 3.0 VGV_COLOR VGV_MARKING
    DATA32 tmp87
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 1  RUNCOUNTER_F_GRITARCOLOR_0 tmp87
    JR_NEQ32 0 tmp87 alreadylaunched87
    OBJECT_START TF_GRITARCOLOR_0
  alreadylaunched87:
    CALL ARRAYGET_FLOAT 1.0 F.3 VGV_MARKING
    CALL ARRAYGET_FLOAT 2.0 F.4 VGV_MARKING
    ADDF F.3 F.4 F.2
    CALL ARRAYGET_FLOAT 3.0 F.3 VGV_MARKING
    ADDF F.2 F.3 F.1
    SUBF 14.0 F.1 F.0
    CALL ARRAYSTORE_FLOAT 0.0 F.0 VGV_MARKING
    MOVEF_F 50.0 VLV_VELOCIDAD1_28
    MOVEF_F 47.0 VLV_VELOCIDAD2_28
    MOVEF_F 1.0 VLV_SENS_28
    WRITE32 ENDSUB_M_GIRO_NEGRO1F_3:CALLSUB95 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_NEGRO1F_3
CALLSUB95:
    MOVEF_F 60.0 VLV_VELOCIDAD_20
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE14_1:CALLSUB96 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE14_1
CALLSUB96:
    MOVEF_F -25.0 VLV_VELOCIDAD1_26
    MOVEF_F 30.0 VLV_VELOCIDAD2_26
    MOVEF_F 92.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB97 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB97:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
    DATA32 milliseconds99
	MOVEF_32 100.0 milliseconds99
	DATA32 timer99
	TIMER_WAIT milliseconds99 timer99
	TIMER_READY timer99
    MOVEF_F 30.0 VLV_VELOCIDAD_19
    MOVEF_F 26.0 VLV_ENCODER_19
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB100 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB100:
    MOVEF_F 60.0 VLV_VELOCIDAD1_26
    MOVEF_F -40.0 VLV_VELOCIDAD2_26
    MOVEF_F 89.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB101 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB101:
    MOVEF_F -50.0 VLV_VELOCIDAD_11
    MOVEF_F 35.0 VLV_DISTANCIA_11
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB102 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB102:
    MOVEF_F -30.0 VLV_VELOCIDAD_13
    MOVEF_F 5.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB103 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB103:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F 20.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB104 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB104:
    DATA32 milliseconds105
	MOVEF_32 100.0 milliseconds105
	DATA32 timer105
	TIMER_WAIT milliseconds105 timer105
	TIMER_READY timer105
    MOVEF_F 30.0 VLV_VELOCIDAD_11
    MOVEF_F 15.0 VLV_DISTANCIA_11
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB106 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB106:
    MOVEF_F 10.0 VLV_VELOCIDAD_14
    MOVEF_F 200.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB107 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB107:
    MOVEF_F -20.0 VLV_VELOCIDAD_13
    MOVEF_F 3.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB108 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB108:
    MOVEF_F 20.0 VLV_VELOCIDAD_10
    MOVEF_F -310.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB109 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB109:
    MOVEF_F 30.0 VLV_VELOCIDAD1_27
    MOVEF_F 20.0 VLV_VELOCIDAD2_27
    MOVEF_F 13.0 VLV_DISTANCIA_27
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB110 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB110:
    MOVEF_F 20.0 VLV_VELOCIDAD1_27
    MOVEF_F 30.0 VLV_VELOCIDAD2_27
    MOVEF_F 11.0 VLV_DISTANCIA_27
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB111 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB111:
    MOVEF_F 20.0 VLV_VELOCIDAD_12
    MOVEF_F 1.0 VLV_SENSOR_12
    WRITE32 ENDSUB_M_RECTO_NEGRO1_2:CALLSUB112 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1_2
CALLSUB112:
    MOVEF_F -8.0 VLV_VELOCIDAD1_26
    MOVEF_F 20.0 VLV_VELOCIDAD2_26
    MOVEF_F 85.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB113 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB113:
    MOVEF_F -20.0 VLV_VELOCIDAD1_29
    MOVEF_F 20.0 VLV_VELOCIDAD2_29
    MOVEF_F 4.0 VLV_SENS_29
    WRITE32 ENDSUB_M_GIRO_NEGRO1_3:CALLSUB114 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_NEGRO1_3
CALLSUB114:
    MOVEF_F 20.0 VLV_VELOCIDAD1_26
    MOVEF_F 0.0 VLV_VELOCIDAD2_26
    MOVEF_F 10.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB115 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB115:
    MOVEF_F 15.0 VLV_VELOCIDAD_19
    MOVEF_F 10.0 VLV_ENCODER_19
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB116 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB116:
    MOVEF_F 15.0 VLV_VELOCIDAD_22
    MOVEF_F 3.0 VLV_READER_22
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB117 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB117:
    DATA32 milliseconds118
	MOVEF_32 350.0 milliseconds118
	DATA32 timer118
	TIMER_WAIT milliseconds118 timer118
	TIMER_READY timer118
    MOVEF_F 32.0 VLV_VELOCIDAD1_27
    MOVEF_F 26.0 VLV_VELOCIDAD2_27
    MOVEF_F 10.0 VLV_DISTANCIA_27
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB119 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB119:
    MOVEF_F 27.0 VLV_VELOCIDAD1_27
    MOVEF_F 32.0 VLV_VELOCIDAD2_27
    MOVEF_F 10.0 VLV_DISTANCIA_27
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB120 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB120:
    MOVEF_F 12.0 VLV_VELOCIDAD_13
    MOVEF_F 9.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB121 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB121:
    MOVEF_F -10.0 VLV_VELOCIDAD_13
    MOVEF_F 6.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB122 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB122:
    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB123 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB123:
    DATA32 milliseconds124
	MOVEF_32 100.0 milliseconds124
	DATA32 timer124
	TIMER_WAIT milliseconds124 timer124
	TIMER_READY timer124
    MOVEF_F -25.0 VLV_VELOCIDAD_13
    MOVEF_F 17.5 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB125 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB125:
    MOVEF_F -20.0 VLV_VELOCIDAD1_26
    MOVEF_F 20.0 VLV_VELOCIDAD2_26
    MOVEF_F 95.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB126 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB126:
    MOVEF_F 35.0 VLV_VELOCIDAD_19
    MOVEF_F 30.0 VLV_ENCODER_19
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB127 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB127:
    MOVEF_F 40.0 VLV_VELOCIDAD_13
    MOVEF_F 14.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB128 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB128:
    MOVEF_F 30.0 VLV_VELOCIDAD1_26
    MOVEF_F 0.0 VLV_VELOCIDAD2_26
    MOVEF_F 144.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB129 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB129:
    MOVEF_F 40.0 VLV_VELOCIDAD_15
    MOVEF_F 4.0 VLV_SENSOR_15
    MOVEF_F 4.0 VLV_COLOR_15
    WRITE32 ENDSUB_M_RECTO_COLOR1_3:CALLSUB130 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_COLOR1_3
CALLSUB130:
    MOVEF_F -20.0 VLV_VELOCIDAD_13
    MOVEF_F 14.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB131 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB131:
    MOVEF_F 35.0 VLV_VELOCIDAD_10
    MOVEF_F -330.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB132 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB132:
    MOVEF_F -25.0 VLV_VELOCIDAD_13
    MOVEF_F 6.5 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB133 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB133:
    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB134 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB134:
    DATA32 milliseconds135
	MOVEF_32 100.0 milliseconds135
	DATA32 timer135
	TIMER_WAIT milliseconds135 timer135
	TIMER_READY timer135
    MOVEF_F -40.0 VLV_VELOCIDAD1_26
    MOVEF_F 20.0 VLV_VELOCIDAD2_26
    MOVEF_F 80.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB136 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB136:
    MOVEF_F 40.0 VLV_VELOCIDAD_10
    MOVEF_F -330.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB137 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB137:
    MOVEF_F 40.0 VLV_VELOCIDAD_15
    MOVEF_F 1.0 VLV_SENSOR_15
    MOVEF_F 5.0 VLV_COLOR_15
    WRITE32 ENDSUB_M_RECTO_COLOR1_3:CALLSUB138 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_COLOR1_3
CALLSUB138:
    MOVEF_F -50.0 VLV_VELOCIDAD_13
    MOVEF_F 10.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB139 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB139:
    MOVEF_F 35.0 VLV_VELOCIDAD1_26
    MOVEF_F -35.0 VLV_VELOCIDAD2_26
    MOVEF_F 168.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB140 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB140:
    MOVEF_F 65.0 VLV_VELOCIDAD1_30
    MOVEF_F 70.0 VLV_VELOCIDAD2_30
    MOVEF_F 69.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODERF_3:CALLSUB141 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODERF_3
CALLSUB141:
    MOVEF_F 60.0 VLV_VELOCIDAD_14
    MOVEF_F 500.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB142 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB142:
    MOVEF_F -50.0 VLV_VELOCIDAD_11
    MOVEF_F 14.0 VLV_DISTANCIA_11
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB143 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB143:
    MOVEF_F -40.0 VLV_VELOCIDAD_16
    MOVEF_F 1.0 VLV_SENSOR_16
    WRITE32 ENDSUB_M_RECTO_BLANCO1F_2:CALLSUB144 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_BLANCO1F_2
CALLSUB144:
    MOVEF_F -30.0 VLV_VELOCIDAD_12
    MOVEF_F 1.0 VLV_SENSOR_12
    WRITE32 ENDSUB_M_RECTO_NEGRO1_2:CALLSUB145 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1_2
CALLSUB145:
    MOVEF_F 41.0 VLV_VELOCIDAD1_26
    MOVEF_F -20.0 VLV_VELOCIDAD2_26
    MOVEF_F 90.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB146 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB146:
    MOVEF_F 30.0 VLV_VELOCIDAD_21
    MOVEF_F 10.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB147 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB147:
    MOVEF_F 40.0 VLV_VELOCIDAD_23
    MOVEF_F 4.0 VLV_READER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:CALLSUB148 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2
CALLSUB148:
    MOVEF_F 80.0 VLV_VELOCIDAD_21
    MOVEF_F 80.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB149 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB149:
    MOVEF_F 30.0 VLV_VELOCIDAD_21
    MOVEF_F 15.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB150 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB150:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 20.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB151 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB151:
    MOVEF_F 15.0 VLV_VELOCIDAD1_26
    MOVEF_F -15.0 VLV_VELOCIDAD2_26
    MOVEF_F 92.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB152 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB152:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 8.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB153 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB153:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -740.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB154 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB154:
    JR_NEQF VGV_MARKINGGRANDE 5.0 else155_1
    CALL MOTOR.SCHEDULE 'D' -60.0 0.0 90.0 0.0 'true' 

	DATA8 layer156
	DATA8 nos156
	DATA8 busy156
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer156 nos156
	JR_EQ8 0 nos156 motornotbusy156
  motorwaiting156:
	OUTPUT_TEST layer156 nos156 busy156
	JR_EQ8 busy156 0 motornotbusy156
	SLEEP
	JR motorwaiting156
  motornotbusy156:
    JR endif155
  else155_1:
    SUBF VGV_MARKINGGRANDE 2.0 F.1
    MULF F.1 90.0 F.0
    CALL MOTOR.SCHEDULE 'D' 60.0 0.0 F.0 0.0 'true' 

	DATA8 layer159
	DATA8 nos159
	DATA8 busy159
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer159 nos159
	JR_EQ8 0 nos159 motornotbusy159
  motorwaiting159:
	OUTPUT_TEST layer159 nos159 busy159
	JR_EQ8 busy159 0 motornotbusy159
	SLEEP
	JR motorwaiting159
  motornotbusy159:
  else155_2:
  endif155:
    MOVEF_F 80.0 VLV_VELOCIDAD1_27
    MOVEF_F 78.0 VLV_VELOCIDAD2_27
    MOVEF_F 28.0 VLV_DISTANCIA_27
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB160 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB160:
    MOVEF_F 40.0 VLV_VELOCIDAD_17
    MOVEF_F 1.0 VLV_SENSOR_17
    WRITE32 ENDSUB_M_RECTO_BLANCO1_2:CALLSUB161 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_BLANCO1_2
CALLSUB161:
    MOVEF_F -20.0 VLV_VELOCIDAD_13
    MOVEF_F 1.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB162 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB162:
    CALL MOTOR.STOP 'BC' 'True'
    DATA32 milliseconds164
	MOVEF_32 100.0 milliseconds164
	DATA32 timer164
	TIMER_WAIT milliseconds164 timer164
	TIMER_READY timer164
    MOVEF_F 15.0 VLV_VELOCIDAD1_26
    MOVEF_F -15.0 VLV_VELOCIDAD2_26
    MOVEF_F 100.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB165 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB165:
    MOVEF_F 80.0 VLV_VELOCIDAD_13
    MOVEF_F 56.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB166 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB166:
    MOVEF_F 40.0 VLV_VELOCIDAD_10
    MOVEF_F -500.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB167 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB167:
    JR_EQF VGV_MARKINGGRANDE 5.0 or169
    JR_NEQF VGV_MARKINGGRANDE 3.0 else168_1
  or169:
    CALL MOTOR.SCHEDULE 'D' 60.0 0.0 -90.0 0.0 'true' 

	DATA8 layer170
	DATA8 nos170
	DATA8 busy170
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer170 nos170
	JR_EQ8 0 nos170 motornotbusy170
  motorwaiting170:
	OUTPUT_TEST layer170 nos170 busy170
	JR_EQ8 busy170 0 motornotbusy170
	SLEEP
	JR motorwaiting170
  motornotbusy170:
  else168_1:
  endif168:
    MOVEF_F 40.0 VLV_VELOCIDAD_10
    MOVEF_F -330.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB171 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB171:
    MOVEF_F -60.0 VLV_VELOCIDAD_13
    MOVEF_F 27.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB172 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB172:
    MOVEF_F 30.0 VLV_VELOCIDAD1_26
    MOVEF_F -30.0 VLV_VELOCIDAD2_26
    MOVEF_F 90.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB173 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB173:
    MOVEF_F -70.0 VLV_VELOCIDAD_13
    MOVEF_F 12.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB174 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB174:
    MOVEF_F -30.0 VLV_VELOCIDAD_14
    MOVEF_F 800.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB175 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB175:
    MOVEF_F 30.0 VLV_VELOCIDAD_13
    MOVEF_F 2.25 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB176 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB176:
    MOVEF_F 100.0 VLV_VELOCIDAD_9
    MOVEF_F 600.0 VLV_TIMER_9
    WRITE32 ENDSUB_M_BRAZO_ATIMER_2:CALLSUB177 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_ATIMER_2
CALLSUB177:
    MOVEF_F 100.0 VLV_VELOCIDAD_10
    MOVEF_F -300.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB178 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB178:
    MOVEF_F 35.0 VLV_VELOCIDAD1_26
    MOVEF_F -3.0 VLV_VELOCIDAD2_26
    MOVEF_F 93.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB179 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB179:
    MOVEF_F 20.0 VLV_VELOCIDAD_21
    MOVEF_F 5.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB180 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB180:
    MOVEF_F 15.0 VLV_VELOCIDAD_23
    MOVEF_F 4.0 VLV_READER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:CALLSUB181 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2
CALLSUB181:
    MOVEF_F 30.0 VLV_VELOCIDAD1_26
    MOVEF_F -8.0 VLV_VELOCIDAD2_26
    MOVEF_F 92.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB182 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB182:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 6.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB183 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB183:
    DATA32 milliseconds184
	MOVEF_32 100.0 milliseconds184
	DATA32 timer184
	TIMER_WAIT milliseconds184 timer184
	TIMER_READY timer184
    ARRAY COPY VGV_MARKING VLV_MARKING_6
    WRITE32 ENDSUB_F_ORDENARBLOQUES_1:CALLSUB185 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ORDENARBLOQUES_1
CALLSUB185:
    MOVEF_F 30.0 VLV_VELOCIDAD_13
    MOVEF_F 10.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB186 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB186:
    MOVEF_F 30.0 VLV_VELOCIDAD_22
    MOVEF_F 3.0 VLV_READER_22
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB187 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB187:
    MOVEF_F -14.0 VLV_VELOCIDAD1_26
    MOVEF_F 30.0 VLV_VELOCIDAD2_26
    MOVEF_F 95.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB188 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB188:
    MOVEF_F 35.0 VLV_VELOCIDAD_19
    MOVEF_F 20.0 VLV_ENCODER_19
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB189 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB189:
    MOVEF_F 35.0 VLV_VELOCIDAD1_27
    MOVEF_F 34.0 VLV_VELOCIDAD2_27
    MOVEF_F 45.0 VLV_DISTANCIA_27
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB190 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB190:
    MOVEF_F 10.0 VLV_VELOCIDAD1_26
    MOVEF_F -10.0 VLV_VELOCIDAD2_26
    MOVEF_F 105.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB191 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB191:
    MOVEF_F -63.0 VLV_VELOCIDAD1_31
    MOVEF_F -60.0 VLV_VELOCIDAD2_31
    MOVEF_F 800.0 VLV_TIEMPO_31
    WRITE32 ENDSUB_M_GIRO_TIEMPO_3:CALLSUB192 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_TIEMPO_3
CALLSUB192:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 3.5 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB193 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB193:
    MOVEF_F 20.0 VLV_VELOCIDAD1_26
    MOVEF_F -20.0 VLV_VELOCIDAD2_26
    MOVEF_F 105.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB194 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB194:
    MOVEF_F 35.0 VLV_VELOCIDAD_14
    MOVEF_F 700.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB195 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB195:
    MOVEF_F 50.0 VLV_VELOCIDAD_10
    MOVEF_F -330.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB196 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB196:
    MOVEF_F -15.0 VLV_VELOCIDAD_13
    MOVEF_F 9.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB197 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB197:
    MOVEF_F 15.0 VLV_VELOCIDAD_13
    MOVEF_F 8.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB198 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB198:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB199 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB199:
    MOVEF_F -15.0 VLV_VELOCIDAD_13
    MOVEF_F 9.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB200 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB200:
    MOVEF_F 15.0 VLV_VELOCIDAD_13
    MOVEF_F 17.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB201 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB201:
    MOVEF_F -15.0 VLV_VELOCIDAD_13
    MOVEF_F 5.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB202 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB202:
    MOVEF_F -15.0 VLV_VELOCIDAD1_26
    MOVEF_F 15.0 VLV_VELOCIDAD2_26
    MOVEF_F 88.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB203 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB203:
    MOVEF_F -30.0 VLV_VELOCIDAD_14
    MOVEF_F 500.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB204 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB204:
    MOVEF_F 15.0 VLV_VELOCIDAD_13
    MOVEF_F 12.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB205 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB205:
    MOVEF_F -10.0 VLV_VELOCIDAD1_26
    MOVEF_F 10.0 VLV_VELOCIDAD2_26
    MOVEF_F 9.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB206 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB206:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -160.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB207 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB207:
    MOVEF_F 10.0 VLV_VELOCIDAD_13
    MOVEF_F 6.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB208 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB208:
    MOVEF_F -10.0 VLV_VELOCIDAD_13
    MOVEF_F 5.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB209 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB209:
    MOVEF_F -30.0 VLV_VELOCIDAD1_26
    MOVEF_F 30.0 VLV_VELOCIDAD2_26
    MOVEF_F 10.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB210 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB210:
    MOVEF_F 40.0 VLV_VELOCIDAD_13
    MOVEF_F 6.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB211 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB211:
    MOVEF_F -40.0 VLV_VELOCIDAD_13
    MOVEF_F 7.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB212 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB212:
    MOVEF_F 50.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB213 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB213:
    MOVEF_F 10.0 VLV_VELOCIDAD1_26
    MOVEF_F -10.0 VLV_VELOCIDAD2_26
    MOVEF_F 39.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB214 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB214:
    MOVEF_F 100.0 VLV_VELOCIDAD_11
    MOVEF_F 65.0 VLV_DISTANCIA_11
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB215 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB215:
    MOVEF_F 40.0 VLV_VELOCIDAD_16
    MOVEF_F 1.0 VLV_SENSOR_16
    WRITE32 ENDSUB_M_RECTO_BLANCO1F_2:CALLSUB216 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_BLANCO1F_2
CALLSUB216:
    MOVEF_F 20.0 VLV_VELOCIDAD_18
    MOVEF_F 1.0 VLV_SENSOR_18
    WRITE32 ENDSUB_M_RECTO_NEGRO1F_2:CALLSUB217 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1F_2
CALLSUB217:
    MOVEF_F -15.0 VLV_VELOCIDAD1_26
    MOVEF_F 30.0 VLV_VELOCIDAD2_26
    MOVEF_F 93.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB218 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB218:
    MOVEF_F 40.0 VLV_VELOCIDAD_24
    MOVEF_F 6.0 VLV_ENCODER_24
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB219 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB219:
    MOVEF_F 85.0 VLV_VELOCIDAD_24
    MOVEF_F 74.0 VLV_ENCODER_24
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB220 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB220:
    MOVEF_F 40.0 VLV_VELOCIDAD_22
    MOVEF_F 3.0 VLV_READER_22
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB221 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB221:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 2.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB222 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB222:
    MOVEF_F -16.0 VLV_VELOCIDAD1_26
    MOVEF_F 30.0 VLV_VELOCIDAD2_26
    MOVEF_F 93.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB223 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB223:
    MOVEF_F 50.0 VLV_VELOCIDAD_25
    MOVEF_F 40.0 VLV_ENCODER_25
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31_2:CALLSUB224 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31_2
CALLSUB224:
    MOVEF_F 52.0 VLV_VELOCIDAD1_27
    MOVEF_F 50.0 VLV_VELOCIDAD2_27
    MOVEF_F 30.0 VLV_DISTANCIA_27
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB225 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB225:
    MOVEF_F 40.0 VLV_VELOCIDAD_14
    MOVEF_F 700.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB226 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB226:
    MOVEF_F 8.0 VLV_VELOCIDAD1_26
    MOVEF_F -32.0 VLV_VELOCIDAD2_26
    MOVEF_F 100.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB227 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB227:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -300.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB228 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB228:
    MOVEF_F 30.0 VLV_VELOCIDAD_13
    MOVEF_F 17.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB229 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB229:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB230 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB230:
    MOVEF_F -30.0 VLV_VELOCIDAD_13
    MOVEF_F 13.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB231 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB231:
RETSUB_F_MAIN_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_MAIN_0:
SUB_F_SAFETYTIMERBRAZO_0:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -750.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB232 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB232:
RETSUB_F_SAFETYTIMERBRAZO_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SAFETYTIMERBRAZO_0:
SUB_F_GRITARCOLOR_0:
    MOVEF_F VGV_COLOR VLV_COLOR_33
    WRITE32 ENDSUB_M_RGB_GRITAR_1:CALLSUB233 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_GRITAR_1
CALLSUB233:
RETSUB_F_GRITARCOLOR_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARCOLOR_0:
SUB_F_GRITARVOLTAJE_0:
    CALL EV3.BATTERYVOLTAGE VLV_VOLTAJE_1
    MATH FLOOR VLV_VOLTAJE_1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB236 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB236:
    MULF VLV_VOLTAJE_1 10.0 F.1
    MATH FLOOR F.1 F.0
    MATH FLOOR VLV_VOLTAJE_1 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB242 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB242:
    MULF VLV_VOLTAJE_1 100.0 F.1
    MATH FLOOR F.1 F.0
    MULF VLV_VOLTAJE_1 10.0 F.3
    MATH FLOOR F.3 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB249 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB249:
RETSUB_F_GRITARVOLTAJE_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARVOLTAJE_0:
SUB_F_GRITARNUMERO_1:
    JR_NEQF VLV_NUMERO_2 0.0 else250_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/ZERO'
    JR endif250
  else250_1:
    JR_NEQF VLV_NUMERO_2 1.0 else250_2
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/One'
    JR endif250
  else250_2:
    JR_NEQF VLV_NUMERO_2 2.0 else250_3
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Two'
    JR endif250
  else250_3:
    JR_NEQF VLV_NUMERO_2 3.0 else250_4
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Three'
    JR endif250
  else250_4:
    JR_NEQF VLV_NUMERO_2 4.0 else250_5
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Four'
    JR endif250
  else250_5:
    JR_NEQF VLV_NUMERO_2 5.0 else250_6
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Five'
    JR endif250
  else250_6:
    JR_NEQF VLV_NUMERO_2 6.0 else250_7
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Six'
    JR endif250
  else250_7:
    JR_NEQF VLV_NUMERO_2 7.0 else250_8
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Seven'
    JR endif250
  else250_8:
    JR_NEQF VLV_NUMERO_2 8.0 else250_9
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Eight'
    JR endif250
  else250_9:
    JR_NEQF VLV_NUMERO_2 9.0 else250_10
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Nine'
    JR endif250
  else250_10:
    JR_NEQF VLV_NUMERO_2 10.0 else250_11
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Ten'
  else250_11:
  endif250:
    SOUND_READY
RETSUB_F_GRITARNUMERO_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARNUMERO_1:
SUB_F_BAJARCUADRO_0:
    DATA32 tmp263
    CALL GETANDINC32 RUNCOUNTER_F_SAFETYTIMERBRAZO_0 1  RUNCOUNTER_F_SAFETYTIMERBRAZO_0 tmp263
    JR_NEQ32 0 tmp263 alreadylaunched263
    OBJECT_START TF_SAFETYTIMERBRAZO_0
  alreadylaunched263:
    DATA32 milliseconds264
	MOVEF_32 1500.0 milliseconds264
	DATA32 timer264
	TIMER_WAIT milliseconds264 timer264
	TIMER_READY timer264
    OUTPUT_POWER 0 1 0
	OUTPUT_STOP 0 1 0
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -750.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB266 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB266:
RETSUB_F_BAJARCUADRO_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_BAJARCUADRO_0:
SUB_F_CODIGO_2:
    STRINGS DUPLICATE '' VLV_CODIGO_4
    CALL ARRAYGET_FLOAT 2.0 VLV_AUX_4 VLV_MARKING_4
    CALL ARRAYGET_FLOAT 3.0 F.0 VLV_MARKING_4
    CALL ARRAYSTORE_FLOAT 2.0 F.0 VLV_MARKING_4
    CALL ARRAYSTORE_FLOAT 3.0 VLV_AUX_4 VLV_MARKING_4
    MOVEF_F 0.0 VLV_I_4
  for271:
    JR_GTF VLV_I_4 4.0 endfor271
  forbody271:
    CALL ARRAYGET_FLOAT VLV_I_4 F.0 VLV_MARKING_4
    JR_NEQF F.0 2.0 else272_1
    CALL TEXT.APPEND VLV_CODIGO_4 'Z' VLV_CODIGO_4
    JR endif272
  else272_1:
    CALL ARRAYGET_FLOAT VLV_I_4 F.0 VLV_MARKING_4
    JR_NEQF F.0 3.0 else272_2
    CALL TEXT.APPEND VLV_CODIGO_4 'V' VLV_CODIGO_4
    JR endif272
  else272_2:
    CALL ARRAYGET_FLOAT VLV_I_4 F.0 VLV_MARKING_4
    JR_NEQF F.0 4.0 else272_3
    CALL TEXT.APPEND VLV_CODIGO_4 'A' VLV_CODIGO_4
    JR endif272
  else272_3:
    CALL ARRAYGET_FLOAT VLV_I_4 F.0 VLV_MARKING_4
    JR_NEQF F.0 5.0 else272_4
    CALL TEXT.APPEND VLV_CODIGO_4 'R' VLV_CODIGO_4
  else272_4:
  endif272:
    ADDF VLV_I_4 1.0 VLV_I_4
    JR_LTEQF VLV_I_4 4.0 forbody271
  endfor271:
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    CALL TEXT.APPEND 'Codigo: ' VLV_CODIGO_4 S.0
    CALL LCD.WRITE 5.0 5.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
RETSUB_F_CODIGO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_CODIGO_2:
SUB_F_ROTAR_1:
    MATH ABS VLV_GRADOS_5 F.0
    DATAF tmpf288
    DATA8 flag288
    DIVF VLV_GRADOS_5 F.0 tmpf288
    CP_EQF 0.0 F.0 flag288
    SELECTF flag288 0.0 tmpf288 VLV_SIGNO_5

    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB289 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB289:
    DATA32 milliseconds290
	MOVEF_32 100.0 milliseconds290
	DATA32 timer290
	TIMER_WAIT milliseconds290 timer290
	TIMER_READY timer290
    MULF 34.0 VLV_SIGNO_5 F.0
    MATH ABS VLV_GRADOS_5 F.2
    SUBF F.2 8.0 F.1
    CALL MOTOR.SCHEDULE 'D' F.0 0.0 F.1 0.0 'True' 

	DATA8 layer294
	DATA8 nos294
	DATA8 busy294
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer294 nos294
	JR_EQ8 0 nos294 motornotbusy294
  motorwaiting294:
	OUTPUT_TEST layer294 nos294 busy294
	JR_EQ8 busy294 0 motornotbusy294
	SLEEP
	JR motorwaiting294
  motornotbusy294:
    DATA32 milliseconds295
	MOVEF_32 200.0 milliseconds295
	DATA32 timer295
	TIMER_WAIT milliseconds295 timer295
	TIMER_READY timer295
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -360.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB296 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB296:
RETSUB_F_ROTAR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_ROTAR_1:
SUB_F_ORDENARBLOQUES_1:
    ARRAY COPY VLV_MARKING_6 VLV_MARKING_4
    WRITE32 ENDSUB_F_CODIGO_2:CALLSUB297 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_CODIGO_2
CALLSUB297:
    STRINGS DUPLICATE VLV_CODIGO_4 VLV_CODIGO_6
    CALL EQ_STRING VLV_CODIGO_6 'VRZA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_1
    JR endif298
  else298_1:
    CALL EQ_STRING VLV_CODIGO_6 'VRAZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_2
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB301 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB301:
    JR endif298
  else298_2:
    CALL EQ_STRING VLV_CODIGO_6 'VZRA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_3
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB303 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB303:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB304 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB304:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB305 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB305:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB306 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB306:
    JR endif298
  else298_3:
    CALL EQ_STRING VLV_CODIGO_6 'VZAR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_4
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB308 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB308:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB309 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB309:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB310 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB310:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB311 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB311:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB312 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB312:
    JR endif298
  else298_4:
    CALL EQ_STRING VLV_CODIGO_6 'VARZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_5
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB314 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB314:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB315 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB315:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB316 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB316:
    JR endif298
  else298_5:
    CALL EQ_STRING VLV_CODIGO_6 'VAZR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_6
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB318 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB318:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB319 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB319:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB320 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB320:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB321 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB321:
    JR endif298
  else298_6:
    CALL EQ_STRING VLV_CODIGO_6 'RVZA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_7
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB323 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB323:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB324 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB324:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB325 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB325:
    JR endif298
  else298_7:
    CALL EQ_STRING VLV_CODIGO_6 'RVAZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_8
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB327 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB327:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB328 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB328:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB329 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB329:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB330 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB330:
    JR endif298
  else298_8:
    CALL EQ_STRING VLV_CODIGO_6 'RZVA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_9
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB332 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB332:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB333 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB333:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB334 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB334:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB335 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB335:
    JR endif298
  else298_9:
    CALL EQ_STRING VLV_CODIGO_6 'RZAV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_10
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB337 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB337:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB338 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB338:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB339 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB339:
    JR endif298
  else298_10:
    CALL EQ_STRING VLV_CODIGO_6 'RAVZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_11
    MOVEF_F 90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB341 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB341:
    JR endif298
  else298_11:
    CALL EQ_STRING VLV_CODIGO_6 'RAZV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_12
    MOVEF_F 90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB343 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB343:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB344 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB344:
    JR endif298
  else298_12:
    CALL EQ_STRING VLV_CODIGO_6 'ZVAR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_13
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB346 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB346:
    JR endif298
  else298_13:
    CALL EQ_STRING VLV_CODIGO_6 'ZVRA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_14
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB348 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB348:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB349 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB349:
    JR endif298
  else298_14:
    CALL EQ_STRING VLV_CODIGO_6 'ZRVA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_15
    MOVEF_F 90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB351 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB351:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB352 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB352:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB353 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB353:
    JR endif298
  else298_15:
    CALL EQ_STRING VLV_CODIGO_6 'ZRAV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_16
    MOVEF_F 90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB355 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB355:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB356 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB356:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB357 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB357:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB358 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB358:
    JR endif298
  else298_16:
    CALL EQ_STRING VLV_CODIGO_6 'ZAVR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_17
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB360 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB360:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB361 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB361:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB362 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB362:
    JR endif298
  else298_17:
    CALL EQ_STRING VLV_CODIGO_6 'ZARV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_18
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB364 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB364:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB365 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB365:
    JR endif298
  else298_18:
    CALL EQ_STRING VLV_CODIGO_6 'AVRZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_19
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB367 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB367:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB368 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB368:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB369 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB369:
    JR endif298
  else298_19:
    CALL EQ_STRING VLV_CODIGO_6 'AVZR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_20
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB371 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB371:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB372 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB372:
    JR endif298
  else298_20:
    CALL EQ_STRING VLV_CODIGO_6 'ARVZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_21
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB374 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB374:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB375 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB375:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB376 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB376:
    JR endif298
  else298_21:
    CALL EQ_STRING VLV_CODIGO_6 'ARZV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_22
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB378 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB378:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB379 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB379:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB380 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB380:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB381 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB381:
    JR endif298
  else298_22:
    CALL EQ_STRING VLV_CODIGO_6 'AZVR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else298_23
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB383 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB383:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB384 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB384:
    JR endif298
  else298_23:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB385 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB385:
  else298_24:
  endif298:
    MOVEF_F -20.0 VLV_VELOCIDAD_13
    MOVEF_F 8.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB386 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB386:
    MOVEF_F 15.0 VLV_VELOCIDAD1_26
    MOVEF_F -15.0 VLV_VELOCIDAD2_26
    MOVEF_F 182.0 VLV_GRADOS_26
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB387 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB387:
    MOVEF_F -30.0 VLV_VELOCIDAD_13
    MOVEF_F 23.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB388 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB388:
    MOVEF_F 20.0 VLV_VELOCIDAD_10
    MOVEF_F 24.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB389 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB389:
RETSUB_F_ORDENARBLOQUES_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_ORDENARBLOQUES_1:
SUB_F_SWAP_0:
    MOVEF_F -15.0 VLV_VELOCIDAD_13
    MOVEF_F 6.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB390 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB390:
    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB391 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB391:
    MOVEF_F -15.0 VLV_VELOCIDAD_13
    MOVEF_F 2.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB392 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB392:
    CALL MOTOR.SCHEDULE 'D' 50.0 0.0 180.0 0.0 'True' 

	DATA8 layer393
	DATA8 nos393
	DATA8 busy393
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer393 nos393
	JR_EQ8 0 nos393 motornotbusy393
  motorwaiting393:
	OUTPUT_TEST layer393 nos393 busy393
	JR_EQ8 busy393 0 motornotbusy393
	SLEEP
	JR motorwaiting393
  motornotbusy393:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -360.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB394 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB394:
    MOVEF_F 15.0 VLV_VELOCIDAD_13
    MOVEF_F 15.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB395 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB395:
    MOVEF_F -15.0 VLV_VELOCIDAD_13
    MOVEF_F 5.5 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB396 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB396:
RETSUB_F_SWAP_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SWAP_0:
SUB_F_S_0:
    UI_BUTTON FLUSH
    UI_BUTTON WAIT_FOR_PRESS
RETSUB_F_S_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_S_0:
SUB_M_BRAZO_ATIMER_2:
    TIMER_READ timeMC1
  while400:
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_GTEQF F.0 VLV_TIMER_9 endwhile400
  whilebody400:
    MOVEF_8 VLV_VELOCIDAD_9 setSpeedA
	OUTPUT_SPEED 0 1 setSpeedA
	OUTPUT_START 0 1
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_LTF F.0 VLV_TIMER_9 whilebody400
  endwhile400:
    CALL MOTOR.STOP 'A' 'True'
RETSUB_M_BRAZO_ATIMER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_ATIMER_2:
SUB_M_BRAZO_AENCODER_2:
    CALL MOTOR.GETCOUNT 'A' F.0
    SUBF VLV_ENCODER_10 F.0 VLV_ENCDIFF_10
    MATH ABS VLV_ENCDIFF_10 F.0
    DATAF tmpf408
    DATA8 flag408
    DIVF VLV_ENCDIFF_10 F.0 tmpf408
    CP_EQF 0.0 F.0 flag408
    SELECTF flag408 0.0 tmpf408 VLV_SIGNO_10

    JR_EQF VLV_ENCDIFF_10 0.0 else409_1
    MULF VLV_VELOCIDAD_10 VLV_SIGNO_10 F.0
    MATH ABS VLV_ENCDIFF_10 F.1
    CALL MOTOR.SCHEDULE 'A' F.0 0.0 F.1 0.0 'True' 

	DATA8 layer412
	DATA8 nos412
	DATA8 busy412
	CALL MOTORDECODEPORTSDESCRIPTOR 'A' layer412 nos412
	JR_EQ8 0 nos412 motornotbusy412
  motorwaiting412:
	OUTPUT_TEST layer412 nos412 busy412
	JR_EQ8 busy412 0 motornotbusy412
	SLEEP
	JR motorwaiting412
  motornotbusy412:
  else409_1:
  endif409:
    CALL MOTOR.STOP 'A' 'True'
RETSUB_M_BRAZO_AENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_AENCODER_2:
SUB_M_RECTO_ENCODERF_2:
    DATAF tmpf414
    DATA8 flag414
    DIVF VLV_VELOCIDAD_11 10.0 tmpf414
    CP_EQF 0.0 10.0 flag414
    SELECTF flag414 0.0 tmpf414 F.2

    DATAF tmpf415
    DATA8 flag415
    DIVF 11286.0 F.2 tmpf415
    CP_EQF 0.0 F.2 flag415
    SELECTF flag415 0.0 tmpf415 F.1

    DATAF tmpf416
    DATA8 flag416
    DIVF VLV_DISTANCIA_11 100.0 tmpf416
    CP_EQF 0.0 100.0 flag416
    SELECTF flag416 0.0 tmpf416 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf418
    DATA8 flag418
    DIVF VPR_RECTO_DIAMETRO 6.24 tmpf418
    CP_EQF 0.0 6.24 flag418
    SELECTF flag418 0.0 tmpf418 F.1

    DATAF tmpf419
    DATA8 flag419
    DIVF F.0 F.1 tmpf419
    CP_EQF 0.0 F.1 flag419
    SELECTF flag419 0.0 tmpf419 VLV_SAFETYTIMER_11

    MATH ABS VLV_VELOCIDAD_11 F.1
    SUBF F.1 20.0 F.0
    MULF F.0 0.05 VLV_CORRECCION_11
    SUBF VLV_DISTANCIA_11 VLV_CORRECCION_11 F.2
    MULF F.2 360.0 F.1
    MOVEF_F 3.1415926535897932384 F.2
    DATAF tmpf426
    DATA8 flag426
    DIVF F.1 F.2 tmpf426
    CP_EQF 0.0 F.2 flag426
    SELECTF flag426 0.0 tmpf426 F.0

    DATAF tmpf427
    DATA8 flag427
    DIVF F.0 VPR_RECTO_DIAMETRO tmpf427
    CP_EQF 0.0 VPR_RECTO_DIAMETRO flag427
    SELECTF flag427 0.0 tmpf427 VLV_ENC_11

    OUTPUT_CLR_COUNT 0 2
    OUTPUT_CLR_COUNT 0 4
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds431
	MOVEF_32 100.0 milliseconds431
	DATA32 timer431
	TIMER_WAIT milliseconds431 timer431
	TIMER_READY timer431
    TIMER_READ timeMC4
  while433:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_11 endwhile433
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_11 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile433
  whilebody433:
    MATH NEGATE VLV_VELOCIDAD_11 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD_11
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_11 and440
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_11 2000.0 F.1
    JR_LTF F.0 F.1 whilebody433
  and440:
  endwhile433:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_11 2000.0 F.1
    JR_LTEQF F.0 F.1 else445_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else445_1:
  endif445:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_ENCODERF_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ENCODERF_2:
SUB_M_RECTO_NEGRO1_2:
    MOVEF_F 0.0 VLV_CORRECCION_12
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_12
  while452:
    JR_LTEQF VLV_LECTURA_12 15.0 endwhile452
  whilebody452:
    CALL SENSOR.READPERCENT VLV_SENSOR_12 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf455
    DATA8 flag455
    DIVF F.1 VPR_RECTO_BLANCO tmpf455
    CP_EQF 0.0 VPR_RECTO_BLANCO flag455
    SELECTF flag455 0.0 tmpf455 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_12
    MATH NEGATE VLV_VELOCIDAD_12 F.1
    ADDF F.1 VLV_CORRECCION_12 F.0
    ADDF VLV_VELOCIDAD_12 VLV_CORRECCION_12 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_GTF VLV_LECTURA_12 15.0 whilebody452
  endwhile452:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_NEGRO1_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_NEGRO1_2:
SUB_M_RECTO_ENCODER_2:
    DATAF tmpf463
    DATA8 flag463
    DIVF VLV_VELOCIDAD_13 10.0 tmpf463
    CP_EQF 0.0 10.0 flag463
    SELECTF flag463 0.0 tmpf463 F.2

    DATAF tmpf464
    DATA8 flag464
    DIVF 11286.0 F.2 tmpf464
    CP_EQF 0.0 F.2 flag464
    SELECTF flag464 0.0 tmpf464 F.1

    DATAF tmpf465
    DATA8 flag465
    DIVF VLV_DISTANCIA_13 100.0 tmpf465
    CP_EQF 0.0 100.0 flag465
    SELECTF flag465 0.0 tmpf465 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf467
    DATA8 flag467
    DIVF VPR_RECTO_DIAMETRO 6.24 tmpf467
    CP_EQF 0.0 6.24 flag467
    SELECTF flag467 0.0 tmpf467 F.1

    DATAF tmpf468
    DATA8 flag468
    DIVF F.0 F.1 tmpf468
    CP_EQF 0.0 F.1 flag468
    SELECTF flag468 0.0 tmpf468 VLV_SAFETYTIMER_13

    MATH ABS VLV_VELOCIDAD_13 F.1
    SUBF F.1 20.0 F.0
    MULF F.0 0.05 VLV_CORRECCION_13
    SUBF VLV_DISTANCIA_13 VLV_CORRECCION_13 F.2
    MULF F.2 360.0 F.1
    MOVEF_F 3.1415926535897932384 F.2
    DATAF tmpf475
    DATA8 flag475
    DIVF F.1 F.2 tmpf475
    CP_EQF 0.0 F.2 flag475
    SELECTF flag475 0.0 tmpf475 F.0

    DATAF tmpf476
    DATA8 flag476
    DIVF F.0 VPR_RECTO_DIAMETRO tmpf476
    CP_EQF 0.0 VPR_RECTO_DIAMETRO flag476
    SELECTF flag476 0.0 tmpf476 VLV_ENC_13

    OUTPUT_CLR_COUNT 0 2
    OUTPUT_CLR_COUNT 0 4
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds480
	MOVEF_32 100.0 milliseconds480
	DATA32 timer480
	TIMER_WAIT milliseconds480 timer480
	TIMER_READY timer480
    TIMER_READ timeMC4
  while482:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_13 endwhile482
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_13 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile482
  whilebody482:
    MATH NEGATE VLV_VELOCIDAD_13 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD_13
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_13 and489
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_13 2000.0 F.1
    JR_LTF F.0 F.1 whilebody482
  and489:
  endwhile482:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_13 2000.0 F.1
    JR_LTEQF F.0 F.1 else494_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else494_1:
  endif494:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_ENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ENCODER_2:
SUB_M_RECTO_TIEMPO_2:
    MOVEF_F 0.0 VLV_CORRECCION_14
    TIMER_READ timeMC3
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
  while502:
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_TIEMPO_14 endwhile502
  whilebody502:
    MATH NEGATE VLV_VELOCIDAD_14 F.1
    ADDF F.1 VLV_CORRECCION_14 F.0
    ADDF VLV_VELOCIDAD_14 VLV_CORRECCION_14 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_TIEMPO_14 whilebody502
  endwhile502:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_TIEMPO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_TIEMPO_2:
SUB_M_RECTO_COLOR1_3:
    MOVEF_F 0.0 VLV_CORRECCION_15
    CALL SENSOR.GETMODE VLV_SENSOR_15 VLV_MODE_15
    DATA8 layer511
	DATA8 no511
	DATA8 mode8511
	
	MOVEF_8 VLV_SENSOR_15 no511
	SUB8 no511 1 no511
	DIV8 no511 4 layer511
	MATH MOD8 no511 4 no511

	MOVEF_8 2.0 mode8511
	
	INPUT_DEVICE READY_RAW layer511 no511 0 mode8511 0
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
  while513:
    CALL SENSOR.READRAWVALUE VLV_SENSOR_15 0.0 F.0
    JR_EQF F.0 VLV_COLOR_15 endwhile513
  whilebody513:
    MATH NEGATE VLV_VELOCIDAD_15 F.1
    ADDF F.1 VLV_CORRECCION_15 F.0
    ADDF VLV_VELOCIDAD_15 VLV_CORRECCION_15 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    CALL SENSOR.READRAWVALUE VLV_SENSOR_15 0.0 F.0
    JR_NEQF F.0 VLV_COLOR_15 whilebody513
  endwhile513:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
    DATA8 layer521
	DATA8 no521
	DATA8 mode8521
	
	MOVEF_8 VLV_SENSOR_15 no521
	SUB8 no521 1 no521
	DIV8 no521 4 layer521
	MATH MOD8 no521 4 no521

	MOVEF_8 VLV_MODE_15 mode8521
	
	INPUT_DEVICE READY_RAW layer521 no521 0 mode8521 0
RETSUB_M_RECTO_COLOR1_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_COLOR1_3:
SUB_M_RECTO_BLANCO1F_2:
    MOVEF_F 0.0 VLV_CORRECCION_16
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_16
  while523:
    JR_GTEQF VLV_LECTURA_16 60.0 endwhile523
  whilebody523:
    CALL SENSOR.READPERCENT VLV_SENSOR_16 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf526
    DATA8 flag526
    DIVF F.1 VPR_RECTO_BLANCO tmpf526
    CP_EQF 0.0 VPR_RECTO_BLANCO flag526
    SELECTF flag526 0.0 tmpf526 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_16
    MATH NEGATE VLV_VELOCIDAD_16 F.1
    ADDF F.1 VLV_CORRECCION_16 F.0
    ADDF VLV_VELOCIDAD_16 VLV_CORRECCION_16 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_LTF VLV_LECTURA_16 60.0 whilebody523
  endwhile523:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_BLANCO1F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_BLANCO1F_2:
SUB_M_RECTO_BLANCO1_2:
    MOVEF_F 0.0 VLV_CORRECCION_17
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_17
  while535:
    JR_GTEQF VLV_LECTURA_17 60.0 endwhile535
  whilebody535:
    CALL SENSOR.READPERCENT VLV_SENSOR_17 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf538
    DATA8 flag538
    DIVF F.1 VPR_RECTO_BLANCO tmpf538
    CP_EQF 0.0 VPR_RECTO_BLANCO flag538
    SELECTF flag538 0.0 tmpf538 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_17
    MATH NEGATE VLV_VELOCIDAD_17 F.1
    ADDF F.1 VLV_CORRECCION_17 F.0
    ADDF VLV_VELOCIDAD_17 VLV_CORRECCION_17 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_LTF VLV_LECTURA_17 60.0 whilebody535
  endwhile535:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_BLANCO1_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_BLANCO1_2:
SUB_M_RECTO_NEGRO1F_2:
    MOVEF_F 0.0 VLV_CORRECCION_18
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_18
  while547:
    JR_LTEQF VLV_LECTURA_18 15.0 endwhile547
  whilebody547:
    CALL SENSOR.READPERCENT VLV_SENSOR_18 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf550
    DATA8 flag550
    DIVF F.1 VPR_RECTO_BLANCO tmpf550
    CP_EQF 0.0 VPR_RECTO_BLANCO flag550
    SELECTF flag550 0.0 tmpf550 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_18
    MATH NEGATE VLV_VELOCIDAD_18 F.1
    ADDF F.1 VLV_CORRECCION_18 F.0
    ADDF VLV_VELOCIDAD_18 VLV_CORRECCION_18 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_GTF VLV_LECTURA_18 15.0 whilebody547
  endwhile547:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_NEGRO1F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_NEGRO1F_2:
SUB_M_SIGUELINEAS_ENCODER14_2:
    MULF VLV_VELOCIDAD_19 1.0 VLV_VELOCIDAD_19
    MOVEF_F 50.0 VLV_LECTURA1_19
    MOVEF_F 50.0 VLV_LECTURA3_19
    MOVEF_F 50.0 VLV_LECTURA4_19
    MATH POW VLV_VELOCIDAD_19 0.833333333333333 F.0
    DATAF tmpf560
    DATA8 flag560
    DIVF F.0 440.0 tmpf560
    CP_EQF 0.0 440.0 flag560
    SELECTF flag560 0.0 tmpf560 VLV_KP_19

    MULF VLV_KP_19 70.0 VLV_KD_19
    MOVEF_F 0.0 VLV_ERROR_19
    MOVEF_F 0.0 VLV_OLDERROR_19
    MOVEF_F 0.0 VLV_U_19
    MATH ABS VLV_VELOCIDAD_19 F.0
    DATAF tmpf563
    DATA8 flag563
    DIVF VLV_VELOCIDAD_19 F.0 tmpf563
    CP_EQF 0.0 F.0 flag563
    SELECTF flag563 0.0 tmpf563 VLV_SENTIDO_19

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf566
    DATA8 flag566
    DIVF VLV_ENCODER_19 F.1 tmpf566
    CP_EQF 0.0 F.1 flag566
    SELECTF flag566 0.0 tmpf566 F.0

    MULF F.0 360.0 VLV_ENCODER_19
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_19
    MOVEF_F 0.0 VLV_ENCODERC_19
    DATAF tmpf569
    DATA8 flag569
    DIVF VLV_VELOCIDAD_19 10.0 tmpf569
    CP_EQF 0.0 10.0 flag569
    SELECTF flag569 0.0 tmpf569 F.2

    DATAF tmpf570
    DATA8 flag570
    DIVF 11286.0 F.2 tmpf570
    CP_EQF 0.0 F.2 flag570
    SELECTF flag570 0.0 tmpf570 F.1

    DATAF tmpf571
    DATA8 flag571
    DIVF VLV_ENCODER_19 100.0 tmpf571
    CP_EQF 0.0 100.0 flag571
    SELECTF flag571 0.0 tmpf571 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf573
    DATA8 flag573
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf573
    CP_EQF 0.0 6.24 flag573
    SELECTF flag573 0.0 tmpf573 F.1

    DATAF tmpf574
    DATA8 flag574
    DIVF F.0 F.1 tmpf574
    CP_EQF 0.0 F.1 flag574
    SELECTF flag574 0.0 tmpf574 VLV_SAFETYTIMER_19

    TIMER_READ timeMC4
  while576:
    MATH ABS VLV_ENCODERC_19 F.0
    JR_GTEQF F.0 VLV_ENCODER_19 endwhile576
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_19 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile576
  whilebody576:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_19 VLV_ENCODERC_19
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf584
    DATA8 flag584
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf584
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag584
    SELECTF flag584 0.0 tmpf584 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_19
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf589
    DATA8 flag589
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf589
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag589
    SELECTF flag589 0.0 tmpf589 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_19
    SUBF VLV_LECTURA1_19 VLV_LECTURA4_19 F.1
    MULF F.1 VLV_SENTIDO_19 F.0
    MULF F.0 1.0 VLV_ERROR_19
    MULF VLV_ERROR_19 VLV_KP_19 F.0
    SUBF VLV_ERROR_19 VLV_OLDERROR_19 F.2
    MULF F.2 VLV_KD_19 F.1
    ADDF F.0 F.1 VLV_U_19
    ADDF VLV_VELOCIDAD_19 VLV_U_19 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_19 VLV_U_19 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_19 VLV_OLDERROR_19
    MATH ABS VLV_ENCODERC_19 F.0
    JR_GTEQF F.0 VLV_ENCODER_19 and603
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_19 2000.0 F.1
    JR_LTF F.0 F.1 whilebody576
  and603:
  endwhile576:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_19 2000.0 F.1
    JR_LTEQF F.0 F.1 else607_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else607_1:
  endif607:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_ENCODER14_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER14_2:
SUB_M_SIGUELINEAS_CRUCE14_1:
    MULF VLV_VELOCIDAD_20 1.0 VLV_VELOCIDAD_20
    MOVEF_F 50.0 VLV_LECTURA1_20
    MOVEF_F 50.0 VLV_LECTURA3_20
    MOVEF_F 50.0 VLV_LECTURA4_20
    MATH POW VLV_VELOCIDAD_20 0.833333333333333 F.0
    DATAF tmpf615
    DATA8 flag615
    DIVF F.0 440.0 tmpf615
    CP_EQF 0.0 440.0 flag615
    SELECTF flag615 0.0 tmpf615 VLV_KP_20

    MULF VLV_KP_20 70.0 VLV_KD_20
    MOVEF_F 0.0 VLV_ERROR_20
    MOVEF_F 0.0 VLV_OLDERROR_20
    MOVEF_F 0.0 VLV_U_20
    MATH ABS VLV_VELOCIDAD_20 F.0
    DATAF tmpf618
    DATA8 flag618
    DIVF VLV_VELOCIDAD_20 F.0 tmpf618
    CP_EQF 0.0 F.0 flag618
    SELECTF flag618 0.0 tmpf618 VLV_SENTIDO_20

  while619:
    JR_GTF VLV_LECTURA1_20 10.0 or620
    JR_LTEQF VLV_LECTURA4_20 10.0 endwhile619
  or620:
  whilebody619:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf623
    DATA8 flag623
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf623
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag623
    SELECTF flag623 0.0 tmpf623 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_20
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf628
    DATA8 flag628
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf628
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag628
    SELECTF flag628 0.0 tmpf628 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_20
    SUBF VLV_LECTURA1_20 VLV_LECTURA4_20 F.1
    MULF F.1 VLV_SENTIDO_20 F.0
    MULF F.0 1.0 VLV_ERROR_20
    MULF VLV_ERROR_20 VLV_KP_20 F.0
    SUBF VLV_ERROR_20 VLV_OLDERROR_20 F.2
    MULF F.2 VLV_KD_20 F.1
    ADDF F.0 F.1 VLV_U_20
    ADDF VLV_VELOCIDAD_20 VLV_U_20 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_20 VLV_U_20 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_20 VLV_OLDERROR_20
    JR_GTF VLV_LECTURA1_20 10.0 whilebody619
    JR_GTF VLV_LECTURA4_20 10.0 whilebody619
  endwhile619:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_CRUCE14_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE14_1:
SUB_M_SIGUELINEAS_ENCODER31F_2:
    MULF VLV_VELOCIDAD_21 1.0 VLV_VELOCIDAD_21
    MOVEF_F 50.0 VLV_LECTURA1_21
    MOVEF_F 50.0 VLV_LECTURA3_21
    MOVEF_F 50.0 VLV_LECTURA4_21
    MATH POW VLV_VELOCIDAD_21 0.833333333333333 F.0
    DATAF tmpf645
    DATA8 flag645
    DIVF F.0 440.0 tmpf645
    CP_EQF 0.0 440.0 flag645
    SELECTF flag645 0.0 tmpf645 VLV_KP_21

    MULF VLV_KP_21 70.0 VLV_KD_21
    MOVEF_F 0.0 VLV_ERROR_21
    MOVEF_F 0.0 VLV_OLDERROR_21
    MOVEF_F 0.0 VLV_U_21
    MATH ABS VLV_VELOCIDAD_21 F.0
    DATAF tmpf648
    DATA8 flag648
    DIVF VLV_VELOCIDAD_21 F.0 tmpf648
    CP_EQF 0.0 F.0 flag648
    SELECTF flag648 0.0 tmpf648 VLV_SENTIDO_21

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf651
    DATA8 flag651
    DIVF VLV_ENCODER_21 F.1 tmpf651
    CP_EQF 0.0 F.1 flag651
    SELECTF flag651 0.0 tmpf651 F.0

    MULF F.0 360.0 VLV_ENCODER_21
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_21
    MOVEF_F 0.0 VLV_ENCODERC_21
    DATAF tmpf654
    DATA8 flag654
    DIVF VLV_VELOCIDAD_21 10.0 tmpf654
    CP_EQF 0.0 10.0 flag654
    SELECTF flag654 0.0 tmpf654 F.2

    DATAF tmpf655
    DATA8 flag655
    DIVF 11286.0 F.2 tmpf655
    CP_EQF 0.0 F.2 flag655
    SELECTF flag655 0.0 tmpf655 F.1

    DATAF tmpf656
    DATA8 flag656
    DIVF VLV_ENCODER_21 100.0 tmpf656
    CP_EQF 0.0 100.0 flag656
    SELECTF flag656 0.0 tmpf656 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf658
    DATA8 flag658
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf658
    CP_EQF 0.0 6.24 flag658
    SELECTF flag658 0.0 tmpf658 F.1

    DATAF tmpf659
    DATA8 flag659
    DIVF F.0 F.1 tmpf659
    CP_EQF 0.0 F.1 flag659
    SELECTF flag659 0.0 tmpf659 VLV_SAFETYTIMER_21

    TIMER_READ timeMC4
  while661:
    MATH ABS VLV_ENCODERC_21 F.0
    JR_GTEQF F.0 VLV_ENCODER_21 endwhile661
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_21 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile661
  whilebody661:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_21 VLV_ENCODERC_21
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf669
    DATA8 flag669
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf669
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag669
    SELECTF flag669 0.0 tmpf669 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_21
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf674
    DATA8 flag674
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf674
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag674
    SELECTF flag674 0.0 tmpf674 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_21
    SUBF VLV_LECTURA3_21 VLV_LECTURA1_21 F.1
    MULF F.1 VLV_SENTIDO_21 F.0
    MULF F.0 1.0 VLV_ERROR_21
    MULF VLV_ERROR_21 VLV_KP_21 F.0
    SUBF VLV_ERROR_21 VLV_OLDERROR_21 F.2
    MULF F.2 VLV_KD_21 F.1
    ADDF F.0 F.1 VLV_U_21
    ADDF VLV_VELOCIDAD_21 VLV_U_21 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_21 VLV_U_21 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_21 VLV_OLDERROR_21
    MATH ABS VLV_ENCODERC_21 F.0
    JR_GTEQF F.0 VLV_ENCODER_21 and688
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_21 2000.0 F.1
    JR_LTF F.0 F.1 whilebody661
  and688:
  endwhile661:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_21 2000.0 F.1
    JR_LTEQF F.0 F.1 else692_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else692_1:
  endif692:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_ENCODER31F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER31F_2:
SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
    MULF VLV_VELOCIDAD_22 1.0 VLV_VELOCIDAD_22
    MOVEF_F 50.0 VLV_LECTURA1_22
    MOVEF_F 50.0 VLV_LECTURA3_22
    MOVEF_F 50.0 VLV_LECTURA4_22
    MATH POW VLV_VELOCIDAD_22 0.833333333333333 F.0
    DATAF tmpf700
    DATA8 flag700
    DIVF F.0 440.0 tmpf700
    CP_EQF 0.0 440.0 flag700
    SELECTF flag700 0.0 tmpf700 VLV_KP_22

    MULF VLV_KP_22 70.0 VLV_KD_22
    MOVEF_F 0.0 VLV_ERROR_22
    MOVEF_F 0.0 VLV_OLDERROR_22
    MOVEF_F 0.0 VLV_U_22
    MATH ABS VLV_VELOCIDAD_22 F.0
    DATAF tmpf703
    DATA8 flag703
    DIVF VLV_VELOCIDAD_22 F.0 tmpf703
    CP_EQF 0.0 F.0 flag703
    SELECTF flag703 0.0 tmpf703 VLV_SENTIDO_22

    MOVEF_F 50.0 VLV_LECTURA_22
  while704:
    JR_LTEQF VLV_LECTURA_22 7.0 endwhile704
  whilebody704:
    JR_NEQF VLV_READER_22 3.0 else705_1
    MOVEF_F VLV_LECTURA3_22 VLV_LECTURA_22
    MOVEF_F VLV_LECTURA1_22 VLV_LECTURAIZQ_22
    MOVEF_F VLV_LECTURA4_22 VLV_LECTURADCH_22
    JR endif705
  else705_1:
    MOVEF_F VLV_LECTURA4_22 VLV_LECTURA_22
    MOVEF_F VLV_LECTURA3_22 VLV_LECTURAIZQ_22
    MOVEF_F VLV_LECTURA1_22 VLV_LECTURADCH_22
  else705_2:
  endif705:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf708
    DATA8 flag708
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf708
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag708
    SELECTF flag708 0.0 tmpf708 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_22
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf713
    DATA8 flag713
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf713
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag713
    SELECTF flag713 0.0 tmpf713 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_22
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf718
    DATA8 flag718
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf718
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag718
    SELECTF flag718 0.0 tmpf718 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_22
    SUBF VLV_LECTURAIZQ_22 VLV_LECTURADCH_22 F.1
    MULF F.1 VLV_SENTIDO_22 F.0
    MULF F.0 1.0 VLV_ERROR_22
    MULF VLV_ERROR_22 VLV_KP_22 F.0
    SUBF VLV_ERROR_22 VLV_OLDERROR_22 F.2
    MULF F.2 VLV_KD_22 F.1
    ADDF F.0 F.1 VLV_U_22
    ADDF VLV_VELOCIDAD_22 VLV_U_22 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_22 VLV_U_22 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_22 VLV_OLDERROR_22
    JR_GTF VLV_LECTURA_22 7.0 whilebody704
  endwhile704:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
    MULF VLV_VELOCIDAD_23 1.0 VLV_VELOCIDAD_23
    MOVEF_F 50.0 VLV_LECTURA1_23
    MOVEF_F 50.0 VLV_LECTURA3_23
    MOVEF_F 50.0 VLV_LECTURA4_23
    MATH POW VLV_VELOCIDAD_23 0.833333333333333 F.0
    DATAF tmpf735
    DATA8 flag735
    DIVF F.0 440.0 tmpf735
    CP_EQF 0.0 440.0 flag735
    SELECTF flag735 0.0 tmpf735 VLV_KP_23

    MULF VLV_KP_23 70.0 VLV_KD_23
    MOVEF_F 0.0 VLV_ERROR_23
    MOVEF_F 0.0 VLV_OLDERROR_23
    MOVEF_F 0.0 VLV_U_23
    MATH ABS VLV_VELOCIDAD_23 F.0
    DATAF tmpf738
    DATA8 flag738
    DIVF VLV_VELOCIDAD_23 F.0 tmpf738
    CP_EQF 0.0 F.0 flag738
    SELECTF flag738 0.0 tmpf738 VLV_SENTIDO_23

    MOVEF_F 50.0 VLV_LECTURA_23
  while739:
    JR_LTEQF VLV_LECTURA_23 7.0 endwhile739
  whilebody739:
    JR_NEQF VLV_READER_23 3.0 else740_1
    MOVEF_F VLV_LECTURA3_23 VLV_LECTURA_23
    MOVEF_F VLV_LECTURA1_23 VLV_LECTURAIZQ_23
    MOVEF_F VLV_LECTURA4_23 VLV_LECTURADCH_23
    JR endif740
  else740_1:
    MOVEF_F VLV_LECTURA4_23 VLV_LECTURA_23
    MOVEF_F VLV_LECTURA3_23 VLV_LECTURAIZQ_23
    MOVEF_F VLV_LECTURA1_23 VLV_LECTURADCH_23
  else740_2:
  endif740:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf743
    DATA8 flag743
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf743
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag743
    SELECTF flag743 0.0 tmpf743 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_23
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf748
    DATA8 flag748
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf748
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag748
    SELECTF flag748 0.0 tmpf748 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_23
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf753
    DATA8 flag753
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf753
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag753
    SELECTF flag753 0.0 tmpf753 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_23
    SUBF VLV_LECTURAIZQ_23 VLV_LECTURADCH_23 F.1
    MULF F.1 VLV_SENTIDO_23 F.0
    MULF F.0 1.0 VLV_ERROR_23
    MULF VLV_ERROR_23 VLV_KP_23 F.0
    SUBF VLV_ERROR_23 VLV_OLDERROR_23 F.2
    MULF F.2 VLV_KD_23 F.1
    ADDF F.0 F.1 VLV_U_23
    ADDF VLV_VELOCIDAD_23 VLV_U_23 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_23 VLV_U_23 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_23 VLV_OLDERROR_23
    JR_GTF VLV_LECTURA_23 7.0 whilebody739
  endwhile739:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
SUB_M_SIGUELINEAS_ENCODER14F_2:
    MULF VLV_VELOCIDAD_24 1.0 VLV_VELOCIDAD_24
    MOVEF_F 50.0 VLV_LECTURA1_24
    MOVEF_F 50.0 VLV_LECTURA3_24
    MOVEF_F 50.0 VLV_LECTURA4_24
    MATH POW VLV_VELOCIDAD_24 0.833333333333333 F.0
    DATAF tmpf770
    DATA8 flag770
    DIVF F.0 440.0 tmpf770
    CP_EQF 0.0 440.0 flag770
    SELECTF flag770 0.0 tmpf770 VLV_KP_24

    MULF VLV_KP_24 70.0 VLV_KD_24
    MOVEF_F 0.0 VLV_ERROR_24
    MOVEF_F 0.0 VLV_OLDERROR_24
    MOVEF_F 0.0 VLV_U_24
    MATH ABS VLV_VELOCIDAD_24 F.0
    DATAF tmpf773
    DATA8 flag773
    DIVF VLV_VELOCIDAD_24 F.0 tmpf773
    CP_EQF 0.0 F.0 flag773
    SELECTF flag773 0.0 tmpf773 VLV_SENTIDO_24

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf776
    DATA8 flag776
    DIVF VLV_ENCODER_24 F.1 tmpf776
    CP_EQF 0.0 F.1 flag776
    SELECTF flag776 0.0 tmpf776 F.0

    MULF F.0 360.0 VLV_ENCODER_24
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_24
    MOVEF_F 0.0 VLV_ENCODERC_24
    DATAF tmpf779
    DATA8 flag779
    DIVF VLV_VELOCIDAD_24 10.0 tmpf779
    CP_EQF 0.0 10.0 flag779
    SELECTF flag779 0.0 tmpf779 F.2

    DATAF tmpf780
    DATA8 flag780
    DIVF 11286.0 F.2 tmpf780
    CP_EQF 0.0 F.2 flag780
    SELECTF flag780 0.0 tmpf780 F.1

    DATAF tmpf781
    DATA8 flag781
    DIVF VLV_ENCODER_24 100.0 tmpf781
    CP_EQF 0.0 100.0 flag781
    SELECTF flag781 0.0 tmpf781 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf783
    DATA8 flag783
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf783
    CP_EQF 0.0 6.24 flag783
    SELECTF flag783 0.0 tmpf783 F.1

    DATAF tmpf784
    DATA8 flag784
    DIVF F.0 F.1 tmpf784
    CP_EQF 0.0 F.1 flag784
    SELECTF flag784 0.0 tmpf784 VLV_SAFETYTIMER_24

    TIMER_READ timeMC4
  while786:
    MATH ABS VLV_ENCODERC_24 F.0
    JR_GTEQF F.0 VLV_ENCODER_24 endwhile786
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_24 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile786
  whilebody786:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_24 VLV_ENCODERC_24
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf794
    DATA8 flag794
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf794
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag794
    SELECTF flag794 0.0 tmpf794 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_24
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf799
    DATA8 flag799
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf799
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag799
    SELECTF flag799 0.0 tmpf799 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_24
    SUBF VLV_LECTURA1_24 VLV_LECTURA4_24 F.1
    MULF F.1 VLV_SENTIDO_24 F.0
    MULF F.0 1.0 VLV_ERROR_24
    MULF VLV_ERROR_24 VLV_KP_24 F.0
    SUBF VLV_ERROR_24 VLV_OLDERROR_24 F.2
    MULF F.2 VLV_KD_24 F.1
    ADDF F.0 F.1 VLV_U_24
    ADDF VLV_VELOCIDAD_24 VLV_U_24 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_24 VLV_U_24 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_24 VLV_OLDERROR_24
    MATH ABS VLV_ENCODERC_24 F.0
    JR_GTEQF F.0 VLV_ENCODER_24 and813
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_24 2000.0 F.1
    JR_LTF F.0 F.1 whilebody786
  and813:
  endwhile786:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_24 2000.0 F.1
    JR_LTEQF F.0 F.1 else817_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else817_1:
  endif817:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_ENCODER14F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER14F_2:
SUB_M_SIGUELINEAS_ENCODER31_2:
    MULF VLV_VELOCIDAD_25 1.0 VLV_VELOCIDAD_25
    MOVEF_F 50.0 VLV_LECTURA1_25
    MOVEF_F 50.0 VLV_LECTURA3_25
    MOVEF_F 50.0 VLV_LECTURA4_25
    MATH POW VLV_VELOCIDAD_25 0.833333333333333 F.0
    DATAF tmpf825
    DATA8 flag825
    DIVF F.0 440.0 tmpf825
    CP_EQF 0.0 440.0 flag825
    SELECTF flag825 0.0 tmpf825 VLV_KP_25

    MULF VLV_KP_25 70.0 VLV_KD_25
    MOVEF_F 0.0 VLV_ERROR_25
    MOVEF_F 0.0 VLV_OLDERROR_25
    MOVEF_F 0.0 VLV_U_25
    MATH ABS VLV_VELOCIDAD_25 F.0
    DATAF tmpf828
    DATA8 flag828
    DIVF VLV_VELOCIDAD_25 F.0 tmpf828
    CP_EQF 0.0 F.0 flag828
    SELECTF flag828 0.0 tmpf828 VLV_SENTIDO_25

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf831
    DATA8 flag831
    DIVF VLV_ENCODER_25 F.1 tmpf831
    CP_EQF 0.0 F.1 flag831
    SELECTF flag831 0.0 tmpf831 F.0

    MULF F.0 360.0 VLV_ENCODER_25
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_25
    MOVEF_F 0.0 VLV_ENCODERC_25
    DATAF tmpf834
    DATA8 flag834
    DIVF VLV_VELOCIDAD_25 10.0 tmpf834
    CP_EQF 0.0 10.0 flag834
    SELECTF flag834 0.0 tmpf834 F.2

    DATAF tmpf835
    DATA8 flag835
    DIVF 11286.0 F.2 tmpf835
    CP_EQF 0.0 F.2 flag835
    SELECTF flag835 0.0 tmpf835 F.1

    DATAF tmpf836
    DATA8 flag836
    DIVF VLV_ENCODER_25 100.0 tmpf836
    CP_EQF 0.0 100.0 flag836
    SELECTF flag836 0.0 tmpf836 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf838
    DATA8 flag838
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf838
    CP_EQF 0.0 6.24 flag838
    SELECTF flag838 0.0 tmpf838 F.1

    DATAF tmpf839
    DATA8 flag839
    DIVF F.0 F.1 tmpf839
    CP_EQF 0.0 F.1 flag839
    SELECTF flag839 0.0 tmpf839 VLV_SAFETYTIMER_25

    TIMER_READ timeMC4
  while841:
    MATH ABS VLV_ENCODERC_25 F.0
    JR_GTEQF F.0 VLV_ENCODER_25 endwhile841
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_25 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile841
  whilebody841:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_25 VLV_ENCODERC_25
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf849
    DATA8 flag849
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf849
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag849
    SELECTF flag849 0.0 tmpf849 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_25
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf854
    DATA8 flag854
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf854
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag854
    SELECTF flag854 0.0 tmpf854 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_25
    SUBF VLV_LECTURA3_25 VLV_LECTURA1_25 F.1
    MULF F.1 VLV_SENTIDO_25 F.0
    MULF F.0 1.0 VLV_ERROR_25
    MULF VLV_ERROR_25 VLV_KP_25 F.0
    SUBF VLV_ERROR_25 VLV_OLDERROR_25 F.2
    MULF F.2 VLV_KD_25 F.1
    ADDF F.0 F.1 VLV_U_25
    ADDF VLV_VELOCIDAD_25 VLV_U_25 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_25 VLV_U_25 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_25 VLV_OLDERROR_25
    MATH ABS VLV_ENCODERC_25 F.0
    JR_GTEQF F.0 VLV_ENCODER_25 and868
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_25 2000.0 F.1
    JR_LTF F.0 F.1 whilebody841
  and868:
  endwhile841:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_25 2000.0 F.1
    JR_LTEQF F.0 F.1 else872_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else872_1:
  endif872:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_ENCODER31_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER31_2:
SUB_M_GIRO_GRADOS_3:
    DATAF tmpf878
    DATA8 flag878
    DIVF VLV_VELOCIDAD1_26 VLV_VELOCIDAD2_26 tmpf878
    CP_EQF 0.0 VLV_VELOCIDAD2_26 flag878
    SELECTF flag878 0.0 tmpf878 F.0

    DATAF tmpf879
    DATA8 flag879
    DIVF VLV_VELOCIDAD1_26 VLV_VELOCIDAD2_26 tmpf879
    CP_EQF 0.0 VLV_VELOCIDAD2_26 flag879
    SELECTF flag879 0.0 tmpf879 F.2

    MATH ABS F.2 F.1
    DATAF tmpf881
    DATA8 flag881
    DIVF F.0 F.1 tmpf881
    CP_EQF 0.0 F.1 flag881
    SELECTF flag881 0.0 tmpf881 VLV_SIGNO_26

    MATH ABS VLV_VELOCIDAD1_26 F.0
    MATH ABS VLV_VELOCIDAD2_26 F.1
    DATA8 flag884
	CP_LTF F.0 F.1 flag884
	SELECTF flag884 F.0 F.1 VLV_VMIN_26
    MATH ABS VLV_VELOCIDAD1_26 F.0
    MATH ABS VLV_VELOCIDAD2_26 F.1
    DATA8 flag887
	CP_GTF F.0 F.1 flag887
	SELECTF flag887 F.0 F.1 VLV_VMAX_26
    MULF VLV_GRADOS_26 VPR_GIRO_G1 F.0
    MULF VLV_SIGNO_26 VLV_VMIN_26 F.4
    DATAF tmpf890
    DATA8 flag890
    DIVF F.4 VLV_VMAX_26 tmpf890
    CP_EQF 0.0 VLV_VMAX_26 flag890
    SELECTF flag890 0.0 tmpf890 F.3

    SUBF F.3 1.0 F.2
    DATAF tmpf892
    DATA8 flag892
    DIVF -2.0 F.2 tmpf892
    CP_EQF 0.0 F.2 flag892
    SELECTF flag892 0.0 tmpf892 F.1

    MULF F.0 F.1 VLV_ENCODER_26
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds895
	MOVEF_32 100.0 milliseconds895
	DATA32 timer895
	TIMER_WAIT milliseconds895 timer895
	TIMER_READY timer895
    MATH NEGATE VLV_VELOCIDAD1_26 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_26 VLV_ENCODER_26 'True'

	DATA8 layer897
	DATA8 nos897
	DATA8 busy897
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer897 nos897
	JR_EQ8 0 nos897 motornotbusy897
  motorwaiting897:
	OUTPUT_TEST layer897 nos897 busy897
	JR_EQ8 busy897 0 motornotbusy897
	SLEEP
	JR motorwaiting897
  motornotbusy897:
    MOVEF_F 0.0 VLV_VELOCIDAD1_26
    MOVEF_F 0.0 VLV_VELOCIDAD2_26
    MOVEF_F 0.0 VLV_GRADOS_26
    DATA32 milliseconds898
	MOVEF_32 100.0 milliseconds898
	DATA32 timer898
	TIMER_WAIT milliseconds898 timer898
	TIMER_READY timer898
RETSUB_M_GIRO_GRADOS_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_GRADOS_3:
SUB_M_GIRO_ENCODER_3:
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_GIRO_DIAMETRO F.2 F.1
    DATAF tmpf901
    DATA8 flag901
    DIVF VLV_DISTANCIA_27 F.1 tmpf901
    CP_EQF 0.0 F.1 flag901
    SELECTF flag901 0.0 tmpf901 F.0

    MULF F.0 360.0 VLV_ENCODER_27
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MATH NEGATE VLV_VELOCIDAD1_27 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_27 VLV_ENCODER_27 'True'

	DATA8 layer905
	DATA8 nos905
	DATA8 busy905
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer905 nos905
	JR_EQ8 0 nos905 motornotbusy905
  motorwaiting905:
	OUTPUT_TEST layer905 nos905 busy905
	JR_EQ8 busy905 0 motornotbusy905
	SLEEP
	JR motorwaiting905
  motornotbusy905:
RETSUB_M_GIRO_ENCODER_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_ENCODER_3:
SUB_M_GIRO_NEGRO1F_3:
    MOVEF_F 50.0 VLV_LECTURA_28
  while906:
    JR_LTEQF VLV_LECTURA_28 15.0 endwhile906
  whilebody906:
    CALL SENSOR.READPERCENT VLV_SENS_28 F.2
    SUBF F.2 VPR_GIRO_NEGRO F.1
    DATAF tmpf909
    DATA8 flag909
    DIVF F.1 VPR_GIRO_BLANCO tmpf909
    CP_EQF 0.0 VPR_GIRO_BLANCO flag909
    SELECTF flag909 0.0 tmpf909 F.0

    SUBF 100.0 VPR_GIRO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_28
    MATH NEGATE VLV_VELOCIDAD1_28 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_28
    JR_GTF VLV_LECTURA_28 15.0 whilebody906
  endwhile906:
    CALL MOTOR.STOP 'BC' 'False'
RETSUB_M_GIRO_NEGRO1F_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_NEGRO1F_3:
SUB_M_GIRO_NEGRO1_3:
    MOVEF_F 50.0 VLV_LECTURA_29
  while915:
    JR_LTEQF VLV_LECTURA_29 15.0 endwhile915
  whilebody915:
    CALL SENSOR.READPERCENT VLV_SENS_29 F.2
    SUBF F.2 VPR_GIRO_NEGRO F.1
    DATAF tmpf918
    DATA8 flag918
    DIVF F.1 VPR_GIRO_BLANCO tmpf918
    CP_EQF 0.0 VPR_GIRO_BLANCO flag918
    SELECTF flag918 0.0 tmpf918 F.0

    SUBF 100.0 VPR_GIRO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_29
    MATH NEGATE VLV_VELOCIDAD1_29 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_29
    JR_GTF VLV_LECTURA_29 15.0 whilebody915
  endwhile915:
    CALL MOTOR.STOP 'BC' 'True'
RETSUB_M_GIRO_NEGRO1_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_NEGRO1_3:
SUB_M_GIRO_ENCODERF_3:
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_GIRO_DIAMETRO F.2 F.1
    DATAF tmpf926
    DATA8 flag926
    DIVF VLV_DISTANCIA_30 F.1 tmpf926
    CP_EQF 0.0 F.1 flag926
    SELECTF flag926 0.0 tmpf926 F.0

    MULF F.0 360.0 VLV_ENCODER_30
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MATH NEGATE VLV_VELOCIDAD1_30 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_30 VLV_ENCODER_30 'False'

	DATA8 layer930
	DATA8 nos930
	DATA8 busy930
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer930 nos930
	JR_EQ8 0 nos930 motornotbusy930
  motorwaiting930:
	OUTPUT_TEST layer930 nos930 busy930
	JR_EQ8 busy930 0 motornotbusy930
	SLEEP
	JR motorwaiting930
  motornotbusy930:
RETSUB_M_GIRO_ENCODERF_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_ENCODERF_3:
SUB_M_GIRO_TIEMPO_3:
    TIMER_READ timeMC3
  while932:
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_TIEMPO_31 endwhile932
  whilebody932:
    MATH NEGATE VLV_VELOCIDAD1_31 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_31
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_TIEMPO_31 whilebody932
  endwhile932:
    CALL MOTOR.STOP 'BC' 'True'
RETSUB_M_GIRO_TIEMPO_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_TIEMPO_3:
SUB_M_RGB_DETECT_3:
    CALL SENSOR.GETMODE VLV_SENS_32 VLV_SENS_MODE_32
    DATA8 layer939
	DATA8 no939
	DATA8 mode8939
	
	MOVEF_8 VLV_SENS_32 no939
	SUB8 no939 1 no939
	DIV8 no939 4 layer939
	MATH MOD8 no939 4 no939

	MOVEF_8 4.0 mode8939
	
	INPUT_DEVICE READY_RAW layer939 no939 0 mode8939 0
    MOVEF_F 15.0 VLV_RED_32
    MOVEF_F 60.0 VLV_YELLOW_32
    MOVEF_F 170.0 VLV_GREEN_32
    MOVEF_F 330.0 VLV_BLUE_32
    MOVEF_F 0.0 VLV_HUE_32
    MOVEF_F 0.0 VLV_SAT_32
    MOVEF_F 0.0 VLV_VALUE_32
    MOVEF_F 0.0 VLV_COLOR_32
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_RNORMARRAY_32
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_GNORMARRAY_32
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_BNORMARRAY_32
    CALL LCD.CLEAR
    MOVEF_F 1.0 VLV_J_32
  for944:
    JR_GTF VLV_J_32 VLV_REPS_32 endfor944
  forbody944:
    CALL SENSOR.READRAW VLV_SENS_32 3.0 VLV_RGB_32
    CALL ARRAYGET_FLOAT 0.0 VLV_RRAW_32 VLV_RGB_32
    CALL ARRAYGET_FLOAT 1.0 VLV_GRAW_32 VLV_RGB_32
    CALL ARRAYGET_FLOAT 2.0 VLV_BRAW_32 VLV_RGB_32
    DATAF tmpf949
    DATA8 flag949
    DIVF VLV_RRAW_32 VPR_RGB_RWHITE tmpf949
    CP_EQF 0.0 VPR_RGB_RWHITE flag949
    SELECTF flag949 0.0 tmpf949 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_32 F.0 VLV_RNORMARRAY_32
    DATAF tmpf953
    DATA8 flag953
    DIVF VLV_GRAW_32 VPR_RGB_GWHITE tmpf953
    CP_EQF 0.0 VPR_RGB_GWHITE flag953
    SELECTF flag953 0.0 tmpf953 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_32 F.0 VLV_GNORMARRAY_32
    DATAF tmpf957
    DATA8 flag957
    DIVF VLV_BRAW_32 VPR_RGB_BWHITE tmpf957
    CP_EQF 0.0 VPR_RGB_BWHITE flag957
    SELECTF flag957 0.0 tmpf957 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_32 F.0 VLV_BNORMARRAY_32
    DATA32 milliseconds961
	MOVEF_32 5.0 milliseconds961
	DATA32 timer961
	TIMER_WAIT milliseconds961 timer961
	TIMER_READY timer961
    ADDF VLV_J_32 1.0 VLV_J_32
    JR_LTEQF VLV_J_32 VLV_REPS_32 forbody944
  endfor944:
    MOVEF_F 1.0 VLV_J_32
  for963:
    JR_GTF VLV_J_32 VLV_REPS_32 endfor963
  forbody963:
    CALL ARRAYGET_FLOAT VLV_J_32 F.0 VLV_RNORMARRAY_32
    ADDF VLV_J_32 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_RNORMARRAY_32
    ADDF F.0 F.1 VLV_RNORM_32
    CALL ARRAYGET_FLOAT VLV_J_32 F.0 VLV_GNORMARRAY_32
    ADDF VLV_J_32 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_GNORMARRAY_32
    ADDF F.0 F.1 VLV_GNORM_32
    CALL ARRAYGET_FLOAT VLV_J_32 F.0 VLV_BNORMARRAY_32
    ADDF VLV_J_32 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_BNORMARRAY_32
    ADDF F.0 F.1 VLV_BNORM_32
    ADDF VLV_J_32 2.0 VLV_J_32
    JR_LTEQF VLV_J_32 VLV_REPS_32 forbody963
  endfor963:
    DATAF tmpf977
    DATA8 flag977
    DIVF VLV_RNORM_32 VLV_REPS_32 tmpf977
    CP_EQF 0.0 VLV_REPS_32 flag977
    SELECTF flag977 0.0 tmpf977 VLV_RNORM_32

    DATAF tmpf978
    DATA8 flag978
    DIVF VLV_GNORM_32 VLV_REPS_32 tmpf978
    CP_EQF 0.0 VLV_REPS_32 flag978
    SELECTF flag978 0.0 tmpf978 VLV_GNORM_32

    DATAF tmpf979
    DATA8 flag979
    DIVF VLV_BNORM_32 VLV_REPS_32 tmpf979
    CP_EQF 0.0 VLV_REPS_32 flag979
    SELECTF flag979 0.0 tmpf979 VLV_BNORM_32

    DATA8 flag980
	CP_GTF VLV_RNORM_32 VLV_GNORM_32 flag980
	SELECTF flag980 VLV_RNORM_32 VLV_GNORM_32 F.0
    DATA8 flag981
	CP_GTF F.0 VLV_BNORM_32 flag981
	SELECTF flag981 F.0 VLV_BNORM_32 VLV_MAX_32
    DATA8 flag982
	CP_LTF VLV_RNORM_32 VLV_GNORM_32 flag982
	SELECTF flag982 VLV_RNORM_32 VLV_GNORM_32 F.0
    DATA8 flag983
	CP_LTF F.0 VLV_BNORM_32 flag983
	SELECTF flag983 F.0 VLV_BNORM_32 VLV_MIN_32
    JR_NEQF VLV_MAX_32 VLV_MIN_32 else984_1
    MOVEF_F 0.0 VLV_HUE_32
    JR endif984
  else984_1:
    JR_NEQF VLV_MAX_32 VLV_RNORM_32 else984_2
    JR_LTF VLV_GNORM_32 VLV_BNORM_32 else985_1
    SUBF VLV_GNORM_32 VLV_BNORM_32 F.1
    MULF 60.0 F.1 F.0
    SUBF VLV_MAX_32 VLV_MIN_32 F.1
    DATAF tmpf989
    DATA8 flag989
    DIVF F.0 F.1 tmpf989
    CP_EQF 0.0 F.1 flag989
    SELECTF flag989 0.0 tmpf989 VLV_HUE_32

    JR endif985
  else985_1:
    SUBF VLV_GNORM_32 VLV_BNORM_32 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_32 VLV_MIN_32 F.2
    DATAF tmpf993
    DATA8 flag993
    DIVF F.1 F.2 tmpf993
    CP_EQF 0.0 F.2 flag993
    SELECTF flag993 0.0 tmpf993 F.0

    ADDF F.0 360.0 VLV_HUE_32
  else985_2:
  endif985:
    JR endif984
  else984_2:
    JR_NEQF VLV_MAX_32 VLV_GNORM_32 else984_3
    SUBF VLV_BNORM_32 VLV_RNORM_32 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_32 VLV_MIN_32 F.2
    DATAF tmpf998
    DATA8 flag998
    DIVF F.1 F.2 tmpf998
    CP_EQF 0.0 F.2 flag998
    SELECTF flag998 0.0 tmpf998 F.0

    ADDF F.0 120.0 VLV_HUE_32
    JR endif984
  else984_3:
    SUBF VLV_RNORM_32 VLV_GNORM_32 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_32 VLV_MIN_32 F.2
    DATAF tmpf1003
    DATA8 flag1003
    DIVF F.1 F.2 tmpf1003
    CP_EQF 0.0 F.2 flag1003
    SELECTF flag1003 0.0 tmpf1003 F.0

    ADDF F.0 240.0 VLV_HUE_32
  else984_4:
  endif984:
    JR_NEQF VLV_MAX_32 0.0 else1005_1
    MOVEF_F 0.0 VLV_SAT_32
    JR endif1005
  else1005_1:
    DATAF tmpf1006
    DATA8 flag1006
    DIVF VLV_MIN_32 VLV_MAX_32 tmpf1006
    CP_EQF 0.0 VLV_MAX_32 flag1006
    SELECTF flag1006 0.0 tmpf1006 F.0

    SUBF 1.0 F.0 VLV_SAT_32
  else1005_2:
  endif1005:
    MOVEF_F VLV_MAX_32 VLV_VALUE_32
    ADDF VPR_RGB_VALUEBLANCO VPR_RGB_VALUENEGRO F.0
    DATAF tmpf1009
    DATA8 flag1009
    DIVF F.0 2.0 tmpf1009
    CP_EQF 0.0 2.0 flag1009
    SELECTF flag1009 0.0 tmpf1009 VLV_RGBGREY_32

    ADDF VLV_RRAW_32 VLV_GRAW_32 F.1
    ADDF F.1 VLV_BRAW_32 F.0
    JR_GTF F.0 3.0 else1010_1
    MOVEF_F 0.0 VLV_COLOR_32
    JR endif1010
  else1010_1:
    JR_GTEQF VLV_SAT_32 0.3 else1013_1
    JR_LTEQF VLV_VALUE_32 VLV_RGBGREY_32 else1014_1
    MOVEF_F 6.0 VLV_COLOR_32
    JR endif1014
  else1014_1:
    MOVEF_F 1.0 VLV_COLOR_32
  else1014_2:
  endif1014:
    JR endif1013
  else1013_1:
    JR_LTF VLV_HUE_32 0.0 else1015_1
    JR_GTEQF VLV_HUE_32 VLV_RED_32 else1015_1
    MOVEF_F 5.0 VLV_COLOR_32
    JR endif1015
  else1015_1:
    JR_LTF VLV_HUE_32 VLV_RED_32 else1015_2
    JR_GTEQF VLV_HUE_32 VLV_YELLOW_32 else1015_2
    MOVEF_F 4.0 VLV_COLOR_32
    JR endif1015
  else1015_2:
    JR_LTF VLV_HUE_32 VLV_YELLOW_32 else1015_3
    JR_GTEQF VLV_HUE_32 VLV_GREEN_32 else1015_3
    MOVEF_F 3.0 VLV_COLOR_32
    JR endif1015
  else1015_3:
    JR_LTF VLV_HUE_32 VLV_GREEN_32 else1015_4
    JR_GTEQF VLV_HUE_32 VLV_BLUE_32 else1015_4
    MOVEF_F 2.0 VLV_COLOR_32
    JR endif1015
  else1015_4:
    MOVEF_F 5.0 VLV_COLOR_32
  else1015_5:
  endif1015:
  else1013_2:
  endif1013:
  else1010_2:
  endif1010:
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    STRINGS VALUE_FORMATTED VLV_RRAW_32 '%g' 99 S.1
    CALL TEXT.APPEND 'R: ' S.1 S.0
    CALL LCD.WRITE 33.0 20.0 S.0
    STRINGS VALUE_FORMATTED VLV_GRAW_32 '%g' 99 S.1
    CALL TEXT.APPEND 'G: ' S.1 S.0
    CALL LCD.WRITE 33.0 35.0 S.0
    STRINGS VALUE_FORMATTED VLV_BRAW_32 '%g' 99 S.1
    CALL TEXT.APPEND 'B: ' S.1 S.0
    CALL LCD.WRITE 33.0 50.0 S.0
    STRINGS VALUE_FORMATTED VLV_COLOR_32 '%g' 99 S.1
    CALL TEXT.APPEND 'color: ' S.1 S.0
    CALL LCD.WRITE 33.0 70.0 S.0
    STRINGS VALUE_FORMATTED VLV_VALUE_32 '%g' 99 S.1
    CALL TEXT.APPEND 'Value: ' S.1 S.0
    CALL LCD.WRITE 33.0 90.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
    DATA8 layer1034
	DATA8 no1034
	DATA8 mode81034
	
	MOVEF_8 VLV_SENS_32 no1034
	SUB8 no1034 1 no1034
	DIV8 no1034 4 layer1034
	MATH MOD8 no1034 4 no1034

	MOVEF_8 VLV_SENS_MODE_32 mode81034
	
	INPUT_DEVICE READY_RAW layer1034 no1034 0 mode81034 0
RETSUB_M_RGB_DETECT_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RGB_DETECT_3:
SUB_M_RGB_GRITAR_1:
    JR_NEQF VLV_COLOR_33 0.0 else1035_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Zero'
    JR endif1035
  else1035_1:
    JR_NEQF VLV_COLOR_33 1.0 else1035_2
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Black'
    JR endif1035
  else1035_2:
    JR_NEQF VLV_COLOR_33 2.0 else1035_3
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/BLUE'
    JR endif1035
  else1035_3:
    JR_NEQF VLV_COLOR_33 3.0 else1035_4
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/GREEN'
    JR endif1035
  else1035_4:
    JR_NEQF VLV_COLOR_33 4.0 else1035_5
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/YELLOW'
    JR endif1035
  else1035_5:
    JR_NEQF VLV_COLOR_33 5.0 else1035_6
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/RED'
    JR endif1035
  else1035_6:
    JR_NEQF VLV_COLOR_33 6.0 else1035_7
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/White'
    JR endif1035
  else1035_7:
    JR_NEQF VLV_COLOR_33 7.0 else1035_8
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Brown'
  else1035_8:
  endif1035:
    SOUND_READY
RETSUB_M_RGB_GRITAR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RGB_GRITAR_1:
}
subcall ARRAYSTORE_FLOAT   // FFFV
{
	IN_F index
	IN_F value	
	IN_16 handle
	
	DATA32 index32
	DATA32 len	
	MOVEF_32 index index32

	ARRAY SIZE handle len
	JR_LT32 index32 0 negativeindex
	JR_LT32 index32 len arraybigenough

increasesize:	
	DATA32 doublelen
	ADD32 len len doublelen
	ARRAY RESIZE handle doublelen
writeloop:	
	ARRAY_WRITE handle len 0.0
	ADD32 len 1 len
	JR_LT32 len doublelen writeloop
	JR_GTEQ32 index32 len increasesize
	
arraybigenough:
	ARRAY_WRITE handle index32 value
negativeindex:
}
subcall LCD.CLEAR   // V
{
	UI_DRAW(TOPLINE,0)
	UI_DRAW(CLEAN)
	
	JR_NEQ32 0 STOPLCDUPDATE skipupdate
	UI_DRAW UPDATE
skipupdate:
}
subcall TEXT.APPEND     // SSS
{
	IN_S a 252
	IN_S b 252
    OUT_S result 252
	
	DATA16 len0
	DATA16 len1
	DATA16 sum

	STRINGS GET_SIZE a len0
	STRINGS GET_SIZE b len1
	ADD16 len0,len1,sum
	JR_GT16 sum,251,stringsizeexceeded

	STRINGS ADD a b result
	RETURN
	
stringsizeexceeded:	
    STRINGS DUPLICATE a result
}
subcall LCD.WRITE     // FFSV
{
	IN_F x
	IN_F y
	IN_S text 252
	
	DATA16 x_16
	DATA16 y_16
	MOVEF_16 x x_16
	MOVEF_16 y y_16
	
	UI_DRAW SELECT_FONT 1
	UI_DRAW TEXT 1 x_16 y_16 text

	JR_NEQ32 0 STOPLCDUPDATE skipupdate
	UI_DRAW UPDATE
skipupdate:
}
subcall SPEAKER.PLAY    // FSV 
{
	IN_F volume
	IN_S filename 252	

	// prepend a path to really reach the target file from the current working directory
	DATA8 vol 
	DATAS fullname 300
	MOVEF_8 volume vol

	STRINGS ADD '../../../..' filename fullname  // when using absolute path, go to file system top from the VM directory and then back down
	JR_EQ8 filename 47 absolutepath               // filename begins with a '/' - using absolute path
	STRINGS ADD '../prjs/' filename fullname      // by default use path relative to prjs folder (must go from the current VM directory to there)
absolutepath:
	
	SOUND PLAY vol fullname
}
subcall ARRAYGET_FLOAT     // FFF
{
	IN_F index
	OUT_F value
	IN_16 handle
	
	DATA32 index32
	DATA32 len
	MOVEF_32 index index32
	
	ARRAY SIZE handle len
	JR_LT32 index32 0 outofbounds
	JR_GTEQ32 index32 len outofbounds
	
	ARRAY_READ handle index32 value
	RETURN
outofbounds:
	MOVE8_F 0 value	
}
subcall MOTOR.SCHEDULE   // SFFFFSV    MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F step1
	IN_F step2
	IN_F step3
	IN_S brake 8
	
	DATA8 layer
	DATA8 nos
	DATA8 spd
	DATA32 stp1
	DATA32 stp2
	DATA32 stp3	
	DATA8 brk
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	JR_EQ8 nos 0 noport

	MOVEF_8 speed spd
	MATH ABS step1 step1
	MOVEF_32 step1 stp1
	MATH ABS step2 step2
	MOVEF_32 step2 stp2
	MATH ABS step3 step3
	MOVEF_32 step3 stp3	
	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	

	OUTPUT_STEP_SPEED layer nos spd stp1 stp2 stp3 brk
noport:
}
subcall MOTORDECODEPORTSDESCRIPTOR  //  V
{
	IN_S descriptor 8
	OUT_8 layer
	OUT_8 nos

	DATA8 i 
	DATA8 c

	MOVE8_8 0 layer
	MOVE8_8 0 nos	
	MOVE8_8 0 i
loop:
	READ8 descriptor i c
	JR_EQ8 c 0 decoding_end
	
	JR_LT8 c 65 no_uppercase_port
	JR_GT8 c 68 no_uppercase_port
	SUB8 c 65 c
	RL8  1 c c
	OR8  nos c nos
	JR loop_end
no_uppercase_port:
	JR_LT8 c 97 no_lowercase_port
	JR_GT8 c 100 no_lowercase_port
	SUB8 c 97 c
	RL8  1 c c
	OR8  nos c nos	
	JR loop_end
no_lowercase_port:
	JR_LT8 c 49 loop_end
	JR_GT8 c 52 loop_end
	SUB8 c 49 layer
loop_end:
	ADD8 1 i i
	JR loop	
	
decoding_end:
	RETURN
}
subcall MOTOR.STOP       // SSV      MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_S brake 8

	DATA8 layer
	DATA8 nos	
	DATA8 brk
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	JR_EQ8 nos 0 noport

	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	
	
	OUTPUT_STOP layer nos brk
noport:
}
subcall EV3.BATTERYVOLTAGE  // F
{
	OUT_F voltage
	UI_READ GET_VBATT voltage
}
subcall EQ_STRING       // SSS
{
	IN_S  a 252
	IN_S  b 252
	OUT_S result 8
	
	DATA8 flag
	
	// check if completely equal
	STRINGS COMPARE a b flag
	JR_NEQ8 FLAG 0 isequal
	// second chance: when both values are "True" in any casing, this also counts as equal
	AND8888_32 a -538976289 a        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE a 'TRUE' flag	
	JR_EQ8 0,flag,isnotequal
	AND8888_32 b -538976289 b        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE b 'TRUE' flag	
	JR_EQ8 0,flag,isnotequal
isequal:
	STRINGS DUPLICATE 'True' result
	RETURN
isnotequal:
	STRINGS DUPLICATE 'False' result
	RETURN
}
subcall MOTOR.GETCOUNT    // SF     MOTORDECODEPORTDESCRIPTOR
{
	IN_S port 8
	OUT_F result
	
	DATA8 layer
	DATA8 no
	DATA32 tacho
	
	CALL MOTORDECODEPORTDESCRIPTOR port layer no
	JR_LT8 no 0 noport
	
	OUTPUT_GET_COUNT layer no tacho
	MOVE32_F tacho result

	DATA8 nos
	RL8 1 no nos
	DATA8 inv
	READ8 MOTORISINVERTED layer inv 
	AND8 inv nos inv
	JR_EQ8 inv 0 noinvert
	SUBF 0.0 result result
noinvert:
	RETURN

noport:	
	MOVE8_F 0 result	
}
subcall MOTORDECODEPORTDESCRIPTOR  //  V
{
	IN_S descriptor 8
	OUT_8 layer
	OUT_8 no

	DATA8 i 
	DATA8 c

	MOVE8_8 0 layer
	MOVE8_8 -1 no
	MOVE8_8 0 i
loop:
	READ8 descriptor i c
	JR_EQ8 c 0 decoding_end
	
	JR_LT8 c 65 no_uppercase_port
	JR_GT8 c 68 no_uppercase_port
	SUB8 c 65 c
	MOVE8_8 c no
	JR loop_end
no_uppercase_port:
	JR_LT8 c 97 no_lowercase_port
	JR_GT8 c 100 no_lowercase_port
	SUB8 c 97 c
	MOVE8_8 c no
	JR loop_end
no_lowercase_port:
	JR_LT8 c 49 loop_end
	JR_GT8 c 52 loop_end
	SUB8 c 49 layer
loop_end:
	ADD8 1 i i
	JR loop	
	
decoding_end:
	RETURN
}
subcall MOTOR.STARTSYNC      // SFFV       MOTORSTARTSTEERIMPL
{
	IN_S ports 8
	IN_F speed1
	IN_F speed2

	JR_GTEQF speed1 -100.0 nottoosmall1
	MOVEF_F -100.0 speed1
nottoosmall1:
	JR_LTEQF speed1 100.0 nottoobig1
	MOVEF_F 100.0 speed1
nottoobig1:
	JR_GTEQF speed2 -100.0 nottoosmall2
	MOVEF_F -100.0 speed2
nottoosmall2:
	JR_LTEQF speed1 100.0 nottoobig2
	MOVEF_F 100.0 speed2
nottoobig2:

	DATAF speed  
	DATAF turn
	MOVE8_F 0 speed
	MOVE8_F 0 turn

	DATAF speed1abs
	DATAF speed2abs
	MATH ABS speed1 speed1abs
	MATH ABS speed2 speed2abs
	JR_LTF speed1abs speed2abs secondisfaster
	JR_EQF speed1abs 0.0 donecomputation
	 MOVEF_F speed1 speed
	 MULF 100.0 speed2 turn
	 DIVF turn speed1 turn
	 SUBF 100.0 turn turn
	JR donecomputation
secondisfaster:
	 MOVEF_F speed2 speed
	 MULF 100.0 speed1 turn
	 DIVF turn speed2 turn
	 SUBF turn 100.0 turn
donecomputation:

	CALL MOTORSTARTSTEERIMPL ports speed turn
}
subcall MOTORSTARTSTEERIMPL      // SFFV       MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F turn

	DATA8 layer
	DATA8 nos	
	DATA8 first
	DATA8 second
	DATA8 invfirst
	DATA8 invsecond

	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	READ8 FIRSTOF2 nos first
	JR_EQ8 0 first not_two_ports
	XOR8 first nos second
	READ8 MOTORISINVERTED layer invfirst
	AND8 first invfirst invfirst
	READ8 MOTORISINVERTED layer invsecond
	AND8 second invsecond invsecond

	JR_LTF turn 0.0 second_is_master
first_is_master:
	JR_EQ8 invfirst 0 non_invert_first
	SUBF 0.0 speed speed
	JR_NEQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion
non_invert_first:
	JR_EQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion

second_is_master:
	JR_EQ8 invsecond 0 non_invert_second
	SUBF 0.0 speed speed
	JR_NEQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion
non_invert_second:
	JR_EQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion

done_inversion:
	DATA8 spd  
	DATA16 trn
	MOVEF_16 turn trn
	MOVEF_8 speed spd
	OUTPUT_STEP_SYNC layer nos spd trn 0 0
not_two_ports:
}
subcall SENSOR.READPERCENT       // FF
{
	IN_F port
	OUT_F result

	DATA8 layer
	DATA8 no
	DATA8 percentage

	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	INPUT_READ layer no 0 -1 percentage
	JR_LT8 percentage 0 novalue
	
	MOVE8_F percentage result
	RETURN
novalue:	
	MOVE8_F 0 result
}
subcall SENSOR.GETMODE		// FF
{
	IN_F port
	OUT_F result
	
	DATA8 layer
	DATA8 no
	DATA8 type
	DATA8 mode
	
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no
	
	INPUT_DEVICE GET_TYPEMODE layer no type mode
	MOVE8_F mode result
}
subcall SENSOR.READRAWVALUE            // FFF
{
	IN_F port
	IN_F index
	OUT_F result

	DATA8 layer
	DATA8 no
	DATA8 index8
		
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	MOVEF_8 index index8
	JR_LT8 index8 0 outofbounds
	JR_GT8 index8 7 outofbounds

	DATA32 rawvalue0
	DATA32 rawvalue1
	DATA32 rawvalue2
	DATA32 rawvalue3
	DATA32 rawvalue4
	DATA32 rawvalue5
	DATA32 rawvalue6
	DATA32 rawvalue7
	INPUT_READEXT layer no 0 -1 18 8 rawvalue0 rawvalue1 rawvalue2 rawvalue3 rawvalue4 rawvalue5 rawvalue6 rawvalue7
	
	DATA32 rawtmp
	READ32 rawvalue0 index8 rawtmp

	JR_LT32 rawtmp -1000000000 nomoredata
	MOVE32_F rawtmp result
	RETURN

nomoredata:
outofbounds:
	MOVEF_F 0.0 result
}
subcall MOTOR.SCHEDULESYNC   // SFFFSV    MOTORSCHEDULESTEERIMPL
{
	IN_S ports 8
	IN_F speed1
	IN_F speed2
	IN_F count
	IN_S brake 8
	
	JR_GTEQF speed1 -100.0 nottoosmall1
	MOVEF_F -100.0 speed1
nottoosmall1:
	JR_LTEQF speed1 100.0 nottoobig1
	MOVEF_F 100.0 speed1
nottoobig1:
	JR_GTEQF speed2 -100.0 nottoosmall2
	MOVEF_F -100.0 speed2
nottoosmall2:
	JR_LTEQF speed2 100.0 nottoobig2
	MOVEF_F 100.0 speed2
nottoobig2:

	DATAF speed  
	DATAF turn
	MOVE8_F 0 speed
	MOVE8_F 0 turn

	DATAF speed1abs
	DATAF speed2abs
	MATH ABS speed1 speed1abs
	MATH ABS speed2 speed2abs
	JR_LTF speed1abs speed2abs secondisfaster
	JR_EQF speed1abs 0.0 donecomputation
	 MOVEF_F speed1 speed
	 MULF 100.0 speed2 turn
	 DIVF turn speed1 turn
	 SUBF 100.0 turn turn
	JR donecomputation
secondisfaster:
	 MOVEF_F speed2 speed
	 MULF 100.0 speed1 turn
	 DIVF turn speed2 turn
	 SUBF turn 100.0 turn
donecomputation:
	
	CALL MOTORSCHEDULESTEERIMPL ports speed turn count brake
}
subcall MOTORSCHEDULESTEERIMPL   // SFFFSV    MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F turn
	IN_F count
	IN_S brake 8
	
	DATA8 layer
	DATA8 nos	
	DATA8 first
	DATA8 second
	DATA8 invfirst
	DATA8 invsecond
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	READ8 FIRSTOF2 nos first
	JR_EQ8 0 first not_two_ports
	XOR8 first nos second
	READ8 MOTORISINVERTED layer invfirst
	AND8 first invfirst invfirst
	READ8 MOTORISINVERTED layer invsecond
	AND8 second invsecond invsecond

	JR_LTF turn 0.0 second_is_master
first_is_master:
	JR_EQ8 invfirst 0 non_invert_first
	SUBF 0.0 speed speed
	JR_NEQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion
non_invert_first:
	JR_EQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion

second_is_master:
	JR_EQ8 invsecond 0 non_invert_second
	SUBF 0.0 speed speed
	JR_NEQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion
non_invert_second:
	JR_EQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion

done_inversion:
	DATA32 cnt
	DATA8 brk
	MATH ABS count count
	MOVEF_32 count cnt
	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	

	JR_LTEQ32 cnt 0 dontmove	

	DATA8 spd  
	DATA16 trn
	MOVEF_16 turn trn
	MOVEF_8 speed spd
	OUTPUT_STEP_SYNC layer nos spd trn cnt brk	
dontmove:	
not_two_ports:
}
subcall SENSOR.READRAW            // FFA
{
	IN_F port
	IN_F values
	IN_16 resultarray
	
	DATA8 layer
	DATA8 no
	DATA32 values32
		
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	MOVEF_32 values values32

	JR_LTEQ32 values32 0 arrayempty
	ARRAY RESIZE resultarray values32

	DATA32 rawvalue0
	DATA32 rawvalue1
	DATA32 rawvalue2
	DATA32 rawvalue3
	DATA32 rawvalue4
	DATA32 rawvalue5
	DATA32 rawvalue6
	DATA32 rawvalue7
	INPUT_READEXT layer no 0 -1 18 8 rawvalue0 rawvalue1 rawvalue2 rawvalue3 rawvalue4 rawvalue5 rawvalue6 rawvalue7
	
	DATA32 i
	DATA32 rawtmp
	MOVE32_32 0 i
loop:
	DATA8 tmp8
	DATAF tmpf

	MOVEF_F 0.0 tmpf
	JR_GTEQ32 i 8 nomoredata

	MOVE32_8 i tmp8
	READ32 rawvalue0 tmp8 rawtmp
	JR_LT32 rawtmp -1000000000 nomoredata
	MOVE32_F rawtmp tmpf

nomoredata:	
	ARRAY_WRITE resultarray i tmpf

	ADD32 i 1 i
	JR_LT32 i values32 loop
	RETURN

arrayempty:
	ARRAY RESIZE resultarray 0
}
subcall ARRAYCREATE_FLOAT   // F
{
	OUT_16 handle
	
	ARRAY CREATEF 8 handle			// create with 8 elements
	ARRAY FILL handle 0.0
}
subcall GETANDINC32     // V
{
	IN_32 counterin
	IN_32 inc
	OUT_32 counterout
	OUT_32 prev

	MOVE32_32 counterin prev
	ADD32 counterin inc counterout
}
