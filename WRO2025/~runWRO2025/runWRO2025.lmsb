DATA16 FD_NATIVECODECOMMAND
DATA16 FD_NATIVECODERESPONSE
DATA32 STOPLCDUPDATE
DATA32 NUMMAILBOXES
ARRAY8 MOTORISINVERTED 4     
ARRAY8 FIRSTOF2  16
ARRAY16 LOCKS 2           
DATA32 s1out1
DATA32 s1out2
DATA32 s1out3
DATA32 s2out1
DATA32 s2out2
DATA32 s2out3
DATA32 s3out1
DATA32 s3out2
DATA32 s3out3
DATA32 s4out1
DATA32 s4out2
DATA32 s4out3
DATA32 getTachoA
DATA32 tmpTachoA
DATA8 getSpeedA
DATA8 setSpeedA
DATA8 setPowerA
DATA32 getTachoB
DATA32 tmpTachoB
DATA8 getSpeedB
DATA8 setSpeedB
DATA8 setPowerB
DATA32 getTachoC
DATA32 tmpTachoC
DATA8 getSpeedC
DATA8 setSpeedC
DATA8 setPowerC
DATA32 getTachoD
DATA32 tmpTachoD
DATA8 getSpeedD
DATA8 setSpeedD
DATA8 setPowerD
DATA16 newArray1d
DATA32 newSize1d
DATA32 newIndex1d
DATA32 timeMC1
DATA32 timeMC2
DATA32 timeMC3
DATA32 timeMC4
DATA32 timeMC5
DATA32 timeMC6
DATA32 timeMC7
DATA32 timeMC8
DATA32 timeMC9
DATA32 timeMC1tmp
DATA32 timeMC2tmp
DATA32 timeMC3tmp
DATA32 timeMC4tmp
DATA32 timeMC5tmp
DATA32 timeMC6tmp
DATA32 timeMC7tmp
DATA32 timeMC8tmp
DATA32 timeMC9tmp
DATAF VPR_GIRO_G1
DATAF VPR_RGB_VALUENEGRO
DATAF VPR_RGB_VALUEBLANCO
DATAF VPR_RGB_RWHITE
DATAF VPR_RGB_GWHITE
DATAF VPR_RGB_BWHITE
DATAF VPR_RECTO_DIAMETRO
DATAF VPR_GIRO_DIAMETRO
DATAF VPR_SIGUELINEAS_DIAMETRO
DATAF VPR_SMART_DIAMETRO
DATAF VPR_SIGUELINEAS_NEGRO1
DATAF VPR_SIGUELINEAS_NEGRO3
DATAF VPR_SIGUELINEAS_NEGRO4
DATAF VPR_SIGUELINEAS_BLANCO1
DATAF VPR_SIGUELINEAS_BLANCO3
DATAF VPR_SIGUELINEAS_BLANCO4
DATAF VPR_SMART_NEGRO1
DATAF VPR_SMART_NEGRO3
DATAF VPR_SMART_NEGRO4
DATAF VPR_SMART_BLANCO1
DATAF VPR_SMART_BLANCO3
DATAF VPR_SMART_BLANCO4
DATAF VPR_RECTO_NEGRO
DATAF VPR_RECTO_BLANCO
DATAF VPR_GIRO_NEGRO
DATAF VPR_GIRO_BLANCO
DATAF VLV_VELOCIDAD_11
DATAF VLV_TIMER_11
DATAF VLV_VELOCIDAD_12
DATAF VLV_ENCODER_12
DATAF VLV_VELOCIDAD_14
DATAF VLV_DISTANCIA_14
DATAF VLV_VELOCIDAD_21
DATAF VLV_ENCODER_21
DATAF VLV_VELOCIDAD1_28
DATAF VLV_VELOCIDAD2_28
DATAF VLV_GRADOS_28
DATAF VLV_VELOCIDAD_15
DATAF VLV_SENSOR_15
DATAF VLV_VELOCIDAD_22
DATAF VLV_VELOCIDAD_23
DATAF VLV_ENCODER_23
DATAF VLV_VELOCIDAD_16
DATAF VLV_DISTANCIA_16
DATAF VLV_SENS_32
DATAF VLV_REPS_32
DATAF VLV_COLOR_32
DATAF VLV_VELOCIDAD_17
DATAF VLV_TIEMPO_17
DATAF VLV_VELOCIDAD1_29
DATAF VLV_VELOCIDAD2_29
DATAF VLV_SENS_29
DATAF VLV_VELOCIDAD_24
DATAF VLV_ENCODER_24
DATAF VLV_VELOCIDAD1_30
DATAF VLV_VELOCIDAD2_30
DATAF VLV_DISTANCIA_30
DATAF VLV_VELOCIDAD_25
DATAF VLV_READER_25
DATAF VLV_VELOCIDAD1_31
DATAF VLV_VELOCIDAD2_31
DATAF VLV_SENS_31
DATAF VLV_VELOCIDAD_26
DATAF VLV_READER_26
DATAF VLV_VELOCIDAD_18
DATAF VLV_SENSOR_18
ARRAY16 VLV_MARKING_8 2
DATAF VLV_VELOCIDAD_19
DATAF VLV_SENSOR_19
DATAF VLV_VELOCIDAD_20
DATAF VLV_SENSOR_20
DATAF VLV_VELOCIDAD_27
DATAF VLV_ENCODER_27
DATAF VLV_COLOR_33
DATAF VLV_NUMERO_2
DATAF VLV_VELOCIDAD_13
DATAF VLV_TIMER_13
ARRAY16 VLV_MARKING_6 2
DATAS VLV_CODIGO_6 252
DATAF VLV_GRADOS_7
DATAF VGV_MARKINGGRANDE
DATAS VLV_CODIGO_8 252
DATAF VGV_DIAMETRO
DATAF VGV_NEGRO1
DATAF VGV_NEGRO3
DATAF VGV_NEGRO4
DATAF VGV_BLANCO1
DATAF VGV_BLANCO3
DATAF VGV_BLANCO4
DATAF VGV_COLOR
ARRAY16 VGV_MARKING 2
DATAF VLV_VOLTAJE_1
DATAF VLV_AUX_6
DATAF VLV_I_6
DATAF VLV_SIGNO_7
DATAF VLV_ENCDIFF_12
DATAF VLV_SIGNO_12
DATAF VLV_SAFETYTIMER_12
DATAF VLV_SAFETYTIMER_14
DATAF VLV_CORRECCION_14
DATAF VLV_ENC_14
DATAF VLV_CORRECCION_15
DATAF VLV_LECTURA_15
DATAF VLV_SAFETYTIMER_16
DATAF VLV_CORRECCION_16
DATAF VLV_ENC_16
DATAF VLV_CORRECCION_17
DATAF VLV_CORRECCION_18
DATAF VLV_LECTURA_18
DATAF VLV_CORRECCION_19
DATAF VLV_LECTURA_19
DATAF VLV_CORRECCION_20
DATAF VLV_LECTURA_20
DATAF VLV_LECTURA1_21
DATAF VLV_LECTURA3_21
DATAF VLV_LECTURA4_21
DATAF VLV_KP_21
DATAF VLV_KD_21
DATAF VLV_ERROR_21
DATAF VLV_OLDERROR_21
DATAF VLV_U_21
DATAF VLV_SENTIDO_21
DATAF VLV_STARTC_21
DATAF VLV_ENCODERC_21
DATAF VLV_SAFETYTIMER_21
DATAF VLV_LECTURA1_22
DATAF VLV_LECTURA3_22
DATAF VLV_LECTURA4_22
DATAF VLV_KP_22
DATAF VLV_KD_22
DATAF VLV_ERROR_22
DATAF VLV_OLDERROR_22
DATAF VLV_U_22
DATAF VLV_SENTIDO_22
DATAF VLV_LECTURA1_23
DATAF VLV_LECTURA3_23
DATAF VLV_LECTURA4_23
DATAF VLV_KP_23
DATAF VLV_KD_23
DATAF VLV_ERROR_23
DATAF VLV_OLDERROR_23
DATAF VLV_U_23
DATAF VLV_SENTIDO_23
DATAF VLV_STARTC_23
DATAF VLV_ENCODERC_23
DATAF VLV_SAFETYTIMER_23
DATAF VLV_LECTURA1_24
DATAF VLV_LECTURA3_24
DATAF VLV_LECTURA4_24
DATAF VLV_KP_24
DATAF VLV_KD_24
DATAF VLV_ERROR_24
DATAF VLV_OLDERROR_24
DATAF VLV_U_24
DATAF VLV_SENTIDO_24
DATAF VLV_STARTC_24
DATAF VLV_ENCODERC_24
DATAF VLV_SAFETYTIMER_24
DATAF VLV_LECTURA1_25
DATAF VLV_LECTURA3_25
DATAF VLV_LECTURA4_25
DATAF VLV_KP_25
DATAF VLV_KD_25
DATAF VLV_ERROR_25
DATAF VLV_OLDERROR_25
DATAF VLV_U_25
DATAF VLV_SENTIDO_25
DATAF VLV_LECTURA_25
DATAF VLV_LECTURAIZQ_25
DATAF VLV_LECTURADCH_25
DATAF VLV_LECTURA1_26
DATAF VLV_LECTURA3_26
DATAF VLV_LECTURA4_26
DATAF VLV_KP_26
DATAF VLV_KD_26
DATAF VLV_ERROR_26
DATAF VLV_OLDERROR_26
DATAF VLV_U_26
DATAF VLV_SENTIDO_26
DATAF VLV_LECTURA_26
DATAF VLV_LECTURAIZQ_26
DATAF VLV_LECTURADCH_26
DATAF VLV_LECTURA1_27
DATAF VLV_LECTURA3_27
DATAF VLV_LECTURA4_27
DATAF VLV_KP_27
DATAF VLV_KD_27
DATAF VLV_ERROR_27
DATAF VLV_OLDERROR_27
DATAF VLV_U_27
DATAF VLV_SENTIDO_27
DATAF VLV_STARTC_27
DATAF VLV_ENCODERC_27
DATAF VLV_SAFETYTIMER_27
DATAF VLV_SIGNO_28
DATAF VLV_VMIN_28
DATAF VLV_VMAX_28
DATAF VLV_ENCODER_28
DATAF VLV_LECTURA_29
DATAF VLV_ENCODER_30
DATAF VLV_LECTURA_31
DATAF VLV_SENS_MODE_32
DATAF VLV_RED_32
DATAF VLV_YELLOW_32
DATAF VLV_GREEN_32
DATAF VLV_BLUE_32
DATAF VLV_HUE_32
DATAF VLV_SAT_32
DATAF VLV_VALUE_32
ARRAY16 VLV_RNORMARRAY_32 2
ARRAY16 VLV_GNORMARRAY_32 2
ARRAY16 VLV_BNORMARRAY_32 2
DATAF VLV_J_32
ARRAY16 VLV_RGB_32 2
DATAF VLV_RRAW_32
DATAF VLV_GRAW_32
DATAF VLV_BRAW_32
DATAF VLV_RNORM_32
DATAF VLV_GNORM_32
DATAF VLV_BNORM_32
DATAF VLV_MAX_32
DATAF VLV_MIN_32
DATAF VLV_RGBGREY_32
DATA32 RUNCOUNTER_F_GRITARCOLOR_0

vmthread MAIN
{
    MOVE32_32 0 STOPLCDUPDATE
    MOVE32_32 0 NUMMAILBOXES
    OUTPUT_RESET 0 15

	WRITE8 0 0 MOTORISINVERTED
	WRITE8 0 1 MOTORISINVERTED
	WRITE8 0 2 MOTORISINVERTED
	WRITE8 0 3 MOTORISINVERTED
	WRITE8 0 0 FIRSTOF2
	WRITE8 0 1 FIRSTOF2
	WRITE8 0 2 FIRSTOF2
	WRITE8 1 3 FIRSTOF2
	WRITE8 0 4 FIRSTOF2
	WRITE8 1 5 FIRSTOF2
	WRITE8 2 6 FIRSTOF2
	WRITE8 0 7 FIRSTOF2
	WRITE8 0 8 FIRSTOF2
	WRITE8 1 9 FIRSTOF2
	WRITE8 2 10 FIRSTOF2
	WRITE8 0 11 FIRSTOF2
	WRITE8 4 12 FIRSTOF2
	WRITE8 0 13 FIRSTOF2
	WRITE8 0 14 FIRSTOF2
	WRITE8 0 15 FIRSTOF2
    INPUT_DEVICE CLR_ALL -1
    ARRAY CREATE8 0 LOCKS
    MOVE32_32 0 s1out1
	MOVE32_32 0 s1out2
	MOVE32_32 0 s1out3
    MOVE32_32 0 s2out1
	MOVE32_32 0 s2out2
	MOVE32_32 0 s2out3
    MOVE32_32 0 s3out1
	MOVE32_32 0 s3out2
	MOVE32_32 0 s3out3
    MOVE32_32 0 s4out1
	MOVE32_32 0 s4out2
	MOVE32_32 0 s4out3
    MOVE32_32 0 timeMC1
	MOVE32_32 0 timeMC2
	MOVE32_32 0 timeMC3
	MOVE32_32 0 timeMC4
	MOVE32_32 0 timeMC5
	MOVE32_32 0 timeMC6
	MOVE32_32 0 timeMC7
	MOVE32_32 0 timeMC8
	MOVE32_32 0 timeMC9
    MOVEF_F 0.0 VPR_GIRO_G1
    MOVEF_F 0.0 VPR_RGB_VALUENEGRO
    MOVEF_F 0.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 0.0 VPR_RGB_RWHITE
    MOVEF_F 0.0 VPR_RGB_GWHITE
    MOVEF_F 0.0 VPR_RGB_BWHITE
    MOVEF_F 0.0 VPR_RECTO_DIAMETRO
    MOVEF_F 0.0 VPR_GIRO_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F 0.0 VPR_SMART_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F 0.0 VPR_SMART_NEGRO1
    MOVEF_F 0.0 VPR_SMART_NEGRO3
    MOVEF_F 0.0 VPR_SMART_NEGRO4
    MOVEF_F 0.0 VPR_SMART_BLANCO1
    MOVEF_F 0.0 VPR_SMART_BLANCO3
    MOVEF_F 0.0 VPR_SMART_BLANCO4
    MOVEF_F 0.0 VPR_RECTO_NEGRO
    MOVEF_F 0.0 VPR_RECTO_BLANCO
    MOVEF_F 0.0 VPR_GIRO_NEGRO
    MOVEF_F 0.0 VPR_GIRO_BLANCO
    MOVEF_F 0.0 VLV_VELOCIDAD_11
    MOVEF_F 0.0 VLV_TIMER_11
    MOVEF_F 0.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_ENCODER_12
    MOVEF_F 0.0 VLV_VELOCIDAD_14
    MOVEF_F 0.0 VLV_DISTANCIA_14
    MOVEF_F 0.0 VLV_VELOCIDAD_21
    MOVEF_F 0.0 VLV_ENCODER_21
    MOVEF_F 0.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 0.0 VLV_GRADOS_28
    MOVEF_F 0.0 VLV_VELOCIDAD_15
    MOVEF_F 0.0 VLV_SENSOR_15
    MOVEF_F 0.0 VLV_VELOCIDAD_22
    MOVEF_F 0.0 VLV_VELOCIDAD_23
    MOVEF_F 0.0 VLV_ENCODER_23
    MOVEF_F 0.0 VLV_VELOCIDAD_16
    MOVEF_F 0.0 VLV_DISTANCIA_16
    MOVEF_F 0.0 VLV_SENS_32
    MOVEF_F 0.0 VLV_REPS_32
    MOVEF_F 0.0 VLV_COLOR_32
    MOVEF_F 0.0 VLV_VELOCIDAD_17
    MOVEF_F 0.0 VLV_TIEMPO_17
    MOVEF_F 0.0 VLV_VELOCIDAD1_29
    MOVEF_F 0.0 VLV_VELOCIDAD2_29
    MOVEF_F 0.0 VLV_SENS_29
    MOVEF_F 0.0 VLV_VELOCIDAD_24
    MOVEF_F 0.0 VLV_ENCODER_24
    MOVEF_F 0.0 VLV_VELOCIDAD1_30
    MOVEF_F 0.0 VLV_VELOCIDAD2_30
    MOVEF_F 0.0 VLV_DISTANCIA_30
    MOVEF_F 0.0 VLV_VELOCIDAD_25
    MOVEF_F 0.0 VLV_READER_25
    MOVEF_F 0.0 VLV_VELOCIDAD1_31
    MOVEF_F 0.0 VLV_VELOCIDAD2_31
    MOVEF_F 0.0 VLV_SENS_31
    MOVEF_F 0.0 VLV_VELOCIDAD_26
    MOVEF_F 0.0 VLV_READER_26
    MOVEF_F 0.0 VLV_VELOCIDAD_18
    MOVEF_F 0.0 VLV_SENSOR_18
    CALL ARRAYCREATE_FLOAT VLV_MARKING_8
    MOVEF_F 0.0 VLV_VELOCIDAD_19
    MOVEF_F 0.0 VLV_SENSOR_19
    MOVEF_F 0.0 VLV_VELOCIDAD_20
    MOVEF_F 0.0 VLV_SENSOR_20
    MOVEF_F 0.0 VLV_VELOCIDAD_27
    MOVEF_F 0.0 VLV_ENCODER_27
    MOVEF_F 0.0 VLV_COLOR_33
    MOVEF_F 0.0 VLV_NUMERO_2
    MOVEF_F 0.0 VLV_VELOCIDAD_13
    MOVEF_F 0.0 VLV_TIMER_13
    CALL ARRAYCREATE_FLOAT VLV_MARKING_6
    STRINGS DUPLICATE '' VLV_CODIGO_6
    MOVEF_F 0.0 VLV_GRADOS_7
    MOVEF_F 0.0 VGV_MARKINGGRANDE
    STRINGS DUPLICATE '' VLV_CODIGO_8
    MOVEF_F 0.0 VGV_DIAMETRO
    MOVEF_F 0.0 VGV_NEGRO1
    MOVEF_F 0.0 VGV_NEGRO3
    MOVEF_F 0.0 VGV_NEGRO4
    MOVEF_F 0.0 VGV_BLANCO1
    MOVEF_F 0.0 VGV_BLANCO3
    MOVEF_F 0.0 VGV_BLANCO4
    MOVEF_F 0.0 VGV_COLOR
    CALL ARRAYCREATE_FLOAT VGV_MARKING
    MOVEF_F 0.0 VLV_VOLTAJE_1
    MOVEF_F 0.0 VLV_AUX_6
    MOVEF_F 0.0 VLV_I_6
    MOVEF_F 0.0 VLV_SIGNO_7
    MOVEF_F 0.0 VLV_ENCDIFF_12
    MOVEF_F 0.0 VLV_SIGNO_12
    MOVEF_F 0.0 VLV_SAFETYTIMER_12
    MOVEF_F 0.0 VLV_SAFETYTIMER_14
    MOVEF_F 0.0 VLV_CORRECCION_14
    MOVEF_F 0.0 VLV_ENC_14
    MOVEF_F 0.0 VLV_CORRECCION_15
    MOVEF_F 0.0 VLV_LECTURA_15
    MOVEF_F 0.0 VLV_SAFETYTIMER_16
    MOVEF_F 0.0 VLV_CORRECCION_16
    MOVEF_F 0.0 VLV_ENC_16
    MOVEF_F 0.0 VLV_CORRECCION_17
    MOVEF_F 0.0 VLV_CORRECCION_18
    MOVEF_F 0.0 VLV_LECTURA_18
    MOVEF_F 0.0 VLV_CORRECCION_19
    MOVEF_F 0.0 VLV_LECTURA_19
    MOVEF_F 0.0 VLV_CORRECCION_20
    MOVEF_F 0.0 VLV_LECTURA_20
    MOVEF_F 0.0 VLV_LECTURA1_21
    MOVEF_F 0.0 VLV_LECTURA3_21
    MOVEF_F 0.0 VLV_LECTURA4_21
    MOVEF_F 0.0 VLV_KP_21
    MOVEF_F 0.0 VLV_KD_21
    MOVEF_F 0.0 VLV_ERROR_21
    MOVEF_F 0.0 VLV_OLDERROR_21
    MOVEF_F 0.0 VLV_U_21
    MOVEF_F 0.0 VLV_SENTIDO_21
    MOVEF_F 0.0 VLV_STARTC_21
    MOVEF_F 0.0 VLV_ENCODERC_21
    MOVEF_F 0.0 VLV_SAFETYTIMER_21
    MOVEF_F 0.0 VLV_LECTURA1_22
    MOVEF_F 0.0 VLV_LECTURA3_22
    MOVEF_F 0.0 VLV_LECTURA4_22
    MOVEF_F 0.0 VLV_KP_22
    MOVEF_F 0.0 VLV_KD_22
    MOVEF_F 0.0 VLV_ERROR_22
    MOVEF_F 0.0 VLV_OLDERROR_22
    MOVEF_F 0.0 VLV_U_22
    MOVEF_F 0.0 VLV_SENTIDO_22
    MOVEF_F 0.0 VLV_LECTURA1_23
    MOVEF_F 0.0 VLV_LECTURA3_23
    MOVEF_F 0.0 VLV_LECTURA4_23
    MOVEF_F 0.0 VLV_KP_23
    MOVEF_F 0.0 VLV_KD_23
    MOVEF_F 0.0 VLV_ERROR_23
    MOVEF_F 0.0 VLV_OLDERROR_23
    MOVEF_F 0.0 VLV_U_23
    MOVEF_F 0.0 VLV_SENTIDO_23
    MOVEF_F 0.0 VLV_STARTC_23
    MOVEF_F 0.0 VLV_ENCODERC_23
    MOVEF_F 0.0 VLV_SAFETYTIMER_23
    MOVEF_F 0.0 VLV_LECTURA1_24
    MOVEF_F 0.0 VLV_LECTURA3_24
    MOVEF_F 0.0 VLV_LECTURA4_24
    MOVEF_F 0.0 VLV_KP_24
    MOVEF_F 0.0 VLV_KD_24
    MOVEF_F 0.0 VLV_ERROR_24
    MOVEF_F 0.0 VLV_OLDERROR_24
    MOVEF_F 0.0 VLV_U_24
    MOVEF_F 0.0 VLV_SENTIDO_24
    MOVEF_F 0.0 VLV_STARTC_24
    MOVEF_F 0.0 VLV_ENCODERC_24
    MOVEF_F 0.0 VLV_SAFETYTIMER_24
    MOVEF_F 0.0 VLV_LECTURA1_25
    MOVEF_F 0.0 VLV_LECTURA3_25
    MOVEF_F 0.0 VLV_LECTURA4_25
    MOVEF_F 0.0 VLV_KP_25
    MOVEF_F 0.0 VLV_KD_25
    MOVEF_F 0.0 VLV_ERROR_25
    MOVEF_F 0.0 VLV_OLDERROR_25
    MOVEF_F 0.0 VLV_U_25
    MOVEF_F 0.0 VLV_SENTIDO_25
    MOVEF_F 0.0 VLV_LECTURA_25
    MOVEF_F 0.0 VLV_LECTURAIZQ_25
    MOVEF_F 0.0 VLV_LECTURADCH_25
    MOVEF_F 0.0 VLV_LECTURA1_26
    MOVEF_F 0.0 VLV_LECTURA3_26
    MOVEF_F 0.0 VLV_LECTURA4_26
    MOVEF_F 0.0 VLV_KP_26
    MOVEF_F 0.0 VLV_KD_26
    MOVEF_F 0.0 VLV_ERROR_26
    MOVEF_F 0.0 VLV_OLDERROR_26
    MOVEF_F 0.0 VLV_U_26
    MOVEF_F 0.0 VLV_SENTIDO_26
    MOVEF_F 0.0 VLV_LECTURA_26
    MOVEF_F 0.0 VLV_LECTURAIZQ_26
    MOVEF_F 0.0 VLV_LECTURADCH_26
    MOVEF_F 0.0 VLV_LECTURA1_27
    MOVEF_F 0.0 VLV_LECTURA3_27
    MOVEF_F 0.0 VLV_LECTURA4_27
    MOVEF_F 0.0 VLV_KP_27
    MOVEF_F 0.0 VLV_KD_27
    MOVEF_F 0.0 VLV_ERROR_27
    MOVEF_F 0.0 VLV_OLDERROR_27
    MOVEF_F 0.0 VLV_U_27
    MOVEF_F 0.0 VLV_SENTIDO_27
    MOVEF_F 0.0 VLV_STARTC_27
    MOVEF_F 0.0 VLV_ENCODERC_27
    MOVEF_F 0.0 VLV_SAFETYTIMER_27
    MOVEF_F 0.0 VLV_SIGNO_28
    MOVEF_F 0.0 VLV_VMIN_28
    MOVEF_F 0.0 VLV_VMAX_28
    MOVEF_F 0.0 VLV_ENCODER_28
    MOVEF_F 0.0 VLV_LECTURA_29
    MOVEF_F 0.0 VLV_ENCODER_30
    MOVEF_F 0.0 VLV_LECTURA_31
    MOVEF_F 0.0 VLV_SENS_MODE_32
    MOVEF_F 0.0 VLV_RED_32
    MOVEF_F 0.0 VLV_YELLOW_32
    MOVEF_F 0.0 VLV_GREEN_32
    MOVEF_F 0.0 VLV_BLUE_32
    MOVEF_F 0.0 VLV_HUE_32
    MOVEF_F 0.0 VLV_SAT_32
    MOVEF_F 0.0 VLV_VALUE_32
    CALL ARRAYCREATE_FLOAT VLV_RNORMARRAY_32
    CALL ARRAYCREATE_FLOAT VLV_GNORMARRAY_32
    CALL ARRAYCREATE_FLOAT VLV_BNORMARRAY_32
    MOVEF_F 0.0 VLV_J_32
    CALL ARRAYCREATE_FLOAT VLV_RGB_32
    MOVEF_F 0.0 VLV_RRAW_32
    MOVEF_F 0.0 VLV_GRAW_32
    MOVEF_F 0.0 VLV_BRAW_32
    MOVEF_F 0.0 VLV_RNORM_32
    MOVEF_F 0.0 VLV_GNORM_32
    MOVEF_F 0.0 VLV_BNORM_32
    MOVEF_F 0.0 VLV_MAX_32
    MOVEF_F 0.0 VLV_MIN_32
    MOVEF_F 0.0 VLV_RGBGREY_32
    MOVE32_32 0 RUNCOUNTER_F_GRITARCOLOR_0
    ARRAY CREATE8 1 LOCKS
    CALL PROGRAM_MAIN -1
    PROGRAM_STOP -1
}
vmthread TF_GRITARCOLOR_0
{
    DATA32 tmp
  launch:
    CALL PROGRAM_F_GRITARCOLOR_0 0
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 -1 RUNCOUNTER_F_GRITARCOLOR_0 tmp
    JR_GT32 tmp 1 launch
}
subcall PROGRAM_MAIN
subcall PROGRAM_F_GRITARCOLOR_0
{
    IN_32 SUBPROGRAM
    DATA32 INDEX
    ARRAY8 STACKPOINTER 4
    DATAF F.0
    DATAF F.1
    DATAF F.2
    DATAF F.3
    DATAF F.4
    ARRAY32 RETURNSTACK2 128
    ARRAY32 RETURNSTACK 128
    DATAS S.0 252
    DATAS S.1 252
    MOVE8_8 0 STACKPOINTER
    JR_NEQ32 SUBPROGRAM 0 dispatch1032
    WRITE32 ENDSUB_F_GRITARCOLOR_0:ENDTHREAD STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARCOLOR_0
  dispatch1032:
    MOVEF_F 0.0 VPR_GIRO_G1
    MOVEF_F 0.0 VPR_RGB_VALUENEGRO
    MOVEF_F 0.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 0.0 VPR_RGB_RWHITE
    MOVEF_F 0.0 VPR_RGB_GWHITE
    MOVEF_F 0.0 VPR_RGB_BWHITE
    MOVEF_F 0.0 VPR_RECTO_DIAMETRO
    MOVEF_F 0.0 VPR_GIRO_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F 0.0 VPR_SMART_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F 0.0 VPR_SMART_NEGRO1
    MOVEF_F 0.0 VPR_SMART_NEGRO3
    MOVEF_F 0.0 VPR_SMART_NEGRO4
    MOVEF_F 0.0 VPR_SMART_BLANCO1
    MOVEF_F 0.0 VPR_SMART_BLANCO3
    MOVEF_F 0.0 VPR_SMART_BLANCO4
    MOVEF_F 0.0 VPR_RECTO_NEGRO
    MOVEF_F 0.0 VPR_RECTO_BLANCO
    MOVEF_F 0.0 VPR_GIRO_NEGRO
    MOVEF_F 0.0 VPR_GIRO_BLANCO
    MOVEF_F 0.0 VLV_VELOCIDAD_11
    MOVEF_F 0.0 VLV_TIMER_11
    MOVEF_F 0.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_ENCODER_12
    MOVEF_F 0.0 VLV_VELOCIDAD_14
    MOVEF_F 0.0 VLV_DISTANCIA_14
    MOVEF_F 0.0 VLV_VELOCIDAD_21
    MOVEF_F 0.0 VLV_ENCODER_21
    MOVEF_F 0.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 0.0 VLV_GRADOS_28
    MOVEF_F 0.0 VLV_VELOCIDAD_15
    MOVEF_F 0.0 VLV_SENSOR_15
    MOVEF_F 0.0 VLV_VELOCIDAD_22
    MOVEF_F 0.0 VLV_VELOCIDAD_23
    MOVEF_F 0.0 VLV_ENCODER_23
    MOVEF_F 0.0 VLV_VELOCIDAD_16
    MOVEF_F 0.0 VLV_DISTANCIA_16
    MOVEF_F 0.0 VLV_SENS_32
    MOVEF_F 0.0 VLV_REPS_32
    MOVEF_F 0.0 VLV_COLOR_32
    MOVEF_F 0.0 VLV_VELOCIDAD_17
    MOVEF_F 0.0 VLV_TIEMPO_17
    MOVEF_F 0.0 VLV_VELOCIDAD1_29
    MOVEF_F 0.0 VLV_VELOCIDAD2_29
    MOVEF_F 0.0 VLV_SENS_29
    MOVEF_F 0.0 VLV_VELOCIDAD_24
    MOVEF_F 0.0 VLV_ENCODER_24
    MOVEF_F 0.0 VLV_VELOCIDAD1_30
    MOVEF_F 0.0 VLV_VELOCIDAD2_30
    MOVEF_F 0.0 VLV_DISTANCIA_30
    MOVEF_F 0.0 VLV_VELOCIDAD_25
    MOVEF_F 0.0 VLV_READER_25
    MOVEF_F 0.0 VLV_VELOCIDAD1_31
    MOVEF_F 0.0 VLV_VELOCIDAD2_31
    MOVEF_F 0.0 VLV_SENS_31
    MOVEF_F 0.0 VLV_VELOCIDAD_26
    MOVEF_F 0.0 VLV_READER_26
    MOVEF_F 0.0 VLV_VELOCIDAD_18
    MOVEF_F 0.0 VLV_SENSOR_18
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_MARKING_8
    MOVEF_F 0.0 VLV_VELOCIDAD_19
    MOVEF_F 0.0 VLV_SENSOR_19
    MOVEF_F 0.0 VLV_VELOCIDAD_20
    MOVEF_F 0.0 VLV_SENSOR_20
    MOVEF_F 0.0 VLV_VELOCIDAD_27
    MOVEF_F 0.0 VLV_ENCODER_27
    MOVEF_F 0.0 VLV_COLOR_33
    MOVEF_F 0.0 VLV_NUMERO_2
    MOVEF_F 0.0 VLV_VELOCIDAD_13
    MOVEF_F 0.0 VLV_TIMER_13
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_MARKING_6
    STRINGS DUPLICATE '' VLV_CODIGO_6
    MOVEF_F 0.0 VLV_GRADOS_7
    MOVEF_F 0.0 VGV_MARKINGGRANDE
    STRINGS DUPLICATE '' VLV_CODIGO_8
    MOVEF_F 0.0 VGV_DIAMETRO
    MOVEF_F 0.0 VGV_NEGRO1
    MOVEF_F 0.0 VGV_NEGRO3
    MOVEF_F 0.0 VGV_NEGRO4
    MOVEF_F 0.0 VGV_BLANCO1
    MOVEF_F 0.0 VGV_BLANCO3
    MOVEF_F 0.0 VGV_BLANCO4
    MOVEF_F 0.0 VGV_COLOR
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VGV_MARKING
    WRITE32 ENDSUB_F_SETUP_0:CALLSUB3 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SETUP_0
CALLSUB3:
    WRITE32 ENDSUB_F_MAIN_0:CALLSUB4 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_MAIN_0
CALLSUB4:
ENDTHREAD:
    RETURN
SUB_F_SETUP_0:
    DATA8 layer5
	DATA8 no5
	DATA8 mode85
	
	MOVEF_8 1.0 no5
	SUB8 no5 1 no5
	DIV8 no5 4 layer5
	MATH MOD8 no5 4 no5

	MOVEF_8 0.0 mode85
	
	INPUT_DEVICE READY_RAW layer5 no5 0 mode85 0
    DATA8 layer6
	DATA8 no6
	DATA8 mode86
	
	MOVEF_8 2.0 no6
	SUB8 no6 1 no6
	DIV8 no6 4 layer6
	MATH MOD8 no6 4 no6

	MOVEF_8 4.0 mode86
	
	INPUT_DEVICE READY_RAW layer6 no6 0 mode86 0
    DATA8 layer7
	DATA8 no7
	DATA8 mode87
	
	MOVEF_8 3.0 no7
	SUB8 no7 1 no7
	DIV8 no7 4 layer7
	MATH MOD8 no7 4 no7

	MOVEF_8 0.0 mode87
	
	INPUT_DEVICE READY_RAW layer7 no7 0 mode87 0
    DATA8 layer8
	DATA8 no8
	DATA8 mode88
	
	MOVEF_8 4.0 no8
	SUB8 no8 1 no8
	DIV8 no8 4 layer8
	MATH MOD8 no8 4 no8

	MOVEF_8 0.0 mode88
	
	INPUT_DEVICE READY_RAW layer8 no8 0 mode88 0
    MOVEF_F 6.24 VGV_DIAMETRO
    MOVEF_F 2.68055555555556 VPR_GIRO_G1
    MOVEF_F 10.0 VGV_NEGRO1
    MOVEF_F 9.0 VGV_NEGRO3
    MOVEF_F 8.0 VGV_NEGRO4
    MOVEF_F 65.0 VGV_BLANCO1
    MOVEF_F 59.0 VGV_BLANCO3
    MOVEF_F 55.0 VGV_BLANCO4
    MOVEF_F 4.0 VPR_RGB_VALUENEGRO
    MOVEF_F 32.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 57.0 VPR_RGB_RWHITE
    MOVEF_F 71.0 VPR_RGB_GWHITE
    MOVEF_F 73.0 VPR_RGB_BWHITE
    MOVEF_F VGV_DIAMETRO VPR_RECTO_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_GIRO_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_SMART_DIAMETRO
    MOVEF_F VGV_NEGRO1 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F VGV_NEGRO3 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F VGV_NEGRO4 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F VGV_BLANCO1 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F VGV_BLANCO3 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F VGV_BLANCO4 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F VGV_NEGRO1 VPR_SMART_NEGRO1
    MOVEF_F VGV_NEGRO3 VPR_SMART_NEGRO3
    MOVEF_F VGV_NEGRO4 VPR_SMART_NEGRO4
    MOVEF_F VGV_BLANCO1 VPR_SMART_BLANCO1
    MOVEF_F VGV_BLANCO3 VPR_SMART_BLANCO3
    MOVEF_F VGV_BLANCO4 VPR_SMART_BLANCO4
    ADDF VGV_NEGRO1 VGV_NEGRO3 F.1
    ADDF F.1 VGV_NEGRO4 F.0
    DATAF tmpf11
    DATA8 flag11
    DIVF F.0 3.0 tmpf11
    CP_EQF 0.0 3.0 flag11
    SELECTF flag11 0.0 tmpf11 VPR_RECTO_NEGRO

    ADDF VGV_BLANCO1 VGV_BLANCO3 F.1
    ADDF F.1 VGV_BLANCO4 F.0
    DATAF tmpf14
    DATA8 flag14
    DIVF F.0 3.0 tmpf14
    CP_EQF 0.0 3.0 flag14
    SELECTF flag14 0.0 tmpf14 VPR_RECTO_BLANCO

    ADDF VGV_NEGRO1 VGV_NEGRO3 F.1
    ADDF F.1 VGV_NEGRO4 F.0
    DATAF tmpf17
    DATA8 flag17
    DIVF F.0 3.0 tmpf17
    CP_EQF 0.0 3.0 flag17
    SELECTF flag17 0.0 tmpf17 VPR_GIRO_NEGRO

    ADDF VGV_BLANCO1 VGV_BLANCO3 F.1
    ADDF F.1 VGV_BLANCO4 F.0
    DATAF tmpf20
    DATA8 flag20
    DIVF F.0 3.0 tmpf20
    CP_EQF 0.0 3.0 flag20
    SELECTF flag20 0.0 tmpf20 VPR_GIRO_BLANCO

RETSUB_F_SETUP_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SETUP_0:
SUB_F_STARTARM_0:
    MOVEF_F 100.0 VLV_VELOCIDAD_11
    MOVEF_F 1000.0 VLV_TIMER_11
    WRITE32 ENDSUB_M_BRAZO_ATIMER_2:CALLSUB21 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_ATIMER_2
CALLSUB21:
    OUTPUT_CLR_COUNT 0 1
    DATA32 milliseconds23
	MOVEF_32 100.0 milliseconds23
	DATA32 timer23
	TIMER_WAIT milliseconds23 timer23
	TIMER_READY timer23
    MOVEF_F 35.0 VLV_VELOCIDAD_12
    MOVEF_F -200.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB24 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB24:
    OUTPUT_CLR_COUNT 0 1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Connect'
    SOUND_READY
RETSUB_F_STARTARM_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_STARTARM_0:
SUB_F_MAIN_0:
    WRITE32 ENDSUB_F_GRITARVOLTAJE_0:CALLSUB28 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARVOLTAJE_0
CALLSUB28:
    WRITE32 ENDSUB_F_STARTARM_0:CALLSUB29 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_STARTARM_0
CALLSUB29:
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/One'
    WRITE32 ENDSUB_F_S_0:CALLSUB31 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_S_0
CALLSUB31:
    DATA32 milliseconds32
	MOVEF_32 150.0 milliseconds32
	DATA32 timer32
	TIMER_WAIT milliseconds32 timer32
	TIMER_READY timer32
    MOVEF_F 35.0 VLV_VELOCIDAD_12
    MOVEF_F -300.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB33 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB33:
    MOVEF_F 50.0 VLV_VELOCIDAD_14
    MOVEF_F 5.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB34 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB34:
    MOVEF_F 50.0 VLV_VELOCIDAD_21
    MOVEF_F 23.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB35 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB35:
    MOVEF_F 10.0 VLV_VELOCIDAD1_28
    MOVEF_F 45.0 VLV_VELOCIDAD2_28
    MOVEF_F 61.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB36 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB36:
    CALL MOTOR.STOP 'BC' 'True'
    DATA32 milliseconds38
	MOVEF_32 200.0 milliseconds38
	DATA32 timer38
	TIMER_WAIT milliseconds38 timer38
	TIMER_READY timer38
    MOVEF_F 22.5 VLV_VELOCIDAD1_28
    MOVEF_F 5.0 VLV_VELOCIDAD2_28
    MOVEF_F 62.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB39 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB39:
    MOVEF_F 50.0 VLV_VELOCIDAD_14
    MOVEF_F 44.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB40 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB40:
    MOVEF_F 50.0 VLV_VELOCIDAD_15
    MOVEF_F 4.0 VLV_SENSOR_15
    WRITE32 ENDSUB_M_RECTO_NEGRO1_2:CALLSUB41 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1_2
CALLSUB41:
    MOVEF_F 40.0 VLV_VELOCIDAD1_28
    MOVEF_F -20.0 VLV_VELOCIDAD2_28
    MOVEF_F 90.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB42 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB42:
    MOVEF_F 40.0 VLV_VELOCIDAD_22
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE14_1:CALLSUB43 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE14_1
CALLSUB43:
    MOVEF_F 70.0 VLV_VELOCIDAD1_28
    MOVEF_F -62.0 VLV_VELOCIDAD2_28
    MOVEF_F 180.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB44 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB44:
    MOVEF_F 30.0 VLV_VELOCIDAD_23
    MOVEF_F 40.0 VLV_ENCODER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB45 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB45:
    MOVEF_F 30.0 VLV_VELOCIDAD_16
    MOVEF_F 9.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB46 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB46:
    MOVEF_F -30.0 VLV_VELOCIDAD1_28
    MOVEF_F 30.0 VLV_VELOCIDAD2_28
    MOVEF_F 90.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB47 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB47:
    MOVEF_F 20.0 VLV_VELOCIDAD_16
    MOVEF_F 14.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB48 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB48:
    MOVEF_F 20.0 VLV_VELOCIDAD1_28
    MOVEF_F -20.0 VLV_VELOCIDAD2_28
    MOVEF_F 90.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB49 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB49:
    DATA32 milliseconds50
	MOVEF_32 100.0 milliseconds50
	DATA32 timer50
	TIMER_WAIT milliseconds50 timer50
	TIMER_READY timer50
    MOVEF_F -40.0 VLV_VELOCIDAD_16
    MOVEF_F 2.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB51 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB51:
    MOVEF_F 2.0 VLV_SENS_32
    MOVEF_F 5.0 VLV_REPS_32
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB52 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB52:
    MOVEF_F VLV_COLOR_32 VGV_MARKINGGRANDE
    MOVEF_F VGV_MARKINGGRANDE VGV_COLOR
    DATA32 tmp53
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 1  RUNCOUNTER_F_GRITARCOLOR_0 tmp53
    JR_NEQ32 0 tmp53 alreadylaunched53
    OBJECT_START TF_GRITARCOLOR_0
  alreadylaunched53:
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VGV_MARKING
    MOVEF_F 40.0 VLV_VELOCIDAD1_28
    MOVEF_F 9.0 VLV_VELOCIDAD2_28
    MOVEF_F 41.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB55 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB55:
    MOVEF_F 9.0 VLV_VELOCIDAD1_28
    MOVEF_F 40.0 VLV_VELOCIDAD2_28
    MOVEF_F 39.5 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB56 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB56:
    MOVEF_F 20.0 VLV_VELOCIDAD_16
    MOVEF_F 16.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB57 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB57:
    MOVEF_F 2.0 VLV_SENS_32
    MOVEF_F 5.0 VLV_REPS_32
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB58 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB58:
    CALL ARRAYSTORE_FLOAT 1.0 VLV_COLOR_32 VGV_MARKING
    CALL ARRAYGET_FLOAT 1.0 VGV_COLOR VGV_MARKING
    DATA32 tmp61
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 1  RUNCOUNTER_F_GRITARCOLOR_0 tmp61
    JR_NEQ32 0 tmp61 alreadylaunched61
    OBJECT_START TF_GRITARCOLOR_0
  alreadylaunched61:
    MOVEF_F -30.0 VLV_VELOCIDAD_16
    MOVEF_F 5.8 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB62 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB62:
    MOVEF_F 30.0 VLV_VELOCIDAD1_28
    MOVEF_F -30.0 VLV_VELOCIDAD2_28
    MOVEF_F 90.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB63 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB63:
    MOVEF_F 30.0 VLV_VELOCIDAD_16
    MOVEF_F 8.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB64 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB64:
    MOVEF_F 30.0 VLV_VELOCIDAD1_28
    MOVEF_F -30.0 VLV_VELOCIDAD2_28
    MOVEF_F 92.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB65 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB65:
    MOVEF_F -20.0 VLV_VELOCIDAD_17
    MOVEF_F 500.0 VLV_TIEMPO_17
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB66 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB66:
    MOVEF_F 2.0 VLV_SENS_32
    MOVEF_F 5.0 VLV_REPS_32
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB67 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB67:
    CALL ARRAYSTORE_FLOAT 2.0 VLV_COLOR_32 VGV_MARKING
    CALL ARRAYGET_FLOAT 2.0 VGV_COLOR VGV_MARKING
    DATA32 tmp70
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 1  RUNCOUNTER_F_GRITARCOLOR_0 tmp70
    JR_NEQ32 0 tmp70 alreadylaunched70
    OBJECT_START TF_GRITARCOLOR_0
  alreadylaunched70:
    MOVEF_F 20.0 VLV_VELOCIDAD_16
    MOVEF_F 8.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB71 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB71:
    MOVEF_F 2.0 VLV_SENS_32
    MOVEF_F 5.0 VLV_REPS_32
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB72 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB72:
    CALL ARRAYSTORE_FLOAT 3.0 VLV_COLOR_32 VGV_MARKING
    CALL ARRAYGET_FLOAT 3.0 VGV_COLOR VGV_MARKING
    DATA32 tmp75
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 1  RUNCOUNTER_F_GRITARCOLOR_0 tmp75
    JR_NEQ32 0 tmp75 alreadylaunched75
    OBJECT_START TF_GRITARCOLOR_0
  alreadylaunched75:
    CALL ARRAYGET_FLOAT 1.0 F.3 VGV_MARKING
    CALL ARRAYGET_FLOAT 2.0 F.4 VGV_MARKING
    ADDF F.3 F.4 F.2
    CALL ARRAYGET_FLOAT 3.0 F.3 VGV_MARKING
    ADDF F.2 F.3 F.1
    SUBF 14.0 F.1 F.0
    CALL ARRAYSTORE_FLOAT 0.0 F.0 VGV_MARKING
    MOVEF_F 50.0 VLV_VELOCIDAD1_29
    MOVEF_F 42.0 VLV_VELOCIDAD2_29
    MOVEF_F 1.0 VLV_SENS_29
    WRITE32 ENDSUB_M_GIRO_NEGRO1F_3:CALLSUB83 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_NEGRO1F_3
CALLSUB83:
    MOVEF_F 5.0 VLV_VELOCIDAD1_29
    MOVEF_F 25.0 VLV_VELOCIDAD2_29
    MOVEF_F 4.0 VLV_SENS_29
    WRITE32 ENDSUB_M_GIRO_NEGRO1F_3:CALLSUB84 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_NEGRO1F_3
CALLSUB84:
    MOVEF_F 30.0 VLV_VELOCIDAD_24
    MOVEF_F 7.0 VLV_ENCODER_24
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB85 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB85:
    MOVEF_F 60.0 VLV_VELOCIDAD_22
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE14_1:CALLSUB86 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE14_1
CALLSUB86:
    MOVEF_F -35.0 VLV_VELOCIDAD1_28
    MOVEF_F 30.0 VLV_VELOCIDAD2_28
    MOVEF_F 86.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB87 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB87:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
    DATA32 milliseconds89
	MOVEF_32 100.0 milliseconds89
	DATA32 timer89
	TIMER_WAIT milliseconds89 timer89
	TIMER_READY timer89
    MOVEF_F 30.0 VLV_VELOCIDAD_21
    MOVEF_F 20.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB90 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB90:
    MOVEF_F 60.0 VLV_VELOCIDAD1_28
    MOVEF_F -40.0 VLV_VELOCIDAD2_28
    MOVEF_F 89.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB91 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB91:
    MOVEF_F -50.0 VLV_VELOCIDAD_14
    MOVEF_F 35.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB92 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB92:
    MOVEF_F -30.0 VLV_VELOCIDAD_16
    MOVEF_F 5.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB93 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB93:
    MOVEF_F 20.0 VLV_VELOCIDAD_12
    MOVEF_F 40.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB94 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB94:
    DATA32 milliseconds95
	MOVEF_32 200.0 milliseconds95
	DATA32 timer95
	TIMER_WAIT milliseconds95 timer95
	TIMER_READY timer95
    MOVEF_F 30.0 VLV_VELOCIDAD_14
    MOVEF_F 17.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB96 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB96:
    MOVEF_F 10.0 VLV_VELOCIDAD_17
    MOVEF_F 400.0 VLV_TIEMPO_17
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB97 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB97:
    MOVEF_F -20.0 VLV_VELOCIDAD_16
    MOVEF_F 3.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB98 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB98:
    MOVEF_F 20.0 VLV_VELOCIDAD_12
    MOVEF_F -310.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB99 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB99:
    MOVEF_F 30.0 VLV_VELOCIDAD1_30
    MOVEF_F 20.0 VLV_VELOCIDAD2_30
    MOVEF_F 13.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB100 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB100:
    MOVEF_F 20.0 VLV_VELOCIDAD1_30
    MOVEF_F 30.0 VLV_VELOCIDAD2_30
    MOVEF_F 13.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB101 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB101:
    MOVEF_F 20.0 VLV_VELOCIDAD_15
    MOVEF_F 1.0 VLV_SENSOR_15
    WRITE32 ENDSUB_M_RECTO_NEGRO1_2:CALLSUB102 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1_2
CALLSUB102:
    MOVEF_F -8.0 VLV_VELOCIDAD1_28
    MOVEF_F 20.0 VLV_VELOCIDAD2_28
    MOVEF_F 85.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB103 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB103:
    MOVEF_F 15.0 VLV_VELOCIDAD_21
    MOVEF_F 10.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB104 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB104:
    MOVEF_F 15.0 VLV_VELOCIDAD_25
    MOVEF_F 3.0 VLV_READER_25
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB105 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB105:
    DATA32 milliseconds106
	MOVEF_32 400.0 milliseconds106
	DATA32 timer106
	TIMER_WAIT milliseconds106 timer106
	TIMER_READY timer106
    MOVEF_F 30.0 VLV_VELOCIDAD1_30
    MOVEF_F 26.0 VLV_VELOCIDAD2_30
    MOVEF_F 12.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB107 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB107:
    MOVEF_F 27.0 VLV_VELOCIDAD1_30
    MOVEF_F 30.0 VLV_VELOCIDAD2_30
    MOVEF_F 11.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB108 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB108:
    MOVEF_F 12.0 VLV_VELOCIDAD_16
    MOVEF_F 5.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB109 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB109:
    MOVEF_F -10.0 VLV_VELOCIDAD_16
    MOVEF_F 5.25 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB110 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB110:
    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB111 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB111:
    DATA32 milliseconds112
	MOVEF_32 400.0 milliseconds112
	DATA32 timer112
	TIMER_WAIT milliseconds112 timer112
	TIMER_READY timer112
    MOVEF_F -25.0 VLV_VELOCIDAD_16
    MOVEF_F 17.5 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB113 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB113:
    MOVEF_F -20.0 VLV_VELOCIDAD1_28
    MOVEF_F 20.0 VLV_VELOCIDAD2_28
    MOVEF_F 95.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB114 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB114:
    MOVEF_F 35.0 VLV_VELOCIDAD_21
    MOVEF_F 30.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB115 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB115:
    MOVEF_F 40.0 VLV_VELOCIDAD_16
    MOVEF_F 16.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB116 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB116:
    MOVEF_F 30.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 154.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB117 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB117:
    MOVEF_F 20.0 VLV_VELOCIDAD_16
    MOVEF_F 2.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB118 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB118:
    MOVEF_F 35.0 VLV_VELOCIDAD_12
    MOVEF_F -330.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB119 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB119:
    MOVEF_F -25.0 VLV_VELOCIDAD_16
    MOVEF_F 6.5 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB120 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB120:
    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB121 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB121:
    DATA32 milliseconds122
	MOVEF_32 400.0 milliseconds122
	DATA32 timer122
	TIMER_WAIT milliseconds122 timer122
	TIMER_READY timer122
    MOVEF_F -40.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 70.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB123 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB123:
    MOVEF_F 40.0 VLV_VELOCIDAD_16
    MOVEF_F 13.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB124 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB124:
    MOVEF_F 40.0 VLV_VELOCIDAD_12
    MOVEF_F -300.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB125 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB125:
    MOVEF_F 20.0 VLV_VELOCIDAD1_28
    MOVEF_F -20.0 VLV_VELOCIDAD2_28
    MOVEF_F 160.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB126 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB126:
    MOVEF_F 60.0 VLV_VELOCIDAD1_30
    MOVEF_F 70.0 VLV_VELOCIDAD2_30
    MOVEF_F 70.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB127 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB127:
    MOVEF_F 30.0 VLV_VELOCIDAD1_28
    MOVEF_F -30.0 VLV_VELOCIDAD2_28
    MOVEF_F 87.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB128 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB128:
    MOVEF_F 20.0 VLV_VELOCIDAD1_31
    MOVEF_F -20.0 VLV_VELOCIDAD2_31
    MOVEF_F 3.0 VLV_SENS_31
    WRITE32 ENDSUB_M_GIRO_NEGRO1_3:CALLSUB129 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_NEGRO1_3
CALLSUB129:
    MOVEF_F 30.0 VLV_VELOCIDAD_23
    MOVEF_F 10.0 VLV_ENCODER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB130 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB130:
    MOVEF_F 40.0 VLV_VELOCIDAD_26
    MOVEF_F 4.0 VLV_READER_26
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:CALLSUB131 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2
CALLSUB131:
    MOVEF_F 80.0 VLV_VELOCIDAD_23
    MOVEF_F 80.0 VLV_ENCODER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB132 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB132:
    MOVEF_F 30.0 VLV_VELOCIDAD_23
    MOVEF_F 15.0 VLV_ENCODER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB133 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB133:
    MOVEF_F 20.0 VLV_VELOCIDAD_16
    MOVEF_F 20.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB134 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB134:
    MOVEF_F 20.0 VLV_VELOCIDAD1_28
    MOVEF_F -20.0 VLV_VELOCIDAD2_28
    MOVEF_F 90.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB135 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB135:
    MOVEF_F 20.0 VLV_VELOCIDAD_16
    MOVEF_F 8.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB136 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB136:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F -740.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB137 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB137:
    JR_NEQF VGV_MARKINGGRANDE 5.0 else138_1
    CALL MOTOR.SCHEDULE 'D' -60.0 0.0 90.0 0.0 'true' 

	DATA8 layer139
	DATA8 nos139
	DATA8 busy139
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer139 nos139
	JR_EQ8 0 nos139 motornotbusy139
  motorwaiting139:
	OUTPUT_TEST layer139 nos139 busy139
	JR_EQ8 busy139 0 motornotbusy139
	SLEEP
	JR motorwaiting139
  motornotbusy139:
    JR endif138
  else138_1:
    SUBF VGV_MARKINGGRANDE 2.0 F.1
    MULF F.1 90.0 F.0
    CALL MOTOR.SCHEDULE 'D' 60.0 0.0 F.0 0.0 'true' 

	DATA8 layer142
	DATA8 nos142
	DATA8 busy142
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer142 nos142
	JR_EQ8 0 nos142 motornotbusy142
  motorwaiting142:
	OUTPUT_TEST layer142 nos142 busy142
	JR_EQ8 busy142 0 motornotbusy142
	SLEEP
	JR motorwaiting142
  motornotbusy142:
  else138_2:
  endif138:
    MOVEF_F 80.0 VLV_VELOCIDAD_16
    MOVEF_F 28.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB143 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB143:
    MOVEF_F 40.0 VLV_VELOCIDAD_18
    MOVEF_F 1.0 VLV_SENSOR_18
    WRITE32 ENDSUB_M_RECTO_BLANCO1_2:CALLSUB144 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_BLANCO1_2
CALLSUB144:
    MOVEF_F 40.0 VLV_VELOCIDAD_15
    MOVEF_F 1.0 VLV_SENSOR_15
    WRITE32 ENDSUB_M_RECTO_NEGRO1_2:CALLSUB145 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1_2
CALLSUB145:
    CALL MOTOR.STOP 'BC' 'True'
    DATA32 milliseconds147
	MOVEF_32 150.0 milliseconds147
	DATA32 timer147
	TIMER_WAIT milliseconds147 timer147
	TIMER_READY timer147
    MOVEF_F 15.0 VLV_VELOCIDAD1_28
    MOVEF_F -15.0 VLV_VELOCIDAD2_28
    MOVEF_F 101.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB148 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB148:
    MOVEF_F 80.0 VLV_VELOCIDAD_16
    MOVEF_F 56.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB149 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB149:
    DATA8 layer150
	DATA8 no150
	DATA8 mode8150
	
	MOVEF_8 3.0 no150
	SUB8 no150 1 no150
	DIV8 no150 4 layer150
	MATH MOD8 no150 4 no150

	MOVEF_8 0.0 mode8150
	
	INPUT_DEVICE READY_RAW layer150 no150 0 mode8150 0
    OUTPUT_CLR_COUNT 0 4
  while152:
    CALL MOTOR.GETCOUNT 'C' F.0
    JR_LTEQF F.0 1000.0 or153
    CALL SENSOR.READPERCENT 3.0 F.0
    JR_GTEQF F.0 5.0 endwhile152
  or153:
  whilebody152:
    CALL MOTOR.STARTSYNC 'BC' -20.0 20.0
    CALL MOTOR.GETCOUNT 'C' F.0
    JR_LTEQF F.0 1000.0 whilebody152
    CALL SENSOR.READPERCENT 3.0 F.0
    JR_LTF F.0 5.0 whilebody152
  endwhile152:
    MOVEF_F -10.0 VLV_VELOCIDAD_16
    MOVEF_F 3.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB159 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB159:
    MOVEF_F 40.0 VLV_VELOCIDAD_12
    MOVEF_F -500.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB160 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB160:
    JR_EQF VGV_MARKINGGRANDE 5.0 or162
    JR_NEQF VGV_MARKINGGRANDE 3.0 else161_1
  or162:
    CALL MOTOR.SCHEDULE 'D' 60.0 0.0 -90.0 0.0 'true' 

	DATA8 layer163
	DATA8 nos163
	DATA8 busy163
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer163 nos163
	JR_EQ8 0 nos163 motornotbusy163
  motorwaiting163:
	OUTPUT_TEST layer163 nos163 busy163
	JR_EQ8 busy163 0 motornotbusy163
	SLEEP
	JR motorwaiting163
  motornotbusy163:
  else161_1:
  endif161:
    MOVEF_F 40.0 VLV_VELOCIDAD_12
    MOVEF_F -300.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB164 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB164:
    MOVEF_F -10.0 VLV_VELOCIDAD_16
    MOVEF_F 10.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB165 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB165:
    MOVEF_F 30.0 VLV_VELOCIDAD1_28
    MOVEF_F -30.0 VLV_VELOCIDAD2_28
    MOVEF_F 180.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB166 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB166:
    MOVEF_F 30.0 VLV_VELOCIDAD1_30
    MOVEF_F 17.0 VLV_VELOCIDAD2_30
    MOVEF_F 23.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB167 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB167:
    MOVEF_F 17.0 VLV_VELOCIDAD1_30
    MOVEF_F 30.0 VLV_VELOCIDAD2_30
    MOVEF_F 23.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB168 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB168:
    MOVEF_F -30.0 VLV_VELOCIDAD_16
    MOVEF_F 11.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB169 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB169:
    MOVEF_F -30.0 VLV_VELOCIDAD1_28
    MOVEF_F 30.0 VLV_VELOCIDAD2_28
    MOVEF_F 90.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB170 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB170:
    MOVEF_F -30.0 VLV_VELOCIDAD_14
    MOVEF_F 2.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB171 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB171:
    MOVEF_F -30.0 VLV_VELOCIDAD_17
    MOVEF_F 500.0 VLV_TIEMPO_17
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB172 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB172:
    MOVEF_F 30.0 VLV_VELOCIDAD_14
    MOVEF_F 2.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB173 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB173:
    MOVEF_F 100.0 VLV_VELOCIDAD_11
    MOVEF_F 600.0 VLV_TIMER_11
    WRITE32 ENDSUB_M_BRAZO_ATIMER_2:CALLSUB174 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_ATIMER_2
CALLSUB174:
    MOVEF_F 100.0 VLV_VELOCIDAD_12
    MOVEF_F -300.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB175 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB175:
    MOVEF_F 35.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 95.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB176 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB176:
    MOVEF_F 30.0 VLV_VELOCIDAD_26
    MOVEF_F 4.0 VLV_READER_26
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:CALLSUB177 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2
CALLSUB177:
    MOVEF_F 30.0 VLV_VELOCIDAD1_28
    MOVEF_F -18.0 VLV_VELOCIDAD2_28
    MOVEF_F 90.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB178 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB178:
    MOVEF_F 10.0 VLV_VELOCIDAD_23
    MOVEF_F 6.0 VLV_ENCODER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB179 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB179:
    MOVEF_F 9.75 VLV_VELOCIDAD1_30
    MOVEF_F 22.5 VLV_VELOCIDAD2_30
    MOVEF_F 6.5 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB180 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB180:
    MOVEF_F 22.5 VLV_VELOCIDAD1_30
    MOVEF_F 9.75 VLV_VELOCIDAD2_30
    MOVEF_F 6.5 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB181 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB181:
    MOVEF_F -20.0 VLV_VELOCIDAD_16
    MOVEF_F 3.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB182 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB182:
    ARRAY COPY VGV_MARKING VLV_MARKING_8
    WRITE32 ENDSUB_F_ORDENARBLOQUES_1:CALLSUB183 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ORDENARBLOQUES_1
CALLSUB183:
    MOVEF_F 30.0 VLV_VELOCIDAD_16
    MOVEF_F 10.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB184 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB184:
    MOVEF_F 30.0 VLV_VELOCIDAD_25
    MOVEF_F 3.0 VLV_READER_25
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB185 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB185:
    MOVEF_F -14.0 VLV_VELOCIDAD1_28
    MOVEF_F 30.0 VLV_VELOCIDAD2_28
    MOVEF_F 95.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB186 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB186:
    MOVEF_F 40.0 VLV_VELOCIDAD_24
    MOVEF_F 20.0 VLV_ENCODER_24
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB187 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB187:
    MOVEF_F 35.0 VLV_VELOCIDAD_16
    MOVEF_F 39.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB188 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB188:
    MOVEF_F 10.0 VLV_VELOCIDAD1_28
    MOVEF_F -10.0 VLV_VELOCIDAD2_28
    MOVEF_F 128.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB189 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB189:
    MOVEF_F -40.0 VLV_VELOCIDAD_16
    MOVEF_F 18.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB190 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB190:
    MOVEF_F -1.0 VLV_VELOCIDAD1_28
    MOVEF_F -15.0 VLV_VELOCIDAD2_28
    MOVEF_F 70.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB191 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB191:
    MOVEF_F -15.0 VLV_VELOCIDAD_16
    MOVEF_F 2.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB192 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB192:
    MOVEF_F 50.0 VLV_VELOCIDAD_12
    MOVEF_F -330.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB193 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB193:
    MOVEF_F 15.0 VLV_VELOCIDAD_16
    MOVEF_F 9.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB194 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB194:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB195 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB195:
    MOVEF_F 15.0 VLV_VELOCIDAD_16
    MOVEF_F 8.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB196 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB196:
    MOVEF_F -15.0 VLV_VELOCIDAD_16
    MOVEF_F 11.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB197 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB197:
    MOVEF_F 15.0 VLV_VELOCIDAD_16
    MOVEF_F 13.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB198 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB198:
    MOVEF_F -15.0 VLV_VELOCIDAD_16
    MOVEF_F 5.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB199 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB199:
    MOVEF_F -15.0 VLV_VELOCIDAD1_28
    MOVEF_F 15.0 VLV_VELOCIDAD2_28
    MOVEF_F 100.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB200 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB200:
    MOVEF_F -30.0 VLV_VELOCIDAD_17
    MOVEF_F 500.0 VLV_TIEMPO_17
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB201 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB201:
    MOVEF_F 15.0 VLV_VELOCIDAD_16
    MOVEF_F 12.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB202 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB202:
    MOVEF_F -10.0 VLV_VELOCIDAD1_28
    MOVEF_F 10.0 VLV_VELOCIDAD2_28
    MOVEF_F 7.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB203 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB203:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F -200.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB204 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB204:
    MOVEF_F 10.0 VLV_VELOCIDAD_16
    MOVEF_F 5.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB205 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB205:
    MOVEF_F -10.0 VLV_VELOCIDAD_16
    MOVEF_F 5.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB206 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB206:
    MOVEF_F 50.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB207 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB207:
    MOVEF_F 10.0 VLV_VELOCIDAD1_28
    MOVEF_F -10.0 VLV_VELOCIDAD2_28
    MOVEF_F 15.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB208 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB208:
    MOVEF_F 100.0 VLV_VELOCIDAD_14
    MOVEF_F 60.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB209 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB209:
    MOVEF_F 40.0 VLV_VELOCIDAD_19
    MOVEF_F 1.0 VLV_SENSOR_19
    WRITE32 ENDSUB_M_RECTO_BLANCO1F_2:CALLSUB210 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_BLANCO1F_2
CALLSUB210:
    MOVEF_F 20.0 VLV_VELOCIDAD_20
    MOVEF_F 1.0 VLV_SENSOR_20
    WRITE32 ENDSUB_M_RECTO_NEGRO1F_2:CALLSUB211 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1F_2
CALLSUB211:
    MOVEF_F -12.0 VLV_VELOCIDAD1_28
    MOVEF_F 30.0 VLV_VELOCIDAD2_28
    MOVEF_F 93.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB212 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB212:
    MOVEF_F 40.0 VLV_VELOCIDAD_24
    MOVEF_F 10.0 VLV_ENCODER_24
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB213 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB213:
    MOVEF_F 80.0 VLV_VELOCIDAD_24
    MOVEF_F 70.0 VLV_ENCODER_24
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB214 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB214:
    MOVEF_F 40.0 VLV_VELOCIDAD_25
    MOVEF_F 3.0 VLV_READER_25
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB215 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB215:
    MOVEF_F 20.0 VLV_VELOCIDAD_16
    MOVEF_F 2.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB216 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB216:
    MOVEF_F -50.0 VLV_VELOCIDAD1_28
    MOVEF_F 50.0 VLV_VELOCIDAD2_28
    MOVEF_F 88.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB217 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB217:
    MOVEF_F 50.0 VLV_VELOCIDAD_27
    MOVEF_F 40.0 VLV_ENCODER_27
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31_2:CALLSUB218 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31_2
CALLSUB218:
    MOVEF_F 50.0 VLV_VELOCIDAD_16
    MOVEF_F 30.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB219 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB219:
    MOVEF_F 40.0 VLV_VELOCIDAD_17
    MOVEF_F 1000.0 VLV_TIEMPO_17
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB220 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB220:
    MOVEF_F 8.0 VLV_VELOCIDAD1_28
    MOVEF_F -32.0 VLV_VELOCIDAD2_28
    MOVEF_F 94.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB221 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB221:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F -300.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB222 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB222:
    MOVEF_F 30.0 VLV_VELOCIDAD_16
    MOVEF_F 20.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB223 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB223:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB224 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB224:
    MOVEF_F -30.0 VLV_VELOCIDAD_16
    MOVEF_F 13.2 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB225 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB225:
RETSUB_F_MAIN_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_MAIN_0:
SUB_F_GRITARCOLOR_0:
    MOVEF_F VGV_COLOR VLV_COLOR_33
    WRITE32 ENDSUB_M_RGB_GRITAR_1:CALLSUB226 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_GRITAR_1
CALLSUB226:
RETSUB_F_GRITARCOLOR_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARCOLOR_0:
SUB_F_GRITARVOLTAJE_0:
    CALL EV3.BATTERYVOLTAGE VLV_VOLTAJE_1
    MATH FLOOR VLV_VOLTAJE_1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB229 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB229:
    MULF VLV_VOLTAJE_1 10.0 F.1
    MATH FLOOR F.1 F.0
    MATH FLOOR VLV_VOLTAJE_1 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB235 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB235:
    MULF VLV_VOLTAJE_1 100.0 F.1
    MATH FLOOR F.1 F.0
    MULF VLV_VOLTAJE_1 10.0 F.3
    MATH FLOOR F.3 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB242 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB242:
RETSUB_F_GRITARVOLTAJE_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARVOLTAJE_0:
SUB_F_GRITARNUMERO_1:
    JR_NEQF VLV_NUMERO_2 0.0 else243_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/ZERO'
    JR endif243
  else243_1:
    JR_NEQF VLV_NUMERO_2 1.0 else243_2
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/One'
    JR endif243
  else243_2:
    JR_NEQF VLV_NUMERO_2 2.0 else243_3
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Two'
    JR endif243
  else243_3:
    JR_NEQF VLV_NUMERO_2 3.0 else243_4
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Three'
    JR endif243
  else243_4:
    JR_NEQF VLV_NUMERO_2 4.0 else243_5
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Four'
    JR endif243
  else243_5:
    JR_NEQF VLV_NUMERO_2 5.0 else243_6
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Five'
    JR endif243
  else243_6:
    JR_NEQF VLV_NUMERO_2 6.0 else243_7
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Six'
    JR endif243
  else243_7:
    JR_NEQF VLV_NUMERO_2 7.0 else243_8
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Seven'
    JR endif243
  else243_8:
    JR_NEQF VLV_NUMERO_2 8.0 else243_9
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Eight'
    JR endif243
  else243_9:
    JR_NEQF VLV_NUMERO_2 9.0 else243_10
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Nine'
    JR endif243
  else243_10:
    JR_NEQF VLV_NUMERO_2 10.0 else243_11
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Ten'
  else243_11:
  endif243:
    SOUND_READY
RETSUB_F_GRITARNUMERO_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARNUMERO_1:
SUB_F_BAJARCUADRO_0:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F -780.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB256 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB256:
RETSUB_F_BAJARCUADRO_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_BAJARCUADRO_0:
SUB_F_CODIGO_2:
    STRINGS DUPLICATE '' VLV_CODIGO_6
    CALL ARRAYGET_FLOAT 2.0 VLV_AUX_6 VLV_MARKING_6
    CALL ARRAYGET_FLOAT 3.0 F.0 VLV_MARKING_6
    CALL ARRAYSTORE_FLOAT 2.0 F.0 VLV_MARKING_6
    CALL ARRAYSTORE_FLOAT 3.0 VLV_AUX_6 VLV_MARKING_6
    MOVEF_F 0.0 VLV_I_6
  for261:
    JR_GTF VLV_I_6 4.0 endfor261
  forbody261:
    CALL ARRAYGET_FLOAT VLV_I_6 F.0 VLV_MARKING_6
    JR_NEQF F.0 2.0 else262_1
    CALL TEXT.APPEND VLV_CODIGO_6 'Z' VLV_CODIGO_6
    JR endif262
  else262_1:
    CALL ARRAYGET_FLOAT VLV_I_6 F.0 VLV_MARKING_6
    JR_NEQF F.0 3.0 else262_2
    CALL TEXT.APPEND VLV_CODIGO_6 'V' VLV_CODIGO_6
    JR endif262
  else262_2:
    CALL ARRAYGET_FLOAT VLV_I_6 F.0 VLV_MARKING_6
    JR_NEQF F.0 4.0 else262_3
    CALL TEXT.APPEND VLV_CODIGO_6 'A' VLV_CODIGO_6
    JR endif262
  else262_3:
    CALL ARRAYGET_FLOAT VLV_I_6 F.0 VLV_MARKING_6
    JR_NEQF F.0 5.0 else262_4
    CALL TEXT.APPEND VLV_CODIGO_6 'R' VLV_CODIGO_6
  else262_4:
  endif262:
    ADDF VLV_I_6 1.0 VLV_I_6
    JR_LTEQF VLV_I_6 4.0 forbody261
  endfor261:
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    CALL TEXT.APPEND 'Codigo: ' VLV_CODIGO_6 S.0
    CALL LCD.WRITE 5.0 5.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
RETSUB_F_CODIGO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_CODIGO_2:
SUB_F_ROTAR_1:
    MATH ABS VLV_GRADOS_7 F.0
    DATAF tmpf278
    DATA8 flag278
    DIVF VLV_GRADOS_7 F.0 tmpf278
    CP_EQF 0.0 F.0 flag278
    SELECTF flag278 0.0 tmpf278 VLV_SIGNO_7

    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB279 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB279:
    DATA32 milliseconds280
	MOVEF_32 100.0 milliseconds280
	DATA32 timer280
	TIMER_WAIT milliseconds280 timer280
	TIMER_READY timer280
    MULF 34.0 VLV_SIGNO_7 F.0
    MATH ABS VLV_GRADOS_7 F.2
    SUBF F.2 8.0 F.1
    CALL MOTOR.SCHEDULE 'D' F.0 0.0 F.1 0.0 'True' 

	DATA8 layer284
	DATA8 nos284
	DATA8 busy284
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer284 nos284
	JR_EQ8 0 nos284 motornotbusy284
  motorwaiting284:
	OUTPUT_TEST layer284 nos284 busy284
	JR_EQ8 busy284 0 motornotbusy284
	SLEEP
	JR motorwaiting284
  motornotbusy284:
    DATA32 milliseconds285
	MOVEF_32 200.0 milliseconds285
	DATA32 timer285
	TIMER_WAIT milliseconds285 timer285
	TIMER_READY timer285
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F -360.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB286 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB286:
RETSUB_F_ROTAR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_ROTAR_1:
SUB_F_ORDENARBLOQUES_1:
    ARRAY COPY VLV_MARKING_8 VLV_MARKING_6
    WRITE32 ENDSUB_F_CODIGO_2:CALLSUB287 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_CODIGO_2
CALLSUB287:
    STRINGS DUPLICATE VLV_CODIGO_6 VLV_CODIGO_8
    CALL EQ_STRING VLV_CODIGO_8 'VRZA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_1
    JR endif288
  else288_1:
    CALL EQ_STRING VLV_CODIGO_8 'VRAZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_2
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB291 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB291:
    JR endif288
  else288_2:
    CALL EQ_STRING VLV_CODIGO_8 'VZRA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_3
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB293 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB293:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB294 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB294:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB295 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB295:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB296 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB296:
    JR endif288
  else288_3:
    CALL EQ_STRING VLV_CODIGO_8 'VZAR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_4
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB298 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB298:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB299 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB299:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB300 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB300:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB301 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB301:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB302 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB302:
    JR endif288
  else288_4:
    CALL EQ_STRING VLV_CODIGO_8 'VARZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_5
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB304 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB304:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB305 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB305:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB306 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB306:
    JR endif288
  else288_5:
    CALL EQ_STRING VLV_CODIGO_8 'VAZR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_6
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB308 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB308:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB309 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB309:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB310 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB310:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB311 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB311:
    JR endif288
  else288_6:
    CALL EQ_STRING VLV_CODIGO_8 'RVZA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_7
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB313 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB313:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB314 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB314:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB315 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB315:
    JR endif288
  else288_7:
    CALL EQ_STRING VLV_CODIGO_8 'RVAZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_8
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB317 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB317:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB318 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB318:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB319 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB319:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB320 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB320:
    JR endif288
  else288_8:
    CALL EQ_STRING VLV_CODIGO_8 'RZVA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_9
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB322 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB322:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB323 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB323:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB324 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB324:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB325 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB325:
    JR endif288
  else288_9:
    CALL EQ_STRING VLV_CODIGO_8 'RZAV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_10
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB327 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB327:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB328 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB328:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB329 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB329:
    JR endif288
  else288_10:
    CALL EQ_STRING VLV_CODIGO_8 'RAVZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_11
    MOVEF_F 90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB331 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB331:
    JR endif288
  else288_11:
    CALL EQ_STRING VLV_CODIGO_8 'RAZV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_12
    MOVEF_F 90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB333 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB333:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB334 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB334:
    JR endif288
  else288_12:
    CALL EQ_STRING VLV_CODIGO_8 'ZVAR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_13
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB336 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB336:
    JR endif288
  else288_13:
    CALL EQ_STRING VLV_CODIGO_8 'ZVRA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_14
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB338 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB338:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB339 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB339:
    JR endif288
  else288_14:
    CALL EQ_STRING VLV_CODIGO_8 'ZRVA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_15
    MOVEF_F 90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB341 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB341:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB342 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB342:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB343 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB343:
    JR endif288
  else288_15:
    CALL EQ_STRING VLV_CODIGO_8 'ZRAV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_16
    MOVEF_F 90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB345 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB345:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB346 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB346:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB347 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB347:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB348 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB348:
    JR endif288
  else288_16:
    CALL EQ_STRING VLV_CODIGO_8 'ZAVR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_17
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB350 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB350:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB351 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB351:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB352 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB352:
    JR endif288
  else288_17:
    CALL EQ_STRING VLV_CODIGO_8 'ZARV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_18
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB354 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB354:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB355 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB355:
    JR endif288
  else288_18:
    CALL EQ_STRING VLV_CODIGO_8 'AVRZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_19
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB357 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB357:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB358 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB358:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB359 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB359:
    JR endif288
  else288_19:
    CALL EQ_STRING VLV_CODIGO_8 'AVZR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_20
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB361 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB361:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB362 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB362:
    JR endif288
  else288_20:
    CALL EQ_STRING VLV_CODIGO_8 'ARVZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_21
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB364 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB364:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB365 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB365:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB366 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB366:
    JR endif288
  else288_21:
    CALL EQ_STRING VLV_CODIGO_8 'ARZV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_22
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB368 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB368:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB369 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB369:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB370 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB370:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB371 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB371:
    JR endif288
  else288_22:
    CALL EQ_STRING VLV_CODIGO_8 'AZVR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else288_23
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB373 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB373:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB374 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB374:
    JR endif288
  else288_23:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB375 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB375:
  else288_24:
  endif288:
    MOVEF_F -20.0 VLV_VELOCIDAD_16
    MOVEF_F 8.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB376 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB376:
    MOVEF_F 15.0 VLV_VELOCIDAD1_28
    MOVEF_F -15.0 VLV_VELOCIDAD2_28
    MOVEF_F 177.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB377 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB377:
    MOVEF_F -30.0 VLV_VELOCIDAD_16
    MOVEF_F 22.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB378 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB378:
    MOVEF_F 20.0 VLV_VELOCIDAD_12
    MOVEF_F 24.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB379 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB379:
RETSUB_F_ORDENARBLOQUES_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_ORDENARBLOQUES_1:
SUB_F_SWAP_0:
    MOVEF_F -15.0 VLV_VELOCIDAD_16
    MOVEF_F 7.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB380 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB380:
    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB381 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB381:
    MOVEF_F -15.0 VLV_VELOCIDAD_16
    MOVEF_F 10.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB382 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB382:
    CALL MOTOR.SCHEDULE 'D' 50.0 0.0 180.0 0.0 'True' 

	DATA8 layer383
	DATA8 nos383
	DATA8 busy383
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer383 nos383
	JR_EQ8 0 nos383 motornotbusy383
  motorwaiting383:
	OUTPUT_TEST layer383 nos383 busy383
	JR_EQ8 busy383 0 motornotbusy383
	SLEEP
	JR motorwaiting383
  motornotbusy383:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F -360.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB384 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB384:
    MOVEF_F 15.0 VLV_VELOCIDAD_16
    MOVEF_F 23.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB385 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB385:
    MOVEF_F -15.0 VLV_VELOCIDAD_16
    MOVEF_F 5.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB386 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB386:
RETSUB_F_SWAP_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SWAP_0:
SUB_F_S_0:
    UI_BUTTON FLUSH
    UI_BUTTON WAIT_FOR_PRESS
RETSUB_F_S_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_S_0:
SUB_M_BRAZO_ATIMER_2:
    TIMER_READ timeMC1
  while390:
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_GTEQF F.0 VLV_TIMER_11 endwhile390
  whilebody390:
    MOVEF_8 VLV_VELOCIDAD_11 setSpeedA
	OUTPUT_SPEED 0 1 setSpeedA
	OUTPUT_START 0 1
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_LTF F.0 VLV_TIMER_11 whilebody390
  endwhile390:
    CALL MOTOR.STOP 'A' 'True'
RETSUB_M_BRAZO_ATIMER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_ATIMER_2:
SUB_M_BRAZO_AENCODER_2:
    CALL MOTOR.GETCOUNT 'A' F.0
    SUBF VLV_ENCODER_12 F.0 VLV_ENCDIFF_12
    MATH ABS VLV_ENCDIFF_12 F.0
    DATAF tmpf398
    DATA8 flag398
    DIVF VLV_ENCDIFF_12 F.0 tmpf398
    CP_EQF 0.0 F.0 flag398
    SELECTF flag398 0.0 tmpf398 VLV_SIGNO_12

    MATH ABS VLV_ENCDIFF_12 F.4
    DATAF tmpf400
    DATA8 flag400
    DIVF F.4 100.0 tmpf400
    CP_EQF 0.0 100.0 flag400
    SELECTF flag400 0.0 tmpf400 F.3

    DATAF tmpf401
    DATA8 flag401
    DIVF VLV_VELOCIDAD_12 20.0 tmpf401
    CP_EQF 0.0 20.0 flag401
    SELECTF flag401 0.0 tmpf401 F.4

    DATAF tmpf402
    DATA8 flag402
    DIVF F.3 F.4 tmpf402
    CP_EQF 0.0 F.4 flag402
    SELECTF flag402 0.0 tmpf402 F.2

    MULF F.2 650.0 F.1
    MULF F.1 2.0 F.0
    DATA8 flag405
	CP_GTF F.0 400.0 flag405
	SELECTF flag405 F.0 400.0 VLV_SAFETYTIMER_12
    TIMER_READ timeMC3
    JR_EQF VLV_ENCDIFF_12 0.0 else407_1
  while408:
    CALL MOTOR.GETCOUNT 'A' F.2
    SUBF F.2 VLV_ENCODER_12 F.1
    MATH ABS F.1 F.0
    JR_LTEQF F.0 25.0 endwhile408
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 2000.0 endwhile408
  whilebody408:
    MULF VLV_SIGNO_12 VLV_VELOCIDAD_12 F.0
    MOVEF_8 F.0 setSpeedA
	OUTPUT_SPEED 0 1 setSpeedA
	OUTPUT_START 0 1
    CALL MOTOR.GETCOUNT 'A' F.2
    SUBF F.2 VLV_ENCODER_12 F.1
    MATH ABS F.1 F.0
    JR_LTEQF F.0 25.0 and415
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 2000.0 whilebody408
  and415:
  endwhile408:
    CALL MOTOR.STOP 'A' 'True'
  else407_1:
  endif407:
RETSUB_M_BRAZO_AENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_AENCODER_2:
SUB_M_BRAZO_DTIMER_2:
    TIMER_READ timeMC1
  while422:
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_GTEQF F.0 VLV_TIMER_13 endwhile422
  whilebody422:
    MOVEF_8 VLV_VELOCIDAD_13 setSpeedD
	OUTPUT_SPEED 0 8 setSpeedD
	OUTPUT_START 0 8
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_LTF F.0 VLV_TIMER_13 whilebody422
  endwhile422:
    OUTPUT_POWER 0 8 0
	OUTPUT_STOP 0 8 1
RETSUB_M_BRAZO_DTIMER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_DTIMER_2:
SUB_M_RECTO_ENCODERF_2:
    DATAF tmpf427
    DATA8 flag427
    DIVF VLV_VELOCIDAD_14 10.0 tmpf427
    CP_EQF 0.0 10.0 flag427
    SELECTF flag427 0.0 tmpf427 F.2

    DATAF tmpf428
    DATA8 flag428
    DIVF 11286.0 F.2 tmpf428
    CP_EQF 0.0 F.2 flag428
    SELECTF flag428 0.0 tmpf428 F.1

    DATAF tmpf429
    DATA8 flag429
    DIVF VLV_DISTANCIA_14 100.0 tmpf429
    CP_EQF 0.0 100.0 flag429
    SELECTF flag429 0.0 tmpf429 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf431
    DATA8 flag431
    DIVF VPR_RECTO_DIAMETRO 6.24 tmpf431
    CP_EQF 0.0 6.24 flag431
    SELECTF flag431 0.0 tmpf431 F.1

    DATAF tmpf432
    DATA8 flag432
    DIVF F.0 F.1 tmpf432
    CP_EQF 0.0 F.1 flag432
    SELECTF flag432 0.0 tmpf432 VLV_SAFETYTIMER_14

    MATH ABS VLV_VELOCIDAD_14 F.1
    SUBF F.1 20.0 F.0
    MULF F.0 0.05 VLV_CORRECCION_14
    SUBF VLV_DISTANCIA_14 VLV_CORRECCION_14 F.2
    MULF F.2 360.0 F.1
    MOVEF_F 3.1415926535897932384 F.2
    DATAF tmpf439
    DATA8 flag439
    DIVF F.1 F.2 tmpf439
    CP_EQF 0.0 F.2 flag439
    SELECTF flag439 0.0 tmpf439 F.0

    DATAF tmpf440
    DATA8 flag440
    DIVF F.0 VPR_RECTO_DIAMETRO tmpf440
    CP_EQF 0.0 VPR_RECTO_DIAMETRO flag440
    SELECTF flag440 0.0 tmpf440 VLV_ENC_14

    OUTPUT_CLR_COUNT 0 2
    OUTPUT_CLR_COUNT 0 4
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds444
	MOVEF_32 100.0 milliseconds444
	DATA32 timer444
	TIMER_WAIT milliseconds444 timer444
	TIMER_READY timer444
    TIMER_READ timeMC4
  while446:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_14 endwhile446
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_14 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile446
  whilebody446:
    MATH NEGATE VLV_VELOCIDAD_14 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD_14
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_14 and453
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_14 2000.0 F.1
    JR_LTF F.0 F.1 whilebody446
  and453:
  endwhile446:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_14 2000.0 F.1
    JR_LTEQF F.0 F.1 else458_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else458_1:
  endif458:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_ENCODERF_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ENCODERF_2:
SUB_M_RECTO_NEGRO1_2:
    MOVEF_F 0.0 VLV_CORRECCION_15
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_15
  while465:
    JR_LTEQF VLV_LECTURA_15 15.0 endwhile465
  whilebody465:
    CALL SENSOR.READPERCENT VLV_SENSOR_15 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf468
    DATA8 flag468
    DIVF F.1 VPR_RECTO_BLANCO tmpf468
    CP_EQF 0.0 VPR_RECTO_BLANCO flag468
    SELECTF flag468 0.0 tmpf468 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_15
    MATH NEGATE VLV_VELOCIDAD_15 F.1
    ADDF F.1 VLV_CORRECCION_15 F.0
    ADDF VLV_VELOCIDAD_15 VLV_CORRECCION_15 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_GTF VLV_LECTURA_15 15.0 whilebody465
  endwhile465:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_NEGRO1_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_NEGRO1_2:
SUB_M_RECTO_ENCODER_2:
    DATAF tmpf476
    DATA8 flag476
    DIVF VLV_VELOCIDAD_16 10.0 tmpf476
    CP_EQF 0.0 10.0 flag476
    SELECTF flag476 0.0 tmpf476 F.2

    DATAF tmpf477
    DATA8 flag477
    DIVF 11286.0 F.2 tmpf477
    CP_EQF 0.0 F.2 flag477
    SELECTF flag477 0.0 tmpf477 F.1

    DATAF tmpf478
    DATA8 flag478
    DIVF VLV_DISTANCIA_16 100.0 tmpf478
    CP_EQF 0.0 100.0 flag478
    SELECTF flag478 0.0 tmpf478 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf480
    DATA8 flag480
    DIVF VPR_RECTO_DIAMETRO 6.24 tmpf480
    CP_EQF 0.0 6.24 flag480
    SELECTF flag480 0.0 tmpf480 F.1

    DATAF tmpf481
    DATA8 flag481
    DIVF F.0 F.1 tmpf481
    CP_EQF 0.0 F.1 flag481
    SELECTF flag481 0.0 tmpf481 VLV_SAFETYTIMER_16

    MATH ABS VLV_VELOCIDAD_16 F.1
    SUBF F.1 20.0 F.0
    MULF F.0 0.05 VLV_CORRECCION_16
    SUBF VLV_DISTANCIA_16 VLV_CORRECCION_16 F.2
    MULF F.2 360.0 F.1
    MOVEF_F 3.1415926535897932384 F.2
    DATAF tmpf488
    DATA8 flag488
    DIVF F.1 F.2 tmpf488
    CP_EQF 0.0 F.2 flag488
    SELECTF flag488 0.0 tmpf488 F.0

    DATAF tmpf489
    DATA8 flag489
    DIVF F.0 VPR_RECTO_DIAMETRO tmpf489
    CP_EQF 0.0 VPR_RECTO_DIAMETRO flag489
    SELECTF flag489 0.0 tmpf489 VLV_ENC_16

    OUTPUT_CLR_COUNT 0 2
    OUTPUT_CLR_COUNT 0 4
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds493
	MOVEF_32 100.0 milliseconds493
	DATA32 timer493
	TIMER_WAIT milliseconds493 timer493
	TIMER_READY timer493
    TIMER_READ timeMC4
  while495:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_16 endwhile495
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_16 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile495
  whilebody495:
    MATH NEGATE VLV_VELOCIDAD_16 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD_16
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_16 and502
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_16 2000.0 F.1
    JR_LTF F.0 F.1 whilebody495
  and502:
  endwhile495:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_16 2000.0 F.1
    JR_LTEQF F.0 F.1 else507_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else507_1:
  endif507:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_ENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ENCODER_2:
SUB_M_RECTO_TIEMPO_2:
    MOVEF_F 0.0 VLV_CORRECCION_17
    TIMER_READ timeMC3
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
  while515:
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_TIEMPO_17 endwhile515
  whilebody515:
    MATH NEGATE VLV_VELOCIDAD_17 F.1
    ADDF F.1 VLV_CORRECCION_17 F.0
    ADDF VLV_VELOCIDAD_17 VLV_CORRECCION_17 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_TIEMPO_17 whilebody515
  endwhile515:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_TIEMPO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_TIEMPO_2:
SUB_M_RECTO_BLANCO1_2:
    MOVEF_F 0.0 VLV_CORRECCION_18
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_18
  while524:
    JR_GTEQF VLV_LECTURA_18 60.0 endwhile524
  whilebody524:
    CALL SENSOR.READPERCENT VLV_SENSOR_18 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf527
    DATA8 flag527
    DIVF F.1 VPR_RECTO_BLANCO tmpf527
    CP_EQF 0.0 VPR_RECTO_BLANCO flag527
    SELECTF flag527 0.0 tmpf527 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_18
    MATH NEGATE VLV_VELOCIDAD_18 F.1
    ADDF F.1 VLV_CORRECCION_18 F.0
    ADDF VLV_VELOCIDAD_18 VLV_CORRECCION_18 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_LTF VLV_LECTURA_18 60.0 whilebody524
  endwhile524:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_BLANCO1_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_BLANCO1_2:
SUB_M_RECTO_BLANCO1F_2:
    MOVEF_F 0.0 VLV_CORRECCION_19
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_19
  while536:
    JR_GTEQF VLV_LECTURA_19 60.0 endwhile536
  whilebody536:
    CALL SENSOR.READPERCENT VLV_SENSOR_19 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf539
    DATA8 flag539
    DIVF F.1 VPR_RECTO_BLANCO tmpf539
    CP_EQF 0.0 VPR_RECTO_BLANCO flag539
    SELECTF flag539 0.0 tmpf539 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_19
    MATH NEGATE VLV_VELOCIDAD_19 F.1
    ADDF F.1 VLV_CORRECCION_19 F.0
    ADDF VLV_VELOCIDAD_19 VLV_CORRECCION_19 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_LTF VLV_LECTURA_19 60.0 whilebody536
  endwhile536:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_BLANCO1F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_BLANCO1F_2:
SUB_M_RECTO_NEGRO1F_2:
    MOVEF_F 0.0 VLV_CORRECCION_20
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_20
  while548:
    JR_LTEQF VLV_LECTURA_20 15.0 endwhile548
  whilebody548:
    CALL SENSOR.READPERCENT VLV_SENSOR_20 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf551
    DATA8 flag551
    DIVF F.1 VPR_RECTO_BLANCO tmpf551
    CP_EQF 0.0 VPR_RECTO_BLANCO flag551
    SELECTF flag551 0.0 tmpf551 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_20
    MATH NEGATE VLV_VELOCIDAD_20 F.1
    ADDF F.1 VLV_CORRECCION_20 F.0
    ADDF VLV_VELOCIDAD_20 VLV_CORRECCION_20 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_GTF VLV_LECTURA_20 15.0 whilebody548
  endwhile548:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_NEGRO1F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_NEGRO1F_2:
SUB_M_SIGUELINEAS_ENCODER14_2:
    MULF VLV_VELOCIDAD_21 1.0 VLV_VELOCIDAD_21
    MOVEF_F 50.0 VLV_LECTURA1_21
    MOVEF_F 50.0 VLV_LECTURA3_21
    MOVEF_F 50.0 VLV_LECTURA4_21
    MATH POW VLV_VELOCIDAD_21 0.833333333333333 F.0
    DATAF tmpf561
    DATA8 flag561
    DIVF F.0 440.0 tmpf561
    CP_EQF 0.0 440.0 flag561
    SELECTF flag561 0.0 tmpf561 VLV_KP_21

    MULF VLV_KP_21 70.0 VLV_KD_21
    MOVEF_F 0.0 VLV_ERROR_21
    MOVEF_F 0.0 VLV_OLDERROR_21
    MOVEF_F 0.0 VLV_U_21
    MATH ABS VLV_VELOCIDAD_21 F.0
    DATAF tmpf564
    DATA8 flag564
    DIVF VLV_VELOCIDAD_21 F.0 tmpf564
    CP_EQF 0.0 F.0 flag564
    SELECTF flag564 0.0 tmpf564 VLV_SENTIDO_21

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf567
    DATA8 flag567
    DIVF VLV_ENCODER_21 F.1 tmpf567
    CP_EQF 0.0 F.1 flag567
    SELECTF flag567 0.0 tmpf567 F.0

    MULF F.0 360.0 VLV_ENCODER_21
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_21
    MOVEF_F 0.0 VLV_ENCODERC_21
    DATAF tmpf570
    DATA8 flag570
    DIVF VLV_VELOCIDAD_21 10.0 tmpf570
    CP_EQF 0.0 10.0 flag570
    SELECTF flag570 0.0 tmpf570 F.2

    DATAF tmpf571
    DATA8 flag571
    DIVF 11286.0 F.2 tmpf571
    CP_EQF 0.0 F.2 flag571
    SELECTF flag571 0.0 tmpf571 F.1

    DATAF tmpf572
    DATA8 flag572
    DIVF VLV_ENCODER_21 100.0 tmpf572
    CP_EQF 0.0 100.0 flag572
    SELECTF flag572 0.0 tmpf572 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf574
    DATA8 flag574
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf574
    CP_EQF 0.0 6.24 flag574
    SELECTF flag574 0.0 tmpf574 F.1

    DATAF tmpf575
    DATA8 flag575
    DIVF F.0 F.1 tmpf575
    CP_EQF 0.0 F.1 flag575
    SELECTF flag575 0.0 tmpf575 VLV_SAFETYTIMER_21

    TIMER_READ timeMC4
  while577:
    MATH ABS VLV_ENCODERC_21 F.0
    JR_GTEQF F.0 VLV_ENCODER_21 endwhile577
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_21 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile577
  whilebody577:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_21 VLV_ENCODERC_21
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf585
    DATA8 flag585
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf585
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag585
    SELECTF flag585 0.0 tmpf585 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_21
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf590
    DATA8 flag590
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf590
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag590
    SELECTF flag590 0.0 tmpf590 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_21
    SUBF VLV_LECTURA1_21 VLV_LECTURA4_21 F.1
    MULF F.1 VLV_SENTIDO_21 F.0
    MULF F.0 1.0 VLV_ERROR_21
    MULF VLV_ERROR_21 VLV_KP_21 F.0
    SUBF VLV_ERROR_21 VLV_OLDERROR_21 F.2
    MULF F.2 VLV_KD_21 F.1
    ADDF F.0 F.1 VLV_U_21
    ADDF VLV_VELOCIDAD_21 VLV_U_21 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_21 VLV_U_21 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_21 VLV_OLDERROR_21
    MATH ABS VLV_ENCODERC_21 F.0
    JR_GTEQF F.0 VLV_ENCODER_21 and604
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_21 2000.0 F.1
    JR_LTF F.0 F.1 whilebody577
  and604:
  endwhile577:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_21 2000.0 F.1
    JR_LTEQF F.0 F.1 else608_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else608_1:
  endif608:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_ENCODER14_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER14_2:
SUB_M_SIGUELINEAS_CRUCE14_1:
    MULF VLV_VELOCIDAD_22 1.0 VLV_VELOCIDAD_22
    MOVEF_F 50.0 VLV_LECTURA1_22
    MOVEF_F 50.0 VLV_LECTURA3_22
    MOVEF_F 50.0 VLV_LECTURA4_22
    MATH POW VLV_VELOCIDAD_22 0.833333333333333 F.0
    DATAF tmpf616
    DATA8 flag616
    DIVF F.0 440.0 tmpf616
    CP_EQF 0.0 440.0 flag616
    SELECTF flag616 0.0 tmpf616 VLV_KP_22

    MULF VLV_KP_22 70.0 VLV_KD_22
    MOVEF_F 0.0 VLV_ERROR_22
    MOVEF_F 0.0 VLV_OLDERROR_22
    MOVEF_F 0.0 VLV_U_22
    MATH ABS VLV_VELOCIDAD_22 F.0
    DATAF tmpf619
    DATA8 flag619
    DIVF VLV_VELOCIDAD_22 F.0 tmpf619
    CP_EQF 0.0 F.0 flag619
    SELECTF flag619 0.0 tmpf619 VLV_SENTIDO_22

  while620:
    JR_GTF VLV_LECTURA1_22 10.0 or621
    JR_LTEQF VLV_LECTURA4_22 10.0 endwhile620
  or621:
  whilebody620:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf624
    DATA8 flag624
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf624
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag624
    SELECTF flag624 0.0 tmpf624 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_22
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf629
    DATA8 flag629
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf629
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag629
    SELECTF flag629 0.0 tmpf629 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_22
    SUBF VLV_LECTURA1_22 VLV_LECTURA4_22 F.1
    MULF F.1 VLV_SENTIDO_22 F.0
    MULF F.0 1.0 VLV_ERROR_22
    MULF VLV_ERROR_22 VLV_KP_22 F.0
    SUBF VLV_ERROR_22 VLV_OLDERROR_22 F.2
    MULF F.2 VLV_KD_22 F.1
    ADDF F.0 F.1 VLV_U_22
    ADDF VLV_VELOCIDAD_22 VLV_U_22 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_22 VLV_U_22 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_22 VLV_OLDERROR_22
    JR_GTF VLV_LECTURA1_22 10.0 whilebody620
    JR_GTF VLV_LECTURA4_22 10.0 whilebody620
  endwhile620:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_CRUCE14_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE14_1:
SUB_M_SIGUELINEAS_ENCODER31F_2:
    MULF VLV_VELOCIDAD_23 1.0 VLV_VELOCIDAD_23
    MOVEF_F 50.0 VLV_LECTURA1_23
    MOVEF_F 50.0 VLV_LECTURA3_23
    MOVEF_F 50.0 VLV_LECTURA4_23
    MATH POW VLV_VELOCIDAD_23 0.833333333333333 F.0
    DATAF tmpf646
    DATA8 flag646
    DIVF F.0 440.0 tmpf646
    CP_EQF 0.0 440.0 flag646
    SELECTF flag646 0.0 tmpf646 VLV_KP_23

    MULF VLV_KP_23 70.0 VLV_KD_23
    MOVEF_F 0.0 VLV_ERROR_23
    MOVEF_F 0.0 VLV_OLDERROR_23
    MOVEF_F 0.0 VLV_U_23
    MATH ABS VLV_VELOCIDAD_23 F.0
    DATAF tmpf649
    DATA8 flag649
    DIVF VLV_VELOCIDAD_23 F.0 tmpf649
    CP_EQF 0.0 F.0 flag649
    SELECTF flag649 0.0 tmpf649 VLV_SENTIDO_23

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf652
    DATA8 flag652
    DIVF VLV_ENCODER_23 F.1 tmpf652
    CP_EQF 0.0 F.1 flag652
    SELECTF flag652 0.0 tmpf652 F.0

    MULF F.0 360.0 VLV_ENCODER_23
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_23
    MOVEF_F 0.0 VLV_ENCODERC_23
    DATAF tmpf655
    DATA8 flag655
    DIVF VLV_VELOCIDAD_23 10.0 tmpf655
    CP_EQF 0.0 10.0 flag655
    SELECTF flag655 0.0 tmpf655 F.2

    DATAF tmpf656
    DATA8 flag656
    DIVF 11286.0 F.2 tmpf656
    CP_EQF 0.0 F.2 flag656
    SELECTF flag656 0.0 tmpf656 F.1

    DATAF tmpf657
    DATA8 flag657
    DIVF VLV_ENCODER_23 100.0 tmpf657
    CP_EQF 0.0 100.0 flag657
    SELECTF flag657 0.0 tmpf657 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf659
    DATA8 flag659
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf659
    CP_EQF 0.0 6.24 flag659
    SELECTF flag659 0.0 tmpf659 F.1

    DATAF tmpf660
    DATA8 flag660
    DIVF F.0 F.1 tmpf660
    CP_EQF 0.0 F.1 flag660
    SELECTF flag660 0.0 tmpf660 VLV_SAFETYTIMER_23

    TIMER_READ timeMC4
  while662:
    MATH ABS VLV_ENCODERC_23 F.0
    JR_GTEQF F.0 VLV_ENCODER_23 endwhile662
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_23 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile662
  whilebody662:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_23 VLV_ENCODERC_23
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf670
    DATA8 flag670
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf670
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag670
    SELECTF flag670 0.0 tmpf670 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_23
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf675
    DATA8 flag675
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf675
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag675
    SELECTF flag675 0.0 tmpf675 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_23
    SUBF VLV_LECTURA3_23 VLV_LECTURA1_23 F.1
    MULF F.1 VLV_SENTIDO_23 F.0
    MULF F.0 1.0 VLV_ERROR_23
    MULF VLV_ERROR_23 VLV_KP_23 F.0
    SUBF VLV_ERROR_23 VLV_OLDERROR_23 F.2
    MULF F.2 VLV_KD_23 F.1
    ADDF F.0 F.1 VLV_U_23
    ADDF VLV_VELOCIDAD_23 VLV_U_23 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_23 VLV_U_23 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_23 VLV_OLDERROR_23
    MATH ABS VLV_ENCODERC_23 F.0
    JR_GTEQF F.0 VLV_ENCODER_23 and689
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_23 2000.0 F.1
    JR_LTF F.0 F.1 whilebody662
  and689:
  endwhile662:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_23 2000.0 F.1
    JR_LTEQF F.0 F.1 else693_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else693_1:
  endif693:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_ENCODER31F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER31F_2:
SUB_M_SIGUELINEAS_ENCODER14F_2:
    MULF VLV_VELOCIDAD_24 1.0 VLV_VELOCIDAD_24
    MOVEF_F 50.0 VLV_LECTURA1_24
    MOVEF_F 50.0 VLV_LECTURA3_24
    MOVEF_F 50.0 VLV_LECTURA4_24
    MATH POW VLV_VELOCIDAD_24 0.833333333333333 F.0
    DATAF tmpf701
    DATA8 flag701
    DIVF F.0 440.0 tmpf701
    CP_EQF 0.0 440.0 flag701
    SELECTF flag701 0.0 tmpf701 VLV_KP_24

    MULF VLV_KP_24 70.0 VLV_KD_24
    MOVEF_F 0.0 VLV_ERROR_24
    MOVEF_F 0.0 VLV_OLDERROR_24
    MOVEF_F 0.0 VLV_U_24
    MATH ABS VLV_VELOCIDAD_24 F.0
    DATAF tmpf704
    DATA8 flag704
    DIVF VLV_VELOCIDAD_24 F.0 tmpf704
    CP_EQF 0.0 F.0 flag704
    SELECTF flag704 0.0 tmpf704 VLV_SENTIDO_24

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf707
    DATA8 flag707
    DIVF VLV_ENCODER_24 F.1 tmpf707
    CP_EQF 0.0 F.1 flag707
    SELECTF flag707 0.0 tmpf707 F.0

    MULF F.0 360.0 VLV_ENCODER_24
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_24
    MOVEF_F 0.0 VLV_ENCODERC_24
    DATAF tmpf710
    DATA8 flag710
    DIVF VLV_VELOCIDAD_24 10.0 tmpf710
    CP_EQF 0.0 10.0 flag710
    SELECTF flag710 0.0 tmpf710 F.2

    DATAF tmpf711
    DATA8 flag711
    DIVF 11286.0 F.2 tmpf711
    CP_EQF 0.0 F.2 flag711
    SELECTF flag711 0.0 tmpf711 F.1

    DATAF tmpf712
    DATA8 flag712
    DIVF VLV_ENCODER_24 100.0 tmpf712
    CP_EQF 0.0 100.0 flag712
    SELECTF flag712 0.0 tmpf712 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf714
    DATA8 flag714
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf714
    CP_EQF 0.0 6.24 flag714
    SELECTF flag714 0.0 tmpf714 F.1

    DATAF tmpf715
    DATA8 flag715
    DIVF F.0 F.1 tmpf715
    CP_EQF 0.0 F.1 flag715
    SELECTF flag715 0.0 tmpf715 VLV_SAFETYTIMER_24

    TIMER_READ timeMC4
  while717:
    MATH ABS VLV_ENCODERC_24 F.0
    JR_GTEQF F.0 VLV_ENCODER_24 endwhile717
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_24 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile717
  whilebody717:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_24 VLV_ENCODERC_24
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf725
    DATA8 flag725
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf725
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag725
    SELECTF flag725 0.0 tmpf725 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_24
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf730
    DATA8 flag730
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf730
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag730
    SELECTF flag730 0.0 tmpf730 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_24
    SUBF VLV_LECTURA1_24 VLV_LECTURA4_24 F.1
    MULF F.1 VLV_SENTIDO_24 F.0
    MULF F.0 1.0 VLV_ERROR_24
    MULF VLV_ERROR_24 VLV_KP_24 F.0
    SUBF VLV_ERROR_24 VLV_OLDERROR_24 F.2
    MULF F.2 VLV_KD_24 F.1
    ADDF F.0 F.1 VLV_U_24
    ADDF VLV_VELOCIDAD_24 VLV_U_24 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_24 VLV_U_24 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_24 VLV_OLDERROR_24
    MATH ABS VLV_ENCODERC_24 F.0
    JR_GTEQF F.0 VLV_ENCODER_24 and744
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_24 2000.0 F.1
    JR_LTF F.0 F.1 whilebody717
  and744:
  endwhile717:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_24 2000.0 F.1
    JR_LTEQF F.0 F.1 else748_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else748_1:
  endif748:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_ENCODER14F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER14F_2:
SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
    MULF VLV_VELOCIDAD_25 1.0 VLV_VELOCIDAD_25
    MOVEF_F 50.0 VLV_LECTURA1_25
    MOVEF_F 50.0 VLV_LECTURA3_25
    MOVEF_F 50.0 VLV_LECTURA4_25
    MATH POW VLV_VELOCIDAD_25 0.833333333333333 F.0
    DATAF tmpf756
    DATA8 flag756
    DIVF F.0 440.0 tmpf756
    CP_EQF 0.0 440.0 flag756
    SELECTF flag756 0.0 tmpf756 VLV_KP_25

    MULF VLV_KP_25 70.0 VLV_KD_25
    MOVEF_F 0.0 VLV_ERROR_25
    MOVEF_F 0.0 VLV_OLDERROR_25
    MOVEF_F 0.0 VLV_U_25
    MATH ABS VLV_VELOCIDAD_25 F.0
    DATAF tmpf759
    DATA8 flag759
    DIVF VLV_VELOCIDAD_25 F.0 tmpf759
    CP_EQF 0.0 F.0 flag759
    SELECTF flag759 0.0 tmpf759 VLV_SENTIDO_25

    MOVEF_F 50.0 VLV_LECTURA_25
  while760:
    JR_LTEQF VLV_LECTURA_25 7.0 endwhile760
  whilebody760:
    JR_NEQF VLV_READER_25 3.0 else761_1
    MOVEF_F VLV_LECTURA3_25 VLV_LECTURA_25
    MOVEF_F VLV_LECTURA1_25 VLV_LECTURAIZQ_25
    MOVEF_F VLV_LECTURA4_25 VLV_LECTURADCH_25
    JR endif761
  else761_1:
    MOVEF_F VLV_LECTURA4_25 VLV_LECTURA_25
    MOVEF_F VLV_LECTURA3_25 VLV_LECTURAIZQ_25
    MOVEF_F VLV_LECTURA1_25 VLV_LECTURADCH_25
  else761_2:
  endif761:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf764
    DATA8 flag764
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf764
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag764
    SELECTF flag764 0.0 tmpf764 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_25
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf769
    DATA8 flag769
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf769
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag769
    SELECTF flag769 0.0 tmpf769 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_25
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf774
    DATA8 flag774
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf774
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag774
    SELECTF flag774 0.0 tmpf774 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_25
    SUBF VLV_LECTURAIZQ_25 VLV_LECTURADCH_25 F.1
    MULF F.1 VLV_SENTIDO_25 F.0
    MULF F.0 1.0 VLV_ERROR_25
    MULF VLV_ERROR_25 VLV_KP_25 F.0
    SUBF VLV_ERROR_25 VLV_OLDERROR_25 F.2
    MULF F.2 VLV_KD_25 F.1
    ADDF F.0 F.1 VLV_U_25
    ADDF VLV_VELOCIDAD_25 VLV_U_25 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_25 VLV_U_25 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_25 VLV_OLDERROR_25
    JR_GTF VLV_LECTURA_25 7.0 whilebody760
  endwhile760:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
    MULF VLV_VELOCIDAD_26 1.0 VLV_VELOCIDAD_26
    MOVEF_F 50.0 VLV_LECTURA1_26
    MOVEF_F 50.0 VLV_LECTURA3_26
    MOVEF_F 50.0 VLV_LECTURA4_26
    MATH POW VLV_VELOCIDAD_26 0.833333333333333 F.0
    DATAF tmpf791
    DATA8 flag791
    DIVF F.0 440.0 tmpf791
    CP_EQF 0.0 440.0 flag791
    SELECTF flag791 0.0 tmpf791 VLV_KP_26

    MULF VLV_KP_26 70.0 VLV_KD_26
    MOVEF_F 0.0 VLV_ERROR_26
    MOVEF_F 0.0 VLV_OLDERROR_26
    MOVEF_F 0.0 VLV_U_26
    MATH ABS VLV_VELOCIDAD_26 F.0
    DATAF tmpf794
    DATA8 flag794
    DIVF VLV_VELOCIDAD_26 F.0 tmpf794
    CP_EQF 0.0 F.0 flag794
    SELECTF flag794 0.0 tmpf794 VLV_SENTIDO_26

    MOVEF_F 50.0 VLV_LECTURA_26
  while795:
    JR_LTEQF VLV_LECTURA_26 7.0 endwhile795
  whilebody795:
    JR_NEQF VLV_READER_26 3.0 else796_1
    MOVEF_F VLV_LECTURA3_26 VLV_LECTURA_26
    MOVEF_F VLV_LECTURA1_26 VLV_LECTURAIZQ_26
    MOVEF_F VLV_LECTURA4_26 VLV_LECTURADCH_26
    JR endif796
  else796_1:
    MOVEF_F VLV_LECTURA4_26 VLV_LECTURA_26
    MOVEF_F VLV_LECTURA3_26 VLV_LECTURAIZQ_26
    MOVEF_F VLV_LECTURA1_26 VLV_LECTURADCH_26
  else796_2:
  endif796:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf799
    DATA8 flag799
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf799
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag799
    SELECTF flag799 0.0 tmpf799 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_26
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf804
    DATA8 flag804
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf804
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag804
    SELECTF flag804 0.0 tmpf804 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_26
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf809
    DATA8 flag809
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf809
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag809
    SELECTF flag809 0.0 tmpf809 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_26
    SUBF VLV_LECTURAIZQ_26 VLV_LECTURADCH_26 F.1
    MULF F.1 VLV_SENTIDO_26 F.0
    MULF F.0 1.0 VLV_ERROR_26
    MULF VLV_ERROR_26 VLV_KP_26 F.0
    SUBF VLV_ERROR_26 VLV_OLDERROR_26 F.2
    MULF F.2 VLV_KD_26 F.1
    ADDF F.0 F.1 VLV_U_26
    ADDF VLV_VELOCIDAD_26 VLV_U_26 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_26 VLV_U_26 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_26 VLV_OLDERROR_26
    JR_GTF VLV_LECTURA_26 7.0 whilebody795
  endwhile795:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
SUB_M_SIGUELINEAS_ENCODER31_2:
    MULF VLV_VELOCIDAD_27 1.0 VLV_VELOCIDAD_27
    MOVEF_F 50.0 VLV_LECTURA1_27
    MOVEF_F 50.0 VLV_LECTURA3_27
    MOVEF_F 50.0 VLV_LECTURA4_27
    MATH POW VLV_VELOCIDAD_27 0.833333333333333 F.0
    DATAF tmpf826
    DATA8 flag826
    DIVF F.0 440.0 tmpf826
    CP_EQF 0.0 440.0 flag826
    SELECTF flag826 0.0 tmpf826 VLV_KP_27

    MULF VLV_KP_27 70.0 VLV_KD_27
    MOVEF_F 0.0 VLV_ERROR_27
    MOVEF_F 0.0 VLV_OLDERROR_27
    MOVEF_F 0.0 VLV_U_27
    MATH ABS VLV_VELOCIDAD_27 F.0
    DATAF tmpf829
    DATA8 flag829
    DIVF VLV_VELOCIDAD_27 F.0 tmpf829
    CP_EQF 0.0 F.0 flag829
    SELECTF flag829 0.0 tmpf829 VLV_SENTIDO_27

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf832
    DATA8 flag832
    DIVF VLV_ENCODER_27 F.1 tmpf832
    CP_EQF 0.0 F.1 flag832
    SELECTF flag832 0.0 tmpf832 F.0

    MULF F.0 360.0 VLV_ENCODER_27
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_27
    MOVEF_F 0.0 VLV_ENCODERC_27
    DATAF tmpf835
    DATA8 flag835
    DIVF VLV_VELOCIDAD_27 10.0 tmpf835
    CP_EQF 0.0 10.0 flag835
    SELECTF flag835 0.0 tmpf835 F.2

    DATAF tmpf836
    DATA8 flag836
    DIVF 11286.0 F.2 tmpf836
    CP_EQF 0.0 F.2 flag836
    SELECTF flag836 0.0 tmpf836 F.1

    DATAF tmpf837
    DATA8 flag837
    DIVF VLV_ENCODER_27 100.0 tmpf837
    CP_EQF 0.0 100.0 flag837
    SELECTF flag837 0.0 tmpf837 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf839
    DATA8 flag839
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf839
    CP_EQF 0.0 6.24 flag839
    SELECTF flag839 0.0 tmpf839 F.1

    DATAF tmpf840
    DATA8 flag840
    DIVF F.0 F.1 tmpf840
    CP_EQF 0.0 F.1 flag840
    SELECTF flag840 0.0 tmpf840 VLV_SAFETYTIMER_27

    TIMER_READ timeMC4
  while842:
    MATH ABS VLV_ENCODERC_27 F.0
    JR_GTEQF F.0 VLV_ENCODER_27 endwhile842
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_27 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile842
  whilebody842:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_27 VLV_ENCODERC_27
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf850
    DATA8 flag850
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf850
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag850
    SELECTF flag850 0.0 tmpf850 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_27
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf855
    DATA8 flag855
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf855
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag855
    SELECTF flag855 0.0 tmpf855 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_27
    SUBF VLV_LECTURA3_27 VLV_LECTURA1_27 F.1
    MULF F.1 VLV_SENTIDO_27 F.0
    MULF F.0 1.0 VLV_ERROR_27
    MULF VLV_ERROR_27 VLV_KP_27 F.0
    SUBF VLV_ERROR_27 VLV_OLDERROR_27 F.2
    MULF F.2 VLV_KD_27 F.1
    ADDF F.0 F.1 VLV_U_27
    ADDF VLV_VELOCIDAD_27 VLV_U_27 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_27 VLV_U_27 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_27 VLV_OLDERROR_27
    MATH ABS VLV_ENCODERC_27 F.0
    JR_GTEQF F.0 VLV_ENCODER_27 and869
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_27 2000.0 F.1
    JR_LTF F.0 F.1 whilebody842
  and869:
  endwhile842:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_27 2000.0 F.1
    JR_LTEQF F.0 F.1 else873_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else873_1:
  endif873:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_ENCODER31_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER31_2:
SUB_M_GIRO_GRADOS_3:
    DATAF tmpf879
    DATA8 flag879
    DIVF VLV_VELOCIDAD1_28 VLV_VELOCIDAD2_28 tmpf879
    CP_EQF 0.0 VLV_VELOCIDAD2_28 flag879
    SELECTF flag879 0.0 tmpf879 F.0

    DATAF tmpf880
    DATA8 flag880
    DIVF VLV_VELOCIDAD1_28 VLV_VELOCIDAD2_28 tmpf880
    CP_EQF 0.0 VLV_VELOCIDAD2_28 flag880
    SELECTF flag880 0.0 tmpf880 F.2

    MATH ABS F.2 F.1
    DATAF tmpf882
    DATA8 flag882
    DIVF F.0 F.1 tmpf882
    CP_EQF 0.0 F.1 flag882
    SELECTF flag882 0.0 tmpf882 VLV_SIGNO_28

    MATH ABS VLV_VELOCIDAD1_28 F.0
    MATH ABS VLV_VELOCIDAD2_28 F.1
    DATA8 flag885
	CP_LTF F.0 F.1 flag885
	SELECTF flag885 F.0 F.1 VLV_VMIN_28
    MATH ABS VLV_VELOCIDAD1_28 F.0
    MATH ABS VLV_VELOCIDAD2_28 F.1
    DATA8 flag888
	CP_GTF F.0 F.1 flag888
	SELECTF flag888 F.0 F.1 VLV_VMAX_28
    MULF VLV_GRADOS_28 VPR_GIRO_G1 F.0
    MULF VLV_SIGNO_28 VLV_VMIN_28 F.4
    DATAF tmpf891
    DATA8 flag891
    DIVF F.4 VLV_VMAX_28 tmpf891
    CP_EQF 0.0 VLV_VMAX_28 flag891
    SELECTF flag891 0.0 tmpf891 F.3

    SUBF F.3 1.0 F.2
    DATAF tmpf893
    DATA8 flag893
    DIVF -2.0 F.2 tmpf893
    CP_EQF 0.0 F.2 flag893
    SELECTF flag893 0.0 tmpf893 F.1

    MULF F.0 F.1 VLV_ENCODER_28
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds896
	MOVEF_32 100.0 milliseconds896
	DATA32 timer896
	TIMER_WAIT milliseconds896 timer896
	TIMER_READY timer896
    MATH NEGATE VLV_VELOCIDAD1_28 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_28 VLV_ENCODER_28 'True'

	DATA8 layer898
	DATA8 nos898
	DATA8 busy898
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer898 nos898
	JR_EQ8 0 nos898 motornotbusy898
  motorwaiting898:
	OUTPUT_TEST layer898 nos898 busy898
	JR_EQ8 busy898 0 motornotbusy898
	SLEEP
	JR motorwaiting898
  motornotbusy898:
    MOVEF_F 0.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 0.0 VLV_GRADOS_28
    DATA32 milliseconds899
	MOVEF_32 100.0 milliseconds899
	DATA32 timer899
	TIMER_WAIT milliseconds899 timer899
	TIMER_READY timer899
RETSUB_M_GIRO_GRADOS_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_GRADOS_3:
SUB_M_GIRO_NEGRO1F_3:
    MOVEF_F 50.0 VLV_LECTURA_29
  while900:
    JR_LTEQF VLV_LECTURA_29 15.0 endwhile900
  whilebody900:
    CALL SENSOR.READPERCENT VLV_SENS_29 F.2
    SUBF F.2 VPR_GIRO_NEGRO F.1
    DATAF tmpf903
    DATA8 flag903
    DIVF F.1 VPR_GIRO_BLANCO tmpf903
    CP_EQF 0.0 VPR_GIRO_BLANCO flag903
    SELECTF flag903 0.0 tmpf903 F.0

    SUBF 100.0 VPR_GIRO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_29
    MATH NEGATE VLV_VELOCIDAD1_29 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_29
    JR_GTF VLV_LECTURA_29 15.0 whilebody900
  endwhile900:
    CALL MOTOR.STOP 'BC' 'False'
RETSUB_M_GIRO_NEGRO1F_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_NEGRO1F_3:
SUB_M_GIRO_ENCODER_3:
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_GIRO_DIAMETRO F.2 F.1
    DATAF tmpf911
    DATA8 flag911
    DIVF VLV_DISTANCIA_30 F.1 tmpf911
    CP_EQF 0.0 F.1 flag911
    SELECTF flag911 0.0 tmpf911 F.0

    MULF F.0 360.0 VLV_ENCODER_30
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MATH NEGATE VLV_VELOCIDAD1_30 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_30 VLV_ENCODER_30 'True'

	DATA8 layer915
	DATA8 nos915
	DATA8 busy915
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer915 nos915
	JR_EQ8 0 nos915 motornotbusy915
  motorwaiting915:
	OUTPUT_TEST layer915 nos915 busy915
	JR_EQ8 busy915 0 motornotbusy915
	SLEEP
	JR motorwaiting915
  motornotbusy915:
RETSUB_M_GIRO_ENCODER_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_ENCODER_3:
SUB_M_GIRO_NEGRO1_3:
    MOVEF_F 50.0 VLV_LECTURA_31
  while916:
    JR_LTEQF VLV_LECTURA_31 15.0 endwhile916
  whilebody916:
    CALL SENSOR.READPERCENT VLV_SENS_31 F.2
    SUBF F.2 VPR_GIRO_NEGRO F.1
    DATAF tmpf919
    DATA8 flag919
    DIVF F.1 VPR_GIRO_BLANCO tmpf919
    CP_EQF 0.0 VPR_GIRO_BLANCO flag919
    SELECTF flag919 0.0 tmpf919 F.0

    SUBF 100.0 VPR_GIRO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_31
    MATH NEGATE VLV_VELOCIDAD1_31 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_31
    JR_GTF VLV_LECTURA_31 15.0 whilebody916
  endwhile916:
    CALL MOTOR.STOP 'BC' 'True'
RETSUB_M_GIRO_NEGRO1_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_NEGRO1_3:
SUB_M_RGB_DETECT_3:
    CALL SENSOR.GETMODE VLV_SENS_32 VLV_SENS_MODE_32
    DATA8 layer926
	DATA8 no926
	DATA8 mode8926
	
	MOVEF_8 VLV_SENS_32 no926
	SUB8 no926 1 no926
	DIV8 no926 4 layer926
	MATH MOD8 no926 4 no926

	MOVEF_8 4.0 mode8926
	
	INPUT_DEVICE READY_RAW layer926 no926 0 mode8926 0
    MOVEF_F 15.0 VLV_RED_32
    MOVEF_F 60.0 VLV_YELLOW_32
    MOVEF_F 170.0 VLV_GREEN_32
    MOVEF_F 330.0 VLV_BLUE_32
    MOVEF_F 0.0 VLV_HUE_32
    MOVEF_F 0.0 VLV_SAT_32
    MOVEF_F 0.0 VLV_VALUE_32
    MOVEF_F 0.0 VLV_COLOR_32
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_RNORMARRAY_32
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_GNORMARRAY_32
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_BNORMARRAY_32
    CALL LCD.CLEAR
    MOVEF_F 1.0 VLV_J_32
  for931:
    JR_GTF VLV_J_32 VLV_REPS_32 endfor931
  forbody931:
    CALL SENSOR.READRAW VLV_SENS_32 3.0 VLV_RGB_32
    CALL ARRAYGET_FLOAT 0.0 VLV_RRAW_32 VLV_RGB_32
    CALL ARRAYGET_FLOAT 1.0 VLV_GRAW_32 VLV_RGB_32
    CALL ARRAYGET_FLOAT 2.0 VLV_BRAW_32 VLV_RGB_32
    DATAF tmpf936
    DATA8 flag936
    DIVF VLV_RRAW_32 VPR_RGB_RWHITE tmpf936
    CP_EQF 0.0 VPR_RGB_RWHITE flag936
    SELECTF flag936 0.0 tmpf936 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_32 F.0 VLV_RNORMARRAY_32
    DATAF tmpf940
    DATA8 flag940
    DIVF VLV_GRAW_32 VPR_RGB_GWHITE tmpf940
    CP_EQF 0.0 VPR_RGB_GWHITE flag940
    SELECTF flag940 0.0 tmpf940 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_32 F.0 VLV_GNORMARRAY_32
    DATAF tmpf944
    DATA8 flag944
    DIVF VLV_BRAW_32 VPR_RGB_BWHITE tmpf944
    CP_EQF 0.0 VPR_RGB_BWHITE flag944
    SELECTF flag944 0.0 tmpf944 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_32 F.0 VLV_BNORMARRAY_32
    DATA32 milliseconds948
	MOVEF_32 5.0 milliseconds948
	DATA32 timer948
	TIMER_WAIT milliseconds948 timer948
	TIMER_READY timer948
    ADDF VLV_J_32 1.0 VLV_J_32
    JR_LTEQF VLV_J_32 VLV_REPS_32 forbody931
  endfor931:
    MOVEF_F 1.0 VLV_J_32
  for950:
    JR_GTF VLV_J_32 VLV_REPS_32 endfor950
  forbody950:
    CALL ARRAYGET_FLOAT VLV_J_32 F.0 VLV_RNORMARRAY_32
    ADDF VLV_J_32 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_RNORMARRAY_32
    ADDF F.0 F.1 VLV_RNORM_32
    CALL ARRAYGET_FLOAT VLV_J_32 F.0 VLV_GNORMARRAY_32
    ADDF VLV_J_32 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_GNORMARRAY_32
    ADDF F.0 F.1 VLV_GNORM_32
    CALL ARRAYGET_FLOAT VLV_J_32 F.0 VLV_BNORMARRAY_32
    ADDF VLV_J_32 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_BNORMARRAY_32
    ADDF F.0 F.1 VLV_BNORM_32
    ADDF VLV_J_32 2.0 VLV_J_32
    JR_LTEQF VLV_J_32 VLV_REPS_32 forbody950
  endfor950:
    DATAF tmpf964
    DATA8 flag964
    DIVF VLV_RNORM_32 VLV_REPS_32 tmpf964
    CP_EQF 0.0 VLV_REPS_32 flag964
    SELECTF flag964 0.0 tmpf964 VLV_RNORM_32

    DATAF tmpf965
    DATA8 flag965
    DIVF VLV_GNORM_32 VLV_REPS_32 tmpf965
    CP_EQF 0.0 VLV_REPS_32 flag965
    SELECTF flag965 0.0 tmpf965 VLV_GNORM_32

    DATAF tmpf966
    DATA8 flag966
    DIVF VLV_BNORM_32 VLV_REPS_32 tmpf966
    CP_EQF 0.0 VLV_REPS_32 flag966
    SELECTF flag966 0.0 tmpf966 VLV_BNORM_32

    DATA8 flag967
	CP_GTF VLV_RNORM_32 VLV_GNORM_32 flag967
	SELECTF flag967 VLV_RNORM_32 VLV_GNORM_32 F.0
    DATA8 flag968
	CP_GTF F.0 VLV_BNORM_32 flag968
	SELECTF flag968 F.0 VLV_BNORM_32 VLV_MAX_32
    DATA8 flag969
	CP_LTF VLV_RNORM_32 VLV_GNORM_32 flag969
	SELECTF flag969 VLV_RNORM_32 VLV_GNORM_32 F.0
    DATA8 flag970
	CP_LTF F.0 VLV_BNORM_32 flag970
	SELECTF flag970 F.0 VLV_BNORM_32 VLV_MIN_32
    JR_NEQF VLV_MAX_32 VLV_MIN_32 else971_1
    MOVEF_F 0.0 VLV_HUE_32
    JR endif971
  else971_1:
    JR_NEQF VLV_MAX_32 VLV_RNORM_32 else971_2
    JR_LTF VLV_GNORM_32 VLV_BNORM_32 else972_1
    SUBF VLV_GNORM_32 VLV_BNORM_32 F.1
    MULF 60.0 F.1 F.0
    SUBF VLV_MAX_32 VLV_MIN_32 F.1
    DATAF tmpf976
    DATA8 flag976
    DIVF F.0 F.1 tmpf976
    CP_EQF 0.0 F.1 flag976
    SELECTF flag976 0.0 tmpf976 VLV_HUE_32

    JR endif972
  else972_1:
    SUBF VLV_GNORM_32 VLV_BNORM_32 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_32 VLV_MIN_32 F.2
    DATAF tmpf980
    DATA8 flag980
    DIVF F.1 F.2 tmpf980
    CP_EQF 0.0 F.2 flag980
    SELECTF flag980 0.0 tmpf980 F.0

    ADDF F.0 360.0 VLV_HUE_32
  else972_2:
  endif972:
    JR endif971
  else971_2:
    JR_NEQF VLV_MAX_32 VLV_GNORM_32 else971_3
    SUBF VLV_BNORM_32 VLV_RNORM_32 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_32 VLV_MIN_32 F.2
    DATAF tmpf985
    DATA8 flag985
    DIVF F.1 F.2 tmpf985
    CP_EQF 0.0 F.2 flag985
    SELECTF flag985 0.0 tmpf985 F.0

    ADDF F.0 120.0 VLV_HUE_32
    JR endif971
  else971_3:
    SUBF VLV_RNORM_32 VLV_GNORM_32 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_32 VLV_MIN_32 F.2
    DATAF tmpf990
    DATA8 flag990
    DIVF F.1 F.2 tmpf990
    CP_EQF 0.0 F.2 flag990
    SELECTF flag990 0.0 tmpf990 F.0

    ADDF F.0 240.0 VLV_HUE_32
  else971_4:
  endif971:
    JR_NEQF VLV_MAX_32 0.0 else992_1
    MOVEF_F 0.0 VLV_SAT_32
    JR endif992
  else992_1:
    DATAF tmpf993
    DATA8 flag993
    DIVF VLV_MIN_32 VLV_MAX_32 tmpf993
    CP_EQF 0.0 VLV_MAX_32 flag993
    SELECTF flag993 0.0 tmpf993 F.0

    SUBF 1.0 F.0 VLV_SAT_32
  else992_2:
  endif992:
    MOVEF_F VLV_MAX_32 VLV_VALUE_32
    ADDF VPR_RGB_VALUEBLANCO VPR_RGB_VALUENEGRO F.0
    DATAF tmpf996
    DATA8 flag996
    DIVF F.0 2.0 tmpf996
    CP_EQF 0.0 2.0 flag996
    SELECTF flag996 0.0 tmpf996 VLV_RGBGREY_32

    ADDF VLV_RRAW_32 VLV_GRAW_32 F.1
    ADDF F.1 VLV_BRAW_32 F.0
    JR_GTF F.0 3.0 else997_1
    MOVEF_F 0.0 VLV_COLOR_32
    JR endif997
  else997_1:
    JR_GTEQF VLV_SAT_32 0.3 else1000_1
    JR_LTEQF VLV_VALUE_32 VLV_RGBGREY_32 else1001_1
    MOVEF_F 6.0 VLV_COLOR_32
    JR endif1001
  else1001_1:
    MOVEF_F 1.0 VLV_COLOR_32
  else1001_2:
  endif1001:
    JR endif1000
  else1000_1:
    JR_LTF VLV_HUE_32 0.0 else1002_1
    JR_GTEQF VLV_HUE_32 VLV_RED_32 else1002_1
    MOVEF_F 5.0 VLV_COLOR_32
    JR endif1002
  else1002_1:
    JR_LTF VLV_HUE_32 VLV_RED_32 else1002_2
    JR_GTEQF VLV_HUE_32 VLV_YELLOW_32 else1002_2
    MOVEF_F 4.0 VLV_COLOR_32
    JR endif1002
  else1002_2:
    JR_LTF VLV_HUE_32 VLV_YELLOW_32 else1002_3
    JR_GTEQF VLV_HUE_32 VLV_GREEN_32 else1002_3
    MOVEF_F 3.0 VLV_COLOR_32
    JR endif1002
  else1002_3:
    JR_LTF VLV_HUE_32 VLV_GREEN_32 else1002_4
    JR_GTEQF VLV_HUE_32 VLV_BLUE_32 else1002_4
    MOVEF_F 2.0 VLV_COLOR_32
    JR endif1002
  else1002_4:
    MOVEF_F 5.0 VLV_COLOR_32
  else1002_5:
  endif1002:
  else1000_2:
  endif1000:
  else997_2:
  endif997:
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    STRINGS VALUE_FORMATTED VLV_RRAW_32 '%g' 99 S.1
    CALL TEXT.APPEND 'R: ' S.1 S.0
    CALL LCD.WRITE 33.0 20.0 S.0
    STRINGS VALUE_FORMATTED VLV_GRAW_32 '%g' 99 S.1
    CALL TEXT.APPEND 'G: ' S.1 S.0
    CALL LCD.WRITE 33.0 35.0 S.0
    STRINGS VALUE_FORMATTED VLV_BRAW_32 '%g' 99 S.1
    CALL TEXT.APPEND 'B: ' S.1 S.0
    CALL LCD.WRITE 33.0 50.0 S.0
    STRINGS VALUE_FORMATTED VLV_COLOR_32 '%g' 99 S.1
    CALL TEXT.APPEND 'color: ' S.1 S.0
    CALL LCD.WRITE 33.0 70.0 S.0
    STRINGS VALUE_FORMATTED VLV_VALUE_32 '%g' 99 S.1
    CALL TEXT.APPEND 'Value: ' S.1 S.0
    CALL LCD.WRITE 33.0 90.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
    DATA8 layer1021
	DATA8 no1021
	DATA8 mode81021
	
	MOVEF_8 VLV_SENS_32 no1021
	SUB8 no1021 1 no1021
	DIV8 no1021 4 layer1021
	MATH MOD8 no1021 4 no1021

	MOVEF_8 VLV_SENS_MODE_32 mode81021
	
	INPUT_DEVICE READY_RAW layer1021 no1021 0 mode81021 0
RETSUB_M_RGB_DETECT_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RGB_DETECT_3:
SUB_M_RGB_GRITAR_1:
    JR_NEQF VLV_COLOR_33 0.0 else1022_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Zero'
    JR endif1022
  else1022_1:
    JR_NEQF VLV_COLOR_33 1.0 else1022_2
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Black'
    JR endif1022
  else1022_2:
    JR_NEQF VLV_COLOR_33 2.0 else1022_3
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/BLUE'
    JR endif1022
  else1022_3:
    JR_NEQF VLV_COLOR_33 3.0 else1022_4
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/GREEN'
    JR endif1022
  else1022_4:
    JR_NEQF VLV_COLOR_33 4.0 else1022_5
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/YELLOW'
    JR endif1022
  else1022_5:
    JR_NEQF VLV_COLOR_33 5.0 else1022_6
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/RED'
    JR endif1022
  else1022_6:
    JR_NEQF VLV_COLOR_33 6.0 else1022_7
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/White'
    JR endif1022
  else1022_7:
    JR_NEQF VLV_COLOR_33 7.0 else1022_8
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Brown'
  else1022_8:
  endif1022:
    SOUND_READY
RETSUB_M_RGB_GRITAR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RGB_GRITAR_1:
}
subcall ARRAYSTORE_FLOAT   // FFFV
{
	IN_F index
	IN_F value	
	IN_16 handle
	
	DATA32 index32
	DATA32 len	
	MOVEF_32 index index32

	ARRAY SIZE handle len
	JR_LT32 index32 0 negativeindex
	JR_LT32 index32 len arraybigenough

increasesize:	
	DATA32 doublelen
	ADD32 len len doublelen
	ARRAY RESIZE handle doublelen
writeloop:	
	ARRAY_WRITE handle len 0.0
	ADD32 len 1 len
	JR_LT32 len doublelen writeloop
	JR_GTEQ32 index32 len increasesize
	
arraybigenough:
	ARRAY_WRITE handle index32 value
negativeindex:
}
subcall SPEAKER.PLAY    // FSV 
{
	IN_F volume
	IN_S filename 252	

	// prepend a path to really reach the target file from the current working directory
	DATA8 vol 
	DATAS fullname 300
	MOVEF_8 volume vol

	STRINGS ADD '../../../..' filename fullname  // when using absolute path, go to file system top from the VM directory and then back down
	JR_EQ8 filename 47 absolutepath               // filename begins with a '/' - using absolute path
	STRINGS ADD '../prjs/' filename fullname      // by default use path relative to prjs folder (must go from the current VM directory to there)
absolutepath:
	
	SOUND PLAY vol fullname
}
subcall MOTOR.STOP       // SSV      MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_S brake 8

	DATA8 layer
	DATA8 nos	
	DATA8 brk
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	JR_EQ8 nos 0 noport

	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	
	
	OUTPUT_STOP layer nos brk
noport:
}
subcall MOTORDECODEPORTSDESCRIPTOR  //  V
{
	IN_S descriptor 8
	OUT_8 layer
	OUT_8 nos

	DATA8 i 
	DATA8 c

	MOVE8_8 0 layer
	MOVE8_8 0 nos	
	MOVE8_8 0 i
loop:
	READ8 descriptor i c
	JR_EQ8 c 0 decoding_end
	
	JR_LT8 c 65 no_uppercase_port
	JR_GT8 c 68 no_uppercase_port
	SUB8 c 65 c
	RL8  1 c c
	OR8  nos c nos
	JR loop_end
no_uppercase_port:
	JR_LT8 c 97 no_lowercase_port
	JR_GT8 c 100 no_lowercase_port
	SUB8 c 97 c
	RL8  1 c c
	OR8  nos c nos	
	JR loop_end
no_lowercase_port:
	JR_LT8 c 49 loop_end
	JR_GT8 c 52 loop_end
	SUB8 c 49 layer
loop_end:
	ADD8 1 i i
	JR loop	
	
decoding_end:
	RETURN
}
subcall ARRAYGET_FLOAT     // FFF
{
	IN_F index
	OUT_F value
	IN_16 handle
	
	DATA32 index32
	DATA32 len
	MOVEF_32 index index32
	
	ARRAY SIZE handle len
	JR_LT32 index32 0 outofbounds
	JR_GTEQ32 index32 len outofbounds
	
	ARRAY_READ handle index32 value
	RETURN
outofbounds:
	MOVE8_F 0 value	
}
subcall MOTOR.SCHEDULE   // SFFFFSV    MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F step1
	IN_F step2
	IN_F step3
	IN_S brake 8
	
	DATA8 layer
	DATA8 nos
	DATA8 spd
	DATA32 stp1
	DATA32 stp2
	DATA32 stp3	
	DATA8 brk
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	JR_EQ8 nos 0 noport

	MOVEF_8 speed spd
	MATH ABS step1 step1
	MOVEF_32 step1 stp1
	MATH ABS step2 step2
	MOVEF_32 step2 stp2
	MATH ABS step3 step3
	MOVEF_32 step3 stp3	
	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	

	OUTPUT_STEP_SPEED layer nos spd stp1 stp2 stp3 brk
noport:
}
subcall MOTOR.GETCOUNT    // SF     MOTORDECODEPORTDESCRIPTOR
{
	IN_S port 8
	OUT_F result
	
	DATA8 layer
	DATA8 no
	DATA32 tacho
	
	CALL MOTORDECODEPORTDESCRIPTOR port layer no
	JR_LT8 no 0 noport
	
	OUTPUT_GET_COUNT layer no tacho
	MOVE32_F tacho result

	DATA8 nos
	RL8 1 no nos
	DATA8 inv
	READ8 MOTORISINVERTED layer inv 
	AND8 inv nos inv
	JR_EQ8 inv 0 noinvert
	SUBF 0.0 result result
noinvert:
	RETURN

noport:	
	MOVE8_F 0 result	
}
subcall MOTORDECODEPORTDESCRIPTOR  //  V
{
	IN_S descriptor 8
	OUT_8 layer
	OUT_8 no

	DATA8 i 
	DATA8 c

	MOVE8_8 0 layer
	MOVE8_8 -1 no
	MOVE8_8 0 i
loop:
	READ8 descriptor i c
	JR_EQ8 c 0 decoding_end
	
	JR_LT8 c 65 no_uppercase_port
	JR_GT8 c 68 no_uppercase_port
	SUB8 c 65 c
	MOVE8_8 c no
	JR loop_end
no_uppercase_port:
	JR_LT8 c 97 no_lowercase_port
	JR_GT8 c 100 no_lowercase_port
	SUB8 c 97 c
	MOVE8_8 c no
	JR loop_end
no_lowercase_port:
	JR_LT8 c 49 loop_end
	JR_GT8 c 52 loop_end
	SUB8 c 49 layer
loop_end:
	ADD8 1 i i
	JR loop	
	
decoding_end:
	RETURN
}
subcall SENSOR.READPERCENT       // FF
{
	IN_F port
	OUT_F result

	DATA8 layer
	DATA8 no
	DATA8 percentage

	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	INPUT_READ layer no 0 -1 percentage
	JR_LT8 percentage 0 novalue
	
	MOVE8_F percentage result
	RETURN
novalue:	
	MOVE8_F 0 result
}
subcall MOTOR.STARTSYNC      // SFFV       MOTORSTARTSTEERIMPL
{
	IN_S ports 8
	IN_F speed1
	IN_F speed2

	JR_GTEQF speed1 -100.0 nottoosmall1
	MOVEF_F -100.0 speed1
nottoosmall1:
	JR_LTEQF speed1 100.0 nottoobig1
	MOVEF_F 100.0 speed1
nottoobig1:
	JR_GTEQF speed2 -100.0 nottoosmall2
	MOVEF_F -100.0 speed2
nottoosmall2:
	JR_LTEQF speed1 100.0 nottoobig2
	MOVEF_F 100.0 speed2
nottoobig2:

	DATAF speed  
	DATAF turn
	MOVE8_F 0 speed
	MOVE8_F 0 turn

	DATAF speed1abs
	DATAF speed2abs
	MATH ABS speed1 speed1abs
	MATH ABS speed2 speed2abs
	JR_LTF speed1abs speed2abs secondisfaster
	JR_EQF speed1abs 0.0 donecomputation
	 MOVEF_F speed1 speed
	 MULF 100.0 speed2 turn
	 DIVF turn speed1 turn
	 SUBF 100.0 turn turn
	JR donecomputation
secondisfaster:
	 MOVEF_F speed2 speed
	 MULF 100.0 speed1 turn
	 DIVF turn speed2 turn
	 SUBF turn 100.0 turn
donecomputation:

	CALL MOTORSTARTSTEERIMPL ports speed turn
}
subcall MOTORSTARTSTEERIMPL      // SFFV       MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F turn

	DATA8 layer
	DATA8 nos	
	DATA8 first
	DATA8 second
	DATA8 invfirst
	DATA8 invsecond

	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	READ8 FIRSTOF2 nos first
	JR_EQ8 0 first not_two_ports
	XOR8 first nos second
	READ8 MOTORISINVERTED layer invfirst
	AND8 first invfirst invfirst
	READ8 MOTORISINVERTED layer invsecond
	AND8 second invsecond invsecond

	JR_LTF turn 0.0 second_is_master
first_is_master:
	JR_EQ8 invfirst 0 non_invert_first
	SUBF 0.0 speed speed
	JR_NEQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion
non_invert_first:
	JR_EQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion

second_is_master:
	JR_EQ8 invsecond 0 non_invert_second
	SUBF 0.0 speed speed
	JR_NEQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion
non_invert_second:
	JR_EQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion

done_inversion:
	DATA8 spd  
	DATA16 trn
	MOVEF_16 turn trn
	MOVEF_8 speed spd
	OUTPUT_STEP_SYNC layer nos spd trn 0 0
not_two_ports:
}
subcall EV3.BATTERYVOLTAGE  // F
{
	OUT_F voltage
	UI_READ GET_VBATT voltage
}
subcall TEXT.APPEND     // SSS
{
	IN_S a 252
	IN_S b 252
    OUT_S result 252
	
	DATA16 len0
	DATA16 len1
	DATA16 sum

	STRINGS GET_SIZE a len0
	STRINGS GET_SIZE b len1
	ADD16 len0,len1,sum
	JR_GT16 sum,251,stringsizeexceeded

	STRINGS ADD a b result
	RETURN
	
stringsizeexceeded:	
    STRINGS DUPLICATE a result
}
subcall LCD.CLEAR   // V
{
	UI_DRAW(TOPLINE,0)
	UI_DRAW(CLEAN)
	
	JR_NEQ32 0 STOPLCDUPDATE skipupdate
	UI_DRAW UPDATE
skipupdate:
}
subcall LCD.WRITE     // FFSV
{
	IN_F x
	IN_F y
	IN_S text 252
	
	DATA16 x_16
	DATA16 y_16
	MOVEF_16 x x_16
	MOVEF_16 y y_16
	
	UI_DRAW SELECT_FONT 1
	UI_DRAW TEXT 1 x_16 y_16 text

	JR_NEQ32 0 STOPLCDUPDATE skipupdate
	UI_DRAW UPDATE
skipupdate:
}
subcall EQ_STRING       // SSS
{
	IN_S  a 252
	IN_S  b 252
	OUT_S result 8
	
	DATA8 flag
	
	// check if completely equal
	STRINGS COMPARE a b flag
	JR_NEQ8 FLAG 0 isequal
	// second chance: when both values are "True" in any casing, this also counts as equal
	AND8888_32 a -538976289 a        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE a 'TRUE' flag	
	JR_EQ8 0,flag,isnotequal
	AND8888_32 b -538976289 b        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE b 'TRUE' flag	
	JR_EQ8 0,flag,isnotequal
isequal:
	STRINGS DUPLICATE 'True' result
	RETURN
isnotequal:
	STRINGS DUPLICATE 'False' result
	RETURN
}
subcall MOTOR.SCHEDULESYNC   // SFFFSV    MOTORSCHEDULESTEERIMPL
{
	IN_S ports 8
	IN_F speed1
	IN_F speed2
	IN_F count
	IN_S brake 8
	
	JR_GTEQF speed1 -100.0 nottoosmall1
	MOVEF_F -100.0 speed1
nottoosmall1:
	JR_LTEQF speed1 100.0 nottoobig1
	MOVEF_F 100.0 speed1
nottoobig1:
	JR_GTEQF speed2 -100.0 nottoosmall2
	MOVEF_F -100.0 speed2
nottoosmall2:
	JR_LTEQF speed2 100.0 nottoobig2
	MOVEF_F 100.0 speed2
nottoobig2:

	DATAF speed  
	DATAF turn
	MOVE8_F 0 speed
	MOVE8_F 0 turn

	DATAF speed1abs
	DATAF speed2abs
	MATH ABS speed1 speed1abs
	MATH ABS speed2 speed2abs
	JR_LTF speed1abs speed2abs secondisfaster
	JR_EQF speed1abs 0.0 donecomputation
	 MOVEF_F speed1 speed
	 MULF 100.0 speed2 turn
	 DIVF turn speed1 turn
	 SUBF 100.0 turn turn
	JR donecomputation
secondisfaster:
	 MOVEF_F speed2 speed
	 MULF 100.0 speed1 turn
	 DIVF turn speed2 turn
	 SUBF turn 100.0 turn
donecomputation:
	
	CALL MOTORSCHEDULESTEERIMPL ports speed turn count brake
}
subcall MOTORSCHEDULESTEERIMPL   // SFFFSV    MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F turn
	IN_F count
	IN_S brake 8
	
	DATA8 layer
	DATA8 nos	
	DATA8 first
	DATA8 second
	DATA8 invfirst
	DATA8 invsecond
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	READ8 FIRSTOF2 nos first
	JR_EQ8 0 first not_two_ports
	XOR8 first nos second
	READ8 MOTORISINVERTED layer invfirst
	AND8 first invfirst invfirst
	READ8 MOTORISINVERTED layer invsecond
	AND8 second invsecond invsecond

	JR_LTF turn 0.0 second_is_master
first_is_master:
	JR_EQ8 invfirst 0 non_invert_first
	SUBF 0.0 speed speed
	JR_NEQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion
non_invert_first:
	JR_EQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion

second_is_master:
	JR_EQ8 invsecond 0 non_invert_second
	SUBF 0.0 speed speed
	JR_NEQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion
non_invert_second:
	JR_EQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion

done_inversion:
	DATA32 cnt
	DATA8 brk
	MATH ABS count count
	MOVEF_32 count cnt
	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	

	JR_LTEQ32 cnt 0 dontmove	

	DATA8 spd  
	DATA16 trn
	MOVEF_16 turn trn
	MOVEF_8 speed spd
	OUTPUT_STEP_SYNC layer nos spd trn cnt brk	
dontmove:	
not_two_ports:
}
subcall SENSOR.GETMODE		// FF
{
	IN_F port
	OUT_F result
	
	DATA8 layer
	DATA8 no
	DATA8 type
	DATA8 mode
	
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no
	
	INPUT_DEVICE GET_TYPEMODE layer no type mode
	MOVE8_F mode result
}
subcall SENSOR.READRAW            // FFA
{
	IN_F port
	IN_F values
	IN_16 resultarray
	
	DATA8 layer
	DATA8 no
	DATA32 values32
		
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	MOVEF_32 values values32

	JR_LTEQ32 values32 0 arrayempty
	ARRAY RESIZE resultarray values32

	DATA32 rawvalue0
	DATA32 rawvalue1
	DATA32 rawvalue2
	DATA32 rawvalue3
	DATA32 rawvalue4
	DATA32 rawvalue5
	DATA32 rawvalue6
	DATA32 rawvalue7
	INPUT_READEXT layer no 0 -1 18 8 rawvalue0 rawvalue1 rawvalue2 rawvalue3 rawvalue4 rawvalue5 rawvalue6 rawvalue7
	
	DATA32 i
	DATA32 rawtmp
	MOVE32_32 0 i
loop:
	DATA8 tmp8
	DATAF tmpf

	MOVEF_F 0.0 tmpf
	JR_GTEQ32 i 8 nomoredata

	MOVE32_8 i tmp8
	READ32 rawvalue0 tmp8 rawtmp
	JR_LT32 rawtmp -1000000000 nomoredata
	MOVE32_F rawtmp tmpf

nomoredata:	
	ARRAY_WRITE resultarray i tmpf

	ADD32 i 1 i
	JR_LT32 i values32 loop
	RETURN

arrayempty:
	ARRAY RESIZE resultarray 0
}
subcall ARRAYCREATE_FLOAT   // F
{
	OUT_16 handle
	
	ARRAY CREATEF 8 handle			// create with 8 elements
	ARRAY FILL handle 0.0
}
subcall GETANDINC32     // V
{
	IN_32 counterin
	IN_32 inc
	OUT_32 counterout
	OUT_32 prev

	MOVE32_32 counterin prev
	ADD32 counterin inc counterout
}
