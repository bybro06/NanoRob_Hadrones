DATA16 FD_NATIVECODECOMMAND
DATA16 FD_NATIVECODERESPONSE
DATA32 STOPLCDUPDATE
DATA32 NUMMAILBOXES
ARRAY8 MOTORISINVERTED 4     
ARRAY8 FIRSTOF2  16
ARRAY16 LOCKS 2           
DATA32 s1out1
DATA32 s1out2
DATA32 s1out3
DATA32 s2out1
DATA32 s2out2
DATA32 s2out3
DATA32 s3out1
DATA32 s3out2
DATA32 s3out3
DATA32 s4out1
DATA32 s4out2
DATA32 s4out3
DATA32 getTachoA
DATA32 tmpTachoA
DATA8 getSpeedA
DATA8 setSpeedA
DATA8 setPowerA
DATA32 getTachoB
DATA32 tmpTachoB
DATA8 getSpeedB
DATA8 setSpeedB
DATA8 setPowerB
DATA32 getTachoC
DATA32 tmpTachoC
DATA8 getSpeedC
DATA8 setSpeedC
DATA8 setPowerC
DATA32 getTachoD
DATA32 tmpTachoD
DATA8 getSpeedD
DATA8 setSpeedD
DATA8 setPowerD
DATA16 newArray1d
DATA32 newSize1d
DATA32 newIndex1d
DATA32 timeMC1
DATA32 timeMC2
DATA32 timeMC3
DATA32 timeMC4
DATA32 timeMC5
DATA32 timeMC6
DATA32 timeMC7
DATA32 timeMC8
DATA32 timeMC9
DATA32 timeMC1tmp
DATA32 timeMC2tmp
DATA32 timeMC3tmp
DATA32 timeMC4tmp
DATA32 timeMC5tmp
DATA32 timeMC6tmp
DATA32 timeMC7tmp
DATA32 timeMC8tmp
DATA32 timeMC9tmp
DATAF VPR_GIRO_G1
DATAF VPR_RGB_VALUENEGRO
DATAF VPR_RGB_VALUEBLANCO
DATAF VPR_RGB_RWHITE
DATAF VPR_RGB_GWHITE
DATAF VPR_RGB_BWHITE
DATAF VPR_RECTO_DIAMETRO
DATAF VPR_GIRO_DIAMETRO
DATAF VPR_SIGUELINEAS_DIAMETRO
DATAF VPR_SMART_DIAMETRO
DATAF VPR_SIGUELINEAS_NEGRO1
DATAF VPR_SIGUELINEAS_NEGRO3
DATAF VPR_SIGUELINEAS_NEGRO4
DATAF VPR_SIGUELINEAS_BLANCO1
DATAF VPR_SIGUELINEAS_BLANCO3
DATAF VPR_SIGUELINEAS_BLANCO4
DATAF VPR_SMART_NEGRO1
DATAF VPR_SMART_NEGRO3
DATAF VPR_SMART_NEGRO4
DATAF VPR_SMART_BLANCO1
DATAF VPR_SMART_BLANCO3
DATAF VPR_SMART_BLANCO4
DATAF VPR_RECTO_NEGRO
DATAF VPR_RECTO_BLANCO
DATAF VPR_GIRO_NEGRO
DATAF VPR_GIRO_BLANCO
DATAF VLV_NUMERO_2
DATAF VLV_VELOCIDAD_9
DATAF VLV_TIMER_9
DATAF VLV_VELOCIDAD_10
DATAF VLV_ENCODER_10
DATAF VLV_VELOCIDAD1_11
DATAF VLV_VELOCIDAD2_11
DATAF VLV_DISTANCIA_11
DATAF VLV_VELOCIDAD1_12
DATAF VLV_VELOCIDAD2_12
DATAF VLV_GRADOS_12
DATAF VLV_VELOCIDAD_19
DATAF VLV_SENSOR_19
DATAF VLV_VELOCIDAD1_13
DATAF VLV_VELOCIDAD2_13
DATAF VLV_GRADOS_13
DATAF VLV_VELOCIDAD_27
DATAF VLV_VELOCIDAD_28
DATAF VLV_ENCODER_28
DATAF VLV_VELOCIDAD_20
DATAF VLV_DISTANCIA_20
DATAF VLV_SENS_34
DATAF VLV_REPS_34
DATAF VLV_COLOR_34
DATAF VLV_VELOCIDAD_21
DATAF VLV_TIEMPO_21
DATAF VLV_VELOCIDAD1_14
DATAF VLV_VELOCIDAD2_14
DATAF VLV_SENS_14
DATAF VLV_VELOCIDAD_29
DATAF VLV_ENCODER_29
DATAF VLV_VELOCIDAD_22
DATAF VLV_DISTANCIA_22
DATAF VLV_VELOCIDAD1_15
DATAF VLV_VELOCIDAD2_15
DATAF VLV_SENS_15
DATAF VLV_VELOCIDAD_30
DATAF VLV_READER_30
DATAF VLV_VELOCIDAD_23
DATAF VLV_SENSOR_23
DATAF VLV_COLOR_23
DATAF VLV_VELOCIDAD1_16
DATAF VLV_VELOCIDAD2_16
DATAF VLV_DISTANCIA_16
DATAF VLV_VELOCIDAD_24
DATAF VLV_SENSOR_24
DATAF VLV_VELOCIDAD_31
DATAF VLV_READER_31
DATAF VLV_VELOCIDAD_25
DATAF VLV_SENSOR_25
ARRAY16 VLV_MARKING_6 2
DATAF VLV_VELOCIDAD_26
DATAF VLV_SENSOR_26
DATAF VLV_VELOCIDAD_32
DATAF VLV_ENCODER_32
DATAF VLV_VELOCIDAD_33
DATAF VLV_ENCODER_33
DATAF VLV_VELOCIDAD1_17
DATAF VLV_VELOCIDAD2_17
DATAF VLV_TIEMPO_17
DATAF VLV_VELOCIDAD1_18
DATAF VLV_VELOCIDAD2_18
DATAF VLV_TIEMPO_18
DATAF VLV_COLOR_35
ARRAY16 VLV_MARKING_4 2
DATAS VLV_CODIGO_4 252
DATAF VLV_GRADOS_5
DATAF VGV_MARKINGGRANDE
DATAS VLV_CODIGO_6 252
DATAF VGV_DIAMETRO
DATAF VGV_NEGRO1
DATAF VGV_NEGRO3
DATAF VGV_NEGRO4
DATAF VGV_BLANCO1
DATAF VGV_BLANCO3
DATAF VGV_BLANCO4
DATAF VGV_COLOR
ARRAY16 VGV_MARKING 2
DATAF VGV_TIEMPO
DATAF VLV_VOLTAJE_1
DATAF VLV_AUX_4
DATAF VLV_I_4
DATAF VLV_SIGNO_5
DATAF VLV_ENCDIFF_10
DATAF VLV_SIGNO_10
DATAF VLV_ENCODER_11
DATAF VLV_SIGNO_12
DATAF VLV_VMIN_12
DATAF VLV_VMAX_12
DATAF VLV_ENCODER_12
DATAF VLV_SIGNO_13
DATAF VLV_VMIN_13
DATAF VLV_VMAX_13
DATAF VLV_ENCODER_13
DATAF VLV_LECTURA_14
DATAF VLV_LECTURA_15
DATAF VLV_ENCODER_16
DATAF VLV_CORRECCION_19
DATAF VLV_LECTURA_19
DATAF VLV_SAFETYTIMER_20
DATAF VLV_CORRECCION_20
DATAF VLV_ENC_20
DATAF VLV_CORRECCION_21
DATAF VLV_SAFETYTIMER_22
DATAF VLV_CORRECCION_22
DATAF VLV_ENC_22
DATAF VLV_CORRECCION_23
DATAF VLV_MODE_23
DATAF VLV_CORRECCION_24
DATAF VLV_LECTURA_24
DATAF VLV_CORRECCION_25
DATAF VLV_LECTURA_25
DATAF VLV_CORRECCION_26
DATAF VLV_LECTURA_26
DATAF VLV_LECTURA1_27
DATAF VLV_LECTURA3_27
DATAF VLV_LECTURA4_27
DATAF VLV_KP_27
DATAF VLV_KD_27
DATAF VLV_ERROR_27
DATAF VLV_OLDERROR_27
DATAF VLV_U_27
DATAF VLV_SENTIDO_27
DATAF VLV_LECTURA1_28
DATAF VLV_LECTURA3_28
DATAF VLV_LECTURA4_28
DATAF VLV_KP_28
DATAF VLV_KD_28
DATAF VLV_ERROR_28
DATAF VLV_OLDERROR_28
DATAF VLV_U_28
DATAF VLV_SENTIDO_28
DATAF VLV_STARTC_28
DATAF VLV_ENCODERC_28
DATAF VLV_SAFETYTIMER_28
DATAF VLV_LECTURA1_29
DATAF VLV_LECTURA3_29
DATAF VLV_LECTURA4_29
DATAF VLV_KP_29
DATAF VLV_KD_29
DATAF VLV_ERROR_29
DATAF VLV_OLDERROR_29
DATAF VLV_U_29
DATAF VLV_SENTIDO_29
DATAF VLV_STARTC_29
DATAF VLV_ENCODERC_29
DATAF VLV_SAFETYTIMER_29
DATAF VLV_LECTURA1_30
DATAF VLV_LECTURA3_30
DATAF VLV_LECTURA4_30
DATAF VLV_KP_30
DATAF VLV_KD_30
DATAF VLV_ERROR_30
DATAF VLV_OLDERROR_30
DATAF VLV_U_30
DATAF VLV_SENTIDO_30
DATAF VLV_LECTURA_30
DATAF VLV_LECTURAIZQ_30
DATAF VLV_LECTURADCH_30
DATAF VLV_LECTURA1_31
DATAF VLV_LECTURA3_31
DATAF VLV_LECTURA4_31
DATAF VLV_KP_31
DATAF VLV_KD_31
DATAF VLV_ERROR_31
DATAF VLV_OLDERROR_31
DATAF VLV_U_31
DATAF VLV_SENTIDO_31
DATAF VLV_LECTURA_31
DATAF VLV_LECTURAIZQ_31
DATAF VLV_LECTURADCH_31
DATAF VLV_LECTURA1_32
DATAF VLV_LECTURA3_32
DATAF VLV_LECTURA4_32
DATAF VLV_KP_32
DATAF VLV_KD_32
DATAF VLV_ERROR_32
DATAF VLV_OLDERROR_32
DATAF VLV_U_32
DATAF VLV_SENTIDO_32
DATAF VLV_STARTC_32
DATAF VLV_ENCODERC_32
DATAF VLV_SAFETYTIMER_32
DATAF VLV_LECTURA1_33
DATAF VLV_LECTURA3_33
DATAF VLV_LECTURA4_33
DATAF VLV_KP_33
DATAF VLV_KD_33
DATAF VLV_ERROR_33
DATAF VLV_OLDERROR_33
DATAF VLV_U_33
DATAF VLV_SENTIDO_33
DATAF VLV_STARTC_33
DATAF VLV_ENCODERC_33
DATAF VLV_SAFETYTIMER_33
DATAF VLV_SENS_MODE_34
DATAF VLV_RED_34
DATAF VLV_YELLOW_34
DATAF VLV_GREEN_34
DATAF VLV_BLUE_34
DATAF VLV_HUE_34
DATAF VLV_SAT_34
DATAF VLV_VALUE_34
ARRAY16 VLV_RNORMARRAY_34 2
ARRAY16 VLV_GNORMARRAY_34 2
ARRAY16 VLV_BNORMARRAY_34 2
DATAF VLV_J_34
ARRAY16 VLV_RGB_34 2
DATAF VLV_RRAW_34
DATAF VLV_GRAW_34
DATAF VLV_BRAW_34
DATAF VLV_RNORM_34
DATAF VLV_GNORM_34
DATAF VLV_BNORM_34
DATAF VLV_MAX_34
DATAF VLV_MIN_34
DATAF VLV_RGBGREY_34
DATA32 RUNCOUNTER_F_SAFETYTIMERBRAZO_0

vmthread MAIN
{
    MOVE32_32 0 STOPLCDUPDATE
    MOVE32_32 0 NUMMAILBOXES
    OUTPUT_RESET 0 15

	WRITE8 0 0 MOTORISINVERTED
	WRITE8 0 1 MOTORISINVERTED
	WRITE8 0 2 MOTORISINVERTED
	WRITE8 0 3 MOTORISINVERTED
	WRITE8 0 0 FIRSTOF2
	WRITE8 0 1 FIRSTOF2
	WRITE8 0 2 FIRSTOF2
	WRITE8 1 3 FIRSTOF2
	WRITE8 0 4 FIRSTOF2
	WRITE8 1 5 FIRSTOF2
	WRITE8 2 6 FIRSTOF2
	WRITE8 0 7 FIRSTOF2
	WRITE8 0 8 FIRSTOF2
	WRITE8 1 9 FIRSTOF2
	WRITE8 2 10 FIRSTOF2
	WRITE8 0 11 FIRSTOF2
	WRITE8 4 12 FIRSTOF2
	WRITE8 0 13 FIRSTOF2
	WRITE8 0 14 FIRSTOF2
	WRITE8 0 15 FIRSTOF2
    INPUT_DEVICE CLR_ALL -1
    ARRAY CREATE8 0 LOCKS
    MOVE32_32 0 s1out1
	MOVE32_32 0 s1out2
	MOVE32_32 0 s1out3
    MOVE32_32 0 s2out1
	MOVE32_32 0 s2out2
	MOVE32_32 0 s2out3
    MOVE32_32 0 s3out1
	MOVE32_32 0 s3out2
	MOVE32_32 0 s3out3
    MOVE32_32 0 s4out1
	MOVE32_32 0 s4out2
	MOVE32_32 0 s4out3
    MOVE32_32 0 timeMC1
	MOVE32_32 0 timeMC2
	MOVE32_32 0 timeMC3
	MOVE32_32 0 timeMC4
	MOVE32_32 0 timeMC5
	MOVE32_32 0 timeMC6
	MOVE32_32 0 timeMC7
	MOVE32_32 0 timeMC8
	MOVE32_32 0 timeMC9
    MOVEF_F 0.0 VPR_GIRO_G1
    MOVEF_F 0.0 VPR_RGB_VALUENEGRO
    MOVEF_F 0.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 0.0 VPR_RGB_RWHITE
    MOVEF_F 0.0 VPR_RGB_GWHITE
    MOVEF_F 0.0 VPR_RGB_BWHITE
    MOVEF_F 0.0 VPR_RECTO_DIAMETRO
    MOVEF_F 0.0 VPR_GIRO_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F 0.0 VPR_SMART_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F 0.0 VPR_SMART_NEGRO1
    MOVEF_F 0.0 VPR_SMART_NEGRO3
    MOVEF_F 0.0 VPR_SMART_NEGRO4
    MOVEF_F 0.0 VPR_SMART_BLANCO1
    MOVEF_F 0.0 VPR_SMART_BLANCO3
    MOVEF_F 0.0 VPR_SMART_BLANCO4
    MOVEF_F 0.0 VPR_RECTO_NEGRO
    MOVEF_F 0.0 VPR_RECTO_BLANCO
    MOVEF_F 0.0 VPR_GIRO_NEGRO
    MOVEF_F 0.0 VPR_GIRO_BLANCO
    MOVEF_F 0.0 VLV_NUMERO_2
    MOVEF_F 0.0 VLV_VELOCIDAD_9
    MOVEF_F 0.0 VLV_TIMER_9
    MOVEF_F 0.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    MOVEF_F 0.0 VLV_VELOCIDAD1_11
    MOVEF_F 0.0 VLV_VELOCIDAD2_11
    MOVEF_F 0.0 VLV_DISTANCIA_11
    MOVEF_F 0.0 VLV_VELOCIDAD1_12
    MOVEF_F 0.0 VLV_VELOCIDAD2_12
    MOVEF_F 0.0 VLV_GRADOS_12
    MOVEF_F 0.0 VLV_VELOCIDAD_19
    MOVEF_F 0.0 VLV_SENSOR_19
    MOVEF_F 0.0 VLV_VELOCIDAD1_13
    MOVEF_F 0.0 VLV_VELOCIDAD2_13
    MOVEF_F 0.0 VLV_GRADOS_13
    MOVEF_F 0.0 VLV_VELOCIDAD_27
    MOVEF_F 0.0 VLV_VELOCIDAD_28
    MOVEF_F 0.0 VLV_ENCODER_28
    MOVEF_F 0.0 VLV_VELOCIDAD_20
    MOVEF_F 0.0 VLV_DISTANCIA_20
    MOVEF_F 0.0 VLV_SENS_34
    MOVEF_F 0.0 VLV_REPS_34
    MOVEF_F 0.0 VLV_COLOR_34
    MOVEF_F 0.0 VLV_VELOCIDAD_21
    MOVEF_F 0.0 VLV_TIEMPO_21
    MOVEF_F 0.0 VLV_VELOCIDAD1_14
    MOVEF_F 0.0 VLV_VELOCIDAD2_14
    MOVEF_F 0.0 VLV_SENS_14
    MOVEF_F 0.0 VLV_VELOCIDAD_29
    MOVEF_F 0.0 VLV_ENCODER_29
    MOVEF_F 0.0 VLV_VELOCIDAD_22
    MOVEF_F 0.0 VLV_DISTANCIA_22
    MOVEF_F 0.0 VLV_VELOCIDAD1_15
    MOVEF_F 0.0 VLV_VELOCIDAD2_15
    MOVEF_F 0.0 VLV_SENS_15
    MOVEF_F 0.0 VLV_VELOCIDAD_30
    MOVEF_F 0.0 VLV_READER_30
    MOVEF_F 0.0 VLV_VELOCIDAD_23
    MOVEF_F 0.0 VLV_SENSOR_23
    MOVEF_F 0.0 VLV_COLOR_23
    MOVEF_F 0.0 VLV_VELOCIDAD1_16
    MOVEF_F 0.0 VLV_VELOCIDAD2_16
    MOVEF_F 0.0 VLV_DISTANCIA_16
    MOVEF_F 0.0 VLV_VELOCIDAD_24
    MOVEF_F 0.0 VLV_SENSOR_24
    MOVEF_F 0.0 VLV_VELOCIDAD_31
    MOVEF_F 0.0 VLV_READER_31
    MOVEF_F 0.0 VLV_VELOCIDAD_25
    MOVEF_F 0.0 VLV_SENSOR_25
    CALL ARRAYCREATE_FLOAT VLV_MARKING_6
    MOVEF_F 0.0 VLV_VELOCIDAD_26
    MOVEF_F 0.0 VLV_SENSOR_26
    MOVEF_F 0.0 VLV_VELOCIDAD_32
    MOVEF_F 0.0 VLV_ENCODER_32
    MOVEF_F 0.0 VLV_VELOCIDAD_33
    MOVEF_F 0.0 VLV_ENCODER_33
    MOVEF_F 0.0 VLV_VELOCIDAD1_17
    MOVEF_F 0.0 VLV_VELOCIDAD2_17
    MOVEF_F 0.0 VLV_TIEMPO_17
    MOVEF_F 0.0 VLV_VELOCIDAD1_18
    MOVEF_F 0.0 VLV_VELOCIDAD2_18
    MOVEF_F 0.0 VLV_TIEMPO_18
    MOVEF_F 0.0 VLV_COLOR_35
    CALL ARRAYCREATE_FLOAT VLV_MARKING_4
    STRINGS DUPLICATE '' VLV_CODIGO_4
    MOVEF_F 0.0 VLV_GRADOS_5
    MOVEF_F 0.0 VGV_MARKINGGRANDE
    STRINGS DUPLICATE '' VLV_CODIGO_6
    MOVEF_F 0.0 VGV_DIAMETRO
    MOVEF_F 0.0 VGV_NEGRO1
    MOVEF_F 0.0 VGV_NEGRO3
    MOVEF_F 0.0 VGV_NEGRO4
    MOVEF_F 0.0 VGV_BLANCO1
    MOVEF_F 0.0 VGV_BLANCO3
    MOVEF_F 0.0 VGV_BLANCO4
    MOVEF_F 0.0 VGV_COLOR
    CALL ARRAYCREATE_FLOAT VGV_MARKING
    MOVEF_F 0.0 VGV_TIEMPO
    MOVEF_F 0.0 VLV_VOLTAJE_1
    MOVEF_F 0.0 VLV_AUX_4
    MOVEF_F 0.0 VLV_I_4
    MOVEF_F 0.0 VLV_SIGNO_5
    MOVEF_F 0.0 VLV_ENCDIFF_10
    MOVEF_F 0.0 VLV_SIGNO_10
    MOVEF_F 0.0 VLV_ENCODER_11
    MOVEF_F 0.0 VLV_SIGNO_12
    MOVEF_F 0.0 VLV_VMIN_12
    MOVEF_F 0.0 VLV_VMAX_12
    MOVEF_F 0.0 VLV_ENCODER_12
    MOVEF_F 0.0 VLV_SIGNO_13
    MOVEF_F 0.0 VLV_VMIN_13
    MOVEF_F 0.0 VLV_VMAX_13
    MOVEF_F 0.0 VLV_ENCODER_13
    MOVEF_F 0.0 VLV_LECTURA_14
    MOVEF_F 0.0 VLV_LECTURA_15
    MOVEF_F 0.0 VLV_ENCODER_16
    MOVEF_F 0.0 VLV_CORRECCION_19
    MOVEF_F 0.0 VLV_LECTURA_19
    MOVEF_F 0.0 VLV_SAFETYTIMER_20
    MOVEF_F 0.0 VLV_CORRECCION_20
    MOVEF_F 0.0 VLV_ENC_20
    MOVEF_F 0.0 VLV_CORRECCION_21
    MOVEF_F 0.0 VLV_SAFETYTIMER_22
    MOVEF_F 0.0 VLV_CORRECCION_22
    MOVEF_F 0.0 VLV_ENC_22
    MOVEF_F 0.0 VLV_CORRECCION_23
    MOVEF_F 0.0 VLV_MODE_23
    MOVEF_F 0.0 VLV_CORRECCION_24
    MOVEF_F 0.0 VLV_LECTURA_24
    MOVEF_F 0.0 VLV_CORRECCION_25
    MOVEF_F 0.0 VLV_LECTURA_25
    MOVEF_F 0.0 VLV_CORRECCION_26
    MOVEF_F 0.0 VLV_LECTURA_26
    MOVEF_F 0.0 VLV_LECTURA1_27
    MOVEF_F 0.0 VLV_LECTURA3_27
    MOVEF_F 0.0 VLV_LECTURA4_27
    MOVEF_F 0.0 VLV_KP_27
    MOVEF_F 0.0 VLV_KD_27
    MOVEF_F 0.0 VLV_ERROR_27
    MOVEF_F 0.0 VLV_OLDERROR_27
    MOVEF_F 0.0 VLV_U_27
    MOVEF_F 0.0 VLV_SENTIDO_27
    MOVEF_F 0.0 VLV_LECTURA1_28
    MOVEF_F 0.0 VLV_LECTURA3_28
    MOVEF_F 0.0 VLV_LECTURA4_28
    MOVEF_F 0.0 VLV_KP_28
    MOVEF_F 0.0 VLV_KD_28
    MOVEF_F 0.0 VLV_ERROR_28
    MOVEF_F 0.0 VLV_OLDERROR_28
    MOVEF_F 0.0 VLV_U_28
    MOVEF_F 0.0 VLV_SENTIDO_28
    MOVEF_F 0.0 VLV_STARTC_28
    MOVEF_F 0.0 VLV_ENCODERC_28
    MOVEF_F 0.0 VLV_SAFETYTIMER_28
    MOVEF_F 0.0 VLV_LECTURA1_29
    MOVEF_F 0.0 VLV_LECTURA3_29
    MOVEF_F 0.0 VLV_LECTURA4_29
    MOVEF_F 0.0 VLV_KP_29
    MOVEF_F 0.0 VLV_KD_29
    MOVEF_F 0.0 VLV_ERROR_29
    MOVEF_F 0.0 VLV_OLDERROR_29
    MOVEF_F 0.0 VLV_U_29
    MOVEF_F 0.0 VLV_SENTIDO_29
    MOVEF_F 0.0 VLV_STARTC_29
    MOVEF_F 0.0 VLV_ENCODERC_29
    MOVEF_F 0.0 VLV_SAFETYTIMER_29
    MOVEF_F 0.0 VLV_LECTURA1_30
    MOVEF_F 0.0 VLV_LECTURA3_30
    MOVEF_F 0.0 VLV_LECTURA4_30
    MOVEF_F 0.0 VLV_KP_30
    MOVEF_F 0.0 VLV_KD_30
    MOVEF_F 0.0 VLV_ERROR_30
    MOVEF_F 0.0 VLV_OLDERROR_30
    MOVEF_F 0.0 VLV_U_30
    MOVEF_F 0.0 VLV_SENTIDO_30
    MOVEF_F 0.0 VLV_LECTURA_30
    MOVEF_F 0.0 VLV_LECTURAIZQ_30
    MOVEF_F 0.0 VLV_LECTURADCH_30
    MOVEF_F 0.0 VLV_LECTURA1_31
    MOVEF_F 0.0 VLV_LECTURA3_31
    MOVEF_F 0.0 VLV_LECTURA4_31
    MOVEF_F 0.0 VLV_KP_31
    MOVEF_F 0.0 VLV_KD_31
    MOVEF_F 0.0 VLV_ERROR_31
    MOVEF_F 0.0 VLV_OLDERROR_31
    MOVEF_F 0.0 VLV_U_31
    MOVEF_F 0.0 VLV_SENTIDO_31
    MOVEF_F 0.0 VLV_LECTURA_31
    MOVEF_F 0.0 VLV_LECTURAIZQ_31
    MOVEF_F 0.0 VLV_LECTURADCH_31
    MOVEF_F 0.0 VLV_LECTURA1_32
    MOVEF_F 0.0 VLV_LECTURA3_32
    MOVEF_F 0.0 VLV_LECTURA4_32
    MOVEF_F 0.0 VLV_KP_32
    MOVEF_F 0.0 VLV_KD_32
    MOVEF_F 0.0 VLV_ERROR_32
    MOVEF_F 0.0 VLV_OLDERROR_32
    MOVEF_F 0.0 VLV_U_32
    MOVEF_F 0.0 VLV_SENTIDO_32
    MOVEF_F 0.0 VLV_STARTC_32
    MOVEF_F 0.0 VLV_ENCODERC_32
    MOVEF_F 0.0 VLV_SAFETYTIMER_32
    MOVEF_F 0.0 VLV_LECTURA1_33
    MOVEF_F 0.0 VLV_LECTURA3_33
    MOVEF_F 0.0 VLV_LECTURA4_33
    MOVEF_F 0.0 VLV_KP_33
    MOVEF_F 0.0 VLV_KD_33
    MOVEF_F 0.0 VLV_ERROR_33
    MOVEF_F 0.0 VLV_OLDERROR_33
    MOVEF_F 0.0 VLV_U_33
    MOVEF_F 0.0 VLV_SENTIDO_33
    MOVEF_F 0.0 VLV_STARTC_33
    MOVEF_F 0.0 VLV_ENCODERC_33
    MOVEF_F 0.0 VLV_SAFETYTIMER_33
    MOVEF_F 0.0 VLV_SENS_MODE_34
    MOVEF_F 0.0 VLV_RED_34
    MOVEF_F 0.0 VLV_YELLOW_34
    MOVEF_F 0.0 VLV_GREEN_34
    MOVEF_F 0.0 VLV_BLUE_34
    MOVEF_F 0.0 VLV_HUE_34
    MOVEF_F 0.0 VLV_SAT_34
    MOVEF_F 0.0 VLV_VALUE_34
    CALL ARRAYCREATE_FLOAT VLV_RNORMARRAY_34
    CALL ARRAYCREATE_FLOAT VLV_GNORMARRAY_34
    CALL ARRAYCREATE_FLOAT VLV_BNORMARRAY_34
    MOVEF_F 0.0 VLV_J_34
    CALL ARRAYCREATE_FLOAT VLV_RGB_34
    MOVEF_F 0.0 VLV_RRAW_34
    MOVEF_F 0.0 VLV_GRAW_34
    MOVEF_F 0.0 VLV_BRAW_34
    MOVEF_F 0.0 VLV_RNORM_34
    MOVEF_F 0.0 VLV_GNORM_34
    MOVEF_F 0.0 VLV_BNORM_34
    MOVEF_F 0.0 VLV_MAX_34
    MOVEF_F 0.0 VLV_MIN_34
    MOVEF_F 0.0 VLV_RGBGREY_34
    MOVE32_32 0 RUNCOUNTER_F_SAFETYTIMERBRAZO_0
    ARRAY CREATE8 1 LOCKS
    CALL PROGRAM_MAIN -1
    PROGRAM_STOP -1
}
vmthread TF_SAFETYTIMERBRAZO_0
{
    DATA32 tmp
  launch:
    CALL PROGRAM_F_SAFETYTIMERBRAZO_0 0
    CALL GETANDINC32 RUNCOUNTER_F_SAFETYTIMERBRAZO_0 -1 RUNCOUNTER_F_SAFETYTIMERBRAZO_0 tmp
    JR_GT32 tmp 1 launch
}
subcall PROGRAM_MAIN
subcall PROGRAM_F_SAFETYTIMERBRAZO_0
{
    IN_32 SUBPROGRAM
    DATA32 INDEX
    ARRAY8 STACKPOINTER 4
    DATAF F.0
    DATAF F.1
    DATAF F.2
    DATAF F.3
    DATAF F.4
    ARRAY32 RETURNSTACK2 128
    ARRAY32 RETURNSTACK 128
    DATAS S.0 252
    DATAS S.1 252
    DATAS S.2 252
    MOVE8_8 0 STACKPOINTER
    JR_NEQ32 SUBPROGRAM 0 dispatch960
    WRITE32 ENDSUB_F_SAFETYTIMERBRAZO_0:ENDTHREAD STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SAFETYTIMERBRAZO_0
  dispatch960:
    MOVEF_F 0.0 VPR_GIRO_G1
    MOVEF_F 0.0 VPR_RGB_VALUENEGRO
    MOVEF_F 0.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 0.0 VPR_RGB_RWHITE
    MOVEF_F 0.0 VPR_RGB_GWHITE
    MOVEF_F 0.0 VPR_RGB_BWHITE
    MOVEF_F 0.0 VPR_RECTO_DIAMETRO
    MOVEF_F 0.0 VPR_GIRO_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F 0.0 VPR_SMART_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F 0.0 VPR_SMART_NEGRO1
    MOVEF_F 0.0 VPR_SMART_NEGRO3
    MOVEF_F 0.0 VPR_SMART_NEGRO4
    MOVEF_F 0.0 VPR_SMART_BLANCO1
    MOVEF_F 0.0 VPR_SMART_BLANCO3
    MOVEF_F 0.0 VPR_SMART_BLANCO4
    MOVEF_F 0.0 VPR_RECTO_NEGRO
    MOVEF_F 0.0 VPR_RECTO_BLANCO
    MOVEF_F 0.0 VPR_GIRO_NEGRO
    MOVEF_F 0.0 VPR_GIRO_BLANCO
    MOVEF_F 0.0 VLV_NUMERO_2
    MOVEF_F 0.0 VLV_VELOCIDAD_9
    MOVEF_F 0.0 VLV_TIMER_9
    MOVEF_F 0.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    MOVEF_F 0.0 VLV_VELOCIDAD1_11
    MOVEF_F 0.0 VLV_VELOCIDAD2_11
    MOVEF_F 0.0 VLV_DISTANCIA_11
    MOVEF_F 0.0 VLV_VELOCIDAD1_12
    MOVEF_F 0.0 VLV_VELOCIDAD2_12
    MOVEF_F 0.0 VLV_GRADOS_12
    MOVEF_F 0.0 VLV_VELOCIDAD_19
    MOVEF_F 0.0 VLV_SENSOR_19
    MOVEF_F 0.0 VLV_VELOCIDAD1_13
    MOVEF_F 0.0 VLV_VELOCIDAD2_13
    MOVEF_F 0.0 VLV_GRADOS_13
    MOVEF_F 0.0 VLV_VELOCIDAD_27
    MOVEF_F 0.0 VLV_VELOCIDAD_28
    MOVEF_F 0.0 VLV_ENCODER_28
    MOVEF_F 0.0 VLV_VELOCIDAD_20
    MOVEF_F 0.0 VLV_DISTANCIA_20
    MOVEF_F 0.0 VLV_SENS_34
    MOVEF_F 0.0 VLV_REPS_34
    MOVEF_F 0.0 VLV_COLOR_34
    MOVEF_F 0.0 VLV_VELOCIDAD_21
    MOVEF_F 0.0 VLV_TIEMPO_21
    MOVEF_F 0.0 VLV_VELOCIDAD1_14
    MOVEF_F 0.0 VLV_VELOCIDAD2_14
    MOVEF_F 0.0 VLV_SENS_14
    MOVEF_F 0.0 VLV_VELOCIDAD_29
    MOVEF_F 0.0 VLV_ENCODER_29
    MOVEF_F 0.0 VLV_VELOCIDAD_22
    MOVEF_F 0.0 VLV_DISTANCIA_22
    MOVEF_F 0.0 VLV_VELOCIDAD1_15
    MOVEF_F 0.0 VLV_VELOCIDAD2_15
    MOVEF_F 0.0 VLV_SENS_15
    MOVEF_F 0.0 VLV_VELOCIDAD_30
    MOVEF_F 0.0 VLV_READER_30
    MOVEF_F 0.0 VLV_VELOCIDAD_23
    MOVEF_F 0.0 VLV_SENSOR_23
    MOVEF_F 0.0 VLV_COLOR_23
    MOVEF_F 0.0 VLV_VELOCIDAD1_16
    MOVEF_F 0.0 VLV_VELOCIDAD2_16
    MOVEF_F 0.0 VLV_DISTANCIA_16
    MOVEF_F 0.0 VLV_VELOCIDAD_24
    MOVEF_F 0.0 VLV_SENSOR_24
    MOVEF_F 0.0 VLV_VELOCIDAD_31
    MOVEF_F 0.0 VLV_READER_31
    MOVEF_F 0.0 VLV_VELOCIDAD_25
    MOVEF_F 0.0 VLV_SENSOR_25
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_MARKING_6
    MOVEF_F 0.0 VLV_VELOCIDAD_26
    MOVEF_F 0.0 VLV_SENSOR_26
    MOVEF_F 0.0 VLV_VELOCIDAD_32
    MOVEF_F 0.0 VLV_ENCODER_32
    MOVEF_F 0.0 VLV_VELOCIDAD_33
    MOVEF_F 0.0 VLV_ENCODER_33
    MOVEF_F 0.0 VLV_VELOCIDAD1_17
    MOVEF_F 0.0 VLV_VELOCIDAD2_17
    MOVEF_F 0.0 VLV_TIEMPO_17
    MOVEF_F 0.0 VLV_VELOCIDAD1_18
    MOVEF_F 0.0 VLV_VELOCIDAD2_18
    MOVEF_F 0.0 VLV_TIEMPO_18
    MOVEF_F 0.0 VLV_COLOR_35
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_MARKING_4
    STRINGS DUPLICATE '' VLV_CODIGO_4
    MOVEF_F 0.0 VLV_GRADOS_5
    MOVEF_F 0.0 VGV_MARKINGGRANDE
    STRINGS DUPLICATE '' VLV_CODIGO_6
    MOVEF_F 0.0 VGV_DIAMETRO
    MOVEF_F 0.0 VGV_NEGRO1
    MOVEF_F 0.0 VGV_NEGRO3
    MOVEF_F 0.0 VGV_NEGRO4
    MOVEF_F 0.0 VGV_BLANCO1
    MOVEF_F 0.0 VGV_BLANCO3
    MOVEF_F 0.0 VGV_BLANCO4
    MOVEF_F 0.0 VGV_COLOR
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VGV_MARKING
    MOVEF_F 0.0 VGV_TIEMPO
    WRITE32 ENDSUB_F_SETUP_0:CALLSUB3 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SETUP_0
CALLSUB3:
    WRITE32 ENDSUB_F_MAINPRUEBA_0:CALLSUB4 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_MAINPRUEBA_0
CALLSUB4:
    TIMER_READ timeMC9tmp
	SUB32 timeMC9tmp timeMC9 timeMC9tmp
	MOVE32_F timeMC9tmp VGV_TIEMPO
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    DATAF tmpf8
    DATA8 flag8
    DIVF VGV_TIEMPO 1000.0 tmpf8
    CP_EQF 0.0 1000.0 flag8
    SELECTF flag8 0.0 tmpf8 F.0

    STRINGS VALUE_FORMATTED F.0 '%g' 99 S.2
    CALL TEXT.APPEND 'Tiempo: ' S.2 S.1
    CALL TEXT.APPEND S.1 ' s' S.0
    CALL LCD.WRITE 5.0 5.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Good job'
    SOUND_READY
    DATAF tmpf16
    DATA8 flag16
    DIVF VGV_TIEMPO 100000.0 tmpf16
    CP_EQF 0.0 100000.0 flag16
    SELECTF flag16 0.0 tmpf16 F.0

    MATH FLOOR F.0 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB18 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB18:
    DATAF tmpf19
    DATA8 flag19
    DIVF VGV_TIEMPO 10000.0 tmpf19
    CP_EQF 0.0 10000.0 flag19
    SELECTF flag19 0.0 tmpf19 F.1

    MATH FLOOR F.1 F.0
    DATAF tmpf21
    DATA8 flag21
    DIVF VGV_TIEMPO 100000.0 tmpf21
    CP_EQF 0.0 100000.0 flag21
    SELECTF flag21 0.0 tmpf21 F.3

    MATH FLOOR F.3 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB25 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB25:
    DATAF tmpf26
    DATA8 flag26
    DIVF VGV_TIEMPO 1000.0 tmpf26
    CP_EQF 0.0 1000.0 flag26
    SELECTF flag26 0.0 tmpf26 F.1

    MATH FLOOR F.1 F.0
    DATAF tmpf28
    DATA8 flag28
    DIVF VGV_TIEMPO 10000.0 tmpf28
    CP_EQF 0.0 10000.0 flag28
    SELECTF flag28 0.0 tmpf28 F.3

    MATH FLOOR F.3 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB32 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB32:
    WRITE32 ENDSUB_F_S_0:CALLSUB33 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_S_0
CALLSUB33:
ENDTHREAD:
    RETURN
SUB_F_SETUP_0:
    DATA8 layer34
	DATA8 no34
	DATA8 mode834
	
	MOVEF_8 1.0 no34
	SUB8 no34 1 no34
	DIV8 no34 4 layer34
	MATH MOD8 no34 4 no34

	MOVEF_8 0.0 mode834
	
	INPUT_DEVICE READY_RAW layer34 no34 0 mode834 0
    DATA8 layer35
	DATA8 no35
	DATA8 mode835
	
	MOVEF_8 2.0 no35
	SUB8 no35 1 no35
	DIV8 no35 4 layer35
	MATH MOD8 no35 4 no35

	MOVEF_8 4.0 mode835
	
	INPUT_DEVICE READY_RAW layer35 no35 0 mode835 0
    DATA8 layer36
	DATA8 no36
	DATA8 mode836
	
	MOVEF_8 3.0 no36
	SUB8 no36 1 no36
	DIV8 no36 4 layer36
	MATH MOD8 no36 4 no36

	MOVEF_8 0.0 mode836
	
	INPUT_DEVICE READY_RAW layer36 no36 0 mode836 0
    DATA8 layer37
	DATA8 no37
	DATA8 mode837
	
	MOVEF_8 4.0 no37
	SUB8 no37 1 no37
	DIV8 no37 4 layer37
	MATH MOD8 no37 4 no37

	MOVEF_8 0.0 mode837
	
	INPUT_DEVICE READY_RAW layer37 no37 0 mode837 0
    MOVEF_F 6.24 VGV_DIAMETRO
    MOVEF_F 2.68055555555556 VPR_GIRO_G1
    MOVEF_F 10.0 VGV_NEGRO1
    MOVEF_F 9.0 VGV_NEGRO3
    MOVEF_F 8.0 VGV_NEGRO4
    MOVEF_F 65.0 VGV_BLANCO1
    MOVEF_F 59.0 VGV_BLANCO3
    MOVEF_F 55.0 VGV_BLANCO4
    MOVEF_F 4.0 VPR_RGB_VALUENEGRO
    MOVEF_F 32.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 57.0 VPR_RGB_RWHITE
    MOVEF_F 71.0 VPR_RGB_GWHITE
    MOVEF_F 73.0 VPR_RGB_BWHITE
    MOVEF_F VGV_DIAMETRO VPR_RECTO_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_GIRO_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_SMART_DIAMETRO
    MOVEF_F VGV_NEGRO1 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F VGV_NEGRO3 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F VGV_NEGRO4 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F VGV_BLANCO1 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F VGV_BLANCO3 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F VGV_BLANCO4 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F VGV_NEGRO1 VPR_SMART_NEGRO1
    MOVEF_F VGV_NEGRO3 VPR_SMART_NEGRO3
    MOVEF_F VGV_NEGRO4 VPR_SMART_NEGRO4
    MOVEF_F VGV_BLANCO1 VPR_SMART_BLANCO1
    MOVEF_F VGV_BLANCO3 VPR_SMART_BLANCO3
    MOVEF_F VGV_BLANCO4 VPR_SMART_BLANCO4
    ADDF VGV_NEGRO1 VGV_NEGRO3 F.1
    ADDF F.1 VGV_NEGRO4 F.0
    DATAF tmpf40
    DATA8 flag40
    DIVF F.0 3.0 tmpf40
    CP_EQF 0.0 3.0 flag40
    SELECTF flag40 0.0 tmpf40 VPR_RECTO_NEGRO

    ADDF VGV_BLANCO1 VGV_BLANCO3 F.1
    ADDF F.1 VGV_BLANCO4 F.0
    DATAF tmpf43
    DATA8 flag43
    DIVF F.0 3.0 tmpf43
    CP_EQF 0.0 3.0 flag43
    SELECTF flag43 0.0 tmpf43 VPR_RECTO_BLANCO

    ADDF VGV_NEGRO1 VGV_NEGRO3 F.1
    ADDF F.1 VGV_NEGRO4 F.0
    DATAF tmpf46
    DATA8 flag46
    DIVF F.0 3.0 tmpf46
    CP_EQF 0.0 3.0 flag46
    SELECTF flag46 0.0 tmpf46 VPR_GIRO_NEGRO

    ADDF VGV_BLANCO1 VGV_BLANCO3 F.1
    ADDF F.1 VGV_BLANCO4 F.0
    DATAF tmpf49
    DATA8 flag49
    DIVF F.0 3.0 tmpf49
    CP_EQF 0.0 3.0 flag49
    SELECTF flag49 0.0 tmpf49 VPR_GIRO_BLANCO

    MOVEF_F 0.0 VGV_COLOR
RETSUB_F_SETUP_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SETUP_0:
SUB_F_STARTARM_0:
    MOVEF_F 100.0 VLV_VELOCIDAD_9
    MOVEF_F 1000.0 VLV_TIMER_9
    WRITE32 ENDSUB_M_BRAZO_ATIMER_2:CALLSUB50 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_ATIMER_2
CALLSUB50:
    OUTPUT_CLR_COUNT 0 1
    DATA32 milliseconds52
	MOVEF_32 100.0 milliseconds52
	DATA32 timer52
	TIMER_WAIT milliseconds52 timer52
	TIMER_READY timer52
    MOVEF_F 35.0 VLV_VELOCIDAD_10
    MOVEF_F -200.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB53 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB53:
    OUTPUT_CLR_COUNT 0 1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Connect'
    SOUND_READY
RETSUB_F_STARTARM_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_STARTARM_0:
SUB_F_MAINPRUEBA_0:
    MOVEF_F 5.0 VGV_MARKINGGRANDE
    CALL ARRAYSTORE_FLOAT 0.0 4.0 VGV_MARKING
    CALL ARRAYSTORE_FLOAT 1.0 3.0 VGV_MARKING
    CALL ARRAYSTORE_FLOAT 2.0 5.0 VGV_MARKING
    CALL ARRAYSTORE_FLOAT 3.0 2.0 VGV_MARKING
    WRITE32 ENDSUB_F_GRITARVOLTAJE_0:CALLSUB61 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARVOLTAJE_0
CALLSUB61:
    WRITE32 ENDSUB_F_STARTARM_0:CALLSUB62 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_STARTARM_0
CALLSUB62:
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Two'
    WRITE32 ENDSUB_F_S_0:CALLSUB64 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_S_0
CALLSUB64:
    DATA32 milliseconds65
	MOVEF_32 150.0 milliseconds65
	DATA32 timer65
	TIMER_WAIT milliseconds65 timer65
	TIMER_READY timer65
    OUTPUT_CLR_COUNT 0 8
    MOVEF_F 35.0 VLV_VELOCIDAD_10
    MOVEF_F -250.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB67 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB67:
    OUTPUT_POWER 0 1 0
	OUTPUT_STOP 0 1 1
    DATA32 milliseconds69
	MOVEF_32 500.0 milliseconds69
	DATA32 timer69
	TIMER_WAIT milliseconds69 timer69
	TIMER_READY timer69
    MOVEF_F 15.0 VLV_VELOCIDAD_31
    MOVEF_F 4.0 VLV_READER_31
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:CALLSUB70 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2
CALLSUB70:
    MOVEF_F 30.0 VLV_VELOCIDAD1_13
    MOVEF_F -7.0 VLV_VELOCIDAD2_13
    MOVEF_F 92.0 VLV_GRADOS_13
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB71 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB71:
    MOVEF_F 20.0 VLV_VELOCIDAD_20
    MOVEF_F 7.5 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB72 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB72:
    DATA32 milliseconds73
	MOVEF_32 100.0 milliseconds73
	DATA32 timer73
	TIMER_WAIT milliseconds73 timer73
	TIMER_READY timer73
    ARRAY COPY VGV_MARKING VLV_MARKING_6
    WRITE32 ENDSUB_F_ORDENARBLOQUES_1:CALLSUB74 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ORDENARBLOQUES_1
CALLSUB74:
    MOVEF_F 30.0 VLV_VELOCIDAD_20
    MOVEF_F 10.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB75 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB75:
    MOVEF_F 30.0 VLV_VELOCIDAD_30
    MOVEF_F 3.0 VLV_READER_30
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB76 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB76:
    MOVEF_F -16.0 VLV_VELOCIDAD1_13
    MOVEF_F 30.0 VLV_VELOCIDAD2_13
    MOVEF_F 95.0 VLV_GRADOS_13
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB77 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB77:
    MOVEF_F 35.0 VLV_VELOCIDAD_29
    MOVEF_F 20.0 VLV_ENCODER_29
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB78 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB78:
    MOVEF_F 36.0 VLV_VELOCIDAD1_11
    MOVEF_F 34.0 VLV_VELOCIDAD2_11
    MOVEF_F 43.0 VLV_DISTANCIA_11
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB79 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB79:
    MOVEF_F -20.0 VLV_VELOCIDAD1_13
    MOVEF_F 20.0 VLV_VELOCIDAD2_13
    MOVEF_F 90.0 VLV_GRADOS_13
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB80 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB80:
    MOVEF_F 30.0 VLV_VELOCIDAD1_17
    MOVEF_F 26.0 VLV_VELOCIDAD2_17
    MOVEF_F 1500.0 VLV_TIEMPO_17
    WRITE32 ENDSUB_M_GIRO_TIEMPOF_3:CALLSUB81 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_TIEMPOF_3
CALLSUB81:
    MOVEF_F 60.0 VLV_VELOCIDAD1_18
    MOVEF_F 60.0 VLV_VELOCIDAD2_18
    MOVEF_F 300.0 VLV_TIEMPO_18
    WRITE32 ENDSUB_M_GIRO_TIEMPO_3:CALLSUB82 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_TIEMPO_3
CALLSUB82:
    MOVEF_F -20.0 VLV_VELOCIDAD_20
    MOVEF_F 11.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB83 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB83:
    MOVEF_F -20.0 VLV_VELOCIDAD1_13
    MOVEF_F 20.0 VLV_VELOCIDAD2_13
    MOVEF_F 100.0 VLV_GRADOS_13
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB84 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB84:
    MOVEF_F 40.0 VLV_VELOCIDAD_21
    MOVEF_F 500.0 VLV_TIEMPO_21
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB85 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB85:
    MOVEF_F 50.0 VLV_VELOCIDAD_10
    MOVEF_F -330.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB86 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB86:
    MOVEF_F -15.0 VLV_VELOCIDAD1_11
    MOVEF_F -16.0 VLV_VELOCIDAD2_11
    MOVEF_F 12.0 VLV_DISTANCIA_11
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB87 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB87:
    MOVEF_F 15.0 VLV_VELOCIDAD_20
    MOVEF_F 8.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB88 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB88:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB89 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB89:
    MOVEF_F -15.0 VLV_VELOCIDAD_20
    MOVEF_F 8.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB90 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB90:
    MOVEF_F 15.0 VLV_VELOCIDAD_20
    MOVEF_F 17.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB91 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB91:
    MOVEF_F -15.0 VLV_VELOCIDAD_20
    MOVEF_F 5.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB92 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB92:
    MOVEF_F -15.0 VLV_VELOCIDAD1_13
    MOVEF_F 15.0 VLV_VELOCIDAD2_13
    MOVEF_F 88.0 VLV_GRADOS_13
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB93 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB93:
    MOVEF_F -30.0 VLV_VELOCIDAD_21
    MOVEF_F 500.0 VLV_TIEMPO_21
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB94 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB94:
    MOVEF_F 15.0 VLV_VELOCIDAD_20
    MOVEF_F 12.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB95 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB95:
    MOVEF_F -10.0 VLV_VELOCIDAD1_13
    MOVEF_F 10.0 VLV_VELOCIDAD2_13
    MOVEF_F 9.0 VLV_GRADOS_13
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB96 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB96:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -160.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB97 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB97:
    MOVEF_F 10.0 VLV_VELOCIDAD_20
    MOVEF_F 6.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB98 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB98:
    MOVEF_F -40.0 VLV_VELOCIDAD_20
    MOVEF_F 8.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB99 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB99:
    MOVEF_F 50.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB100 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB100:
    MOVEF_F 10.0 VLV_VELOCIDAD1_13
    MOVEF_F -10.0 VLV_VELOCIDAD2_13
    MOVEF_F 29.0 VLV_GRADOS_13
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB101 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB101:
    MOVEF_F 100.0 VLV_VELOCIDAD_22
    MOVEF_F 65.0 VLV_DISTANCIA_22
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB102 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB102:
    MOVEF_F 40.0 VLV_VELOCIDAD_24
    MOVEF_F 1.0 VLV_SENSOR_24
    WRITE32 ENDSUB_M_RECTO_BLANCO1F_2:CALLSUB103 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_BLANCO1F_2
CALLSUB103:
    MOVEF_F 20.0 VLV_VELOCIDAD_26
    MOVEF_F 1.0 VLV_SENSOR_26
    WRITE32 ENDSUB_M_RECTO_NEGRO1F_2:CALLSUB104 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1F_2
CALLSUB104:
    MOVEF_F -15.0 VLV_VELOCIDAD1_13
    MOVEF_F 30.0 VLV_VELOCIDAD2_13
    MOVEF_F 93.0 VLV_GRADOS_13
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB105 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB105:
    MOVEF_F 30.0 VLV_VELOCIDAD_32
    MOVEF_F 8.0 VLV_ENCODER_32
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB106 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB106:
    MOVEF_F 85.0 VLV_VELOCIDAD_32
    MOVEF_F 74.0 VLV_ENCODER_32
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB107 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB107:
    MOVEF_F 40.0 VLV_VELOCIDAD_30
    MOVEF_F 3.0 VLV_READER_30
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB108 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB108:
    MOVEF_F 20.0 VLV_VELOCIDAD_20
    MOVEF_F 2.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB109 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB109:
    MOVEF_F -16.0 VLV_VELOCIDAD1_13
    MOVEF_F 30.0 VLV_VELOCIDAD2_13
    MOVEF_F 93.0 VLV_GRADOS_13
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB110 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB110:
    MOVEF_F 50.0 VLV_VELOCIDAD_33
    MOVEF_F 40.0 VLV_ENCODER_33
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31_2:CALLSUB111 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31_2
CALLSUB111:
    MOVEF_F 52.0 VLV_VELOCIDAD1_11
    MOVEF_F 50.0 VLV_VELOCIDAD2_11
    MOVEF_F 30.0 VLV_DISTANCIA_11
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB112 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB112:
    MOVEF_F 40.0 VLV_VELOCIDAD_21
    MOVEF_F 700.0 VLV_TIEMPO_21
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB113 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB113:
    MOVEF_F 8.0 VLV_VELOCIDAD1_13
    MOVEF_F -32.0 VLV_VELOCIDAD2_13
    MOVEF_F 100.0 VLV_GRADOS_13
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB114 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB114:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -300.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB115 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB115:
    MOVEF_F 30.0 VLV_VELOCIDAD_20
    MOVEF_F 17.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB116 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB116:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB117 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB117:
    MOVEF_F -30.0 VLV_VELOCIDAD_20
    MOVEF_F 12.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB118 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB118:
RETSUB_F_MAINPRUEBA_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_MAINPRUEBA_0:
SUB_F_SAFETYTIMERBRAZO_0:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -750.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB119 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB119:
RETSUB_F_SAFETYTIMERBRAZO_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SAFETYTIMERBRAZO_0:
SUB_F_GRITARCOLOR_0:
    MOVEF_F VGV_COLOR VLV_COLOR_35
    WRITE32 ENDSUB_M_RGB_GRITAR_1:CALLSUB120 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_GRITAR_1
CALLSUB120:
RETSUB_F_GRITARCOLOR_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARCOLOR_0:
SUB_F_GRITARVOLTAJE_0:
    CALL EV3.BATTERYVOLTAGE VLV_VOLTAJE_1
    MATH FLOOR VLV_VOLTAJE_1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB123 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB123:
    MULF VLV_VOLTAJE_1 10.0 F.1
    MATH FLOOR F.1 F.0
    MATH FLOOR VLV_VOLTAJE_1 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB129 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB129:
    MULF VLV_VOLTAJE_1 100.0 F.1
    MATH FLOOR F.1 F.0
    MULF VLV_VOLTAJE_1 10.0 F.3
    MATH FLOOR F.3 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB136 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB136:
RETSUB_F_GRITARVOLTAJE_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARVOLTAJE_0:
SUB_F_GRITARNUMERO_1:
    JR_NEQF VLV_NUMERO_2 0.0 else137_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/ZERO'
    JR endif137
  else137_1:
    JR_NEQF VLV_NUMERO_2 1.0 else137_2
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/One'
    JR endif137
  else137_2:
    JR_NEQF VLV_NUMERO_2 2.0 else137_3
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Two'
    JR endif137
  else137_3:
    JR_NEQF VLV_NUMERO_2 3.0 else137_4
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Three'
    JR endif137
  else137_4:
    JR_NEQF VLV_NUMERO_2 4.0 else137_5
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Four'
    JR endif137
  else137_5:
    JR_NEQF VLV_NUMERO_2 5.0 else137_6
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Five'
    JR endif137
  else137_6:
    JR_NEQF VLV_NUMERO_2 6.0 else137_7
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Six'
    JR endif137
  else137_7:
    JR_NEQF VLV_NUMERO_2 7.0 else137_8
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Seven'
    JR endif137
  else137_8:
    JR_NEQF VLV_NUMERO_2 8.0 else137_9
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Eight'
    JR endif137
  else137_9:
    JR_NEQF VLV_NUMERO_2 9.0 else137_10
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Nine'
    JR endif137
  else137_10:
    JR_NEQF VLV_NUMERO_2 10.0 else137_11
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Ten'
  else137_11:
  endif137:
    SOUND_READY
RETSUB_F_GRITARNUMERO_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARNUMERO_1:
SUB_F_BAJARCUADRO_0:
    DATA32 tmp150
    CALL GETANDINC32 RUNCOUNTER_F_SAFETYTIMERBRAZO_0 1  RUNCOUNTER_F_SAFETYTIMERBRAZO_0 tmp150
    JR_NEQ32 0 tmp150 alreadylaunched150
    OBJECT_START TF_SAFETYTIMERBRAZO_0
  alreadylaunched150:
    DATA32 milliseconds151
	MOVEF_32 1500.0 milliseconds151
	DATA32 timer151
	TIMER_WAIT milliseconds151 timer151
	TIMER_READY timer151
    OUTPUT_POWER 0 1 0
	OUTPUT_STOP 0 1 0
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -750.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB153 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB153:
RETSUB_F_BAJARCUADRO_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_BAJARCUADRO_0:
SUB_F_CODIGO_2:
    STRINGS DUPLICATE '' VLV_CODIGO_4
    CALL ARRAYGET_FLOAT 2.0 VLV_AUX_4 VLV_MARKING_4
    CALL ARRAYGET_FLOAT 3.0 F.0 VLV_MARKING_4
    CALL ARRAYSTORE_FLOAT 2.0 F.0 VLV_MARKING_4
    CALL ARRAYSTORE_FLOAT 3.0 VLV_AUX_4 VLV_MARKING_4
    MOVEF_F 0.0 VLV_I_4
  for158:
    JR_GTF VLV_I_4 4.0 endfor158
  forbody158:
    CALL ARRAYGET_FLOAT VLV_I_4 F.0 VLV_MARKING_4
    JR_NEQF F.0 2.0 else159_1
    CALL TEXT.APPEND VLV_CODIGO_4 'Z' VLV_CODIGO_4
    JR endif159
  else159_1:
    CALL ARRAYGET_FLOAT VLV_I_4 F.0 VLV_MARKING_4
    JR_NEQF F.0 3.0 else159_2
    CALL TEXT.APPEND VLV_CODIGO_4 'V' VLV_CODIGO_4
    JR endif159
  else159_2:
    CALL ARRAYGET_FLOAT VLV_I_4 F.0 VLV_MARKING_4
    JR_NEQF F.0 4.0 else159_3
    CALL TEXT.APPEND VLV_CODIGO_4 'A' VLV_CODIGO_4
    JR endif159
  else159_3:
    CALL ARRAYGET_FLOAT VLV_I_4 F.0 VLV_MARKING_4
    JR_NEQF F.0 5.0 else159_4
    CALL TEXT.APPEND VLV_CODIGO_4 'R' VLV_CODIGO_4
  else159_4:
  endif159:
    ADDF VLV_I_4 1.0 VLV_I_4
    JR_LTEQF VLV_I_4 4.0 forbody158
  endfor158:
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    CALL TEXT.APPEND 'Codigo: ' VLV_CODIGO_4 S.0
    CALL LCD.WRITE 5.0 5.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
RETSUB_F_CODIGO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_CODIGO_2:
SUB_F_ROTAR_1:
    MATH ABS VLV_GRADOS_5 F.0
    DATAF tmpf175
    DATA8 flag175
    DIVF VLV_GRADOS_5 F.0 tmpf175
    CP_EQF 0.0 F.0 flag175
    SELECTF flag175 0.0 tmpf175 VLV_SIGNO_5

    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB176 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB176:
    DATA32 milliseconds177
	MOVEF_32 100.0 milliseconds177
	DATA32 timer177
	TIMER_WAIT milliseconds177 timer177
	TIMER_READY timer177
    MULF 34.0 VLV_SIGNO_5 F.0
    MATH ABS VLV_GRADOS_5 F.2
    SUBF F.2 8.0 F.1
    CALL MOTOR.SCHEDULE 'D' F.0 0.0 F.1 0.0 'True' 

	DATA8 layer181
	DATA8 nos181
	DATA8 busy181
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer181 nos181
	JR_EQ8 0 nos181 motornotbusy181
  motorwaiting181:
	OUTPUT_TEST layer181 nos181 busy181
	JR_EQ8 busy181 0 motornotbusy181
	SLEEP
	JR motorwaiting181
  motornotbusy181:
    DATA32 milliseconds182
	MOVEF_32 200.0 milliseconds182
	DATA32 timer182
	TIMER_WAIT milliseconds182 timer182
	TIMER_READY timer182
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -360.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB183 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB183:
RETSUB_F_ROTAR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_ROTAR_1:
SUB_F_ORDENARBLOQUES_1:
    ARRAY COPY VLV_MARKING_6 VLV_MARKING_4
    WRITE32 ENDSUB_F_CODIGO_2:CALLSUB184 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_CODIGO_2
CALLSUB184:
    STRINGS DUPLICATE VLV_CODIGO_4 VLV_CODIGO_6
    CALL EQ_STRING VLV_CODIGO_6 'VRZA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_1
    JR endif185
  else185_1:
    CALL EQ_STRING VLV_CODIGO_6 'VRAZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_2
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB188 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB188:
    JR endif185
  else185_2:
    CALL EQ_STRING VLV_CODIGO_6 'VZRA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_3
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB190 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB190:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB191 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB191:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB192 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB192:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB193 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB193:
    JR endif185
  else185_3:
    CALL EQ_STRING VLV_CODIGO_6 'VZAR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_4
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB195 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB195:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB196 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB196:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB197 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB197:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB198 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB198:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB199 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB199:
    JR endif185
  else185_4:
    CALL EQ_STRING VLV_CODIGO_6 'VARZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_5
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB201 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB201:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB202 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB202:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB203 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB203:
    JR endif185
  else185_5:
    CALL EQ_STRING VLV_CODIGO_6 'VAZR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_6
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB205 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB205:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB206 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB206:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB207 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB207:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB208 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB208:
    JR endif185
  else185_6:
    CALL EQ_STRING VLV_CODIGO_6 'RVZA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_7
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB210 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB210:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB211 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB211:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB212 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB212:
    JR endif185
  else185_7:
    CALL EQ_STRING VLV_CODIGO_6 'RVAZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_8
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB214 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB214:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB215 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB215:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB216 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB216:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB217 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB217:
    JR endif185
  else185_8:
    CALL EQ_STRING VLV_CODIGO_6 'RZVA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_9
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB219 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB219:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB220 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB220:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB221 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB221:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB222 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB222:
    JR endif185
  else185_9:
    CALL EQ_STRING VLV_CODIGO_6 'RZAV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_10
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB224 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB224:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB225 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB225:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB226 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB226:
    JR endif185
  else185_10:
    CALL EQ_STRING VLV_CODIGO_6 'RAVZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_11
    MOVEF_F 90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB228 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB228:
    JR endif185
  else185_11:
    CALL EQ_STRING VLV_CODIGO_6 'RAZV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_12
    MOVEF_F 90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB230 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB230:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB231 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB231:
    JR endif185
  else185_12:
    CALL EQ_STRING VLV_CODIGO_6 'ZVAR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_13
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB233 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB233:
    JR endif185
  else185_13:
    CALL EQ_STRING VLV_CODIGO_6 'ZVRA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_14
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB235 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB235:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB236 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB236:
    JR endif185
  else185_14:
    CALL EQ_STRING VLV_CODIGO_6 'ZRVA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_15
    MOVEF_F 90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB238 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB238:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB239 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB239:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB240 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB240:
    JR endif185
  else185_15:
    CALL EQ_STRING VLV_CODIGO_6 'ZRAV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_16
    MOVEF_F 90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB242 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB242:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB243 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB243:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB244 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB244:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB245 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB245:
    JR endif185
  else185_16:
    CALL EQ_STRING VLV_CODIGO_6 'ZAVR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_17
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB247 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB247:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB248 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB248:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB249 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB249:
    JR endif185
  else185_17:
    CALL EQ_STRING VLV_CODIGO_6 'ZARV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_18
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB251 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB251:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB252 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB252:
    JR endif185
  else185_18:
    CALL EQ_STRING VLV_CODIGO_6 'AVRZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_19
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB254 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB254:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB255 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB255:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB256 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB256:
    JR endif185
  else185_19:
    CALL EQ_STRING VLV_CODIGO_6 'AVZR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_20
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB258 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB258:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB259 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB259:
    JR endif185
  else185_20:
    CALL EQ_STRING VLV_CODIGO_6 'ARVZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_21
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB261 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB261:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB262 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB262:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB263 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB263:
    JR endif185
  else185_21:
    CALL EQ_STRING VLV_CODIGO_6 'ARZV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_22
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB265 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB265:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB266 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB266:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB267 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB267:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB268 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB268:
    JR endif185
  else185_22:
    CALL EQ_STRING VLV_CODIGO_6 'AZVR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else185_23
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB270 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB270:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB271 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB271:
    JR endif185
  else185_23:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB272 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB272:
  else185_24:
  endif185:
    MOVEF_F -20.0 VLV_VELOCIDAD_20
    MOVEF_F 8.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB273 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB273:
    MOVEF_F 15.0 VLV_VELOCIDAD1_13
    MOVEF_F -15.0 VLV_VELOCIDAD2_13
    MOVEF_F 182.0 VLV_GRADOS_13
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB274 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB274:
    MOVEF_F -30.0 VLV_VELOCIDAD_20
    MOVEF_F 21.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB275 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB275:
    MOVEF_F 20.0 VLV_VELOCIDAD_10
    MOVEF_F 24.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB276 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB276:
RETSUB_F_ORDENARBLOQUES_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_ORDENARBLOQUES_1:
SUB_F_SWAP_0:
    MOVEF_F -15.0 VLV_VELOCIDAD_20
    MOVEF_F 8.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB277 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB277:
    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB278 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB278:
    MOVEF_F -15.0 VLV_VELOCIDAD_20
    MOVEF_F 2.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB279 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB279:
    CALL MOTOR.SCHEDULE 'D' 50.0 0.0 180.0 0.0 'True' 

	DATA8 layer280
	DATA8 nos280
	DATA8 busy280
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer280 nos280
	JR_EQ8 0 nos280 motornotbusy280
  motorwaiting280:
	OUTPUT_TEST layer280 nos280 busy280
	JR_EQ8 busy280 0 motornotbusy280
	SLEEP
	JR motorwaiting280
  motornotbusy280:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -360.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB281 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB281:
    MOVEF_F 15.0 VLV_VELOCIDAD_20
    MOVEF_F 15.0 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB282 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB282:
    MOVEF_F -15.0 VLV_VELOCIDAD_20
    MOVEF_F 5.5 VLV_DISTANCIA_20
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB283 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB283:
RETSUB_F_SWAP_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SWAP_0:
SUB_F_S_0:
    UI_BUTTON FLUSH
    UI_BUTTON WAIT_FOR_PRESS
RETSUB_F_S_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_S_0:
SUB_M_BRAZO_ATIMER_2:
    TIMER_READ timeMC1
  while287:
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_GTEQF F.0 VLV_TIMER_9 endwhile287
  whilebody287:
    MOVEF_8 VLV_VELOCIDAD_9 setSpeedA
	OUTPUT_SPEED 0 1 setSpeedA
	OUTPUT_START 0 1
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_LTF F.0 VLV_TIMER_9 whilebody287
  endwhile287:
    CALL MOTOR.STOP 'A' 'True'
RETSUB_M_BRAZO_ATIMER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_ATIMER_2:
SUB_M_BRAZO_AENCODER_2:
    CALL MOTOR.GETCOUNT 'A' F.0
    SUBF VLV_ENCODER_10 F.0 VLV_ENCDIFF_10
    MATH ABS VLV_ENCDIFF_10 F.0
    DATAF tmpf295
    DATA8 flag295
    DIVF VLV_ENCDIFF_10 F.0 tmpf295
    CP_EQF 0.0 F.0 flag295
    SELECTF flag295 0.0 tmpf295 VLV_SIGNO_10

    JR_EQF VLV_ENCDIFF_10 0.0 else296_1
    MULF VLV_VELOCIDAD_10 VLV_SIGNO_10 F.0
    MATH ABS VLV_ENCDIFF_10 F.1
    CALL MOTOR.SCHEDULE 'A' F.0 0.0 F.1 0.0 'True' 

	DATA8 layer299
	DATA8 nos299
	DATA8 busy299
	CALL MOTORDECODEPORTSDESCRIPTOR 'A' layer299 nos299
	JR_EQ8 0 nos299 motornotbusy299
  motorwaiting299:
	OUTPUT_TEST layer299 nos299 busy299
	JR_EQ8 busy299 0 motornotbusy299
	SLEEP
	JR motorwaiting299
  motornotbusy299:
  else296_1:
  endif296:
    CALL MOTOR.STOP 'A' 'True'
RETSUB_M_BRAZO_AENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_AENCODER_2:
SUB_M_GIRO_ENCODER_3:
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_GIRO_DIAMETRO F.2 F.1
    DATAF tmpf303
    DATA8 flag303
    DIVF VLV_DISTANCIA_11 F.1 tmpf303
    CP_EQF 0.0 F.1 flag303
    SELECTF flag303 0.0 tmpf303 F.0

    MULF F.0 360.0 VLV_ENCODER_11
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MATH NEGATE VLV_VELOCIDAD1_11 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_11 VLV_ENCODER_11 'True'

	DATA8 layer307
	DATA8 nos307
	DATA8 busy307
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer307 nos307
	JR_EQ8 0 nos307 motornotbusy307
  motorwaiting307:
	OUTPUT_TEST layer307 nos307 busy307
	JR_EQ8 busy307 0 motornotbusy307
	SLEEP
	JR motorwaiting307
  motornotbusy307:
RETSUB_M_GIRO_ENCODER_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_ENCODER_3:
SUB_M_GIRO_GRADOSF_3:
    DATAF tmpf308
    DATA8 flag308
    DIVF VLV_VELOCIDAD1_12 VLV_VELOCIDAD2_12 tmpf308
    CP_EQF 0.0 VLV_VELOCIDAD2_12 flag308
    SELECTF flag308 0.0 tmpf308 F.0

    DATAF tmpf309
    DATA8 flag309
    DIVF VLV_VELOCIDAD1_12 VLV_VELOCIDAD2_12 tmpf309
    CP_EQF 0.0 VLV_VELOCIDAD2_12 flag309
    SELECTF flag309 0.0 tmpf309 F.2

    MATH ABS F.2 F.1
    DATAF tmpf311
    DATA8 flag311
    DIVF F.0 F.1 tmpf311
    CP_EQF 0.0 F.1 flag311
    SELECTF flag311 0.0 tmpf311 VLV_SIGNO_12

    MATH ABS VLV_VELOCIDAD1_12 F.0
    MATH ABS VLV_VELOCIDAD2_12 F.1
    DATA8 flag314
	CP_LTF F.0 F.1 flag314
	SELECTF flag314 F.0 F.1 VLV_VMIN_12
    MATH ABS VLV_VELOCIDAD1_12 F.0
    MATH ABS VLV_VELOCIDAD2_12 F.1
    DATA8 flag317
	CP_GTF F.0 F.1 flag317
	SELECTF flag317 F.0 F.1 VLV_VMAX_12
    MULF VLV_GRADOS_12 VPR_GIRO_G1 F.0
    MULF VLV_SIGNO_12 VLV_VMIN_12 F.4
    DATAF tmpf320
    DATA8 flag320
    DIVF F.4 VLV_VMAX_12 tmpf320
    CP_EQF 0.0 VLV_VMAX_12 flag320
    SELECTF flag320 0.0 tmpf320 F.3

    SUBF F.3 1.0 F.2
    DATAF tmpf322
    DATA8 flag322
    DIVF -2.0 F.2 tmpf322
    CP_EQF 0.0 F.2 flag322
    SELECTF flag322 0.0 tmpf322 F.1

    MULF F.0 F.1 VLV_ENCODER_12
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds325
	MOVEF_32 100.0 milliseconds325
	DATA32 timer325
	TIMER_WAIT milliseconds325 timer325
	TIMER_READY timer325
    MATH NEGATE VLV_VELOCIDAD1_12 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_12 VLV_ENCODER_12 'False'

	DATA8 layer327
	DATA8 nos327
	DATA8 busy327
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer327 nos327
	JR_EQ8 0 nos327 motornotbusy327
  motorwaiting327:
	OUTPUT_TEST layer327 nos327 busy327
	JR_EQ8 busy327 0 motornotbusy327
	SLEEP
	JR motorwaiting327
  motornotbusy327:
    MOVEF_F 0.0 VLV_VELOCIDAD1_12
    MOVEF_F 0.0 VLV_VELOCIDAD2_12
    MOVEF_F 0.0 VLV_GRADOS_12
    DATA32 milliseconds328
	MOVEF_32 100.0 milliseconds328
	DATA32 timer328
	TIMER_WAIT milliseconds328 timer328
	TIMER_READY timer328
RETSUB_M_GIRO_GRADOSF_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_GRADOSF_3:
SUB_M_GIRO_GRADOS_3:
    DATAF tmpf329
    DATA8 flag329
    DIVF VLV_VELOCIDAD1_13 VLV_VELOCIDAD2_13 tmpf329
    CP_EQF 0.0 VLV_VELOCIDAD2_13 flag329
    SELECTF flag329 0.0 tmpf329 F.0

    DATAF tmpf330
    DATA8 flag330
    DIVF VLV_VELOCIDAD1_13 VLV_VELOCIDAD2_13 tmpf330
    CP_EQF 0.0 VLV_VELOCIDAD2_13 flag330
    SELECTF flag330 0.0 tmpf330 F.2

    MATH ABS F.2 F.1
    DATAF tmpf332
    DATA8 flag332
    DIVF F.0 F.1 tmpf332
    CP_EQF 0.0 F.1 flag332
    SELECTF flag332 0.0 tmpf332 VLV_SIGNO_13

    MATH ABS VLV_VELOCIDAD1_13 F.0
    MATH ABS VLV_VELOCIDAD2_13 F.1
    DATA8 flag335
	CP_LTF F.0 F.1 flag335
	SELECTF flag335 F.0 F.1 VLV_VMIN_13
    MATH ABS VLV_VELOCIDAD1_13 F.0
    MATH ABS VLV_VELOCIDAD2_13 F.1
    DATA8 flag338
	CP_GTF F.0 F.1 flag338
	SELECTF flag338 F.0 F.1 VLV_VMAX_13
    MULF VLV_GRADOS_13 VPR_GIRO_G1 F.0
    MULF VLV_SIGNO_13 VLV_VMIN_13 F.4
    DATAF tmpf341
    DATA8 flag341
    DIVF F.4 VLV_VMAX_13 tmpf341
    CP_EQF 0.0 VLV_VMAX_13 flag341
    SELECTF flag341 0.0 tmpf341 F.3

    SUBF F.3 1.0 F.2
    DATAF tmpf343
    DATA8 flag343
    DIVF -2.0 F.2 tmpf343
    CP_EQF 0.0 F.2 flag343
    SELECTF flag343 0.0 tmpf343 F.1

    MULF F.0 F.1 VLV_ENCODER_13
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds346
	MOVEF_32 100.0 milliseconds346
	DATA32 timer346
	TIMER_WAIT milliseconds346 timer346
	TIMER_READY timer346
    MATH NEGATE VLV_VELOCIDAD1_13 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_13 VLV_ENCODER_13 'True'

	DATA8 layer348
	DATA8 nos348
	DATA8 busy348
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer348 nos348
	JR_EQ8 0 nos348 motornotbusy348
  motorwaiting348:
	OUTPUT_TEST layer348 nos348 busy348
	JR_EQ8 busy348 0 motornotbusy348
	SLEEP
	JR motorwaiting348
  motornotbusy348:
    MOVEF_F 0.0 VLV_VELOCIDAD1_13
    MOVEF_F 0.0 VLV_VELOCIDAD2_13
    MOVEF_F 0.0 VLV_GRADOS_13
    DATA32 milliseconds349
	MOVEF_32 100.0 milliseconds349
	DATA32 timer349
	TIMER_WAIT milliseconds349 timer349
	TIMER_READY timer349
RETSUB_M_GIRO_GRADOS_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_GRADOS_3:
SUB_M_GIRO_NEGRO1F_3:
    MOVEF_F 50.0 VLV_LECTURA_14
  while350:
    JR_LTEQF VLV_LECTURA_14 15.0 endwhile350
  whilebody350:
    CALL SENSOR.READPERCENT VLV_SENS_14 F.2
    SUBF F.2 VPR_GIRO_NEGRO F.1
    DATAF tmpf353
    DATA8 flag353
    DIVF F.1 VPR_GIRO_BLANCO tmpf353
    CP_EQF 0.0 VPR_GIRO_BLANCO flag353
    SELECTF flag353 0.0 tmpf353 F.0

    SUBF 100.0 VPR_GIRO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_14
    MATH NEGATE VLV_VELOCIDAD1_14 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_14
    JR_GTF VLV_LECTURA_14 15.0 whilebody350
  endwhile350:
    CALL MOTOR.STOP 'BC' 'False'
RETSUB_M_GIRO_NEGRO1F_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_NEGRO1F_3:
SUB_M_GIRO_NEGRO1_3:
    MOVEF_F 50.0 VLV_LECTURA_15
  while359:
    JR_LTEQF VLV_LECTURA_15 15.0 endwhile359
  whilebody359:
    CALL SENSOR.READPERCENT VLV_SENS_15 F.2
    SUBF F.2 VPR_GIRO_NEGRO F.1
    DATAF tmpf362
    DATA8 flag362
    DIVF F.1 VPR_GIRO_BLANCO tmpf362
    CP_EQF 0.0 VPR_GIRO_BLANCO flag362
    SELECTF flag362 0.0 tmpf362 F.0

    SUBF 100.0 VPR_GIRO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_15
    MATH NEGATE VLV_VELOCIDAD1_15 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_15
    JR_GTF VLV_LECTURA_15 15.0 whilebody359
  endwhile359:
    CALL MOTOR.STOP 'BC' 'True'
RETSUB_M_GIRO_NEGRO1_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_NEGRO1_3:
SUB_M_GIRO_ENCODERF_3:
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_GIRO_DIAMETRO F.2 F.1
    DATAF tmpf370
    DATA8 flag370
    DIVF VLV_DISTANCIA_16 F.1 tmpf370
    CP_EQF 0.0 F.1 flag370
    SELECTF flag370 0.0 tmpf370 F.0

    MULF F.0 360.0 VLV_ENCODER_16
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MATH NEGATE VLV_VELOCIDAD1_16 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_16 VLV_ENCODER_16 'False'

	DATA8 layer374
	DATA8 nos374
	DATA8 busy374
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer374 nos374
	JR_EQ8 0 nos374 motornotbusy374
  motorwaiting374:
	OUTPUT_TEST layer374 nos374 busy374
	JR_EQ8 busy374 0 motornotbusy374
	SLEEP
	JR motorwaiting374
  motornotbusy374:
RETSUB_M_GIRO_ENCODERF_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_ENCODERF_3:
SUB_M_GIRO_TIEMPOF_3:
    TIMER_READ timeMC3
  while376:
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_TIEMPO_17 endwhile376
  whilebody376:
    MATH NEGATE VLV_VELOCIDAD1_17 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_17
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_TIEMPO_17 whilebody376
  endwhile376:
    CALL MOTOR.STOP 'BC' 'False'
RETSUB_M_GIRO_TIEMPOF_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_TIEMPOF_3:
SUB_M_GIRO_TIEMPO_3:
    TIMER_READ timeMC3
  while383:
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_TIEMPO_18 endwhile383
  whilebody383:
    MATH NEGATE VLV_VELOCIDAD1_18 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_18
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_TIEMPO_18 whilebody383
  endwhile383:
    CALL MOTOR.STOP 'BC' 'True'
RETSUB_M_GIRO_TIEMPO_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_TIEMPO_3:
SUB_M_RECTO_NEGRO1_2:
    MOVEF_F 0.0 VLV_CORRECCION_19
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_19
  while390:
    JR_LTEQF VLV_LECTURA_19 15.0 endwhile390
  whilebody390:
    CALL SENSOR.READPERCENT VLV_SENSOR_19 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf393
    DATA8 flag393
    DIVF F.1 VPR_RECTO_BLANCO tmpf393
    CP_EQF 0.0 VPR_RECTO_BLANCO flag393
    SELECTF flag393 0.0 tmpf393 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_19
    MATH NEGATE VLV_VELOCIDAD_19 F.1
    ADDF F.1 VLV_CORRECCION_19 F.0
    ADDF VLV_VELOCIDAD_19 VLV_CORRECCION_19 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_GTF VLV_LECTURA_19 15.0 whilebody390
  endwhile390:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_NEGRO1_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_NEGRO1_2:
SUB_M_RECTO_ENCODER_2:
    DATAF tmpf401
    DATA8 flag401
    DIVF VLV_VELOCIDAD_20 10.0 tmpf401
    CP_EQF 0.0 10.0 flag401
    SELECTF flag401 0.0 tmpf401 F.2

    DATAF tmpf402
    DATA8 flag402
    DIVF 11286.0 F.2 tmpf402
    CP_EQF 0.0 F.2 flag402
    SELECTF flag402 0.0 tmpf402 F.1

    DATAF tmpf403
    DATA8 flag403
    DIVF VLV_DISTANCIA_20 100.0 tmpf403
    CP_EQF 0.0 100.0 flag403
    SELECTF flag403 0.0 tmpf403 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf405
    DATA8 flag405
    DIVF VPR_RECTO_DIAMETRO 6.24 tmpf405
    CP_EQF 0.0 6.24 flag405
    SELECTF flag405 0.0 tmpf405 F.1

    DATAF tmpf406
    DATA8 flag406
    DIVF F.0 F.1 tmpf406
    CP_EQF 0.0 F.1 flag406
    SELECTF flag406 0.0 tmpf406 VLV_SAFETYTIMER_20

    MATH ABS VLV_VELOCIDAD_20 F.1
    SUBF F.1 20.0 F.0
    MULF F.0 0.05 VLV_CORRECCION_20
    SUBF VLV_DISTANCIA_20 VLV_CORRECCION_20 F.2
    MULF F.2 360.0 F.1
    MOVEF_F 3.1415926535897932384 F.2
    DATAF tmpf413
    DATA8 flag413
    DIVF F.1 F.2 tmpf413
    CP_EQF 0.0 F.2 flag413
    SELECTF flag413 0.0 tmpf413 F.0

    DATAF tmpf414
    DATA8 flag414
    DIVF F.0 VPR_RECTO_DIAMETRO tmpf414
    CP_EQF 0.0 VPR_RECTO_DIAMETRO flag414
    SELECTF flag414 0.0 tmpf414 VLV_ENC_20

    OUTPUT_CLR_COUNT 0 2
    OUTPUT_CLR_COUNT 0 4
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds418
	MOVEF_32 100.0 milliseconds418
	DATA32 timer418
	TIMER_WAIT milliseconds418 timer418
	TIMER_READY timer418
    TIMER_READ timeMC4
  while420:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_20 endwhile420
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_20 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile420
  whilebody420:
    MATH NEGATE VLV_VELOCIDAD_20 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD_20
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_20 and427
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_20 2000.0 F.1
    JR_LTF F.0 F.1 whilebody420
  and427:
  endwhile420:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_20 2000.0 F.1
    JR_LTEQF F.0 F.1 else432_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else432_1:
  endif432:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_ENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ENCODER_2:
SUB_M_RECTO_TIEMPO_2:
    MOVEF_F 0.0 VLV_CORRECCION_21
    TIMER_READ timeMC3
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
  while440:
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_TIEMPO_21 endwhile440
  whilebody440:
    MATH NEGATE VLV_VELOCIDAD_21 F.1
    ADDF F.1 VLV_CORRECCION_21 F.0
    ADDF VLV_VELOCIDAD_21 VLV_CORRECCION_21 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_TIEMPO_21 whilebody440
  endwhile440:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_TIEMPO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_TIEMPO_2:
SUB_M_RECTO_ENCODERF_2:
    DATAF tmpf448
    DATA8 flag448
    DIVF VLV_VELOCIDAD_22 10.0 tmpf448
    CP_EQF 0.0 10.0 flag448
    SELECTF flag448 0.0 tmpf448 F.2

    DATAF tmpf449
    DATA8 flag449
    DIVF 11286.0 F.2 tmpf449
    CP_EQF 0.0 F.2 flag449
    SELECTF flag449 0.0 tmpf449 F.1

    DATAF tmpf450
    DATA8 flag450
    DIVF VLV_DISTANCIA_22 100.0 tmpf450
    CP_EQF 0.0 100.0 flag450
    SELECTF flag450 0.0 tmpf450 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf452
    DATA8 flag452
    DIVF VPR_RECTO_DIAMETRO 6.24 tmpf452
    CP_EQF 0.0 6.24 flag452
    SELECTF flag452 0.0 tmpf452 F.1

    DATAF tmpf453
    DATA8 flag453
    DIVF F.0 F.1 tmpf453
    CP_EQF 0.0 F.1 flag453
    SELECTF flag453 0.0 tmpf453 VLV_SAFETYTIMER_22

    MATH ABS VLV_VELOCIDAD_22 F.1
    SUBF F.1 20.0 F.0
    MULF F.0 0.05 VLV_CORRECCION_22
    SUBF VLV_DISTANCIA_22 VLV_CORRECCION_22 F.2
    MULF F.2 360.0 F.1
    MOVEF_F 3.1415926535897932384 F.2
    DATAF tmpf460
    DATA8 flag460
    DIVF F.1 F.2 tmpf460
    CP_EQF 0.0 F.2 flag460
    SELECTF flag460 0.0 tmpf460 F.0

    DATAF tmpf461
    DATA8 flag461
    DIVF F.0 VPR_RECTO_DIAMETRO tmpf461
    CP_EQF 0.0 VPR_RECTO_DIAMETRO flag461
    SELECTF flag461 0.0 tmpf461 VLV_ENC_22

    OUTPUT_CLR_COUNT 0 2
    OUTPUT_CLR_COUNT 0 4
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds465
	MOVEF_32 100.0 milliseconds465
	DATA32 timer465
	TIMER_WAIT milliseconds465 timer465
	TIMER_READY timer465
    TIMER_READ timeMC4
  while467:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_22 endwhile467
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_22 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile467
  whilebody467:
    MATH NEGATE VLV_VELOCIDAD_22 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD_22
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_22 and474
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_22 2000.0 F.1
    JR_LTF F.0 F.1 whilebody467
  and474:
  endwhile467:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_22 2000.0 F.1
    JR_LTEQF F.0 F.1 else479_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else479_1:
  endif479:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_ENCODERF_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ENCODERF_2:
SUB_M_RECTO_COLOR1_3:
    MOVEF_F 0.0 VLV_CORRECCION_23
    CALL SENSOR.GETMODE VLV_SENSOR_23 VLV_MODE_23
    DATA8 layer486
	DATA8 no486
	DATA8 mode8486
	
	MOVEF_8 VLV_SENSOR_23 no486
	SUB8 no486 1 no486
	DIV8 no486 4 layer486
	MATH MOD8 no486 4 no486

	MOVEF_8 2.0 mode8486
	
	INPUT_DEVICE READY_RAW layer486 no486 0 mode8486 0
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
  while488:
    CALL SENSOR.READRAWVALUE VLV_SENSOR_23 0.0 F.0
    JR_EQF F.0 VLV_COLOR_23 endwhile488
  whilebody488:
    MATH NEGATE VLV_VELOCIDAD_23 F.1
    ADDF F.1 VLV_CORRECCION_23 F.0
    ADDF VLV_VELOCIDAD_23 VLV_CORRECCION_23 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    CALL SENSOR.READRAWVALUE VLV_SENSOR_23 0.0 F.0
    JR_NEQF F.0 VLV_COLOR_23 whilebody488
  endwhile488:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
    DATA8 layer496
	DATA8 no496
	DATA8 mode8496
	
	MOVEF_8 VLV_SENSOR_23 no496
	SUB8 no496 1 no496
	DIV8 no496 4 layer496
	MATH MOD8 no496 4 no496

	MOVEF_8 VLV_MODE_23 mode8496
	
	INPUT_DEVICE READY_RAW layer496 no496 0 mode8496 0
RETSUB_M_RECTO_COLOR1_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_COLOR1_3:
SUB_M_RECTO_BLANCO1F_2:
    MOVEF_F 0.0 VLV_CORRECCION_24
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_24
  while498:
    JR_GTEQF VLV_LECTURA_24 60.0 endwhile498
  whilebody498:
    CALL SENSOR.READPERCENT VLV_SENSOR_24 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf501
    DATA8 flag501
    DIVF F.1 VPR_RECTO_BLANCO tmpf501
    CP_EQF 0.0 VPR_RECTO_BLANCO flag501
    SELECTF flag501 0.0 tmpf501 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_24
    MATH NEGATE VLV_VELOCIDAD_24 F.1
    ADDF F.1 VLV_CORRECCION_24 F.0
    ADDF VLV_VELOCIDAD_24 VLV_CORRECCION_24 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_LTF VLV_LECTURA_24 60.0 whilebody498
  endwhile498:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_BLANCO1F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_BLANCO1F_2:
SUB_M_RECTO_BLANCO1_2:
    MOVEF_F 0.0 VLV_CORRECCION_25
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_25
  while510:
    JR_GTEQF VLV_LECTURA_25 60.0 endwhile510
  whilebody510:
    CALL SENSOR.READPERCENT VLV_SENSOR_25 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf513
    DATA8 flag513
    DIVF F.1 VPR_RECTO_BLANCO tmpf513
    CP_EQF 0.0 VPR_RECTO_BLANCO flag513
    SELECTF flag513 0.0 tmpf513 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_25
    MATH NEGATE VLV_VELOCIDAD_25 F.1
    ADDF F.1 VLV_CORRECCION_25 F.0
    ADDF VLV_VELOCIDAD_25 VLV_CORRECCION_25 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_LTF VLV_LECTURA_25 60.0 whilebody510
  endwhile510:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_BLANCO1_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_BLANCO1_2:
SUB_M_RECTO_NEGRO1F_2:
    MOVEF_F 0.0 VLV_CORRECCION_26
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_26
  while522:
    JR_LTEQF VLV_LECTURA_26 15.0 endwhile522
  whilebody522:
    CALL SENSOR.READPERCENT VLV_SENSOR_26 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf525
    DATA8 flag525
    DIVF F.1 VPR_RECTO_BLANCO tmpf525
    CP_EQF 0.0 VPR_RECTO_BLANCO flag525
    SELECTF flag525 0.0 tmpf525 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_26
    MATH NEGATE VLV_VELOCIDAD_26 F.1
    ADDF F.1 VLV_CORRECCION_26 F.0
    ADDF VLV_VELOCIDAD_26 VLV_CORRECCION_26 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_GTF VLV_LECTURA_26 15.0 whilebody522
  endwhile522:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_NEGRO1F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_NEGRO1F_2:
SUB_M_SIGUELINEAS_CRUCE14_1:
    MULF VLV_VELOCIDAD_27 1.0 VLV_VELOCIDAD_27
    MOVEF_F 50.0 VLV_LECTURA1_27
    MOVEF_F 50.0 VLV_LECTURA3_27
    MOVEF_F 50.0 VLV_LECTURA4_27
    MATH POW VLV_VELOCIDAD_27 0.833333333333333 F.0
    DATAF tmpf535
    DATA8 flag535
    DIVF F.0 440.0 tmpf535
    CP_EQF 0.0 440.0 flag535
    SELECTF flag535 0.0 tmpf535 VLV_KP_27

    MULF VLV_KP_27 70.0 VLV_KD_27
    MOVEF_F 0.0 VLV_ERROR_27
    MOVEF_F 0.0 VLV_OLDERROR_27
    MOVEF_F 0.0 VLV_U_27
    MATH ABS VLV_VELOCIDAD_27 F.0
    DATAF tmpf538
    DATA8 flag538
    DIVF VLV_VELOCIDAD_27 F.0 tmpf538
    CP_EQF 0.0 F.0 flag538
    SELECTF flag538 0.0 tmpf538 VLV_SENTIDO_27

  while539:
    JR_GTF VLV_LECTURA1_27 10.0 or540
    JR_LTEQF VLV_LECTURA4_27 10.0 endwhile539
  or540:
  whilebody539:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf543
    DATA8 flag543
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf543
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag543
    SELECTF flag543 0.0 tmpf543 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_27
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf548
    DATA8 flag548
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf548
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag548
    SELECTF flag548 0.0 tmpf548 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_27
    SUBF VLV_LECTURA1_27 VLV_LECTURA4_27 F.1
    MULF F.1 VLV_SENTIDO_27 F.0
    MULF F.0 1.0 VLV_ERROR_27
    MULF VLV_ERROR_27 VLV_KP_27 F.0
    SUBF VLV_ERROR_27 VLV_OLDERROR_27 F.2
    MULF F.2 VLV_KD_27 F.1
    ADDF F.0 F.1 VLV_U_27
    ADDF VLV_VELOCIDAD_27 VLV_U_27 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_27 VLV_U_27 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_27 VLV_OLDERROR_27
    JR_GTF VLV_LECTURA1_27 10.0 whilebody539
    JR_GTF VLV_LECTURA4_27 10.0 whilebody539
  endwhile539:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_CRUCE14_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE14_1:
SUB_M_SIGUELINEAS_ENCODER31F_2:
    MULF VLV_VELOCIDAD_28 1.0 VLV_VELOCIDAD_28
    MOVEF_F 50.0 VLV_LECTURA1_28
    MOVEF_F 50.0 VLV_LECTURA3_28
    MOVEF_F 50.0 VLV_LECTURA4_28
    MATH POW VLV_VELOCIDAD_28 0.833333333333333 F.0
    DATAF tmpf565
    DATA8 flag565
    DIVF F.0 440.0 tmpf565
    CP_EQF 0.0 440.0 flag565
    SELECTF flag565 0.0 tmpf565 VLV_KP_28

    MULF VLV_KP_28 70.0 VLV_KD_28
    MOVEF_F 0.0 VLV_ERROR_28
    MOVEF_F 0.0 VLV_OLDERROR_28
    MOVEF_F 0.0 VLV_U_28
    MATH ABS VLV_VELOCIDAD_28 F.0
    DATAF tmpf568
    DATA8 flag568
    DIVF VLV_VELOCIDAD_28 F.0 tmpf568
    CP_EQF 0.0 F.0 flag568
    SELECTF flag568 0.0 tmpf568 VLV_SENTIDO_28

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf571
    DATA8 flag571
    DIVF VLV_ENCODER_28 F.1 tmpf571
    CP_EQF 0.0 F.1 flag571
    SELECTF flag571 0.0 tmpf571 F.0

    MULF F.0 360.0 VLV_ENCODER_28
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_28
    MOVEF_F 0.0 VLV_ENCODERC_28
    DATAF tmpf574
    DATA8 flag574
    DIVF VLV_VELOCIDAD_28 10.0 tmpf574
    CP_EQF 0.0 10.0 flag574
    SELECTF flag574 0.0 tmpf574 F.2

    DATAF tmpf575
    DATA8 flag575
    DIVF 11286.0 F.2 tmpf575
    CP_EQF 0.0 F.2 flag575
    SELECTF flag575 0.0 tmpf575 F.1

    DATAF tmpf576
    DATA8 flag576
    DIVF VLV_ENCODER_28 100.0 tmpf576
    CP_EQF 0.0 100.0 flag576
    SELECTF flag576 0.0 tmpf576 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf578
    DATA8 flag578
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf578
    CP_EQF 0.0 6.24 flag578
    SELECTF flag578 0.0 tmpf578 F.1

    DATAF tmpf579
    DATA8 flag579
    DIVF F.0 F.1 tmpf579
    CP_EQF 0.0 F.1 flag579
    SELECTF flag579 0.0 tmpf579 VLV_SAFETYTIMER_28

    TIMER_READ timeMC4
  while581:
    MATH ABS VLV_ENCODERC_28 F.0
    JR_GTEQF F.0 VLV_ENCODER_28 endwhile581
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_28 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile581
  whilebody581:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_28 VLV_ENCODERC_28
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf589
    DATA8 flag589
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf589
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag589
    SELECTF flag589 0.0 tmpf589 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_28
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf594
    DATA8 flag594
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf594
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag594
    SELECTF flag594 0.0 tmpf594 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_28
    SUBF VLV_LECTURA3_28 VLV_LECTURA1_28 F.1
    MULF F.1 VLV_SENTIDO_28 F.0
    MULF F.0 1.0 VLV_ERROR_28
    MULF VLV_ERROR_28 VLV_KP_28 F.0
    SUBF VLV_ERROR_28 VLV_OLDERROR_28 F.2
    MULF F.2 VLV_KD_28 F.1
    ADDF F.0 F.1 VLV_U_28
    ADDF VLV_VELOCIDAD_28 VLV_U_28 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_28 VLV_U_28 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_28 VLV_OLDERROR_28
    MATH ABS VLV_ENCODERC_28 F.0
    JR_GTEQF F.0 VLV_ENCODER_28 and608
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_28 2000.0 F.1
    JR_LTF F.0 F.1 whilebody581
  and608:
  endwhile581:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_28 2000.0 F.1
    JR_LTEQF F.0 F.1 else612_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else612_1:
  endif612:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_ENCODER31F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER31F_2:
SUB_M_SIGUELINEAS_ENCODER14_2:
    MULF VLV_VELOCIDAD_29 1.0 VLV_VELOCIDAD_29
    MOVEF_F 50.0 VLV_LECTURA1_29
    MOVEF_F 50.0 VLV_LECTURA3_29
    MOVEF_F 50.0 VLV_LECTURA4_29
    MATH POW VLV_VELOCIDAD_29 0.833333333333333 F.0
    DATAF tmpf620
    DATA8 flag620
    DIVF F.0 440.0 tmpf620
    CP_EQF 0.0 440.0 flag620
    SELECTF flag620 0.0 tmpf620 VLV_KP_29

    MULF VLV_KP_29 70.0 VLV_KD_29
    MOVEF_F 0.0 VLV_ERROR_29
    MOVEF_F 0.0 VLV_OLDERROR_29
    MOVEF_F 0.0 VLV_U_29
    MATH ABS VLV_VELOCIDAD_29 F.0
    DATAF tmpf623
    DATA8 flag623
    DIVF VLV_VELOCIDAD_29 F.0 tmpf623
    CP_EQF 0.0 F.0 flag623
    SELECTF flag623 0.0 tmpf623 VLV_SENTIDO_29

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf626
    DATA8 flag626
    DIVF VLV_ENCODER_29 F.1 tmpf626
    CP_EQF 0.0 F.1 flag626
    SELECTF flag626 0.0 tmpf626 F.0

    MULF F.0 360.0 VLV_ENCODER_29
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_29
    MOVEF_F 0.0 VLV_ENCODERC_29
    DATAF tmpf629
    DATA8 flag629
    DIVF VLV_VELOCIDAD_29 10.0 tmpf629
    CP_EQF 0.0 10.0 flag629
    SELECTF flag629 0.0 tmpf629 F.2

    DATAF tmpf630
    DATA8 flag630
    DIVF 11286.0 F.2 tmpf630
    CP_EQF 0.0 F.2 flag630
    SELECTF flag630 0.0 tmpf630 F.1

    DATAF tmpf631
    DATA8 flag631
    DIVF VLV_ENCODER_29 100.0 tmpf631
    CP_EQF 0.0 100.0 flag631
    SELECTF flag631 0.0 tmpf631 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf633
    DATA8 flag633
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf633
    CP_EQF 0.0 6.24 flag633
    SELECTF flag633 0.0 tmpf633 F.1

    DATAF tmpf634
    DATA8 flag634
    DIVF F.0 F.1 tmpf634
    CP_EQF 0.0 F.1 flag634
    SELECTF flag634 0.0 tmpf634 VLV_SAFETYTIMER_29

    TIMER_READ timeMC4
  while636:
    MATH ABS VLV_ENCODERC_29 F.0
    JR_GTEQF F.0 VLV_ENCODER_29 endwhile636
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_29 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile636
  whilebody636:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_29 VLV_ENCODERC_29
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf644
    DATA8 flag644
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf644
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag644
    SELECTF flag644 0.0 tmpf644 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_29
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf649
    DATA8 flag649
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf649
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag649
    SELECTF flag649 0.0 tmpf649 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_29
    SUBF VLV_LECTURA1_29 VLV_LECTURA4_29 F.1
    MULF F.1 VLV_SENTIDO_29 F.0
    MULF F.0 1.0 VLV_ERROR_29
    MULF VLV_ERROR_29 VLV_KP_29 F.0
    SUBF VLV_ERROR_29 VLV_OLDERROR_29 F.2
    MULF F.2 VLV_KD_29 F.1
    ADDF F.0 F.1 VLV_U_29
    ADDF VLV_VELOCIDAD_29 VLV_U_29 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_29 VLV_U_29 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_29 VLV_OLDERROR_29
    MATH ABS VLV_ENCODERC_29 F.0
    JR_GTEQF F.0 VLV_ENCODER_29 and663
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_29 2000.0 F.1
    JR_LTF F.0 F.1 whilebody636
  and663:
  endwhile636:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_29 2000.0 F.1
    JR_LTEQF F.0 F.1 else667_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else667_1:
  endif667:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_ENCODER14_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER14_2:
SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
    MULF VLV_VELOCIDAD_30 1.0 VLV_VELOCIDAD_30
    MOVEF_F 50.0 VLV_LECTURA1_30
    MOVEF_F 50.0 VLV_LECTURA3_30
    MOVEF_F 50.0 VLV_LECTURA4_30
    MATH POW VLV_VELOCIDAD_30 0.833333333333333 F.0
    DATAF tmpf675
    DATA8 flag675
    DIVF F.0 440.0 tmpf675
    CP_EQF 0.0 440.0 flag675
    SELECTF flag675 0.0 tmpf675 VLV_KP_30

    MULF VLV_KP_30 70.0 VLV_KD_30
    MOVEF_F 0.0 VLV_ERROR_30
    MOVEF_F 0.0 VLV_OLDERROR_30
    MOVEF_F 0.0 VLV_U_30
    MATH ABS VLV_VELOCIDAD_30 F.0
    DATAF tmpf678
    DATA8 flag678
    DIVF VLV_VELOCIDAD_30 F.0 tmpf678
    CP_EQF 0.0 F.0 flag678
    SELECTF flag678 0.0 tmpf678 VLV_SENTIDO_30

    MOVEF_F 50.0 VLV_LECTURA_30
  while679:
    JR_LTEQF VLV_LECTURA_30 7.0 endwhile679
  whilebody679:
    JR_NEQF VLV_READER_30 3.0 else680_1
    MOVEF_F VLV_LECTURA3_30 VLV_LECTURA_30
    MOVEF_F VLV_LECTURA1_30 VLV_LECTURAIZQ_30
    MOVEF_F VLV_LECTURA4_30 VLV_LECTURADCH_30
    JR endif680
  else680_1:
    MOVEF_F VLV_LECTURA4_30 VLV_LECTURA_30
    MOVEF_F VLV_LECTURA3_30 VLV_LECTURAIZQ_30
    MOVEF_F VLV_LECTURA1_30 VLV_LECTURADCH_30
  else680_2:
  endif680:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf683
    DATA8 flag683
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf683
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag683
    SELECTF flag683 0.0 tmpf683 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_30
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf688
    DATA8 flag688
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf688
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag688
    SELECTF flag688 0.0 tmpf688 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_30
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf693
    DATA8 flag693
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf693
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag693
    SELECTF flag693 0.0 tmpf693 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_30
    SUBF VLV_LECTURAIZQ_30 VLV_LECTURADCH_30 F.1
    MULF F.1 VLV_SENTIDO_30 F.0
    MULF F.0 1.0 VLV_ERROR_30
    MULF VLV_ERROR_30 VLV_KP_30 F.0
    SUBF VLV_ERROR_30 VLV_OLDERROR_30 F.2
    MULF F.2 VLV_KD_30 F.1
    ADDF F.0 F.1 VLV_U_30
    ADDF VLV_VELOCIDAD_30 VLV_U_30 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_30 VLV_U_30 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_30 VLV_OLDERROR_30
    JR_GTF VLV_LECTURA_30 7.0 whilebody679
  endwhile679:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
    MULF VLV_VELOCIDAD_31 1.0 VLV_VELOCIDAD_31
    MOVEF_F 50.0 VLV_LECTURA1_31
    MOVEF_F 50.0 VLV_LECTURA3_31
    MOVEF_F 50.0 VLV_LECTURA4_31
    MATH POW VLV_VELOCIDAD_31 0.833333333333333 F.0
    DATAF tmpf710
    DATA8 flag710
    DIVF F.0 440.0 tmpf710
    CP_EQF 0.0 440.0 flag710
    SELECTF flag710 0.0 tmpf710 VLV_KP_31

    MULF VLV_KP_31 70.0 VLV_KD_31
    MOVEF_F 0.0 VLV_ERROR_31
    MOVEF_F 0.0 VLV_OLDERROR_31
    MOVEF_F 0.0 VLV_U_31
    MATH ABS VLV_VELOCIDAD_31 F.0
    DATAF tmpf713
    DATA8 flag713
    DIVF VLV_VELOCIDAD_31 F.0 tmpf713
    CP_EQF 0.0 F.0 flag713
    SELECTF flag713 0.0 tmpf713 VLV_SENTIDO_31

    MOVEF_F 50.0 VLV_LECTURA_31
  while714:
    JR_LTEQF VLV_LECTURA_31 7.0 endwhile714
  whilebody714:
    JR_NEQF VLV_READER_31 3.0 else715_1
    MOVEF_F VLV_LECTURA3_31 VLV_LECTURA_31
    MOVEF_F VLV_LECTURA1_31 VLV_LECTURAIZQ_31
    MOVEF_F VLV_LECTURA4_31 VLV_LECTURADCH_31
    JR endif715
  else715_1:
    MOVEF_F VLV_LECTURA4_31 VLV_LECTURA_31
    MOVEF_F VLV_LECTURA3_31 VLV_LECTURAIZQ_31
    MOVEF_F VLV_LECTURA1_31 VLV_LECTURADCH_31
  else715_2:
  endif715:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf718
    DATA8 flag718
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf718
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag718
    SELECTF flag718 0.0 tmpf718 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_31
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf723
    DATA8 flag723
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf723
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag723
    SELECTF flag723 0.0 tmpf723 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_31
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf728
    DATA8 flag728
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf728
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag728
    SELECTF flag728 0.0 tmpf728 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_31
    SUBF VLV_LECTURAIZQ_31 VLV_LECTURADCH_31 F.1
    MULF F.1 VLV_SENTIDO_31 F.0
    MULF F.0 1.0 VLV_ERROR_31
    MULF VLV_ERROR_31 VLV_KP_31 F.0
    SUBF VLV_ERROR_31 VLV_OLDERROR_31 F.2
    MULF F.2 VLV_KD_31 F.1
    ADDF F.0 F.1 VLV_U_31
    ADDF VLV_VELOCIDAD_31 VLV_U_31 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_31 VLV_U_31 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_31 VLV_OLDERROR_31
    JR_GTF VLV_LECTURA_31 7.0 whilebody714
  endwhile714:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
SUB_M_SIGUELINEAS_ENCODER14F_2:
    MULF VLV_VELOCIDAD_32 1.0 VLV_VELOCIDAD_32
    MOVEF_F 50.0 VLV_LECTURA1_32
    MOVEF_F 50.0 VLV_LECTURA3_32
    MOVEF_F 50.0 VLV_LECTURA4_32
    MATH POW VLV_VELOCIDAD_32 0.833333333333333 F.0
    DATAF tmpf745
    DATA8 flag745
    DIVF F.0 440.0 tmpf745
    CP_EQF 0.0 440.0 flag745
    SELECTF flag745 0.0 tmpf745 VLV_KP_32

    MULF VLV_KP_32 70.0 VLV_KD_32
    MOVEF_F 0.0 VLV_ERROR_32
    MOVEF_F 0.0 VLV_OLDERROR_32
    MOVEF_F 0.0 VLV_U_32
    MATH ABS VLV_VELOCIDAD_32 F.0
    DATAF tmpf748
    DATA8 flag748
    DIVF VLV_VELOCIDAD_32 F.0 tmpf748
    CP_EQF 0.0 F.0 flag748
    SELECTF flag748 0.0 tmpf748 VLV_SENTIDO_32

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf751
    DATA8 flag751
    DIVF VLV_ENCODER_32 F.1 tmpf751
    CP_EQF 0.0 F.1 flag751
    SELECTF flag751 0.0 tmpf751 F.0

    MULF F.0 360.0 VLV_ENCODER_32
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_32
    MOVEF_F 0.0 VLV_ENCODERC_32
    DATAF tmpf754
    DATA8 flag754
    DIVF VLV_VELOCIDAD_32 10.0 tmpf754
    CP_EQF 0.0 10.0 flag754
    SELECTF flag754 0.0 tmpf754 F.2

    DATAF tmpf755
    DATA8 flag755
    DIVF 11286.0 F.2 tmpf755
    CP_EQF 0.0 F.2 flag755
    SELECTF flag755 0.0 tmpf755 F.1

    DATAF tmpf756
    DATA8 flag756
    DIVF VLV_ENCODER_32 100.0 tmpf756
    CP_EQF 0.0 100.0 flag756
    SELECTF flag756 0.0 tmpf756 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf758
    DATA8 flag758
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf758
    CP_EQF 0.0 6.24 flag758
    SELECTF flag758 0.0 tmpf758 F.1

    DATAF tmpf759
    DATA8 flag759
    DIVF F.0 F.1 tmpf759
    CP_EQF 0.0 F.1 flag759
    SELECTF flag759 0.0 tmpf759 VLV_SAFETYTIMER_32

    TIMER_READ timeMC4
  while761:
    MATH ABS VLV_ENCODERC_32 F.0
    JR_GTEQF F.0 VLV_ENCODER_32 endwhile761
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_32 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile761
  whilebody761:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_32 VLV_ENCODERC_32
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf769
    DATA8 flag769
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf769
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag769
    SELECTF flag769 0.0 tmpf769 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_32
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf774
    DATA8 flag774
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf774
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag774
    SELECTF flag774 0.0 tmpf774 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_32
    SUBF VLV_LECTURA1_32 VLV_LECTURA4_32 F.1
    MULF F.1 VLV_SENTIDO_32 F.0
    MULF F.0 1.0 VLV_ERROR_32
    MULF VLV_ERROR_32 VLV_KP_32 F.0
    SUBF VLV_ERROR_32 VLV_OLDERROR_32 F.2
    MULF F.2 VLV_KD_32 F.1
    ADDF F.0 F.1 VLV_U_32
    ADDF VLV_VELOCIDAD_32 VLV_U_32 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_32 VLV_U_32 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_32 VLV_OLDERROR_32
    MATH ABS VLV_ENCODERC_32 F.0
    JR_GTEQF F.0 VLV_ENCODER_32 and788
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_32 2000.0 F.1
    JR_LTF F.0 F.1 whilebody761
  and788:
  endwhile761:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_32 2000.0 F.1
    JR_LTEQF F.0 F.1 else792_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else792_1:
  endif792:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_ENCODER14F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER14F_2:
SUB_M_SIGUELINEAS_ENCODER31_2:
    MULF VLV_VELOCIDAD_33 1.0 VLV_VELOCIDAD_33
    MOVEF_F 50.0 VLV_LECTURA1_33
    MOVEF_F 50.0 VLV_LECTURA3_33
    MOVEF_F 50.0 VLV_LECTURA4_33
    MATH POW VLV_VELOCIDAD_33 0.833333333333333 F.0
    DATAF tmpf800
    DATA8 flag800
    DIVF F.0 440.0 tmpf800
    CP_EQF 0.0 440.0 flag800
    SELECTF flag800 0.0 tmpf800 VLV_KP_33

    MULF VLV_KP_33 70.0 VLV_KD_33
    MOVEF_F 0.0 VLV_ERROR_33
    MOVEF_F 0.0 VLV_OLDERROR_33
    MOVEF_F 0.0 VLV_U_33
    MATH ABS VLV_VELOCIDAD_33 F.0
    DATAF tmpf803
    DATA8 flag803
    DIVF VLV_VELOCIDAD_33 F.0 tmpf803
    CP_EQF 0.0 F.0 flag803
    SELECTF flag803 0.0 tmpf803 VLV_SENTIDO_33

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf806
    DATA8 flag806
    DIVF VLV_ENCODER_33 F.1 tmpf806
    CP_EQF 0.0 F.1 flag806
    SELECTF flag806 0.0 tmpf806 F.0

    MULF F.0 360.0 VLV_ENCODER_33
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_33
    MOVEF_F 0.0 VLV_ENCODERC_33
    DATAF tmpf809
    DATA8 flag809
    DIVF VLV_VELOCIDAD_33 10.0 tmpf809
    CP_EQF 0.0 10.0 flag809
    SELECTF flag809 0.0 tmpf809 F.2

    DATAF tmpf810
    DATA8 flag810
    DIVF 11286.0 F.2 tmpf810
    CP_EQF 0.0 F.2 flag810
    SELECTF flag810 0.0 tmpf810 F.1

    DATAF tmpf811
    DATA8 flag811
    DIVF VLV_ENCODER_33 100.0 tmpf811
    CP_EQF 0.0 100.0 flag811
    SELECTF flag811 0.0 tmpf811 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf813
    DATA8 flag813
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf813
    CP_EQF 0.0 6.24 flag813
    SELECTF flag813 0.0 tmpf813 F.1

    DATAF tmpf814
    DATA8 flag814
    DIVF F.0 F.1 tmpf814
    CP_EQF 0.0 F.1 flag814
    SELECTF flag814 0.0 tmpf814 VLV_SAFETYTIMER_33

    TIMER_READ timeMC4
  while816:
    MATH ABS VLV_ENCODERC_33 F.0
    JR_GTEQF F.0 VLV_ENCODER_33 endwhile816
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_33 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile816
  whilebody816:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_33 VLV_ENCODERC_33
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf824
    DATA8 flag824
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf824
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag824
    SELECTF flag824 0.0 tmpf824 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_33
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf829
    DATA8 flag829
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf829
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag829
    SELECTF flag829 0.0 tmpf829 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_33
    SUBF VLV_LECTURA3_33 VLV_LECTURA1_33 F.1
    MULF F.1 VLV_SENTIDO_33 F.0
    MULF F.0 1.0 VLV_ERROR_33
    MULF VLV_ERROR_33 VLV_KP_33 F.0
    SUBF VLV_ERROR_33 VLV_OLDERROR_33 F.2
    MULF F.2 VLV_KD_33 F.1
    ADDF F.0 F.1 VLV_U_33
    ADDF VLV_VELOCIDAD_33 VLV_U_33 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_33 VLV_U_33 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_33 VLV_OLDERROR_33
    MATH ABS VLV_ENCODERC_33 F.0
    JR_GTEQF F.0 VLV_ENCODER_33 and843
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_33 2000.0 F.1
    JR_LTF F.0 F.1 whilebody816
  and843:
  endwhile816:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_33 2000.0 F.1
    JR_LTEQF F.0 F.1 else847_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else847_1:
  endif847:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_ENCODER31_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER31_2:
SUB_M_RGB_DETECT_3:
    CALL SENSOR.GETMODE VLV_SENS_34 VLV_SENS_MODE_34
    DATA8 layer854
	DATA8 no854
	DATA8 mode8854
	
	MOVEF_8 VLV_SENS_34 no854
	SUB8 no854 1 no854
	DIV8 no854 4 layer854
	MATH MOD8 no854 4 no854

	MOVEF_8 4.0 mode8854
	
	INPUT_DEVICE READY_RAW layer854 no854 0 mode8854 0
    MOVEF_F 15.0 VLV_RED_34
    MOVEF_F 60.0 VLV_YELLOW_34
    MOVEF_F 170.0 VLV_GREEN_34
    MOVEF_F 330.0 VLV_BLUE_34
    MOVEF_F 0.0 VLV_HUE_34
    MOVEF_F 0.0 VLV_SAT_34
    MOVEF_F 0.0 VLV_VALUE_34
    MOVEF_F 0.0 VLV_COLOR_34
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_RNORMARRAY_34
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_GNORMARRAY_34
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_BNORMARRAY_34
    CALL LCD.CLEAR
    MOVEF_F 1.0 VLV_J_34
  for859:
    JR_GTF VLV_J_34 VLV_REPS_34 endfor859
  forbody859:
    CALL SENSOR.READRAW VLV_SENS_34 3.0 VLV_RGB_34
    CALL ARRAYGET_FLOAT 0.0 VLV_RRAW_34 VLV_RGB_34
    CALL ARRAYGET_FLOAT 1.0 VLV_GRAW_34 VLV_RGB_34
    CALL ARRAYGET_FLOAT 2.0 VLV_BRAW_34 VLV_RGB_34
    DATAF tmpf864
    DATA8 flag864
    DIVF VLV_RRAW_34 VPR_RGB_RWHITE tmpf864
    CP_EQF 0.0 VPR_RGB_RWHITE flag864
    SELECTF flag864 0.0 tmpf864 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_34 F.0 VLV_RNORMARRAY_34
    DATAF tmpf868
    DATA8 flag868
    DIVF VLV_GRAW_34 VPR_RGB_GWHITE tmpf868
    CP_EQF 0.0 VPR_RGB_GWHITE flag868
    SELECTF flag868 0.0 tmpf868 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_34 F.0 VLV_GNORMARRAY_34
    DATAF tmpf872
    DATA8 flag872
    DIVF VLV_BRAW_34 VPR_RGB_BWHITE tmpf872
    CP_EQF 0.0 VPR_RGB_BWHITE flag872
    SELECTF flag872 0.0 tmpf872 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_34 F.0 VLV_BNORMARRAY_34
    DATA32 milliseconds876
	MOVEF_32 5.0 milliseconds876
	DATA32 timer876
	TIMER_WAIT milliseconds876 timer876
	TIMER_READY timer876
    ADDF VLV_J_34 1.0 VLV_J_34
    JR_LTEQF VLV_J_34 VLV_REPS_34 forbody859
  endfor859:
    MOVEF_F 1.0 VLV_J_34
  for878:
    JR_GTF VLV_J_34 VLV_REPS_34 endfor878
  forbody878:
    CALL ARRAYGET_FLOAT VLV_J_34 F.0 VLV_RNORMARRAY_34
    ADDF VLV_J_34 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_RNORMARRAY_34
    ADDF F.0 F.1 VLV_RNORM_34
    CALL ARRAYGET_FLOAT VLV_J_34 F.0 VLV_GNORMARRAY_34
    ADDF VLV_J_34 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_GNORMARRAY_34
    ADDF F.0 F.1 VLV_GNORM_34
    CALL ARRAYGET_FLOAT VLV_J_34 F.0 VLV_BNORMARRAY_34
    ADDF VLV_J_34 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_BNORMARRAY_34
    ADDF F.0 F.1 VLV_BNORM_34
    ADDF VLV_J_34 2.0 VLV_J_34
    JR_LTEQF VLV_J_34 VLV_REPS_34 forbody878
  endfor878:
    DATAF tmpf892
    DATA8 flag892
    DIVF VLV_RNORM_34 VLV_REPS_34 tmpf892
    CP_EQF 0.0 VLV_REPS_34 flag892
    SELECTF flag892 0.0 tmpf892 VLV_RNORM_34

    DATAF tmpf893
    DATA8 flag893
    DIVF VLV_GNORM_34 VLV_REPS_34 tmpf893
    CP_EQF 0.0 VLV_REPS_34 flag893
    SELECTF flag893 0.0 tmpf893 VLV_GNORM_34

    DATAF tmpf894
    DATA8 flag894
    DIVF VLV_BNORM_34 VLV_REPS_34 tmpf894
    CP_EQF 0.0 VLV_REPS_34 flag894
    SELECTF flag894 0.0 tmpf894 VLV_BNORM_34

    DATA8 flag895
	CP_GTF VLV_RNORM_34 VLV_GNORM_34 flag895
	SELECTF flag895 VLV_RNORM_34 VLV_GNORM_34 F.0
    DATA8 flag896
	CP_GTF F.0 VLV_BNORM_34 flag896
	SELECTF flag896 F.0 VLV_BNORM_34 VLV_MAX_34
    DATA8 flag897
	CP_LTF VLV_RNORM_34 VLV_GNORM_34 flag897
	SELECTF flag897 VLV_RNORM_34 VLV_GNORM_34 F.0
    DATA8 flag898
	CP_LTF F.0 VLV_BNORM_34 flag898
	SELECTF flag898 F.0 VLV_BNORM_34 VLV_MIN_34
    JR_NEQF VLV_MAX_34 VLV_MIN_34 else899_1
    MOVEF_F 0.0 VLV_HUE_34
    JR endif899
  else899_1:
    JR_NEQF VLV_MAX_34 VLV_RNORM_34 else899_2
    JR_LTF VLV_GNORM_34 VLV_BNORM_34 else900_1
    SUBF VLV_GNORM_34 VLV_BNORM_34 F.1
    MULF 60.0 F.1 F.0
    SUBF VLV_MAX_34 VLV_MIN_34 F.1
    DATAF tmpf904
    DATA8 flag904
    DIVF F.0 F.1 tmpf904
    CP_EQF 0.0 F.1 flag904
    SELECTF flag904 0.0 tmpf904 VLV_HUE_34

    JR endif900
  else900_1:
    SUBF VLV_GNORM_34 VLV_BNORM_34 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_34 VLV_MIN_34 F.2
    DATAF tmpf908
    DATA8 flag908
    DIVF F.1 F.2 tmpf908
    CP_EQF 0.0 F.2 flag908
    SELECTF flag908 0.0 tmpf908 F.0

    ADDF F.0 360.0 VLV_HUE_34
  else900_2:
  endif900:
    JR endif899
  else899_2:
    JR_NEQF VLV_MAX_34 VLV_GNORM_34 else899_3
    SUBF VLV_BNORM_34 VLV_RNORM_34 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_34 VLV_MIN_34 F.2
    DATAF tmpf913
    DATA8 flag913
    DIVF F.1 F.2 tmpf913
    CP_EQF 0.0 F.2 flag913
    SELECTF flag913 0.0 tmpf913 F.0

    ADDF F.0 120.0 VLV_HUE_34
    JR endif899
  else899_3:
    SUBF VLV_RNORM_34 VLV_GNORM_34 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_34 VLV_MIN_34 F.2
    DATAF tmpf918
    DATA8 flag918
    DIVF F.1 F.2 tmpf918
    CP_EQF 0.0 F.2 flag918
    SELECTF flag918 0.0 tmpf918 F.0

    ADDF F.0 240.0 VLV_HUE_34
  else899_4:
  endif899:
    JR_NEQF VLV_MAX_34 0.0 else920_1
    MOVEF_F 0.0 VLV_SAT_34
    JR endif920
  else920_1:
    DATAF tmpf921
    DATA8 flag921
    DIVF VLV_MIN_34 VLV_MAX_34 tmpf921
    CP_EQF 0.0 VLV_MAX_34 flag921
    SELECTF flag921 0.0 tmpf921 F.0

    SUBF 1.0 F.0 VLV_SAT_34
  else920_2:
  endif920:
    MOVEF_F VLV_MAX_34 VLV_VALUE_34
    ADDF VPR_RGB_VALUEBLANCO VPR_RGB_VALUENEGRO F.0
    DATAF tmpf924
    DATA8 flag924
    DIVF F.0 2.0 tmpf924
    CP_EQF 0.0 2.0 flag924
    SELECTF flag924 0.0 tmpf924 VLV_RGBGREY_34

    ADDF VLV_RRAW_34 VLV_GRAW_34 F.1
    ADDF F.1 VLV_BRAW_34 F.0
    JR_GTF F.0 3.0 else925_1
    MOVEF_F 0.0 VLV_COLOR_34
    JR endif925
  else925_1:
    JR_GTEQF VLV_SAT_34 0.3 else928_1
    JR_LTEQF VLV_VALUE_34 VLV_RGBGREY_34 else929_1
    MOVEF_F 6.0 VLV_COLOR_34
    JR endif929
  else929_1:
    MOVEF_F 1.0 VLV_COLOR_34
  else929_2:
  endif929:
    JR endif928
  else928_1:
    JR_LTF VLV_HUE_34 0.0 else930_1
    JR_GTEQF VLV_HUE_34 VLV_RED_34 else930_1
    MOVEF_F 5.0 VLV_COLOR_34
    JR endif930
  else930_1:
    JR_LTF VLV_HUE_34 VLV_RED_34 else930_2
    JR_GTEQF VLV_HUE_34 VLV_YELLOW_34 else930_2
    MOVEF_F 4.0 VLV_COLOR_34
    JR endif930
  else930_2:
    JR_LTF VLV_HUE_34 VLV_YELLOW_34 else930_3
    JR_GTEQF VLV_HUE_34 VLV_GREEN_34 else930_3
    MOVEF_F 3.0 VLV_COLOR_34
    JR endif930
  else930_3:
    JR_LTF VLV_HUE_34 VLV_GREEN_34 else930_4
    JR_GTEQF VLV_HUE_34 VLV_BLUE_34 else930_4
    MOVEF_F 2.0 VLV_COLOR_34
    JR endif930
  else930_4:
    MOVEF_F 5.0 VLV_COLOR_34
  else930_5:
  endif930:
  else928_2:
  endif928:
  else925_2:
  endif925:
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    STRINGS VALUE_FORMATTED VLV_RRAW_34 '%g' 99 S.1
    CALL TEXT.APPEND 'R: ' S.1 S.0
    CALL LCD.WRITE 33.0 20.0 S.0
    STRINGS VALUE_FORMATTED VLV_GRAW_34 '%g' 99 S.1
    CALL TEXT.APPEND 'G: ' S.1 S.0
    CALL LCD.WRITE 33.0 35.0 S.0
    STRINGS VALUE_FORMATTED VLV_BRAW_34 '%g' 99 S.1
    CALL TEXT.APPEND 'B: ' S.1 S.0
    CALL LCD.WRITE 33.0 50.0 S.0
    STRINGS VALUE_FORMATTED VLV_COLOR_34 '%g' 99 S.1
    CALL TEXT.APPEND 'color: ' S.1 S.0
    CALL LCD.WRITE 33.0 70.0 S.0
    STRINGS VALUE_FORMATTED VLV_VALUE_34 '%g' 99 S.1
    CALL TEXT.APPEND 'Value: ' S.1 S.0
    CALL LCD.WRITE 33.0 90.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
    DATA8 layer949
	DATA8 no949
	DATA8 mode8949
	
	MOVEF_8 VLV_SENS_34 no949
	SUB8 no949 1 no949
	DIV8 no949 4 layer949
	MATH MOD8 no949 4 no949

	MOVEF_8 VLV_SENS_MODE_34 mode8949
	
	INPUT_DEVICE READY_RAW layer949 no949 0 mode8949 0
RETSUB_M_RGB_DETECT_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RGB_DETECT_3:
SUB_M_RGB_GRITAR_1:
    JR_NEQF VLV_COLOR_35 0.0 else950_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Zero'
    JR endif950
  else950_1:
    JR_NEQF VLV_COLOR_35 1.0 else950_2
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Black'
    JR endif950
  else950_2:
    JR_NEQF VLV_COLOR_35 2.0 else950_3
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/BLUE'
    JR endif950
  else950_3:
    JR_NEQF VLV_COLOR_35 3.0 else950_4
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/GREEN'
    JR endif950
  else950_4:
    JR_NEQF VLV_COLOR_35 4.0 else950_5
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/YELLOW'
    JR endif950
  else950_5:
    JR_NEQF VLV_COLOR_35 5.0 else950_6
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/RED'
    JR endif950
  else950_6:
    JR_NEQF VLV_COLOR_35 6.0 else950_7
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/White'
    JR endif950
  else950_7:
    JR_NEQF VLV_COLOR_35 7.0 else950_8
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Brown'
  else950_8:
  endif950:
    SOUND_READY
RETSUB_M_RGB_GRITAR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RGB_GRITAR_1:
}
subcall ARRAYSTORE_FLOAT   // FFFV
{
	IN_F index
	IN_F value	
	IN_16 handle
	
	DATA32 index32
	DATA32 len	
	MOVEF_32 index index32

	ARRAY SIZE handle len
	JR_LT32 index32 0 negativeindex
	JR_LT32 index32 len arraybigenough

increasesize:	
	DATA32 doublelen
	ADD32 len len doublelen
	ARRAY RESIZE handle doublelen
writeloop:	
	ARRAY_WRITE handle len 0.0
	ADD32 len 1 len
	JR_LT32 len doublelen writeloop
	JR_GTEQ32 index32 len increasesize
	
arraybigenough:
	ARRAY_WRITE handle index32 value
negativeindex:
}
subcall LCD.CLEAR   // V
{
	UI_DRAW(TOPLINE,0)
	UI_DRAW(CLEAN)
	
	JR_NEQ32 0 STOPLCDUPDATE skipupdate
	UI_DRAW UPDATE
skipupdate:
}
subcall TEXT.APPEND     // SSS
{
	IN_S a 252
	IN_S b 252
    OUT_S result 252
	
	DATA16 len0
	DATA16 len1
	DATA16 sum

	STRINGS GET_SIZE a len0
	STRINGS GET_SIZE b len1
	ADD16 len0,len1,sum
	JR_GT16 sum,251,stringsizeexceeded

	STRINGS ADD a b result
	RETURN
	
stringsizeexceeded:	
    STRINGS DUPLICATE a result
}
subcall LCD.WRITE     // FFSV
{
	IN_F x
	IN_F y
	IN_S text 252
	
	DATA16 x_16
	DATA16 y_16
	MOVEF_16 x x_16
	MOVEF_16 y y_16
	
	UI_DRAW SELECT_FONT 1
	UI_DRAW TEXT 1 x_16 y_16 text

	JR_NEQ32 0 STOPLCDUPDATE skipupdate
	UI_DRAW UPDATE
skipupdate:
}
subcall SPEAKER.PLAY    // FSV 
{
	IN_F volume
	IN_S filename 252	

	// prepend a path to really reach the target file from the current working directory
	DATA8 vol 
	DATAS fullname 300
	MOVEF_8 volume vol

	STRINGS ADD '../../../..' filename fullname  // when using absolute path, go to file system top from the VM directory and then back down
	JR_EQ8 filename 47 absolutepath               // filename begins with a '/' - using absolute path
	STRINGS ADD '../prjs/' filename fullname      // by default use path relative to prjs folder (must go from the current VM directory to there)
absolutepath:
	
	SOUND PLAY vol fullname
}
subcall EV3.BATTERYVOLTAGE  // F
{
	OUT_F voltage
	UI_READ GET_VBATT voltage
}
subcall ARRAYGET_FLOAT     // FFF
{
	IN_F index
	OUT_F value
	IN_16 handle
	
	DATA32 index32
	DATA32 len
	MOVEF_32 index index32
	
	ARRAY SIZE handle len
	JR_LT32 index32 0 outofbounds
	JR_GTEQ32 index32 len outofbounds
	
	ARRAY_READ handle index32 value
	RETURN
outofbounds:
	MOVE8_F 0 value	
}
subcall MOTOR.SCHEDULE   // SFFFFSV    MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F step1
	IN_F step2
	IN_F step3
	IN_S brake 8
	
	DATA8 layer
	DATA8 nos
	DATA8 spd
	DATA32 stp1
	DATA32 stp2
	DATA32 stp3	
	DATA8 brk
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	JR_EQ8 nos 0 noport

	MOVEF_8 speed spd
	MATH ABS step1 step1
	MOVEF_32 step1 stp1
	MATH ABS step2 step2
	MOVEF_32 step2 stp2
	MATH ABS step3 step3
	MOVEF_32 step3 stp3	
	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	

	OUTPUT_STEP_SPEED layer nos spd stp1 stp2 stp3 brk
noport:
}
subcall MOTORDECODEPORTSDESCRIPTOR  //  V
{
	IN_S descriptor 8
	OUT_8 layer
	OUT_8 nos

	DATA8 i 
	DATA8 c

	MOVE8_8 0 layer
	MOVE8_8 0 nos	
	MOVE8_8 0 i
loop:
	READ8 descriptor i c
	JR_EQ8 c 0 decoding_end
	
	JR_LT8 c 65 no_uppercase_port
	JR_GT8 c 68 no_uppercase_port
	SUB8 c 65 c
	RL8  1 c c
	OR8  nos c nos
	JR loop_end
no_uppercase_port:
	JR_LT8 c 97 no_lowercase_port
	JR_GT8 c 100 no_lowercase_port
	SUB8 c 97 c
	RL8  1 c c
	OR8  nos c nos	
	JR loop_end
no_lowercase_port:
	JR_LT8 c 49 loop_end
	JR_GT8 c 52 loop_end
	SUB8 c 49 layer
loop_end:
	ADD8 1 i i
	JR loop	
	
decoding_end:
	RETURN
}
subcall EQ_STRING       // SSS
{
	IN_S  a 252
	IN_S  b 252
	OUT_S result 8
	
	DATA8 flag
	
	// check if completely equal
	STRINGS COMPARE a b flag
	JR_NEQ8 FLAG 0 isequal
	// second chance: when both values are "True" in any casing, this also counts as equal
	AND8888_32 a -538976289 a        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE a 'TRUE' flag	
	JR_EQ8 0,flag,isnotequal
	AND8888_32 b -538976289 b        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE b 'TRUE' flag	
	JR_EQ8 0,flag,isnotequal
isequal:
	STRINGS DUPLICATE 'True' result
	RETURN
isnotequal:
	STRINGS DUPLICATE 'False' result
	RETURN
}
subcall MOTOR.STOP       // SSV      MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_S brake 8

	DATA8 layer
	DATA8 nos	
	DATA8 brk
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	JR_EQ8 nos 0 noport

	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	
	
	OUTPUT_STOP layer nos brk
noport:
}
subcall MOTOR.GETCOUNT    // SF     MOTORDECODEPORTDESCRIPTOR
{
	IN_S port 8
	OUT_F result
	
	DATA8 layer
	DATA8 no
	DATA32 tacho
	
	CALL MOTORDECODEPORTDESCRIPTOR port layer no
	JR_LT8 no 0 noport
	
	OUTPUT_GET_COUNT layer no tacho
	MOVE32_F tacho result

	DATA8 nos
	RL8 1 no nos
	DATA8 inv
	READ8 MOTORISINVERTED layer inv 
	AND8 inv nos inv
	JR_EQ8 inv 0 noinvert
	SUBF 0.0 result result
noinvert:
	RETURN

noport:	
	MOVE8_F 0 result	
}
subcall MOTORDECODEPORTDESCRIPTOR  //  V
{
	IN_S descriptor 8
	OUT_8 layer
	OUT_8 no

	DATA8 i 
	DATA8 c

	MOVE8_8 0 layer
	MOVE8_8 -1 no
	MOVE8_8 0 i
loop:
	READ8 descriptor i c
	JR_EQ8 c 0 decoding_end
	
	JR_LT8 c 65 no_uppercase_port
	JR_GT8 c 68 no_uppercase_port
	SUB8 c 65 c
	MOVE8_8 c no
	JR loop_end
no_uppercase_port:
	JR_LT8 c 97 no_lowercase_port
	JR_GT8 c 100 no_lowercase_port
	SUB8 c 97 c
	MOVE8_8 c no
	JR loop_end
no_lowercase_port:
	JR_LT8 c 49 loop_end
	JR_GT8 c 52 loop_end
	SUB8 c 49 layer
loop_end:
	ADD8 1 i i
	JR loop	
	
decoding_end:
	RETURN
}
subcall MOTOR.SCHEDULESYNC   // SFFFSV    MOTORSCHEDULESTEERIMPL
{
	IN_S ports 8
	IN_F speed1
	IN_F speed2
	IN_F count
	IN_S brake 8
	
	JR_GTEQF speed1 -100.0 nottoosmall1
	MOVEF_F -100.0 speed1
nottoosmall1:
	JR_LTEQF speed1 100.0 nottoobig1
	MOVEF_F 100.0 speed1
nottoobig1:
	JR_GTEQF speed2 -100.0 nottoosmall2
	MOVEF_F -100.0 speed2
nottoosmall2:
	JR_LTEQF speed2 100.0 nottoobig2
	MOVEF_F 100.0 speed2
nottoobig2:

	DATAF speed  
	DATAF turn
	MOVE8_F 0 speed
	MOVE8_F 0 turn

	DATAF speed1abs
	DATAF speed2abs
	MATH ABS speed1 speed1abs
	MATH ABS speed2 speed2abs
	JR_LTF speed1abs speed2abs secondisfaster
	JR_EQF speed1abs 0.0 donecomputation
	 MOVEF_F speed1 speed
	 MULF 100.0 speed2 turn
	 DIVF turn speed1 turn
	 SUBF 100.0 turn turn
	JR donecomputation
secondisfaster:
	 MOVEF_F speed2 speed
	 MULF 100.0 speed1 turn
	 DIVF turn speed2 turn
	 SUBF turn 100.0 turn
donecomputation:
	
	CALL MOTORSCHEDULESTEERIMPL ports speed turn count brake
}
subcall MOTORSCHEDULESTEERIMPL   // SFFFSV    MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F turn
	IN_F count
	IN_S brake 8
	
	DATA8 layer
	DATA8 nos	
	DATA8 first
	DATA8 second
	DATA8 invfirst
	DATA8 invsecond
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	READ8 FIRSTOF2 nos first
	JR_EQ8 0 first not_two_ports
	XOR8 first nos second
	READ8 MOTORISINVERTED layer invfirst
	AND8 first invfirst invfirst
	READ8 MOTORISINVERTED layer invsecond
	AND8 second invsecond invsecond

	JR_LTF turn 0.0 second_is_master
first_is_master:
	JR_EQ8 invfirst 0 non_invert_first
	SUBF 0.0 speed speed
	JR_NEQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion
non_invert_first:
	JR_EQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion

second_is_master:
	JR_EQ8 invsecond 0 non_invert_second
	SUBF 0.0 speed speed
	JR_NEQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion
non_invert_second:
	JR_EQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion

done_inversion:
	DATA32 cnt
	DATA8 brk
	MATH ABS count count
	MOVEF_32 count cnt
	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	

	JR_LTEQ32 cnt 0 dontmove	

	DATA8 spd  
	DATA16 trn
	MOVEF_16 turn trn
	MOVEF_8 speed spd
	OUTPUT_STEP_SYNC layer nos spd trn cnt brk	
dontmove:	
not_two_ports:
}
subcall SENSOR.READPERCENT       // FF
{
	IN_F port
	OUT_F result

	DATA8 layer
	DATA8 no
	DATA8 percentage

	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	INPUT_READ layer no 0 -1 percentage
	JR_LT8 percentage 0 novalue
	
	MOVE8_F percentage result
	RETURN
novalue:	
	MOVE8_F 0 result
}
subcall MOTOR.STARTSYNC      // SFFV       MOTORSTARTSTEERIMPL
{
	IN_S ports 8
	IN_F speed1
	IN_F speed2

	JR_GTEQF speed1 -100.0 nottoosmall1
	MOVEF_F -100.0 speed1
nottoosmall1:
	JR_LTEQF speed1 100.0 nottoobig1
	MOVEF_F 100.0 speed1
nottoobig1:
	JR_GTEQF speed2 -100.0 nottoosmall2
	MOVEF_F -100.0 speed2
nottoosmall2:
	JR_LTEQF speed1 100.0 nottoobig2
	MOVEF_F 100.0 speed2
nottoobig2:

	DATAF speed  
	DATAF turn
	MOVE8_F 0 speed
	MOVE8_F 0 turn

	DATAF speed1abs
	DATAF speed2abs
	MATH ABS speed1 speed1abs
	MATH ABS speed2 speed2abs
	JR_LTF speed1abs speed2abs secondisfaster
	JR_EQF speed1abs 0.0 donecomputation
	 MOVEF_F speed1 speed
	 MULF 100.0 speed2 turn
	 DIVF turn speed1 turn
	 SUBF 100.0 turn turn
	JR donecomputation
secondisfaster:
	 MOVEF_F speed2 speed
	 MULF 100.0 speed1 turn
	 DIVF turn speed2 turn
	 SUBF turn 100.0 turn
donecomputation:

	CALL MOTORSTARTSTEERIMPL ports speed turn
}
subcall MOTORSTARTSTEERIMPL      // SFFV       MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F turn

	DATA8 layer
	DATA8 nos	
	DATA8 first
	DATA8 second
	DATA8 invfirst
	DATA8 invsecond

	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	READ8 FIRSTOF2 nos first
	JR_EQ8 0 first not_two_ports
	XOR8 first nos second
	READ8 MOTORISINVERTED layer invfirst
	AND8 first invfirst invfirst
	READ8 MOTORISINVERTED layer invsecond
	AND8 second invsecond invsecond

	JR_LTF turn 0.0 second_is_master
first_is_master:
	JR_EQ8 invfirst 0 non_invert_first
	SUBF 0.0 speed speed
	JR_NEQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion
non_invert_first:
	JR_EQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion

second_is_master:
	JR_EQ8 invsecond 0 non_invert_second
	SUBF 0.0 speed speed
	JR_NEQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion
non_invert_second:
	JR_EQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion

done_inversion:
	DATA8 spd  
	DATA16 trn
	MOVEF_16 turn trn
	MOVEF_8 speed spd
	OUTPUT_STEP_SYNC layer nos spd trn 0 0
not_two_ports:
}
subcall SENSOR.GETMODE		// FF
{
	IN_F port
	OUT_F result
	
	DATA8 layer
	DATA8 no
	DATA8 type
	DATA8 mode
	
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no
	
	INPUT_DEVICE GET_TYPEMODE layer no type mode
	MOVE8_F mode result
}
subcall SENSOR.READRAWVALUE            // FFF
{
	IN_F port
	IN_F index
	OUT_F result

	DATA8 layer
	DATA8 no
	DATA8 index8
		
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	MOVEF_8 index index8
	JR_LT8 index8 0 outofbounds
	JR_GT8 index8 7 outofbounds

	DATA32 rawvalue0
	DATA32 rawvalue1
	DATA32 rawvalue2
	DATA32 rawvalue3
	DATA32 rawvalue4
	DATA32 rawvalue5
	DATA32 rawvalue6
	DATA32 rawvalue7
	INPUT_READEXT layer no 0 -1 18 8 rawvalue0 rawvalue1 rawvalue2 rawvalue3 rawvalue4 rawvalue5 rawvalue6 rawvalue7
	
	DATA32 rawtmp
	READ32 rawvalue0 index8 rawtmp

	JR_LT32 rawtmp -1000000000 nomoredata
	MOVE32_F rawtmp result
	RETURN

nomoredata:
outofbounds:
	MOVEF_F 0.0 result
}
subcall SENSOR.READRAW            // FFA
{
	IN_F port
	IN_F values
	IN_16 resultarray
	
	DATA8 layer
	DATA8 no
	DATA32 values32
		
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	MOVEF_32 values values32

	JR_LTEQ32 values32 0 arrayempty
	ARRAY RESIZE resultarray values32

	DATA32 rawvalue0
	DATA32 rawvalue1
	DATA32 rawvalue2
	DATA32 rawvalue3
	DATA32 rawvalue4
	DATA32 rawvalue5
	DATA32 rawvalue6
	DATA32 rawvalue7
	INPUT_READEXT layer no 0 -1 18 8 rawvalue0 rawvalue1 rawvalue2 rawvalue3 rawvalue4 rawvalue5 rawvalue6 rawvalue7
	
	DATA32 i
	DATA32 rawtmp
	MOVE32_32 0 i
loop:
	DATA8 tmp8
	DATAF tmpf

	MOVEF_F 0.0 tmpf
	JR_GTEQ32 i 8 nomoredata

	MOVE32_8 i tmp8
	READ32 rawvalue0 tmp8 rawtmp
	JR_LT32 rawtmp -1000000000 nomoredata
	MOVE32_F rawtmp tmpf

nomoredata:	
	ARRAY_WRITE resultarray i tmpf

	ADD32 i 1 i
	JR_LT32 i values32 loop
	RETURN

arrayempty:
	ARRAY RESIZE resultarray 0
}
subcall ARRAYCREATE_FLOAT   // F
{
	OUT_16 handle
	
	ARRAY CREATEF 8 handle			// create with 8 elements
	ARRAY FILL handle 0.0
}
subcall GETANDINC32     // V
{
	IN_32 counterin
	IN_32 inc
	OUT_32 counterout
	OUT_32 prev

	MOVE32_32 counterin prev
	ADD32 counterin inc counterout
}
