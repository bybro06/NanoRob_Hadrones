DATA16 FD_NATIVECODECOMMAND
DATA16 FD_NATIVECODERESPONSE
DATA32 STOPLCDUPDATE
DATA32 NUMMAILBOXES
ARRAY8 MOTORISINVERTED 4     
ARRAY8 FIRSTOF2  16
ARRAY16 LOCKS 2           
DATA32 s1out1
DATA32 s1out2
DATA32 s1out3
DATA32 s2out1
DATA32 s2out2
DATA32 s2out3
DATA32 s3out1
DATA32 s3out2
DATA32 s3out3
DATA32 s4out1
DATA32 s4out2
DATA32 s4out3
DATA32 getTachoA
DATA32 tmpTachoA
DATA8 getSpeedA
DATA8 setSpeedA
DATA8 setPowerA
DATA32 getTachoB
DATA32 tmpTachoB
DATA8 getSpeedB
DATA8 setSpeedB
DATA8 setPowerB
DATA32 getTachoC
DATA32 tmpTachoC
DATA8 getSpeedC
DATA8 setSpeedC
DATA8 setPowerC
DATA32 getTachoD
DATA32 tmpTachoD
DATA8 getSpeedD
DATA8 setSpeedD
DATA8 setPowerD
DATA16 newArray1d
DATA32 newSize1d
DATA32 newIndex1d
DATA32 timeMC1
DATA32 timeMC2
DATA32 timeMC3
DATA32 timeMC4
DATA32 timeMC5
DATA32 timeMC6
DATA32 timeMC7
DATA32 timeMC8
DATA32 timeMC9
DATA32 timeMC1tmp
DATA32 timeMC2tmp
DATA32 timeMC3tmp
DATA32 timeMC4tmp
DATA32 timeMC5tmp
DATA32 timeMC6tmp
DATA32 timeMC7tmp
DATA32 timeMC8tmp
DATA32 timeMC9tmp
DATAF VPR_GIRO_G1
DATAF VPR_RGB_VALUENEGRO
DATAF VPR_RGB_VALUEBLANCO
DATAF VPR_RGB_RWHITE
DATAF VPR_RGB_GWHITE
DATAF VPR_RGB_BWHITE
DATAF VPR_RECTO_DIAMETRO
DATAF VPR_GIRO_DIAMETRO
DATAF VPR_SIGUELINEAS_DIAMETRO
DATAF VPR_SMART_DIAMETRO
DATAF VPR_SIGUELINEAS_NEGRO1
DATAF VPR_SIGUELINEAS_NEGRO3
DATAF VPR_SIGUELINEAS_NEGRO4
DATAF VPR_SIGUELINEAS_BLANCO1
DATAF VPR_SIGUELINEAS_BLANCO3
DATAF VPR_SIGUELINEAS_BLANCO4
DATAF VPR_SMART_NEGRO1
DATAF VPR_SMART_NEGRO3
DATAF VPR_SMART_NEGRO4
DATAF VPR_SMART_BLANCO1
DATAF VPR_SMART_BLANCO3
DATAF VPR_SMART_BLANCO4
DATAF VPR_RECTO_NEGRO
DATAF VPR_RECTO_BLANCO
DATAF VPR_GIRO_NEGRO
DATAF VPR_GIRO_BLANCO
DATAF VLV_VELOCIDAD_11
DATAF VLV_TIMER_11
DATAF VLV_VELOCIDAD_12
DATAF VLV_ENCODER_12
DATAF VLV_VELOCIDAD_14
DATAF VLV_DISTANCIA_14
DATAF VLV_VELOCIDAD_21
DATAF VLV_ENCODER_21
DATAF VLV_VELOCIDAD1_28
DATAF VLV_VELOCIDAD2_28
DATAF VLV_GRADOS_28
DATAF VLV_VELOCIDAD_15
DATAF VLV_DISTANCIA_15
DATAF VLV_VELOCIDAD_16
DATAF VLV_SENSOR_16
DATAF VLV_VELOCIDAD_22
DATAF VLV_VELOCIDAD_23
DATAF VLV_ENCODER_23
DATAF VLV_SENS_32
DATAF VLV_REPS_32
DATAF VLV_COLOR_32
DATAF VLV_VELOCIDAD_17
DATAF VLV_TIEMPO_17
DATAF VLV_VELOCIDAD1_29
DATAF VLV_VELOCIDAD2_29
DATAF VLV_SENS_29
DATAF VLV_VELOCIDAD_24
DATAF VLV_ENCODER_24
DATAF VLV_VELOCIDAD1_30
DATAF VLV_VELOCIDAD2_30
DATAF VLV_DISTANCIA_30
DATAF VLV_VELOCIDAD1_31
DATAF VLV_VELOCIDAD2_31
DATAF VLV_SENS_31
DATAF VLV_VELOCIDAD_25
DATAF VLV_READER_25
DATAF VLV_VELOCIDAD_18
DATAF VLV_SENSOR_18
DATAF VLV_VELOCIDAD_26
DATAF VLV_READER_26
ARRAY16 VLV_MARKING_8 2
DATAF VLV_VELOCIDAD_19
DATAF VLV_SENSOR_19
DATAF VLV_VELOCIDAD_20
DATAF VLV_SENSOR_20
DATAF VLV_VELOCIDAD_27
DATAF VLV_ENCODER_27
DATAF VLV_COLOR_33
DATAF VLV_NUMERO_2
DATAF VLV_VELOCIDAD_13
DATAF VLV_TIMER_13
ARRAY16 VLV_MARKING_6 2
DATAS VLV_CODIGO_6 252
DATAF VLV_GRADOS_7
DATAF VGV_MARKINGGRANDE
DATAS VLV_CODIGO_8 252
DATAF VGV_DIAMETRO
DATAF VGV_NEGRO1
DATAF VGV_NEGRO3
DATAF VGV_NEGRO4
DATAF VGV_BLANCO1
DATAF VGV_BLANCO3
DATAF VGV_BLANCO4
DATAF VGV_COLOR
ARRAY16 VGV_MARKING 2
DATAF VLV_VOLTAJE_1
DATAF VLV_AUX_6
DATAF VLV_I_6
DATAF VLV_SIGNO_7
DATAF VLV_ENCDIFF_12
DATAF VLV_SIGNO_12
DATAF VLV_SAFETYTIMER_12
DATAF VLV_SAFETYTIMER_14
DATAF VLV_CORRECCION_14
DATAF VLV_ENC_14
DATAF VLV_SAFETYTIMER_15
DATAF VLV_CORRECCION_15
DATAF VLV_ENC_15
DATAF VLV_CORRECCION_16
DATAF VLV_LECTURA_16
DATAF VLV_CORRECCION_17
DATAF VLV_CORRECCION_18
DATAF VLV_LECTURA_18
DATAF VLV_CORRECCION_19
DATAF VLV_LECTURA_19
DATAF VLV_CORRECCION_20
DATAF VLV_LECTURA_20
DATAF VLV_LECTURA1_21
DATAF VLV_LECTURA3_21
DATAF VLV_LECTURA4_21
DATAF VLV_KP_21
DATAF VLV_KD_21
DATAF VLV_ERROR_21
DATAF VLV_OLDERROR_21
DATAF VLV_U_21
DATAF VLV_SENTIDO_21
DATAF VLV_STARTC_21
DATAF VLV_ENCODERC_21
DATAF VLV_SAFETYTIMER_21
DATAF VLV_LECTURA1_22
DATAF VLV_LECTURA3_22
DATAF VLV_LECTURA4_22
DATAF VLV_KP_22
DATAF VLV_KD_22
DATAF VLV_ERROR_22
DATAF VLV_OLDERROR_22
DATAF VLV_U_22
DATAF VLV_SENTIDO_22
DATAF VLV_LECTURA1_23
DATAF VLV_LECTURA3_23
DATAF VLV_LECTURA4_23
DATAF VLV_KP_23
DATAF VLV_KD_23
DATAF VLV_ERROR_23
DATAF VLV_OLDERROR_23
DATAF VLV_U_23
DATAF VLV_SENTIDO_23
DATAF VLV_STARTC_23
DATAF VLV_ENCODERC_23
DATAF VLV_SAFETYTIMER_23
DATAF VLV_LECTURA1_24
DATAF VLV_LECTURA3_24
DATAF VLV_LECTURA4_24
DATAF VLV_KP_24
DATAF VLV_KD_24
DATAF VLV_ERROR_24
DATAF VLV_OLDERROR_24
DATAF VLV_U_24
DATAF VLV_SENTIDO_24
DATAF VLV_STARTC_24
DATAF VLV_ENCODERC_24
DATAF VLV_SAFETYTIMER_24
DATAF VLV_LECTURA1_25
DATAF VLV_LECTURA3_25
DATAF VLV_LECTURA4_25
DATAF VLV_KP_25
DATAF VLV_KD_25
DATAF VLV_ERROR_25
DATAF VLV_OLDERROR_25
DATAF VLV_U_25
DATAF VLV_SENTIDO_25
DATAF VLV_LECTURA_25
DATAF VLV_LECTURAIZQ_25
DATAF VLV_LECTURADCH_25
DATAF VLV_LECTURA1_26
DATAF VLV_LECTURA3_26
DATAF VLV_LECTURA4_26
DATAF VLV_KP_26
DATAF VLV_KD_26
DATAF VLV_ERROR_26
DATAF VLV_OLDERROR_26
DATAF VLV_U_26
DATAF VLV_SENTIDO_26
DATAF VLV_LECTURA_26
DATAF VLV_LECTURAIZQ_26
DATAF VLV_LECTURADCH_26
DATAF VLV_LECTURA1_27
DATAF VLV_LECTURA3_27
DATAF VLV_LECTURA4_27
DATAF VLV_KP_27
DATAF VLV_KD_27
DATAF VLV_ERROR_27
DATAF VLV_OLDERROR_27
DATAF VLV_U_27
DATAF VLV_SENTIDO_27
DATAF VLV_STARTC_27
DATAF VLV_ENCODERC_27
DATAF VLV_SAFETYTIMER_27
DATAF VLV_SIGNO_28
DATAF VLV_VMIN_28
DATAF VLV_VMAX_28
DATAF VLV_ENCODER_28
DATAF VLV_LECTURA_29
DATAF VLV_ENCODER_30
DATAF VLV_LECTURA_31
DATAF VLV_SENS_MODE_32
DATAF VLV_RED_32
DATAF VLV_YELLOW_32
DATAF VLV_GREEN_32
DATAF VLV_BLUE_32
DATAF VLV_HUE_32
DATAF VLV_SAT_32
DATAF VLV_VALUE_32
ARRAY16 VLV_RNORMARRAY_32 2
ARRAY16 VLV_GNORMARRAY_32 2
ARRAY16 VLV_BNORMARRAY_32 2
DATAF VLV_J_32
ARRAY16 VLV_RGB_32 2
DATAF VLV_RRAW_32
DATAF VLV_GRAW_32
DATAF VLV_BRAW_32
DATAF VLV_RNORM_32
DATAF VLV_GNORM_32
DATAF VLV_BNORM_32
DATAF VLV_MAX_32
DATAF VLV_MIN_32
DATAF VLV_RGBGREY_32
DATA32 RUNCOUNTER_F_GRITARCOLOR_0

vmthread MAIN
{
    MOVE32_32 0 STOPLCDUPDATE
    MOVE32_32 0 NUMMAILBOXES
    OUTPUT_RESET 0 15

	WRITE8 0 0 MOTORISINVERTED
	WRITE8 0 1 MOTORISINVERTED
	WRITE8 0 2 MOTORISINVERTED
	WRITE8 0 3 MOTORISINVERTED
	WRITE8 0 0 FIRSTOF2
	WRITE8 0 1 FIRSTOF2
	WRITE8 0 2 FIRSTOF2
	WRITE8 1 3 FIRSTOF2
	WRITE8 0 4 FIRSTOF2
	WRITE8 1 5 FIRSTOF2
	WRITE8 2 6 FIRSTOF2
	WRITE8 0 7 FIRSTOF2
	WRITE8 0 8 FIRSTOF2
	WRITE8 1 9 FIRSTOF2
	WRITE8 2 10 FIRSTOF2
	WRITE8 0 11 FIRSTOF2
	WRITE8 4 12 FIRSTOF2
	WRITE8 0 13 FIRSTOF2
	WRITE8 0 14 FIRSTOF2
	WRITE8 0 15 FIRSTOF2
    INPUT_DEVICE CLR_ALL -1
    ARRAY CREATE8 0 LOCKS
    MOVE32_32 0 s1out1
	MOVE32_32 0 s1out2
	MOVE32_32 0 s1out3
    MOVE32_32 0 s2out1
	MOVE32_32 0 s2out2
	MOVE32_32 0 s2out3
    MOVE32_32 0 s3out1
	MOVE32_32 0 s3out2
	MOVE32_32 0 s3out3
    MOVE32_32 0 s4out1
	MOVE32_32 0 s4out2
	MOVE32_32 0 s4out3
    MOVE32_32 0 timeMC1
	MOVE32_32 0 timeMC2
	MOVE32_32 0 timeMC3
	MOVE32_32 0 timeMC4
	MOVE32_32 0 timeMC5
	MOVE32_32 0 timeMC6
	MOVE32_32 0 timeMC7
	MOVE32_32 0 timeMC8
	MOVE32_32 0 timeMC9
    MOVEF_F 0.0 VPR_GIRO_G1
    MOVEF_F 0.0 VPR_RGB_VALUENEGRO
    MOVEF_F 0.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 0.0 VPR_RGB_RWHITE
    MOVEF_F 0.0 VPR_RGB_GWHITE
    MOVEF_F 0.0 VPR_RGB_BWHITE
    MOVEF_F 0.0 VPR_RECTO_DIAMETRO
    MOVEF_F 0.0 VPR_GIRO_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F 0.0 VPR_SMART_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F 0.0 VPR_SMART_NEGRO1
    MOVEF_F 0.0 VPR_SMART_NEGRO3
    MOVEF_F 0.0 VPR_SMART_NEGRO4
    MOVEF_F 0.0 VPR_SMART_BLANCO1
    MOVEF_F 0.0 VPR_SMART_BLANCO3
    MOVEF_F 0.0 VPR_SMART_BLANCO4
    MOVEF_F 0.0 VPR_RECTO_NEGRO
    MOVEF_F 0.0 VPR_RECTO_BLANCO
    MOVEF_F 0.0 VPR_GIRO_NEGRO
    MOVEF_F 0.0 VPR_GIRO_BLANCO
    MOVEF_F 0.0 VLV_VELOCIDAD_11
    MOVEF_F 0.0 VLV_TIMER_11
    MOVEF_F 0.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_ENCODER_12
    MOVEF_F 0.0 VLV_VELOCIDAD_14
    MOVEF_F 0.0 VLV_DISTANCIA_14
    MOVEF_F 0.0 VLV_VELOCIDAD_21
    MOVEF_F 0.0 VLV_ENCODER_21
    MOVEF_F 0.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 0.0 VLV_GRADOS_28
    MOVEF_F 0.0 VLV_VELOCIDAD_15
    MOVEF_F 0.0 VLV_DISTANCIA_15
    MOVEF_F 0.0 VLV_VELOCIDAD_16
    MOVEF_F 0.0 VLV_SENSOR_16
    MOVEF_F 0.0 VLV_VELOCIDAD_22
    MOVEF_F 0.0 VLV_VELOCIDAD_23
    MOVEF_F 0.0 VLV_ENCODER_23
    MOVEF_F 0.0 VLV_SENS_32
    MOVEF_F 0.0 VLV_REPS_32
    MOVEF_F 0.0 VLV_COLOR_32
    MOVEF_F 0.0 VLV_VELOCIDAD_17
    MOVEF_F 0.0 VLV_TIEMPO_17
    MOVEF_F 0.0 VLV_VELOCIDAD1_29
    MOVEF_F 0.0 VLV_VELOCIDAD2_29
    MOVEF_F 0.0 VLV_SENS_29
    MOVEF_F 0.0 VLV_VELOCIDAD_24
    MOVEF_F 0.0 VLV_ENCODER_24
    MOVEF_F 0.0 VLV_VELOCIDAD1_30
    MOVEF_F 0.0 VLV_VELOCIDAD2_30
    MOVEF_F 0.0 VLV_DISTANCIA_30
    MOVEF_F 0.0 VLV_VELOCIDAD1_31
    MOVEF_F 0.0 VLV_VELOCIDAD2_31
    MOVEF_F 0.0 VLV_SENS_31
    MOVEF_F 0.0 VLV_VELOCIDAD_25
    MOVEF_F 0.0 VLV_READER_25
    MOVEF_F 0.0 VLV_VELOCIDAD_18
    MOVEF_F 0.0 VLV_SENSOR_18
    MOVEF_F 0.0 VLV_VELOCIDAD_26
    MOVEF_F 0.0 VLV_READER_26
    CALL ARRAYCREATE_FLOAT VLV_MARKING_8
    MOVEF_F 0.0 VLV_VELOCIDAD_19
    MOVEF_F 0.0 VLV_SENSOR_19
    MOVEF_F 0.0 VLV_VELOCIDAD_20
    MOVEF_F 0.0 VLV_SENSOR_20
    MOVEF_F 0.0 VLV_VELOCIDAD_27
    MOVEF_F 0.0 VLV_ENCODER_27
    MOVEF_F 0.0 VLV_COLOR_33
    MOVEF_F 0.0 VLV_NUMERO_2
    MOVEF_F 0.0 VLV_VELOCIDAD_13
    MOVEF_F 0.0 VLV_TIMER_13
    CALL ARRAYCREATE_FLOAT VLV_MARKING_6
    STRINGS DUPLICATE '' VLV_CODIGO_6
    MOVEF_F 0.0 VLV_GRADOS_7
    MOVEF_F 0.0 VGV_MARKINGGRANDE
    STRINGS DUPLICATE '' VLV_CODIGO_8
    MOVEF_F 0.0 VGV_DIAMETRO
    MOVEF_F 0.0 VGV_NEGRO1
    MOVEF_F 0.0 VGV_NEGRO3
    MOVEF_F 0.0 VGV_NEGRO4
    MOVEF_F 0.0 VGV_BLANCO1
    MOVEF_F 0.0 VGV_BLANCO3
    MOVEF_F 0.0 VGV_BLANCO4
    MOVEF_F 0.0 VGV_COLOR
    CALL ARRAYCREATE_FLOAT VGV_MARKING
    MOVEF_F 0.0 VLV_VOLTAJE_1
    MOVEF_F 0.0 VLV_AUX_6
    MOVEF_F 0.0 VLV_I_6
    MOVEF_F 0.0 VLV_SIGNO_7
    MOVEF_F 0.0 VLV_ENCDIFF_12
    MOVEF_F 0.0 VLV_SIGNO_12
    MOVEF_F 0.0 VLV_SAFETYTIMER_12
    MOVEF_F 0.0 VLV_SAFETYTIMER_14
    MOVEF_F 0.0 VLV_CORRECCION_14
    MOVEF_F 0.0 VLV_ENC_14
    MOVEF_F 0.0 VLV_SAFETYTIMER_15
    MOVEF_F 0.0 VLV_CORRECCION_15
    MOVEF_F 0.0 VLV_ENC_15
    MOVEF_F 0.0 VLV_CORRECCION_16
    MOVEF_F 0.0 VLV_LECTURA_16
    MOVEF_F 0.0 VLV_CORRECCION_17
    MOVEF_F 0.0 VLV_CORRECCION_18
    MOVEF_F 0.0 VLV_LECTURA_18
    MOVEF_F 0.0 VLV_CORRECCION_19
    MOVEF_F 0.0 VLV_LECTURA_19
    MOVEF_F 0.0 VLV_CORRECCION_20
    MOVEF_F 0.0 VLV_LECTURA_20
    MOVEF_F 0.0 VLV_LECTURA1_21
    MOVEF_F 0.0 VLV_LECTURA3_21
    MOVEF_F 0.0 VLV_LECTURA4_21
    MOVEF_F 0.0 VLV_KP_21
    MOVEF_F 0.0 VLV_KD_21
    MOVEF_F 0.0 VLV_ERROR_21
    MOVEF_F 0.0 VLV_OLDERROR_21
    MOVEF_F 0.0 VLV_U_21
    MOVEF_F 0.0 VLV_SENTIDO_21
    MOVEF_F 0.0 VLV_STARTC_21
    MOVEF_F 0.0 VLV_ENCODERC_21
    MOVEF_F 0.0 VLV_SAFETYTIMER_21
    MOVEF_F 0.0 VLV_LECTURA1_22
    MOVEF_F 0.0 VLV_LECTURA3_22
    MOVEF_F 0.0 VLV_LECTURA4_22
    MOVEF_F 0.0 VLV_KP_22
    MOVEF_F 0.0 VLV_KD_22
    MOVEF_F 0.0 VLV_ERROR_22
    MOVEF_F 0.0 VLV_OLDERROR_22
    MOVEF_F 0.0 VLV_U_22
    MOVEF_F 0.0 VLV_SENTIDO_22
    MOVEF_F 0.0 VLV_LECTURA1_23
    MOVEF_F 0.0 VLV_LECTURA3_23
    MOVEF_F 0.0 VLV_LECTURA4_23
    MOVEF_F 0.0 VLV_KP_23
    MOVEF_F 0.0 VLV_KD_23
    MOVEF_F 0.0 VLV_ERROR_23
    MOVEF_F 0.0 VLV_OLDERROR_23
    MOVEF_F 0.0 VLV_U_23
    MOVEF_F 0.0 VLV_SENTIDO_23
    MOVEF_F 0.0 VLV_STARTC_23
    MOVEF_F 0.0 VLV_ENCODERC_23
    MOVEF_F 0.0 VLV_SAFETYTIMER_23
    MOVEF_F 0.0 VLV_LECTURA1_24
    MOVEF_F 0.0 VLV_LECTURA3_24
    MOVEF_F 0.0 VLV_LECTURA4_24
    MOVEF_F 0.0 VLV_KP_24
    MOVEF_F 0.0 VLV_KD_24
    MOVEF_F 0.0 VLV_ERROR_24
    MOVEF_F 0.0 VLV_OLDERROR_24
    MOVEF_F 0.0 VLV_U_24
    MOVEF_F 0.0 VLV_SENTIDO_24
    MOVEF_F 0.0 VLV_STARTC_24
    MOVEF_F 0.0 VLV_ENCODERC_24
    MOVEF_F 0.0 VLV_SAFETYTIMER_24
    MOVEF_F 0.0 VLV_LECTURA1_25
    MOVEF_F 0.0 VLV_LECTURA3_25
    MOVEF_F 0.0 VLV_LECTURA4_25
    MOVEF_F 0.0 VLV_KP_25
    MOVEF_F 0.0 VLV_KD_25
    MOVEF_F 0.0 VLV_ERROR_25
    MOVEF_F 0.0 VLV_OLDERROR_25
    MOVEF_F 0.0 VLV_U_25
    MOVEF_F 0.0 VLV_SENTIDO_25
    MOVEF_F 0.0 VLV_LECTURA_25
    MOVEF_F 0.0 VLV_LECTURAIZQ_25
    MOVEF_F 0.0 VLV_LECTURADCH_25
    MOVEF_F 0.0 VLV_LECTURA1_26
    MOVEF_F 0.0 VLV_LECTURA3_26
    MOVEF_F 0.0 VLV_LECTURA4_26
    MOVEF_F 0.0 VLV_KP_26
    MOVEF_F 0.0 VLV_KD_26
    MOVEF_F 0.0 VLV_ERROR_26
    MOVEF_F 0.0 VLV_OLDERROR_26
    MOVEF_F 0.0 VLV_U_26
    MOVEF_F 0.0 VLV_SENTIDO_26
    MOVEF_F 0.0 VLV_LECTURA_26
    MOVEF_F 0.0 VLV_LECTURAIZQ_26
    MOVEF_F 0.0 VLV_LECTURADCH_26
    MOVEF_F 0.0 VLV_LECTURA1_27
    MOVEF_F 0.0 VLV_LECTURA3_27
    MOVEF_F 0.0 VLV_LECTURA4_27
    MOVEF_F 0.0 VLV_KP_27
    MOVEF_F 0.0 VLV_KD_27
    MOVEF_F 0.0 VLV_ERROR_27
    MOVEF_F 0.0 VLV_OLDERROR_27
    MOVEF_F 0.0 VLV_U_27
    MOVEF_F 0.0 VLV_SENTIDO_27
    MOVEF_F 0.0 VLV_STARTC_27
    MOVEF_F 0.0 VLV_ENCODERC_27
    MOVEF_F 0.0 VLV_SAFETYTIMER_27
    MOVEF_F 0.0 VLV_SIGNO_28
    MOVEF_F 0.0 VLV_VMIN_28
    MOVEF_F 0.0 VLV_VMAX_28
    MOVEF_F 0.0 VLV_ENCODER_28
    MOVEF_F 0.0 VLV_LECTURA_29
    MOVEF_F 0.0 VLV_ENCODER_30
    MOVEF_F 0.0 VLV_LECTURA_31
    MOVEF_F 0.0 VLV_SENS_MODE_32
    MOVEF_F 0.0 VLV_RED_32
    MOVEF_F 0.0 VLV_YELLOW_32
    MOVEF_F 0.0 VLV_GREEN_32
    MOVEF_F 0.0 VLV_BLUE_32
    MOVEF_F 0.0 VLV_HUE_32
    MOVEF_F 0.0 VLV_SAT_32
    MOVEF_F 0.0 VLV_VALUE_32
    CALL ARRAYCREATE_FLOAT VLV_RNORMARRAY_32
    CALL ARRAYCREATE_FLOAT VLV_GNORMARRAY_32
    CALL ARRAYCREATE_FLOAT VLV_BNORMARRAY_32
    MOVEF_F 0.0 VLV_J_32
    CALL ARRAYCREATE_FLOAT VLV_RGB_32
    MOVEF_F 0.0 VLV_RRAW_32
    MOVEF_F 0.0 VLV_GRAW_32
    MOVEF_F 0.0 VLV_BRAW_32
    MOVEF_F 0.0 VLV_RNORM_32
    MOVEF_F 0.0 VLV_GNORM_32
    MOVEF_F 0.0 VLV_BNORM_32
    MOVEF_F 0.0 VLV_MAX_32
    MOVEF_F 0.0 VLV_MIN_32
    MOVEF_F 0.0 VLV_RGBGREY_32
    MOVE32_32 0 RUNCOUNTER_F_GRITARCOLOR_0
    ARRAY CREATE8 1 LOCKS
    CALL PROGRAM_MAIN -1
    PROGRAM_STOP -1
}
vmthread TF_GRITARCOLOR_0
{
    DATA32 tmp
  launch:
    CALL PROGRAM_F_GRITARCOLOR_0 0
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 -1 RUNCOUNTER_F_GRITARCOLOR_0 tmp
    JR_GT32 tmp 1 launch
}
subcall PROGRAM_MAIN
subcall PROGRAM_F_GRITARCOLOR_0
{
    IN_32 SUBPROGRAM
    DATA32 INDEX
    ARRAY8 STACKPOINTER 4
    DATAF F.0
    DATAF F.1
    DATAF F.2
    DATAF F.3
    DATAF F.4
    ARRAY32 RETURNSTACK2 128
    ARRAY32 RETURNSTACK 128
    DATAS S.0 252
    DATAS S.1 252
    MOVE8_8 0 STACKPOINTER
    JR_NEQ32 SUBPROGRAM 0 dispatch1033
    WRITE32 ENDSUB_F_GRITARCOLOR_0:ENDTHREAD STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARCOLOR_0
  dispatch1033:
    MOVEF_F 0.0 VPR_GIRO_G1
    MOVEF_F 0.0 VPR_RGB_VALUENEGRO
    MOVEF_F 0.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 0.0 VPR_RGB_RWHITE
    MOVEF_F 0.0 VPR_RGB_GWHITE
    MOVEF_F 0.0 VPR_RGB_BWHITE
    MOVEF_F 0.0 VPR_RECTO_DIAMETRO
    MOVEF_F 0.0 VPR_GIRO_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F 0.0 VPR_SMART_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F 0.0 VPR_SMART_NEGRO1
    MOVEF_F 0.0 VPR_SMART_NEGRO3
    MOVEF_F 0.0 VPR_SMART_NEGRO4
    MOVEF_F 0.0 VPR_SMART_BLANCO1
    MOVEF_F 0.0 VPR_SMART_BLANCO3
    MOVEF_F 0.0 VPR_SMART_BLANCO4
    MOVEF_F 0.0 VPR_RECTO_NEGRO
    MOVEF_F 0.0 VPR_RECTO_BLANCO
    MOVEF_F 0.0 VPR_GIRO_NEGRO
    MOVEF_F 0.0 VPR_GIRO_BLANCO
    MOVEF_F 0.0 VLV_VELOCIDAD_11
    MOVEF_F 0.0 VLV_TIMER_11
    MOVEF_F 0.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_ENCODER_12
    MOVEF_F 0.0 VLV_VELOCIDAD_14
    MOVEF_F 0.0 VLV_DISTANCIA_14
    MOVEF_F 0.0 VLV_VELOCIDAD_21
    MOVEF_F 0.0 VLV_ENCODER_21
    MOVEF_F 0.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 0.0 VLV_GRADOS_28
    MOVEF_F 0.0 VLV_VELOCIDAD_15
    MOVEF_F 0.0 VLV_DISTANCIA_15
    MOVEF_F 0.0 VLV_VELOCIDAD_16
    MOVEF_F 0.0 VLV_SENSOR_16
    MOVEF_F 0.0 VLV_VELOCIDAD_22
    MOVEF_F 0.0 VLV_VELOCIDAD_23
    MOVEF_F 0.0 VLV_ENCODER_23
    MOVEF_F 0.0 VLV_SENS_32
    MOVEF_F 0.0 VLV_REPS_32
    MOVEF_F 0.0 VLV_COLOR_32
    MOVEF_F 0.0 VLV_VELOCIDAD_17
    MOVEF_F 0.0 VLV_TIEMPO_17
    MOVEF_F 0.0 VLV_VELOCIDAD1_29
    MOVEF_F 0.0 VLV_VELOCIDAD2_29
    MOVEF_F 0.0 VLV_SENS_29
    MOVEF_F 0.0 VLV_VELOCIDAD_24
    MOVEF_F 0.0 VLV_ENCODER_24
    MOVEF_F 0.0 VLV_VELOCIDAD1_30
    MOVEF_F 0.0 VLV_VELOCIDAD2_30
    MOVEF_F 0.0 VLV_DISTANCIA_30
    MOVEF_F 0.0 VLV_VELOCIDAD1_31
    MOVEF_F 0.0 VLV_VELOCIDAD2_31
    MOVEF_F 0.0 VLV_SENS_31
    MOVEF_F 0.0 VLV_VELOCIDAD_25
    MOVEF_F 0.0 VLV_READER_25
    MOVEF_F 0.0 VLV_VELOCIDAD_18
    MOVEF_F 0.0 VLV_SENSOR_18
    MOVEF_F 0.0 VLV_VELOCIDAD_26
    MOVEF_F 0.0 VLV_READER_26
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_MARKING_8
    MOVEF_F 0.0 VLV_VELOCIDAD_19
    MOVEF_F 0.0 VLV_SENSOR_19
    MOVEF_F 0.0 VLV_VELOCIDAD_20
    MOVEF_F 0.0 VLV_SENSOR_20
    MOVEF_F 0.0 VLV_VELOCIDAD_27
    MOVEF_F 0.0 VLV_ENCODER_27
    MOVEF_F 0.0 VLV_COLOR_33
    MOVEF_F 0.0 VLV_NUMERO_2
    MOVEF_F 0.0 VLV_VELOCIDAD_13
    MOVEF_F 0.0 VLV_TIMER_13
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_MARKING_6
    STRINGS DUPLICATE '' VLV_CODIGO_6
    MOVEF_F 0.0 VLV_GRADOS_7
    MOVEF_F 0.0 VGV_MARKINGGRANDE
    STRINGS DUPLICATE '' VLV_CODIGO_8
    MOVEF_F 0.0 VGV_DIAMETRO
    MOVEF_F 0.0 VGV_NEGRO1
    MOVEF_F 0.0 VGV_NEGRO3
    MOVEF_F 0.0 VGV_NEGRO4
    MOVEF_F 0.0 VGV_BLANCO1
    MOVEF_F 0.0 VGV_BLANCO3
    MOVEF_F 0.0 VGV_BLANCO4
    MOVEF_F 0.0 VGV_COLOR
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VGV_MARKING
    WRITE32 ENDSUB_F_SETUP_0:CALLSUB3 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SETUP_0
CALLSUB3:
    WRITE32 ENDSUB_F_MAIN_0:CALLSUB4 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_MAIN_0
CALLSUB4:
ENDTHREAD:
    RETURN
SUB_F_SETUP_0:
    DATA8 layer5
	DATA8 no5
	DATA8 mode85
	
	MOVEF_8 1.0 no5
	SUB8 no5 1 no5
	DIV8 no5 4 layer5
	MATH MOD8 no5 4 no5

	MOVEF_8 0.0 mode85
	
	INPUT_DEVICE READY_RAW layer5 no5 0 mode85 0
    DATA8 layer6
	DATA8 no6
	DATA8 mode86
	
	MOVEF_8 2.0 no6
	SUB8 no6 1 no6
	DIV8 no6 4 layer6
	MATH MOD8 no6 4 no6

	MOVEF_8 4.0 mode86
	
	INPUT_DEVICE READY_RAW layer6 no6 0 mode86 0
    DATA8 layer7
	DATA8 no7
	DATA8 mode87
	
	MOVEF_8 3.0 no7
	SUB8 no7 1 no7
	DIV8 no7 4 layer7
	MATH MOD8 no7 4 no7

	MOVEF_8 0.0 mode87
	
	INPUT_DEVICE READY_RAW layer7 no7 0 mode87 0
    DATA8 layer8
	DATA8 no8
	DATA8 mode88
	
	MOVEF_8 4.0 no8
	SUB8 no8 1 no8
	DIV8 no8 4 layer8
	MATH MOD8 no8 4 no8

	MOVEF_8 0.0 mode88
	
	INPUT_DEVICE READY_RAW layer8 no8 0 mode88 0
    MOVEF_F 6.24 VGV_DIAMETRO
    MOVEF_F 2.68055555555556 VPR_GIRO_G1
    MOVEF_F 10.0 VGV_NEGRO1
    MOVEF_F 9.0 VGV_NEGRO3
    MOVEF_F 8.0 VGV_NEGRO4
    MOVEF_F 65.0 VGV_BLANCO1
    MOVEF_F 59.0 VGV_BLANCO3
    MOVEF_F 55.0 VGV_BLANCO4
    MOVEF_F 4.0 VPR_RGB_VALUENEGRO
    MOVEF_F 32.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 57.0 VPR_RGB_RWHITE
    MOVEF_F 71.0 VPR_RGB_GWHITE
    MOVEF_F 73.0 VPR_RGB_BWHITE
    MOVEF_F VGV_DIAMETRO VPR_RECTO_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_GIRO_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_SMART_DIAMETRO
    MOVEF_F VGV_NEGRO1 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F VGV_NEGRO3 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F VGV_NEGRO4 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F VGV_BLANCO1 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F VGV_BLANCO3 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F VGV_BLANCO4 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F VGV_NEGRO1 VPR_SMART_NEGRO1
    MOVEF_F VGV_NEGRO3 VPR_SMART_NEGRO3
    MOVEF_F VGV_NEGRO4 VPR_SMART_NEGRO4
    MOVEF_F VGV_BLANCO1 VPR_SMART_BLANCO1
    MOVEF_F VGV_BLANCO3 VPR_SMART_BLANCO3
    MOVEF_F VGV_BLANCO4 VPR_SMART_BLANCO4
    ADDF VGV_NEGRO1 VGV_NEGRO3 F.1
    ADDF F.1 VGV_NEGRO4 F.0
    DATAF tmpf11
    DATA8 flag11
    DIVF F.0 3.0 tmpf11
    CP_EQF 0.0 3.0 flag11
    SELECTF flag11 0.0 tmpf11 VPR_RECTO_NEGRO

    ADDF VGV_BLANCO1 VGV_BLANCO3 F.1
    ADDF F.1 VGV_BLANCO4 F.0
    DATAF tmpf14
    DATA8 flag14
    DIVF F.0 3.0 tmpf14
    CP_EQF 0.0 3.0 flag14
    SELECTF flag14 0.0 tmpf14 VPR_RECTO_BLANCO

    ADDF VGV_NEGRO1 VGV_NEGRO3 F.1
    ADDF F.1 VGV_NEGRO4 F.0
    DATAF tmpf17
    DATA8 flag17
    DIVF F.0 3.0 tmpf17
    CP_EQF 0.0 3.0 flag17
    SELECTF flag17 0.0 tmpf17 VPR_GIRO_NEGRO

    ADDF VGV_BLANCO1 VGV_BLANCO3 F.1
    ADDF F.1 VGV_BLANCO4 F.0
    DATAF tmpf20
    DATA8 flag20
    DIVF F.0 3.0 tmpf20
    CP_EQF 0.0 3.0 flag20
    SELECTF flag20 0.0 tmpf20 VPR_GIRO_BLANCO

RETSUB_F_SETUP_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SETUP_0:
SUB_F_STARTARM_0:
    MOVEF_F 100.0 VLV_VELOCIDAD_11
    MOVEF_F 1000.0 VLV_TIMER_11
    WRITE32 ENDSUB_M_BRAZO_ATIMER_2:CALLSUB21 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_ATIMER_2
CALLSUB21:
    OUTPUT_CLR_COUNT 0 1
    DATA32 milliseconds23
	MOVEF_32 100.0 milliseconds23
	DATA32 timer23
	TIMER_WAIT milliseconds23 timer23
	TIMER_READY timer23
    MOVEF_F 35.0 VLV_VELOCIDAD_12
    MOVEF_F -200.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB24 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB24:
    OUTPUT_CLR_COUNT 0 1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Connect'
    SOUND_READY
RETSUB_F_STARTARM_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_STARTARM_0:
SUB_F_MAIN_0:
    WRITE32 ENDSUB_F_GRITARVOLTAJE_0:CALLSUB28 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARVOLTAJE_0
CALLSUB28:
    WRITE32 ENDSUB_F_STARTARM_0:CALLSUB29 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_STARTARM_0
CALLSUB29:
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/One'
    WRITE32 ENDSUB_F_S_0:CALLSUB31 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_S_0
CALLSUB31:
    DATA32 milliseconds32
	MOVEF_32 150.0 milliseconds32
	DATA32 timer32
	TIMER_WAIT milliseconds32 timer32
	TIMER_READY timer32
    MOVEF_F 35.0 VLV_VELOCIDAD_12
    MOVEF_F -300.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB33 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB33:
    MOVEF_F 50.0 VLV_VELOCIDAD_14
    MOVEF_F 5.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB34 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB34:
    MOVEF_F 50.0 VLV_VELOCIDAD_21
    MOVEF_F 23.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB35 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB35:
    MOVEF_F 10.0 VLV_VELOCIDAD1_28
    MOVEF_F 45.0 VLV_VELOCIDAD2_28
    MOVEF_F 74.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB36 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB36:
    MOVEF_F 22.5 VLV_VELOCIDAD1_28
    MOVEF_F 5.0 VLV_VELOCIDAD2_28
    MOVEF_F 82.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB37 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB37:
    MOVEF_F 50.0 VLV_VELOCIDAD_15
    MOVEF_F 44.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB38 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB38:
    MOVEF_F 50.0 VLV_VELOCIDAD_16
    MOVEF_F 4.0 VLV_SENSOR_16
    WRITE32 ENDSUB_M_RECTO_NEGRO1_2:CALLSUB39 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1_2
CALLSUB39:
    MOVEF_F 50.0 VLV_VELOCIDAD1_28
    MOVEF_F -20.0 VLV_VELOCIDAD2_28
    MOVEF_F 90.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB40 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB40:
    MOVEF_F 40.0 VLV_VELOCIDAD_22
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE14_1:CALLSUB41 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE14_1
CALLSUB41:
    MOVEF_F 70.0 VLV_VELOCIDAD1_28
    MOVEF_F -62.0 VLV_VELOCIDAD2_28
    MOVEF_F 185.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB42 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB42:
    MOVEF_F 30.0 VLV_VELOCIDAD_23
    MOVEF_F 40.0 VLV_ENCODER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB43 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB43:
    MOVEF_F 30.0 VLV_VELOCIDAD_15
    MOVEF_F 9.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB44 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB44:
    MOVEF_F -30.0 VLV_VELOCIDAD1_28
    MOVEF_F 30.0 VLV_VELOCIDAD2_28
    MOVEF_F 90.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB45 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB45:
    MOVEF_F 20.0 VLV_VELOCIDAD_15
    MOVEF_F 13.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB46 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB46:
    MOVEF_F 20.0 VLV_VELOCIDAD1_28
    MOVEF_F -20.0 VLV_VELOCIDAD2_28
    MOVEF_F 90.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB47 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB47:
    DATA32 milliseconds48
	MOVEF_32 100.0 milliseconds48
	DATA32 timer48
	TIMER_WAIT milliseconds48 timer48
	TIMER_READY timer48
    MOVEF_F -40.0 VLV_VELOCIDAD_15
    MOVEF_F 2.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB49 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB49:
    MOVEF_F 2.0 VLV_SENS_32
    MOVEF_F 5.0 VLV_REPS_32
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB50 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB50:
    MOVEF_F VLV_COLOR_32 VGV_MARKINGGRANDE
    MOVEF_F VGV_MARKINGGRANDE VGV_COLOR
    DATA32 tmp51
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 1  RUNCOUNTER_F_GRITARCOLOR_0 tmp51
    JR_NEQ32 0 tmp51 alreadylaunched51
    OBJECT_START TF_GRITARCOLOR_0
  alreadylaunched51:
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VGV_MARKING
    MOVEF_F 40.0 VLV_VELOCIDAD1_28
    MOVEF_F 9.0 VLV_VELOCIDAD2_28
    MOVEF_F 45.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB53 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB53:
    MOVEF_F 9.0 VLV_VELOCIDAD1_28
    MOVEF_F 40.0 VLV_VELOCIDAD2_28
    MOVEF_F 40.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB54 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB54:
    MOVEF_F 20.0 VLV_VELOCIDAD_15
    MOVEF_F 12.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB55 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB55:
    MOVEF_F 2.0 VLV_SENS_32
    MOVEF_F 5.0 VLV_REPS_32
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB56 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB56:
    CALL ARRAYSTORE_FLOAT 1.0 VLV_COLOR_32 VGV_MARKING
    CALL ARRAYGET_FLOAT 1.0 VGV_COLOR VGV_MARKING
    DATA32 tmp59
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 1  RUNCOUNTER_F_GRITARCOLOR_0 tmp59
    JR_NEQ32 0 tmp59 alreadylaunched59
    OBJECT_START TF_GRITARCOLOR_0
  alreadylaunched59:
    MOVEF_F -30.0 VLV_VELOCIDAD_15
    MOVEF_F 5.8 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB60 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB60:
    MOVEF_F 30.0 VLV_VELOCIDAD1_28
    MOVEF_F -30.0 VLV_VELOCIDAD2_28
    MOVEF_F 102.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB61 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB61:
    MOVEF_F 30.0 VLV_VELOCIDAD_15
    MOVEF_F 8.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB62 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB62:
    MOVEF_F 30.0 VLV_VELOCIDAD1_28
    MOVEF_F -30.0 VLV_VELOCIDAD2_28
    MOVEF_F 100.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB63 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB63:
    MOVEF_F -20.0 VLV_VELOCIDAD_17
    MOVEF_F 500.0 VLV_TIEMPO_17
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB64 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB64:
    MOVEF_F 2.0 VLV_SENS_32
    MOVEF_F 5.0 VLV_REPS_32
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB65 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB65:
    CALL ARRAYSTORE_FLOAT 2.0 VLV_COLOR_32 VGV_MARKING
    CALL ARRAYGET_FLOAT 2.0 VGV_COLOR VGV_MARKING
    DATA32 tmp68
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 1  RUNCOUNTER_F_GRITARCOLOR_0 tmp68
    JR_NEQ32 0 tmp68 alreadylaunched68
    OBJECT_START TF_GRITARCOLOR_0
  alreadylaunched68:
    MOVEF_F 20.0 VLV_VELOCIDAD_15
    MOVEF_F 8.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB69 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB69:
    MOVEF_F 2.0 VLV_SENS_32
    MOVEF_F 5.0 VLV_REPS_32
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB70 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB70:
    CALL ARRAYSTORE_FLOAT 3.0 VLV_COLOR_32 VGV_MARKING
    CALL ARRAYGET_FLOAT 3.0 VGV_COLOR VGV_MARKING
    DATA32 tmp73
    CALL GETANDINC32 RUNCOUNTER_F_GRITARCOLOR_0 1  RUNCOUNTER_F_GRITARCOLOR_0 tmp73
    JR_NEQ32 0 tmp73 alreadylaunched73
    OBJECT_START TF_GRITARCOLOR_0
  alreadylaunched73:
    CALL ARRAYGET_FLOAT 1.0 F.3 VGV_MARKING
    CALL ARRAYGET_FLOAT 2.0 F.4 VGV_MARKING
    ADDF F.3 F.4 F.2
    CALL ARRAYGET_FLOAT 3.0 F.3 VGV_MARKING
    ADDF F.2 F.3 F.1
    SUBF 14.0 F.1 F.0
    CALL ARRAYSTORE_FLOAT 0.0 F.0 VGV_MARKING
    MOVEF_F 50.0 VLV_VELOCIDAD1_29
    MOVEF_F 42.0 VLV_VELOCIDAD2_29
    MOVEF_F 1.0 VLV_SENS_29
    WRITE32 ENDSUB_M_GIRO_NEGRO1F_3:CALLSUB81 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_NEGRO1F_3
CALLSUB81:
    MOVEF_F 5.0 VLV_VELOCIDAD1_29
    MOVEF_F 25.0 VLV_VELOCIDAD2_29
    MOVEF_F 4.0 VLV_SENS_29
    WRITE32 ENDSUB_M_GIRO_NEGRO1F_3:CALLSUB82 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_NEGRO1F_3
CALLSUB82:
    MOVEF_F 20.0 VLV_VELOCIDAD_24
    MOVEF_F 7.0 VLV_ENCODER_24
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB83 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB83:
    MOVEF_F 60.0 VLV_VELOCIDAD_22
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE14_1:CALLSUB84 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE14_1
CALLSUB84:
    MOVEF_F -35.0 VLV_VELOCIDAD1_28
    MOVEF_F 30.0 VLV_VELOCIDAD2_28
    MOVEF_F 86.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB85 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB85:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
    DATA32 milliseconds87
	MOVEF_32 100.0 milliseconds87
	DATA32 timer87
	TIMER_WAIT milliseconds87 timer87
	TIMER_READY timer87
    MOVEF_F 30.0 VLV_VELOCIDAD_21
    MOVEF_F 22.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB88 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB88:
    MOVEF_F 60.0 VLV_VELOCIDAD1_28
    MOVEF_F -40.0 VLV_VELOCIDAD2_28
    MOVEF_F 89.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB89 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB89:
    MOVEF_F -50.0 VLV_VELOCIDAD_14
    MOVEF_F 35.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB90 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB90:
    MOVEF_F -30.0 VLV_VELOCIDAD_15
    MOVEF_F 5.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB91 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB91:
    MOVEF_F 20.0 VLV_VELOCIDAD_12
    MOVEF_F 40.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB92 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB92:
    DATA32 milliseconds93
	MOVEF_32 200.0 milliseconds93
	DATA32 timer93
	TIMER_WAIT milliseconds93 timer93
	TIMER_READY timer93
    MOVEF_F 30.0 VLV_VELOCIDAD_14
    MOVEF_F 17.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB94 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB94:
    MOVEF_F 10.0 VLV_VELOCIDAD_17
    MOVEF_F 400.0 VLV_TIEMPO_17
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB95 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB95:
    MOVEF_F -20.0 VLV_VELOCIDAD_15
    MOVEF_F 3.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB96 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB96:
    MOVEF_F 20.0 VLV_VELOCIDAD_12
    MOVEF_F -310.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB97 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB97:
    MOVEF_F 30.0 VLV_VELOCIDAD1_30
    MOVEF_F 20.0 VLV_VELOCIDAD2_30
    MOVEF_F 13.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB98 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB98:
    MOVEF_F 20.0 VLV_VELOCIDAD1_30
    MOVEF_F 30.0 VLV_VELOCIDAD2_30
    MOVEF_F 13.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB99 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB99:
    MOVEF_F 20.0 VLV_VELOCIDAD_16
    MOVEF_F 1.0 VLV_SENSOR_16
    WRITE32 ENDSUB_M_RECTO_NEGRO1_2:CALLSUB100 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1_2
CALLSUB100:
    MOVEF_F -8.0 VLV_VELOCIDAD1_28
    MOVEF_F 20.0 VLV_VELOCIDAD2_28
    MOVEF_F 85.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB101 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB101:
    MOVEF_F -20.0 VLV_VELOCIDAD1_31
    MOVEF_F 20.0 VLV_VELOCIDAD2_31
    MOVEF_F 4.0 VLV_SENS_31
    WRITE32 ENDSUB_M_GIRO_NEGRO1_3:CALLSUB102 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_NEGRO1_3
CALLSUB102:
    MOVEF_F 20.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 10.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB103 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB103:
    MOVEF_F 15.0 VLV_VELOCIDAD_21
    MOVEF_F 10.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB104 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB104:
    MOVEF_F 15.0 VLV_VELOCIDAD_25
    MOVEF_F 3.0 VLV_READER_25
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB105 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB105:
    DATA32 milliseconds106
	MOVEF_32 400.0 milliseconds106
	DATA32 timer106
	TIMER_WAIT milliseconds106 timer106
	TIMER_READY timer106
    MOVEF_F 30.0 VLV_VELOCIDAD1_30
    MOVEF_F 26.0 VLV_VELOCIDAD2_30
    MOVEF_F 12.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB107 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB107:
    MOVEF_F 27.0 VLV_VELOCIDAD1_30
    MOVEF_F 30.0 VLV_VELOCIDAD2_30
    MOVEF_F 11.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB108 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB108:
    MOVEF_F 12.0 VLV_VELOCIDAD_15
    MOVEF_F 5.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB109 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB109:
    MOVEF_F -10.0 VLV_VELOCIDAD_15
    MOVEF_F 6.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB110 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB110:
    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB111 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB111:
    DATA32 milliseconds112
	MOVEF_32 400.0 milliseconds112
	DATA32 timer112
	TIMER_WAIT milliseconds112 timer112
	TIMER_READY timer112
    MOVEF_F -25.0 VLV_VELOCIDAD_15
    MOVEF_F 17.5 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB113 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB113:
    MOVEF_F -20.0 VLV_VELOCIDAD1_28
    MOVEF_F 20.0 VLV_VELOCIDAD2_28
    MOVEF_F 95.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB114 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB114:
    MOVEF_F 35.0 VLV_VELOCIDAD_21
    MOVEF_F 30.0 VLV_ENCODER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB115 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB115:
    MOVEF_F 40.0 VLV_VELOCIDAD_15
    MOVEF_F 13.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB116 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB116:
    MOVEF_F 30.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 144.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB117 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB117:
    MOVEF_F 20.0 VLV_VELOCIDAD_15
    MOVEF_F 2.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB118 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB118:
    MOVEF_F 35.0 VLV_VELOCIDAD_12
    MOVEF_F -330.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB119 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB119:
    MOVEF_F -25.0 VLV_VELOCIDAD_15
    MOVEF_F 6.5 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB120 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB120:
    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB121 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB121:
    DATA32 milliseconds122
	MOVEF_32 400.0 milliseconds122
	DATA32 timer122
	TIMER_WAIT milliseconds122 timer122
	TIMER_READY timer122
    MOVEF_F -40.0 VLV_VELOCIDAD1_28
    MOVEF_F 20.0 VLV_VELOCIDAD2_28
    MOVEF_F 80.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB123 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB123:
    MOVEF_F 40.0 VLV_VELOCIDAD_15
    MOVEF_F 15.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB124 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB124:
    MOVEF_F 40.0 VLV_VELOCIDAD_12
    MOVEF_F -330.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB125 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB125:
    MOVEF_F 20.0 VLV_VELOCIDAD1_28
    MOVEF_F -20.0 VLV_VELOCIDAD2_28
    MOVEF_F 160.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB126 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB126:
    MOVEF_F 63.0 VLV_VELOCIDAD1_30
    MOVEF_F 70.0 VLV_VELOCIDAD2_30
    MOVEF_F 65.5 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB127 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB127:
    MOVEF_F 18.0 VLV_VELOCIDAD1_30
    MOVEF_F 21.0 VLV_VELOCIDAD2_30
    MOVEF_F 3.5 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB128 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB128:
    MOVEF_F 40.0 VLV_VELOCIDAD_18
    MOVEF_F 4.0 VLV_SENSOR_18
    WRITE32 ENDSUB_M_RECTO_BLANCO1_2:CALLSUB129 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_BLANCO1_2
CALLSUB129:
    MOVEF_F 30.0 VLV_VELOCIDAD1_28
    MOVEF_F -30.0 VLV_VELOCIDAD2_28
    MOVEF_F 85.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB130 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB130:
    MOVEF_F 30.0 VLV_VELOCIDAD_23
    MOVEF_F 10.0 VLV_ENCODER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB131 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB131:
    MOVEF_F 40.0 VLV_VELOCIDAD_26
    MOVEF_F 4.0 VLV_READER_26
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:CALLSUB132 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2
CALLSUB132:
    MOVEF_F 80.0 VLV_VELOCIDAD_23
    MOVEF_F 80.0 VLV_ENCODER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB133 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB133:
    MOVEF_F 30.0 VLV_VELOCIDAD_23
    MOVEF_F 15.0 VLV_ENCODER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB134 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB134:
    MOVEF_F 20.0 VLV_VELOCIDAD_15
    MOVEF_F 20.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB135 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB135:
    MOVEF_F 15.0 VLV_VELOCIDAD1_28
    MOVEF_F -15.0 VLV_VELOCIDAD2_28
    MOVEF_F 92.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB136 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB136:
    MOVEF_F 20.0 VLV_VELOCIDAD_15
    MOVEF_F 8.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB137 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB137:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F -740.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB138 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB138:
    JR_NEQF VGV_MARKINGGRANDE 5.0 else139_1
    CALL MOTOR.SCHEDULE 'D' -60.0 0.0 90.0 0.0 'true' 

	DATA8 layer140
	DATA8 nos140
	DATA8 busy140
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer140 nos140
	JR_EQ8 0 nos140 motornotbusy140
  motorwaiting140:
	OUTPUT_TEST layer140 nos140 busy140
	JR_EQ8 busy140 0 motornotbusy140
	SLEEP
	JR motorwaiting140
  motornotbusy140:
    JR endif139
  else139_1:
    SUBF VGV_MARKINGGRANDE 2.0 F.1
    MULF F.1 90.0 F.0
    CALL MOTOR.SCHEDULE 'D' 60.0 0.0 F.0 0.0 'true' 

	DATA8 layer143
	DATA8 nos143
	DATA8 busy143
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer143 nos143
	JR_EQ8 0 nos143 motornotbusy143
  motorwaiting143:
	OUTPUT_TEST layer143 nos143 busy143
	JR_EQ8 busy143 0 motornotbusy143
	SLEEP
	JR motorwaiting143
  motornotbusy143:
  else139_2:
  endif139:
    MOVEF_F 80.0 VLV_VELOCIDAD_15
    MOVEF_F 28.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB144 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB144:
    MOVEF_F 40.0 VLV_VELOCIDAD_18
    MOVEF_F 1.0 VLV_SENSOR_18
    WRITE32 ENDSUB_M_RECTO_BLANCO1_2:CALLSUB145 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_BLANCO1_2
CALLSUB145:
    MOVEF_F 40.0 VLV_VELOCIDAD_16
    MOVEF_F 1.0 VLV_SENSOR_16
    WRITE32 ENDSUB_M_RECTO_NEGRO1_2:CALLSUB146 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1_2
CALLSUB146:
    CALL MOTOR.STOP 'BC' 'True'
    DATA32 milliseconds148
	MOVEF_32 150.0 milliseconds148
	DATA32 timer148
	TIMER_WAIT milliseconds148 timer148
	TIMER_READY timer148
    MOVEF_F 15.0 VLV_VELOCIDAD1_28
    MOVEF_F -15.0 VLV_VELOCIDAD2_28
    MOVEF_F 101.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB149 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB149:
    MOVEF_F 80.0 VLV_VELOCIDAD_15
    MOVEF_F 45.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB150 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB150:
    DATA8 layer151
	DATA8 no151
	DATA8 mode8151
	
	MOVEF_8 3.0 no151
	SUB8 no151 1 no151
	DIV8 no151 4 layer151
	MATH MOD8 no151 4 no151

	MOVEF_8 0.0 mode8151
	
	INPUT_DEVICE READY_RAW layer151 no151 0 mode8151 0
    OUTPUT_CLR_COUNT 0 4
  while153:
    CALL MOTOR.GETCOUNT 'C' F.0
    JR_LTEQF F.0 400.0 or154
    CALL SENSOR.READPERCENT 1.0 F.0
    JR_GTEQF F.0 5.0 endwhile153
  or154:
  whilebody153:
    CALL MOTOR.STARTSYNC 'BC' -20.0 20.0
    CALL MOTOR.GETCOUNT 'C' F.0
    JR_LTEQF F.0 400.0 whilebody153
    CALL SENSOR.READPERCENT 1.0 F.0
    JR_LTF F.0 5.0 whilebody153
  endwhile153:
    MOVEF_F -10.0 VLV_VELOCIDAD_15
    MOVEF_F 3.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB160 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB160:
    MOVEF_F 40.0 VLV_VELOCIDAD_12
    MOVEF_F -500.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB161 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB161:
    JR_EQF VGV_MARKINGGRANDE 5.0 or163
    JR_NEQF VGV_MARKINGGRANDE 3.0 else162_1
  or163:
    CALL MOTOR.SCHEDULE 'D' 60.0 0.0 -90.0 0.0 'true' 

	DATA8 layer164
	DATA8 nos164
	DATA8 busy164
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer164 nos164
	JR_EQ8 0 nos164 motornotbusy164
  motorwaiting164:
	OUTPUT_TEST layer164 nos164 busy164
	JR_EQ8 busy164 0 motornotbusy164
	SLEEP
	JR motorwaiting164
  motornotbusy164:
  else162_1:
  endif162:
    MOVEF_F 40.0 VLV_VELOCIDAD_12
    MOVEF_F -300.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB165 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB165:
    MOVEF_F -10.0 VLV_VELOCIDAD_15
    MOVEF_F 10.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB166 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB166:
    MOVEF_F 30.0 VLV_VELOCIDAD1_28
    MOVEF_F -30.0 VLV_VELOCIDAD2_28
    MOVEF_F 180.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB167 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB167:
    MOVEF_F 30.0 VLV_VELOCIDAD1_30
    MOVEF_F 17.0 VLV_VELOCIDAD2_30
    MOVEF_F 23.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB168 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB168:
    MOVEF_F 17.0 VLV_VELOCIDAD1_30
    MOVEF_F 30.0 VLV_VELOCIDAD2_30
    MOVEF_F 23.0 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB169 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB169:
    MOVEF_F -30.0 VLV_VELOCIDAD_15
    MOVEF_F 11.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB170 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB170:
    MOVEF_F -30.0 VLV_VELOCIDAD1_28
    MOVEF_F 30.0 VLV_VELOCIDAD2_28
    MOVEF_F 90.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB171 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB171:
    MOVEF_F -30.0 VLV_VELOCIDAD_14
    MOVEF_F 2.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB172 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB172:
    MOVEF_F -30.0 VLV_VELOCIDAD_17
    MOVEF_F 500.0 VLV_TIEMPO_17
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB173 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB173:
    MOVEF_F 30.0 VLV_VELOCIDAD_14
    MOVEF_F 2.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB174 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB174:
    MOVEF_F 100.0 VLV_VELOCIDAD_11
    MOVEF_F 600.0 VLV_TIMER_11
    WRITE32 ENDSUB_M_BRAZO_ATIMER_2:CALLSUB175 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_ATIMER_2
CALLSUB175:
    MOVEF_F 100.0 VLV_VELOCIDAD_12
    MOVEF_F -300.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB176 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB176:
    MOVEF_F 35.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 95.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB177 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB177:
    MOVEF_F 30.0 VLV_VELOCIDAD_26
    MOVEF_F 4.0 VLV_READER_26
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:CALLSUB178 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2
CALLSUB178:
    MOVEF_F 30.0 VLV_VELOCIDAD1_28
    MOVEF_F -18.0 VLV_VELOCIDAD2_28
    MOVEF_F 90.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB179 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB179:
    MOVEF_F 10.0 VLV_VELOCIDAD_23
    MOVEF_F 6.0 VLV_ENCODER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB180 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB180:
    MOVEF_F 9.75 VLV_VELOCIDAD1_30
    MOVEF_F 22.5 VLV_VELOCIDAD2_30
    MOVEF_F 6.5 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB181 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB181:
    MOVEF_F 22.5 VLV_VELOCIDAD1_30
    MOVEF_F 9.75 VLV_VELOCIDAD2_30
    MOVEF_F 6.5 VLV_DISTANCIA_30
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB182 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB182:
    MOVEF_F -20.0 VLV_VELOCIDAD_15
    MOVEF_F 3.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB183 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB183:
    ARRAY COPY VGV_MARKING VLV_MARKING_8
    WRITE32 ENDSUB_F_ORDENARBLOQUES_1:CALLSUB184 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ORDENARBLOQUES_1
CALLSUB184:
    MOVEF_F 30.0 VLV_VELOCIDAD_15
    MOVEF_F 10.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB185 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB185:
    MOVEF_F 30.0 VLV_VELOCIDAD_25
    MOVEF_F 3.0 VLV_READER_25
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB186 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB186:
    MOVEF_F -14.0 VLV_VELOCIDAD1_28
    MOVEF_F 30.0 VLV_VELOCIDAD2_28
    MOVEF_F 95.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB187 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB187:
    MOVEF_F 40.0 VLV_VELOCIDAD_24
    MOVEF_F 20.0 VLV_ENCODER_24
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB188 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB188:
    MOVEF_F 35.0 VLV_VELOCIDAD_15
    MOVEF_F 39.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB189 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB189:
    MOVEF_F 10.0 VLV_VELOCIDAD1_28
    MOVEF_F -10.0 VLV_VELOCIDAD2_28
    MOVEF_F 128.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB190 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB190:
    MOVEF_F -40.0 VLV_VELOCIDAD_15
    MOVEF_F 18.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB191 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB191:
    MOVEF_F -1.0 VLV_VELOCIDAD1_28
    MOVEF_F -15.0 VLV_VELOCIDAD2_28
    MOVEF_F 70.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB192 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB192:
    MOVEF_F -15.0 VLV_VELOCIDAD_15
    MOVEF_F 2.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB193 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB193:
    MOVEF_F 50.0 VLV_VELOCIDAD_12
    MOVEF_F -330.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB194 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB194:
    MOVEF_F 15.0 VLV_VELOCIDAD_15
    MOVEF_F 9.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB195 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB195:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB196 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB196:
    MOVEF_F 15.0 VLV_VELOCIDAD_15
    MOVEF_F 8.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB197 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB197:
    MOVEF_F -15.0 VLV_VELOCIDAD_15
    MOVEF_F 11.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB198 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB198:
    MOVEF_F 15.0 VLV_VELOCIDAD_15
    MOVEF_F 13.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB199 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB199:
    MOVEF_F -15.0 VLV_VELOCIDAD_15
    MOVEF_F 5.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB200 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB200:
    MOVEF_F -15.0 VLV_VELOCIDAD1_28
    MOVEF_F 15.0 VLV_VELOCIDAD2_28
    MOVEF_F 100.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB201 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB201:
    MOVEF_F -30.0 VLV_VELOCIDAD_17
    MOVEF_F 500.0 VLV_TIEMPO_17
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB202 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB202:
    MOVEF_F 15.0 VLV_VELOCIDAD_15
    MOVEF_F 12.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB203 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB203:
    MOVEF_F -10.0 VLV_VELOCIDAD1_28
    MOVEF_F 10.0 VLV_VELOCIDAD2_28
    MOVEF_F 7.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB204 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB204:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F -200.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB205 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB205:
    MOVEF_F 10.0 VLV_VELOCIDAD_15
    MOVEF_F 5.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB206 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB206:
    MOVEF_F -10.0 VLV_VELOCIDAD_15
    MOVEF_F 5.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB207 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB207:
    MOVEF_F 50.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB208 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB208:
    MOVEF_F 10.0 VLV_VELOCIDAD1_28
    MOVEF_F -10.0 VLV_VELOCIDAD2_28
    MOVEF_F 15.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB209 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB209:
    MOVEF_F 100.0 VLV_VELOCIDAD_14
    MOVEF_F 60.0 VLV_DISTANCIA_14
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB210 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB210:
    MOVEF_F 40.0 VLV_VELOCIDAD_19
    MOVEF_F 1.0 VLV_SENSOR_19
    WRITE32 ENDSUB_M_RECTO_BLANCO1F_2:CALLSUB211 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_BLANCO1F_2
CALLSUB211:
    MOVEF_F 20.0 VLV_VELOCIDAD_20
    MOVEF_F 1.0 VLV_SENSOR_20
    WRITE32 ENDSUB_M_RECTO_NEGRO1F_2:CALLSUB212 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1F_2
CALLSUB212:
    MOVEF_F -12.0 VLV_VELOCIDAD1_28
    MOVEF_F 30.0 VLV_VELOCIDAD2_28
    MOVEF_F 93.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB213 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB213:
    MOVEF_F 40.0 VLV_VELOCIDAD_24
    MOVEF_F 10.0 VLV_ENCODER_24
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB214 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB214:
    MOVEF_F 80.0 VLV_VELOCIDAD_24
    MOVEF_F 70.0 VLV_ENCODER_24
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB215 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB215:
    MOVEF_F 40.0 VLV_VELOCIDAD_25
    MOVEF_F 3.0 VLV_READER_25
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB216 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB216:
    MOVEF_F 20.0 VLV_VELOCIDAD_15
    MOVEF_F 2.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB217 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB217:
    MOVEF_F -50.0 VLV_VELOCIDAD1_28
    MOVEF_F 50.0 VLV_VELOCIDAD2_28
    MOVEF_F 88.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB218 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB218:
    MOVEF_F 50.0 VLV_VELOCIDAD_27
    MOVEF_F 40.0 VLV_ENCODER_27
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31_2:CALLSUB219 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31_2
CALLSUB219:
    MOVEF_F 50.0 VLV_VELOCIDAD_15
    MOVEF_F 30.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB220 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB220:
    MOVEF_F 40.0 VLV_VELOCIDAD_17
    MOVEF_F 1000.0 VLV_TIEMPO_17
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB221 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB221:
    MOVEF_F 8.0 VLV_VELOCIDAD1_28
    MOVEF_F -32.0 VLV_VELOCIDAD2_28
    MOVEF_F 94.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB222 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB222:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F -300.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB223 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB223:
    MOVEF_F 30.0 VLV_VELOCIDAD_15
    MOVEF_F 20.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB224 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB224:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB225 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB225:
    MOVEF_F -30.0 VLV_VELOCIDAD_15
    MOVEF_F 13.2 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB226 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB226:
RETSUB_F_MAIN_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_MAIN_0:
SUB_F_GRITARCOLOR_0:
    MOVEF_F VGV_COLOR VLV_COLOR_33
    WRITE32 ENDSUB_M_RGB_GRITAR_1:CALLSUB227 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_GRITAR_1
CALLSUB227:
RETSUB_F_GRITARCOLOR_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARCOLOR_0:
SUB_F_GRITARVOLTAJE_0:
    CALL EV3.BATTERYVOLTAGE VLV_VOLTAJE_1
    MATH FLOOR VLV_VOLTAJE_1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB230 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB230:
    MULF VLV_VOLTAJE_1 10.0 F.1
    MATH FLOOR F.1 F.0
    MATH FLOOR VLV_VOLTAJE_1 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB236 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB236:
    MULF VLV_VOLTAJE_1 100.0 F.1
    MATH FLOOR F.1 F.0
    MULF VLV_VOLTAJE_1 10.0 F.3
    MATH FLOOR F.3 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB243 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB243:
RETSUB_F_GRITARVOLTAJE_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARVOLTAJE_0:
SUB_F_GRITARNUMERO_1:
    JR_NEQF VLV_NUMERO_2 0.0 else244_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/ZERO'
    JR endif244
  else244_1:
    JR_NEQF VLV_NUMERO_2 1.0 else244_2
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/One'
    JR endif244
  else244_2:
    JR_NEQF VLV_NUMERO_2 2.0 else244_3
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Two'
    JR endif244
  else244_3:
    JR_NEQF VLV_NUMERO_2 3.0 else244_4
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Three'
    JR endif244
  else244_4:
    JR_NEQF VLV_NUMERO_2 4.0 else244_5
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Four'
    JR endif244
  else244_5:
    JR_NEQF VLV_NUMERO_2 5.0 else244_6
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Five'
    JR endif244
  else244_6:
    JR_NEQF VLV_NUMERO_2 6.0 else244_7
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Six'
    JR endif244
  else244_7:
    JR_NEQF VLV_NUMERO_2 7.0 else244_8
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Seven'
    JR endif244
  else244_8:
    JR_NEQF VLV_NUMERO_2 8.0 else244_9
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Eight'
    JR endif244
  else244_9:
    JR_NEQF VLV_NUMERO_2 9.0 else244_10
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Nine'
    JR endif244
  else244_10:
    JR_NEQF VLV_NUMERO_2 10.0 else244_11
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Ten'
  else244_11:
  endif244:
    SOUND_READY
RETSUB_F_GRITARNUMERO_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARNUMERO_1:
SUB_F_BAJARCUADRO_0:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F -780.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB257 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB257:
RETSUB_F_BAJARCUADRO_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_BAJARCUADRO_0:
SUB_F_CODIGO_2:
    STRINGS DUPLICATE '' VLV_CODIGO_6
    CALL ARRAYGET_FLOAT 2.0 VLV_AUX_6 VLV_MARKING_6
    CALL ARRAYGET_FLOAT 3.0 F.0 VLV_MARKING_6
    CALL ARRAYSTORE_FLOAT 2.0 F.0 VLV_MARKING_6
    CALL ARRAYSTORE_FLOAT 3.0 VLV_AUX_6 VLV_MARKING_6
    MOVEF_F 0.0 VLV_I_6
  for262:
    JR_GTF VLV_I_6 4.0 endfor262
  forbody262:
    CALL ARRAYGET_FLOAT VLV_I_6 F.0 VLV_MARKING_6
    JR_NEQF F.0 2.0 else263_1
    CALL TEXT.APPEND VLV_CODIGO_6 'Z' VLV_CODIGO_6
    JR endif263
  else263_1:
    CALL ARRAYGET_FLOAT VLV_I_6 F.0 VLV_MARKING_6
    JR_NEQF F.0 3.0 else263_2
    CALL TEXT.APPEND VLV_CODIGO_6 'V' VLV_CODIGO_6
    JR endif263
  else263_2:
    CALL ARRAYGET_FLOAT VLV_I_6 F.0 VLV_MARKING_6
    JR_NEQF F.0 4.0 else263_3
    CALL TEXT.APPEND VLV_CODIGO_6 'A' VLV_CODIGO_6
    JR endif263
  else263_3:
    CALL ARRAYGET_FLOAT VLV_I_6 F.0 VLV_MARKING_6
    JR_NEQF F.0 5.0 else263_4
    CALL TEXT.APPEND VLV_CODIGO_6 'R' VLV_CODIGO_6
  else263_4:
  endif263:
    ADDF VLV_I_6 1.0 VLV_I_6
    JR_LTEQF VLV_I_6 4.0 forbody262
  endfor262:
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    CALL TEXT.APPEND 'Codigo: ' VLV_CODIGO_6 S.0
    CALL LCD.WRITE 5.0 5.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
RETSUB_F_CODIGO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_CODIGO_2:
SUB_F_ROTAR_1:
    MATH ABS VLV_GRADOS_7 F.0
    DATAF tmpf279
    DATA8 flag279
    DIVF VLV_GRADOS_7 F.0 tmpf279
    CP_EQF 0.0 F.0 flag279
    SELECTF flag279 0.0 tmpf279 VLV_SIGNO_7

    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB280 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB280:
    DATA32 milliseconds281
	MOVEF_32 100.0 milliseconds281
	DATA32 timer281
	TIMER_WAIT milliseconds281 timer281
	TIMER_READY timer281
    MULF 34.0 VLV_SIGNO_7 F.0
    MATH ABS VLV_GRADOS_7 F.2
    SUBF F.2 8.0 F.1
    CALL MOTOR.SCHEDULE 'D' F.0 0.0 F.1 0.0 'True' 

	DATA8 layer285
	DATA8 nos285
	DATA8 busy285
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer285 nos285
	JR_EQ8 0 nos285 motornotbusy285
  motorwaiting285:
	OUTPUT_TEST layer285 nos285 busy285
	JR_EQ8 busy285 0 motornotbusy285
	SLEEP
	JR motorwaiting285
  motornotbusy285:
    DATA32 milliseconds286
	MOVEF_32 200.0 milliseconds286
	DATA32 timer286
	TIMER_WAIT milliseconds286 timer286
	TIMER_READY timer286
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F -360.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB287 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB287:
RETSUB_F_ROTAR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_ROTAR_1:
SUB_F_ORDENARBLOQUES_1:
    ARRAY COPY VLV_MARKING_8 VLV_MARKING_6
    WRITE32 ENDSUB_F_CODIGO_2:CALLSUB288 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_CODIGO_2
CALLSUB288:
    STRINGS DUPLICATE VLV_CODIGO_6 VLV_CODIGO_8
    CALL EQ_STRING VLV_CODIGO_8 'VRZA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_1
    JR endif289
  else289_1:
    CALL EQ_STRING VLV_CODIGO_8 'VRAZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_2
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB292 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB292:
    JR endif289
  else289_2:
    CALL EQ_STRING VLV_CODIGO_8 'VZRA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_3
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB294 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB294:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB295 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB295:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB296 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB296:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB297 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB297:
    JR endif289
  else289_3:
    CALL EQ_STRING VLV_CODIGO_8 'VZAR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_4
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB299 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB299:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB300 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB300:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB301 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB301:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB302 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB302:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB303 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB303:
    JR endif289
  else289_4:
    CALL EQ_STRING VLV_CODIGO_8 'VARZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_5
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB305 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB305:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB306 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB306:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB307 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB307:
    JR endif289
  else289_5:
    CALL EQ_STRING VLV_CODIGO_8 'VAZR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_6
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB309 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB309:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB310 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB310:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB311 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB311:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB312 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB312:
    JR endif289
  else289_6:
    CALL EQ_STRING VLV_CODIGO_8 'RVZA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_7
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB314 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB314:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB315 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB315:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB316 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB316:
    JR endif289
  else289_7:
    CALL EQ_STRING VLV_CODIGO_8 'RVAZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_8
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB318 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB318:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB319 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB319:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB320 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB320:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB321 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB321:
    JR endif289
  else289_8:
    CALL EQ_STRING VLV_CODIGO_8 'RZVA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_9
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB323 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB323:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB324 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB324:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB325 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB325:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB326 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB326:
    JR endif289
  else289_9:
    CALL EQ_STRING VLV_CODIGO_8 'RZAV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_10
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB328 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB328:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB329 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB329:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB330 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB330:
    JR endif289
  else289_10:
    CALL EQ_STRING VLV_CODIGO_8 'RAVZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_11
    MOVEF_F 90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB332 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB332:
    JR endif289
  else289_11:
    CALL EQ_STRING VLV_CODIGO_8 'RAZV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_12
    MOVEF_F 90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB334 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB334:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB335 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB335:
    JR endif289
  else289_12:
    CALL EQ_STRING VLV_CODIGO_8 'ZVAR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_13
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB337 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB337:
    JR endif289
  else289_13:
    CALL EQ_STRING VLV_CODIGO_8 'ZVRA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_14
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB339 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB339:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB340 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB340:
    JR endif289
  else289_14:
    CALL EQ_STRING VLV_CODIGO_8 'ZRVA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_15
    MOVEF_F 90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB342 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB342:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB343 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB343:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB344 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB344:
    JR endif289
  else289_15:
    CALL EQ_STRING VLV_CODIGO_8 'ZRAV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_16
    MOVEF_F 90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB346 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB346:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB347 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB347:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB348 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB348:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB349 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB349:
    JR endif289
  else289_16:
    CALL EQ_STRING VLV_CODIGO_8 'ZAVR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_17
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB351 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB351:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB352 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB352:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB353 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB353:
    JR endif289
  else289_17:
    CALL EQ_STRING VLV_CODIGO_8 'ZARV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_18
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB355 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB355:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB356 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB356:
    JR endif289
  else289_18:
    CALL EQ_STRING VLV_CODIGO_8 'AVRZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_19
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB358 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB358:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB359 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB359:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB360 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB360:
    JR endif289
  else289_19:
    CALL EQ_STRING VLV_CODIGO_8 'AVZR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_20
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB362 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB362:
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB363 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB363:
    JR endif289
  else289_20:
    CALL EQ_STRING VLV_CODIGO_8 'ARVZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_21
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB365 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB365:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB366 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB366:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB367 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB367:
    JR endif289
  else289_21:
    CALL EQ_STRING VLV_CODIGO_8 'ARZV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_22
    MOVEF_F -90.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB369 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB369:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB370 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB370:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB371 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB371:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB372 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB372:
    JR endif289
  else289_22:
    CALL EQ_STRING VLV_CODIGO_8 'AZVR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else289_23
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB374 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB374:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB375 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB375:
    JR endif289
  else289_23:
    MOVEF_F 180.0 VLV_GRADOS_7
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB376 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB376:
  else289_24:
  endif289:
    MOVEF_F -20.0 VLV_VELOCIDAD_15
    MOVEF_F 8.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB377 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB377:
    MOVEF_F 15.0 VLV_VELOCIDAD1_28
    MOVEF_F -15.0 VLV_VELOCIDAD2_28
    MOVEF_F 177.0 VLV_GRADOS_28
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB378 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB378:
    MOVEF_F -30.0 VLV_VELOCIDAD_15
    MOVEF_F 22.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB379 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB379:
    MOVEF_F 20.0 VLV_VELOCIDAD_12
    MOVEF_F 24.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB380 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB380:
RETSUB_F_ORDENARBLOQUES_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_ORDENARBLOQUES_1:
SUB_F_SWAP_0:
    MOVEF_F -15.0 VLV_VELOCIDAD_15
    MOVEF_F 7.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB381 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB381:
    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB382 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB382:
    MOVEF_F -15.0 VLV_VELOCIDAD_15
    MOVEF_F 10.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB383 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB383:
    CALL MOTOR.SCHEDULE 'D' 50.0 0.0 180.0 0.0 'True' 

	DATA8 layer384
	DATA8 nos384
	DATA8 busy384
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer384 nos384
	JR_EQ8 0 nos384 motornotbusy384
  motorwaiting384:
	OUTPUT_TEST layer384 nos384 busy384
	JR_EQ8 busy384 0 motornotbusy384
	SLEEP
	JR motorwaiting384
  motornotbusy384:
    MOVEF_F 30.0 VLV_VELOCIDAD_12
    MOVEF_F -360.0 VLV_ENCODER_12
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB385 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB385:
    MOVEF_F 15.0 VLV_VELOCIDAD_15
    MOVEF_F 23.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB386 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB386:
    MOVEF_F -15.0 VLV_VELOCIDAD_15
    MOVEF_F 5.0 VLV_DISTANCIA_15
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB387 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB387:
RETSUB_F_SWAP_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SWAP_0:
SUB_F_S_0:
    UI_BUTTON FLUSH
    UI_BUTTON WAIT_FOR_PRESS
RETSUB_F_S_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_S_0:
SUB_M_BRAZO_ATIMER_2:
    TIMER_READ timeMC1
  while391:
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_GTEQF F.0 VLV_TIMER_11 endwhile391
  whilebody391:
    MOVEF_8 VLV_VELOCIDAD_11 setSpeedA
	OUTPUT_SPEED 0 1 setSpeedA
	OUTPUT_START 0 1
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_LTF F.0 VLV_TIMER_11 whilebody391
  endwhile391:
    CALL MOTOR.STOP 'A' 'True'
RETSUB_M_BRAZO_ATIMER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_ATIMER_2:
SUB_M_BRAZO_AENCODER_2:
    CALL MOTOR.GETCOUNT 'A' F.0
    SUBF VLV_ENCODER_12 F.0 VLV_ENCDIFF_12
    MATH ABS VLV_ENCDIFF_12 F.0
    DATAF tmpf399
    DATA8 flag399
    DIVF VLV_ENCDIFF_12 F.0 tmpf399
    CP_EQF 0.0 F.0 flag399
    SELECTF flag399 0.0 tmpf399 VLV_SIGNO_12

    MATH ABS VLV_ENCDIFF_12 F.4
    DATAF tmpf401
    DATA8 flag401
    DIVF F.4 100.0 tmpf401
    CP_EQF 0.0 100.0 flag401
    SELECTF flag401 0.0 tmpf401 F.3

    DATAF tmpf402
    DATA8 flag402
    DIVF VLV_VELOCIDAD_12 20.0 tmpf402
    CP_EQF 0.0 20.0 flag402
    SELECTF flag402 0.0 tmpf402 F.4

    DATAF tmpf403
    DATA8 flag403
    DIVF F.3 F.4 tmpf403
    CP_EQF 0.0 F.4 flag403
    SELECTF flag403 0.0 tmpf403 F.2

    MULF F.2 650.0 F.1
    MULF F.1 2.0 F.0
    DATA8 flag406
	CP_GTF F.0 400.0 flag406
	SELECTF flag406 F.0 400.0 VLV_SAFETYTIMER_12
    TIMER_READ timeMC3
    JR_EQF VLV_ENCDIFF_12 0.0 else408_1
  while409:
    CALL MOTOR.GETCOUNT 'A' F.2
    SUBF F.2 VLV_ENCODER_12 F.1
    MATH ABS F.1 F.0
    JR_LTEQF F.0 25.0 endwhile409
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 2000.0 endwhile409
  whilebody409:
    MULF VLV_SIGNO_12 VLV_VELOCIDAD_12 F.0
    MOVEF_8 F.0 setSpeedA
	OUTPUT_SPEED 0 1 setSpeedA
	OUTPUT_START 0 1
    CALL MOTOR.GETCOUNT 'A' F.2
    SUBF F.2 VLV_ENCODER_12 F.1
    MATH ABS F.1 F.0
    JR_LTEQF F.0 25.0 and416
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 2000.0 whilebody409
  and416:
  endwhile409:
    CALL MOTOR.STOP 'A' 'True'
  else408_1:
  endif408:
RETSUB_M_BRAZO_AENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_AENCODER_2:
SUB_M_BRAZO_DTIMER_2:
    TIMER_READ timeMC1
  while423:
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_GTEQF F.0 VLV_TIMER_13 endwhile423
  whilebody423:
    MOVEF_8 VLV_VELOCIDAD_13 setSpeedD
	OUTPUT_SPEED 0 8 setSpeedD
	OUTPUT_START 0 8
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_LTF F.0 VLV_TIMER_13 whilebody423
  endwhile423:
    OUTPUT_POWER 0 8 0
	OUTPUT_STOP 0 8 1
RETSUB_M_BRAZO_DTIMER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_DTIMER_2:
SUB_M_RECTO_ENCODERF_2:
    DATAF tmpf428
    DATA8 flag428
    DIVF VLV_VELOCIDAD_14 10.0 tmpf428
    CP_EQF 0.0 10.0 flag428
    SELECTF flag428 0.0 tmpf428 F.2

    DATAF tmpf429
    DATA8 flag429
    DIVF 11286.0 F.2 tmpf429
    CP_EQF 0.0 F.2 flag429
    SELECTF flag429 0.0 tmpf429 F.1

    DATAF tmpf430
    DATA8 flag430
    DIVF VLV_DISTANCIA_14 100.0 tmpf430
    CP_EQF 0.0 100.0 flag430
    SELECTF flag430 0.0 tmpf430 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf432
    DATA8 flag432
    DIVF VPR_RECTO_DIAMETRO 6.24 tmpf432
    CP_EQF 0.0 6.24 flag432
    SELECTF flag432 0.0 tmpf432 F.1

    DATAF tmpf433
    DATA8 flag433
    DIVF F.0 F.1 tmpf433
    CP_EQF 0.0 F.1 flag433
    SELECTF flag433 0.0 tmpf433 VLV_SAFETYTIMER_14

    MATH ABS VLV_VELOCIDAD_14 F.1
    SUBF F.1 20.0 F.0
    MULF F.0 0.05 VLV_CORRECCION_14
    SUBF VLV_DISTANCIA_14 VLV_CORRECCION_14 F.2
    MULF F.2 360.0 F.1
    MOVEF_F 3.1415926535897932384 F.2
    DATAF tmpf440
    DATA8 flag440
    DIVF F.1 F.2 tmpf440
    CP_EQF 0.0 F.2 flag440
    SELECTF flag440 0.0 tmpf440 F.0

    DATAF tmpf441
    DATA8 flag441
    DIVF F.0 VPR_RECTO_DIAMETRO tmpf441
    CP_EQF 0.0 VPR_RECTO_DIAMETRO flag441
    SELECTF flag441 0.0 tmpf441 VLV_ENC_14

    OUTPUT_CLR_COUNT 0 2
    OUTPUT_CLR_COUNT 0 4
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds445
	MOVEF_32 100.0 milliseconds445
	DATA32 timer445
	TIMER_WAIT milliseconds445 timer445
	TIMER_READY timer445
    TIMER_READ timeMC4
  while447:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_14 endwhile447
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_14 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile447
  whilebody447:
    MATH NEGATE VLV_VELOCIDAD_14 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD_14
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_14 and454
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_14 2000.0 F.1
    JR_LTF F.0 F.1 whilebody447
  and454:
  endwhile447:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_14 2000.0 F.1
    JR_LTEQF F.0 F.1 else459_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else459_1:
  endif459:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_ENCODERF_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ENCODERF_2:
SUB_M_RECTO_ENCODER_2:
    DATAF tmpf465
    DATA8 flag465
    DIVF VLV_VELOCIDAD_15 10.0 tmpf465
    CP_EQF 0.0 10.0 flag465
    SELECTF flag465 0.0 tmpf465 F.2

    DATAF tmpf466
    DATA8 flag466
    DIVF 11286.0 F.2 tmpf466
    CP_EQF 0.0 F.2 flag466
    SELECTF flag466 0.0 tmpf466 F.1

    DATAF tmpf467
    DATA8 flag467
    DIVF VLV_DISTANCIA_15 100.0 tmpf467
    CP_EQF 0.0 100.0 flag467
    SELECTF flag467 0.0 tmpf467 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf469
    DATA8 flag469
    DIVF VPR_RECTO_DIAMETRO 6.24 tmpf469
    CP_EQF 0.0 6.24 flag469
    SELECTF flag469 0.0 tmpf469 F.1

    DATAF tmpf470
    DATA8 flag470
    DIVF F.0 F.1 tmpf470
    CP_EQF 0.0 F.1 flag470
    SELECTF flag470 0.0 tmpf470 VLV_SAFETYTIMER_15

    MATH ABS VLV_VELOCIDAD_15 F.1
    SUBF F.1 20.0 F.0
    MULF F.0 0.05 VLV_CORRECCION_15
    SUBF VLV_DISTANCIA_15 VLV_CORRECCION_15 F.2
    MULF F.2 360.0 F.1
    MOVEF_F 3.1415926535897932384 F.2
    DATAF tmpf477
    DATA8 flag477
    DIVF F.1 F.2 tmpf477
    CP_EQF 0.0 F.2 flag477
    SELECTF flag477 0.0 tmpf477 F.0

    DATAF tmpf478
    DATA8 flag478
    DIVF F.0 VPR_RECTO_DIAMETRO tmpf478
    CP_EQF 0.0 VPR_RECTO_DIAMETRO flag478
    SELECTF flag478 0.0 tmpf478 VLV_ENC_15

    OUTPUT_CLR_COUNT 0 2
    OUTPUT_CLR_COUNT 0 4
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds482
	MOVEF_32 100.0 milliseconds482
	DATA32 timer482
	TIMER_WAIT milliseconds482 timer482
	TIMER_READY timer482
    TIMER_READ timeMC4
  while484:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_15 endwhile484
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_15 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile484
  whilebody484:
    MATH NEGATE VLV_VELOCIDAD_15 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD_15
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_15 and491
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_15 2000.0 F.1
    JR_LTF F.0 F.1 whilebody484
  and491:
  endwhile484:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_15 2000.0 F.1
    JR_LTEQF F.0 F.1 else496_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else496_1:
  endif496:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_ENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ENCODER_2:
SUB_M_RECTO_NEGRO1_2:
    MOVEF_F 0.0 VLV_CORRECCION_16
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_16
  while503:
    JR_LTEQF VLV_LECTURA_16 15.0 endwhile503
  whilebody503:
    CALL SENSOR.READPERCENT VLV_SENSOR_16 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf506
    DATA8 flag506
    DIVF F.1 VPR_RECTO_BLANCO tmpf506
    CP_EQF 0.0 VPR_RECTO_BLANCO flag506
    SELECTF flag506 0.0 tmpf506 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_16
    MATH NEGATE VLV_VELOCIDAD_16 F.1
    ADDF F.1 VLV_CORRECCION_16 F.0
    ADDF VLV_VELOCIDAD_16 VLV_CORRECCION_16 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_GTF VLV_LECTURA_16 15.0 whilebody503
  endwhile503:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_NEGRO1_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_NEGRO1_2:
SUB_M_RECTO_TIEMPO_2:
    MOVEF_F 0.0 VLV_CORRECCION_17
    TIMER_READ timeMC3
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
  while516:
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_TIEMPO_17 endwhile516
  whilebody516:
    MATH NEGATE VLV_VELOCIDAD_17 F.1
    ADDF F.1 VLV_CORRECCION_17 F.0
    ADDF VLV_VELOCIDAD_17 VLV_CORRECCION_17 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_TIEMPO_17 whilebody516
  endwhile516:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_TIEMPO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_TIEMPO_2:
SUB_M_RECTO_BLANCO1_2:
    MOVEF_F 0.0 VLV_CORRECCION_18
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_18
  while525:
    JR_GTEQF VLV_LECTURA_18 60.0 endwhile525
  whilebody525:
    CALL SENSOR.READPERCENT VLV_SENSOR_18 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf528
    DATA8 flag528
    DIVF F.1 VPR_RECTO_BLANCO tmpf528
    CP_EQF 0.0 VPR_RECTO_BLANCO flag528
    SELECTF flag528 0.0 tmpf528 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_18
    MATH NEGATE VLV_VELOCIDAD_18 F.1
    ADDF F.1 VLV_CORRECCION_18 F.0
    ADDF VLV_VELOCIDAD_18 VLV_CORRECCION_18 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_LTF VLV_LECTURA_18 60.0 whilebody525
  endwhile525:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_BLANCO1_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_BLANCO1_2:
SUB_M_RECTO_BLANCO1F_2:
    MOVEF_F 0.0 VLV_CORRECCION_19
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_19
  while537:
    JR_GTEQF VLV_LECTURA_19 60.0 endwhile537
  whilebody537:
    CALL SENSOR.READPERCENT VLV_SENSOR_19 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf540
    DATA8 flag540
    DIVF F.1 VPR_RECTO_BLANCO tmpf540
    CP_EQF 0.0 VPR_RECTO_BLANCO flag540
    SELECTF flag540 0.0 tmpf540 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_19
    MATH NEGATE VLV_VELOCIDAD_19 F.1
    ADDF F.1 VLV_CORRECCION_19 F.0
    ADDF VLV_VELOCIDAD_19 VLV_CORRECCION_19 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_LTF VLV_LECTURA_19 60.0 whilebody537
  endwhile537:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_BLANCO1F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_BLANCO1F_2:
SUB_M_RECTO_NEGRO1F_2:
    MOVEF_F 0.0 VLV_CORRECCION_20
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_20
  while549:
    JR_LTEQF VLV_LECTURA_20 15.0 endwhile549
  whilebody549:
    CALL SENSOR.READPERCENT VLV_SENSOR_20 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf552
    DATA8 flag552
    DIVF F.1 VPR_RECTO_BLANCO tmpf552
    CP_EQF 0.0 VPR_RECTO_BLANCO flag552
    SELECTF flag552 0.0 tmpf552 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_20
    MATH NEGATE VLV_VELOCIDAD_20 F.1
    ADDF F.1 VLV_CORRECCION_20 F.0
    ADDF VLV_VELOCIDAD_20 VLV_CORRECCION_20 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_GTF VLV_LECTURA_20 15.0 whilebody549
  endwhile549:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_NEGRO1F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_NEGRO1F_2:
SUB_M_SIGUELINEAS_ENCODER14_2:
    MULF VLV_VELOCIDAD_21 1.0 VLV_VELOCIDAD_21
    MOVEF_F 50.0 VLV_LECTURA1_21
    MOVEF_F 50.0 VLV_LECTURA3_21
    MOVEF_F 50.0 VLV_LECTURA4_21
    MATH POW VLV_VELOCIDAD_21 0.833333333333333 F.0
    DATAF tmpf562
    DATA8 flag562
    DIVF F.0 440.0 tmpf562
    CP_EQF 0.0 440.0 flag562
    SELECTF flag562 0.0 tmpf562 VLV_KP_21

    MULF VLV_KP_21 70.0 VLV_KD_21
    MOVEF_F 0.0 VLV_ERROR_21
    MOVEF_F 0.0 VLV_OLDERROR_21
    MOVEF_F 0.0 VLV_U_21
    MATH ABS VLV_VELOCIDAD_21 F.0
    DATAF tmpf565
    DATA8 flag565
    DIVF VLV_VELOCIDAD_21 F.0 tmpf565
    CP_EQF 0.0 F.0 flag565
    SELECTF flag565 0.0 tmpf565 VLV_SENTIDO_21

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf568
    DATA8 flag568
    DIVF VLV_ENCODER_21 F.1 tmpf568
    CP_EQF 0.0 F.1 flag568
    SELECTF flag568 0.0 tmpf568 F.0

    MULF F.0 360.0 VLV_ENCODER_21
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_21
    MOVEF_F 0.0 VLV_ENCODERC_21
    DATAF tmpf571
    DATA8 flag571
    DIVF VLV_VELOCIDAD_21 10.0 tmpf571
    CP_EQF 0.0 10.0 flag571
    SELECTF flag571 0.0 tmpf571 F.2

    DATAF tmpf572
    DATA8 flag572
    DIVF 11286.0 F.2 tmpf572
    CP_EQF 0.0 F.2 flag572
    SELECTF flag572 0.0 tmpf572 F.1

    DATAF tmpf573
    DATA8 flag573
    DIVF VLV_ENCODER_21 100.0 tmpf573
    CP_EQF 0.0 100.0 flag573
    SELECTF flag573 0.0 tmpf573 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf575
    DATA8 flag575
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf575
    CP_EQF 0.0 6.24 flag575
    SELECTF flag575 0.0 tmpf575 F.1

    DATAF tmpf576
    DATA8 flag576
    DIVF F.0 F.1 tmpf576
    CP_EQF 0.0 F.1 flag576
    SELECTF flag576 0.0 tmpf576 VLV_SAFETYTIMER_21

    TIMER_READ timeMC4
  while578:
    MATH ABS VLV_ENCODERC_21 F.0
    JR_GTEQF F.0 VLV_ENCODER_21 endwhile578
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_21 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile578
  whilebody578:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_21 VLV_ENCODERC_21
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf586
    DATA8 flag586
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf586
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag586
    SELECTF flag586 0.0 tmpf586 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_21
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf591
    DATA8 flag591
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf591
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag591
    SELECTF flag591 0.0 tmpf591 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_21
    SUBF VLV_LECTURA1_21 VLV_LECTURA4_21 F.1
    MULF F.1 VLV_SENTIDO_21 F.0
    MULF F.0 1.0 VLV_ERROR_21
    MULF VLV_ERROR_21 VLV_KP_21 F.0
    SUBF VLV_ERROR_21 VLV_OLDERROR_21 F.2
    MULF F.2 VLV_KD_21 F.1
    ADDF F.0 F.1 VLV_U_21
    ADDF VLV_VELOCIDAD_21 VLV_U_21 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_21 VLV_U_21 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_21 VLV_OLDERROR_21
    MATH ABS VLV_ENCODERC_21 F.0
    JR_GTEQF F.0 VLV_ENCODER_21 and605
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_21 2000.0 F.1
    JR_LTF F.0 F.1 whilebody578
  and605:
  endwhile578:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_21 2000.0 F.1
    JR_LTEQF F.0 F.1 else609_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else609_1:
  endif609:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_ENCODER14_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER14_2:
SUB_M_SIGUELINEAS_CRUCE14_1:
    MULF VLV_VELOCIDAD_22 1.0 VLV_VELOCIDAD_22
    MOVEF_F 50.0 VLV_LECTURA1_22
    MOVEF_F 50.0 VLV_LECTURA3_22
    MOVEF_F 50.0 VLV_LECTURA4_22
    MATH POW VLV_VELOCIDAD_22 0.833333333333333 F.0
    DATAF tmpf617
    DATA8 flag617
    DIVF F.0 440.0 tmpf617
    CP_EQF 0.0 440.0 flag617
    SELECTF flag617 0.0 tmpf617 VLV_KP_22

    MULF VLV_KP_22 70.0 VLV_KD_22
    MOVEF_F 0.0 VLV_ERROR_22
    MOVEF_F 0.0 VLV_OLDERROR_22
    MOVEF_F 0.0 VLV_U_22
    MATH ABS VLV_VELOCIDAD_22 F.0
    DATAF tmpf620
    DATA8 flag620
    DIVF VLV_VELOCIDAD_22 F.0 tmpf620
    CP_EQF 0.0 F.0 flag620
    SELECTF flag620 0.0 tmpf620 VLV_SENTIDO_22

  while621:
    JR_GTF VLV_LECTURA1_22 10.0 or622
    JR_LTEQF VLV_LECTURA4_22 10.0 endwhile621
  or622:
  whilebody621:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf625
    DATA8 flag625
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf625
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag625
    SELECTF flag625 0.0 tmpf625 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_22
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf630
    DATA8 flag630
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf630
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag630
    SELECTF flag630 0.0 tmpf630 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_22
    SUBF VLV_LECTURA1_22 VLV_LECTURA4_22 F.1
    MULF F.1 VLV_SENTIDO_22 F.0
    MULF F.0 1.0 VLV_ERROR_22
    MULF VLV_ERROR_22 VLV_KP_22 F.0
    SUBF VLV_ERROR_22 VLV_OLDERROR_22 F.2
    MULF F.2 VLV_KD_22 F.1
    ADDF F.0 F.1 VLV_U_22
    ADDF VLV_VELOCIDAD_22 VLV_U_22 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_22 VLV_U_22 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_22 VLV_OLDERROR_22
    JR_GTF VLV_LECTURA1_22 10.0 whilebody621
    JR_GTF VLV_LECTURA4_22 10.0 whilebody621
  endwhile621:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_CRUCE14_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE14_1:
SUB_M_SIGUELINEAS_ENCODER31F_2:
    MULF VLV_VELOCIDAD_23 1.0 VLV_VELOCIDAD_23
    MOVEF_F 50.0 VLV_LECTURA1_23
    MOVEF_F 50.0 VLV_LECTURA3_23
    MOVEF_F 50.0 VLV_LECTURA4_23
    MATH POW VLV_VELOCIDAD_23 0.833333333333333 F.0
    DATAF tmpf647
    DATA8 flag647
    DIVF F.0 440.0 tmpf647
    CP_EQF 0.0 440.0 flag647
    SELECTF flag647 0.0 tmpf647 VLV_KP_23

    MULF VLV_KP_23 70.0 VLV_KD_23
    MOVEF_F 0.0 VLV_ERROR_23
    MOVEF_F 0.0 VLV_OLDERROR_23
    MOVEF_F 0.0 VLV_U_23
    MATH ABS VLV_VELOCIDAD_23 F.0
    DATAF tmpf650
    DATA8 flag650
    DIVF VLV_VELOCIDAD_23 F.0 tmpf650
    CP_EQF 0.0 F.0 flag650
    SELECTF flag650 0.0 tmpf650 VLV_SENTIDO_23

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf653
    DATA8 flag653
    DIVF VLV_ENCODER_23 F.1 tmpf653
    CP_EQF 0.0 F.1 flag653
    SELECTF flag653 0.0 tmpf653 F.0

    MULF F.0 360.0 VLV_ENCODER_23
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_23
    MOVEF_F 0.0 VLV_ENCODERC_23
    DATAF tmpf656
    DATA8 flag656
    DIVF VLV_VELOCIDAD_23 10.0 tmpf656
    CP_EQF 0.0 10.0 flag656
    SELECTF flag656 0.0 tmpf656 F.2

    DATAF tmpf657
    DATA8 flag657
    DIVF 11286.0 F.2 tmpf657
    CP_EQF 0.0 F.2 flag657
    SELECTF flag657 0.0 tmpf657 F.1

    DATAF tmpf658
    DATA8 flag658
    DIVF VLV_ENCODER_23 100.0 tmpf658
    CP_EQF 0.0 100.0 flag658
    SELECTF flag658 0.0 tmpf658 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf660
    DATA8 flag660
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf660
    CP_EQF 0.0 6.24 flag660
    SELECTF flag660 0.0 tmpf660 F.1

    DATAF tmpf661
    DATA8 flag661
    DIVF F.0 F.1 tmpf661
    CP_EQF 0.0 F.1 flag661
    SELECTF flag661 0.0 tmpf661 VLV_SAFETYTIMER_23

    TIMER_READ timeMC4
  while663:
    MATH ABS VLV_ENCODERC_23 F.0
    JR_GTEQF F.0 VLV_ENCODER_23 endwhile663
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_23 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile663
  whilebody663:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_23 VLV_ENCODERC_23
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf671
    DATA8 flag671
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf671
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag671
    SELECTF flag671 0.0 tmpf671 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_23
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf676
    DATA8 flag676
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf676
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag676
    SELECTF flag676 0.0 tmpf676 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_23
    SUBF VLV_LECTURA3_23 VLV_LECTURA1_23 F.1
    MULF F.1 VLV_SENTIDO_23 F.0
    MULF F.0 1.0 VLV_ERROR_23
    MULF VLV_ERROR_23 VLV_KP_23 F.0
    SUBF VLV_ERROR_23 VLV_OLDERROR_23 F.2
    MULF F.2 VLV_KD_23 F.1
    ADDF F.0 F.1 VLV_U_23
    ADDF VLV_VELOCIDAD_23 VLV_U_23 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_23 VLV_U_23 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_23 VLV_OLDERROR_23
    MATH ABS VLV_ENCODERC_23 F.0
    JR_GTEQF F.0 VLV_ENCODER_23 and690
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_23 2000.0 F.1
    JR_LTF F.0 F.1 whilebody663
  and690:
  endwhile663:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_23 2000.0 F.1
    JR_LTEQF F.0 F.1 else694_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else694_1:
  endif694:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_ENCODER31F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER31F_2:
SUB_M_SIGUELINEAS_ENCODER14F_2:
    MULF VLV_VELOCIDAD_24 1.0 VLV_VELOCIDAD_24
    MOVEF_F 50.0 VLV_LECTURA1_24
    MOVEF_F 50.0 VLV_LECTURA3_24
    MOVEF_F 50.0 VLV_LECTURA4_24
    MATH POW VLV_VELOCIDAD_24 0.833333333333333 F.0
    DATAF tmpf702
    DATA8 flag702
    DIVF F.0 440.0 tmpf702
    CP_EQF 0.0 440.0 flag702
    SELECTF flag702 0.0 tmpf702 VLV_KP_24

    MULF VLV_KP_24 70.0 VLV_KD_24
    MOVEF_F 0.0 VLV_ERROR_24
    MOVEF_F 0.0 VLV_OLDERROR_24
    MOVEF_F 0.0 VLV_U_24
    MATH ABS VLV_VELOCIDAD_24 F.0
    DATAF tmpf705
    DATA8 flag705
    DIVF VLV_VELOCIDAD_24 F.0 tmpf705
    CP_EQF 0.0 F.0 flag705
    SELECTF flag705 0.0 tmpf705 VLV_SENTIDO_24

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf708
    DATA8 flag708
    DIVF VLV_ENCODER_24 F.1 tmpf708
    CP_EQF 0.0 F.1 flag708
    SELECTF flag708 0.0 tmpf708 F.0

    MULF F.0 360.0 VLV_ENCODER_24
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_24
    MOVEF_F 0.0 VLV_ENCODERC_24
    DATAF tmpf711
    DATA8 flag711
    DIVF VLV_VELOCIDAD_24 10.0 tmpf711
    CP_EQF 0.0 10.0 flag711
    SELECTF flag711 0.0 tmpf711 F.2

    DATAF tmpf712
    DATA8 flag712
    DIVF 11286.0 F.2 tmpf712
    CP_EQF 0.0 F.2 flag712
    SELECTF flag712 0.0 tmpf712 F.1

    DATAF tmpf713
    DATA8 flag713
    DIVF VLV_ENCODER_24 100.0 tmpf713
    CP_EQF 0.0 100.0 flag713
    SELECTF flag713 0.0 tmpf713 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf715
    DATA8 flag715
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf715
    CP_EQF 0.0 6.24 flag715
    SELECTF flag715 0.0 tmpf715 F.1

    DATAF tmpf716
    DATA8 flag716
    DIVF F.0 F.1 tmpf716
    CP_EQF 0.0 F.1 flag716
    SELECTF flag716 0.0 tmpf716 VLV_SAFETYTIMER_24

    TIMER_READ timeMC4
  while718:
    MATH ABS VLV_ENCODERC_24 F.0
    JR_GTEQF F.0 VLV_ENCODER_24 endwhile718
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_24 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile718
  whilebody718:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_24 VLV_ENCODERC_24
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf726
    DATA8 flag726
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf726
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag726
    SELECTF flag726 0.0 tmpf726 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_24
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf731
    DATA8 flag731
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf731
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag731
    SELECTF flag731 0.0 tmpf731 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_24
    SUBF VLV_LECTURA1_24 VLV_LECTURA4_24 F.1
    MULF F.1 VLV_SENTIDO_24 F.0
    MULF F.0 1.0 VLV_ERROR_24
    MULF VLV_ERROR_24 VLV_KP_24 F.0
    SUBF VLV_ERROR_24 VLV_OLDERROR_24 F.2
    MULF F.2 VLV_KD_24 F.1
    ADDF F.0 F.1 VLV_U_24
    ADDF VLV_VELOCIDAD_24 VLV_U_24 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_24 VLV_U_24 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_24 VLV_OLDERROR_24
    MATH ABS VLV_ENCODERC_24 F.0
    JR_GTEQF F.0 VLV_ENCODER_24 and745
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_24 2000.0 F.1
    JR_LTF F.0 F.1 whilebody718
  and745:
  endwhile718:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_24 2000.0 F.1
    JR_LTEQF F.0 F.1 else749_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else749_1:
  endif749:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_ENCODER14F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER14F_2:
SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
    MULF VLV_VELOCIDAD_25 1.0 VLV_VELOCIDAD_25
    MOVEF_F 50.0 VLV_LECTURA1_25
    MOVEF_F 50.0 VLV_LECTURA3_25
    MOVEF_F 50.0 VLV_LECTURA4_25
    MATH POW VLV_VELOCIDAD_25 0.833333333333333 F.0
    DATAF tmpf757
    DATA8 flag757
    DIVF F.0 440.0 tmpf757
    CP_EQF 0.0 440.0 flag757
    SELECTF flag757 0.0 tmpf757 VLV_KP_25

    MULF VLV_KP_25 70.0 VLV_KD_25
    MOVEF_F 0.0 VLV_ERROR_25
    MOVEF_F 0.0 VLV_OLDERROR_25
    MOVEF_F 0.0 VLV_U_25
    MATH ABS VLV_VELOCIDAD_25 F.0
    DATAF tmpf760
    DATA8 flag760
    DIVF VLV_VELOCIDAD_25 F.0 tmpf760
    CP_EQF 0.0 F.0 flag760
    SELECTF flag760 0.0 tmpf760 VLV_SENTIDO_25

    MOVEF_F 50.0 VLV_LECTURA_25
  while761:
    JR_LTEQF VLV_LECTURA_25 7.0 endwhile761
  whilebody761:
    JR_NEQF VLV_READER_25 3.0 else762_1
    MOVEF_F VLV_LECTURA3_25 VLV_LECTURA_25
    MOVEF_F VLV_LECTURA1_25 VLV_LECTURAIZQ_25
    MOVEF_F VLV_LECTURA4_25 VLV_LECTURADCH_25
    JR endif762
  else762_1:
    MOVEF_F VLV_LECTURA4_25 VLV_LECTURA_25
    MOVEF_F VLV_LECTURA3_25 VLV_LECTURAIZQ_25
    MOVEF_F VLV_LECTURA1_25 VLV_LECTURADCH_25
  else762_2:
  endif762:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf765
    DATA8 flag765
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf765
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag765
    SELECTF flag765 0.0 tmpf765 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_25
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf770
    DATA8 flag770
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf770
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag770
    SELECTF flag770 0.0 tmpf770 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_25
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf775
    DATA8 flag775
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf775
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag775
    SELECTF flag775 0.0 tmpf775 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_25
    SUBF VLV_LECTURAIZQ_25 VLV_LECTURADCH_25 F.1
    MULF F.1 VLV_SENTIDO_25 F.0
    MULF F.0 1.0 VLV_ERROR_25
    MULF VLV_ERROR_25 VLV_KP_25 F.0
    SUBF VLV_ERROR_25 VLV_OLDERROR_25 F.2
    MULF F.2 VLV_KD_25 F.1
    ADDF F.0 F.1 VLV_U_25
    ADDF VLV_VELOCIDAD_25 VLV_U_25 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_25 VLV_U_25 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_25 VLV_OLDERROR_25
    JR_GTF VLV_LECTURA_25 7.0 whilebody761
  endwhile761:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
    MULF VLV_VELOCIDAD_26 1.0 VLV_VELOCIDAD_26
    MOVEF_F 50.0 VLV_LECTURA1_26
    MOVEF_F 50.0 VLV_LECTURA3_26
    MOVEF_F 50.0 VLV_LECTURA4_26
    MATH POW VLV_VELOCIDAD_26 0.833333333333333 F.0
    DATAF tmpf792
    DATA8 flag792
    DIVF F.0 440.0 tmpf792
    CP_EQF 0.0 440.0 flag792
    SELECTF flag792 0.0 tmpf792 VLV_KP_26

    MULF VLV_KP_26 70.0 VLV_KD_26
    MOVEF_F 0.0 VLV_ERROR_26
    MOVEF_F 0.0 VLV_OLDERROR_26
    MOVEF_F 0.0 VLV_U_26
    MATH ABS VLV_VELOCIDAD_26 F.0
    DATAF tmpf795
    DATA8 flag795
    DIVF VLV_VELOCIDAD_26 F.0 tmpf795
    CP_EQF 0.0 F.0 flag795
    SELECTF flag795 0.0 tmpf795 VLV_SENTIDO_26

    MOVEF_F 50.0 VLV_LECTURA_26
  while796:
    JR_LTEQF VLV_LECTURA_26 7.0 endwhile796
  whilebody796:
    JR_NEQF VLV_READER_26 3.0 else797_1
    MOVEF_F VLV_LECTURA3_26 VLV_LECTURA_26
    MOVEF_F VLV_LECTURA1_26 VLV_LECTURAIZQ_26
    MOVEF_F VLV_LECTURA4_26 VLV_LECTURADCH_26
    JR endif797
  else797_1:
    MOVEF_F VLV_LECTURA4_26 VLV_LECTURA_26
    MOVEF_F VLV_LECTURA3_26 VLV_LECTURAIZQ_26
    MOVEF_F VLV_LECTURA1_26 VLV_LECTURADCH_26
  else797_2:
  endif797:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf800
    DATA8 flag800
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf800
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag800
    SELECTF flag800 0.0 tmpf800 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_26
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf805
    DATA8 flag805
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf805
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag805
    SELECTF flag805 0.0 tmpf805 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_26
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf810
    DATA8 flag810
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf810
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag810
    SELECTF flag810 0.0 tmpf810 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_26
    SUBF VLV_LECTURAIZQ_26 VLV_LECTURADCH_26 F.1
    MULF F.1 VLV_SENTIDO_26 F.0
    MULF F.0 1.0 VLV_ERROR_26
    MULF VLV_ERROR_26 VLV_KP_26 F.0
    SUBF VLV_ERROR_26 VLV_OLDERROR_26 F.2
    MULF F.2 VLV_KD_26 F.1
    ADDF F.0 F.1 VLV_U_26
    ADDF VLV_VELOCIDAD_26 VLV_U_26 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_26 VLV_U_26 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_26 VLV_OLDERROR_26
    JR_GTF VLV_LECTURA_26 7.0 whilebody796
  endwhile796:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
SUB_M_SIGUELINEAS_ENCODER31_2:
    MULF VLV_VELOCIDAD_27 1.0 VLV_VELOCIDAD_27
    MOVEF_F 50.0 VLV_LECTURA1_27
    MOVEF_F 50.0 VLV_LECTURA3_27
    MOVEF_F 50.0 VLV_LECTURA4_27
    MATH POW VLV_VELOCIDAD_27 0.833333333333333 F.0
    DATAF tmpf827
    DATA8 flag827
    DIVF F.0 440.0 tmpf827
    CP_EQF 0.0 440.0 flag827
    SELECTF flag827 0.0 tmpf827 VLV_KP_27

    MULF VLV_KP_27 70.0 VLV_KD_27
    MOVEF_F 0.0 VLV_ERROR_27
    MOVEF_F 0.0 VLV_OLDERROR_27
    MOVEF_F 0.0 VLV_U_27
    MATH ABS VLV_VELOCIDAD_27 F.0
    DATAF tmpf830
    DATA8 flag830
    DIVF VLV_VELOCIDAD_27 F.0 tmpf830
    CP_EQF 0.0 F.0 flag830
    SELECTF flag830 0.0 tmpf830 VLV_SENTIDO_27

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf833
    DATA8 flag833
    DIVF VLV_ENCODER_27 F.1 tmpf833
    CP_EQF 0.0 F.1 flag833
    SELECTF flag833 0.0 tmpf833 F.0

    MULF F.0 360.0 VLV_ENCODER_27
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_27
    MOVEF_F 0.0 VLV_ENCODERC_27
    DATAF tmpf836
    DATA8 flag836
    DIVF VLV_VELOCIDAD_27 10.0 tmpf836
    CP_EQF 0.0 10.0 flag836
    SELECTF flag836 0.0 tmpf836 F.2

    DATAF tmpf837
    DATA8 flag837
    DIVF 11286.0 F.2 tmpf837
    CP_EQF 0.0 F.2 flag837
    SELECTF flag837 0.0 tmpf837 F.1

    DATAF tmpf838
    DATA8 flag838
    DIVF VLV_ENCODER_27 100.0 tmpf838
    CP_EQF 0.0 100.0 flag838
    SELECTF flag838 0.0 tmpf838 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf840
    DATA8 flag840
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf840
    CP_EQF 0.0 6.24 flag840
    SELECTF flag840 0.0 tmpf840 F.1

    DATAF tmpf841
    DATA8 flag841
    DIVF F.0 F.1 tmpf841
    CP_EQF 0.0 F.1 flag841
    SELECTF flag841 0.0 tmpf841 VLV_SAFETYTIMER_27

    TIMER_READ timeMC4
  while843:
    MATH ABS VLV_ENCODERC_27 F.0
    JR_GTEQF F.0 VLV_ENCODER_27 endwhile843
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_27 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile843
  whilebody843:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_27 VLV_ENCODERC_27
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf851
    DATA8 flag851
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf851
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag851
    SELECTF flag851 0.0 tmpf851 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_27
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf856
    DATA8 flag856
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf856
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag856
    SELECTF flag856 0.0 tmpf856 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_27
    SUBF VLV_LECTURA3_27 VLV_LECTURA1_27 F.1
    MULF F.1 VLV_SENTIDO_27 F.0
    MULF F.0 1.0 VLV_ERROR_27
    MULF VLV_ERROR_27 VLV_KP_27 F.0
    SUBF VLV_ERROR_27 VLV_OLDERROR_27 F.2
    MULF F.2 VLV_KD_27 F.1
    ADDF F.0 F.1 VLV_U_27
    ADDF VLV_VELOCIDAD_27 VLV_U_27 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_27 VLV_U_27 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_27 VLV_OLDERROR_27
    MATH ABS VLV_ENCODERC_27 F.0
    JR_GTEQF F.0 VLV_ENCODER_27 and870
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_27 2000.0 F.1
    JR_LTF F.0 F.1 whilebody843
  and870:
  endwhile843:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_27 2000.0 F.1
    JR_LTEQF F.0 F.1 else874_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else874_1:
  endif874:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_ENCODER31_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER31_2:
SUB_M_GIRO_GRADOS_3:
    DATAF tmpf880
    DATA8 flag880
    DIVF VLV_VELOCIDAD1_28 VLV_VELOCIDAD2_28 tmpf880
    CP_EQF 0.0 VLV_VELOCIDAD2_28 flag880
    SELECTF flag880 0.0 tmpf880 F.0

    DATAF tmpf881
    DATA8 flag881
    DIVF VLV_VELOCIDAD1_28 VLV_VELOCIDAD2_28 tmpf881
    CP_EQF 0.0 VLV_VELOCIDAD2_28 flag881
    SELECTF flag881 0.0 tmpf881 F.2

    MATH ABS F.2 F.1
    DATAF tmpf883
    DATA8 flag883
    DIVF F.0 F.1 tmpf883
    CP_EQF 0.0 F.1 flag883
    SELECTF flag883 0.0 tmpf883 VLV_SIGNO_28

    MATH ABS VLV_VELOCIDAD1_28 F.0
    MATH ABS VLV_VELOCIDAD2_28 F.1
    DATA8 flag886
	CP_LTF F.0 F.1 flag886
	SELECTF flag886 F.0 F.1 VLV_VMIN_28
    MATH ABS VLV_VELOCIDAD1_28 F.0
    MATH ABS VLV_VELOCIDAD2_28 F.1
    DATA8 flag889
	CP_GTF F.0 F.1 flag889
	SELECTF flag889 F.0 F.1 VLV_VMAX_28
    MULF VLV_GRADOS_28 VPR_GIRO_G1 F.0
    MULF VLV_SIGNO_28 VLV_VMIN_28 F.4
    DATAF tmpf892
    DATA8 flag892
    DIVF F.4 VLV_VMAX_28 tmpf892
    CP_EQF 0.0 VLV_VMAX_28 flag892
    SELECTF flag892 0.0 tmpf892 F.3

    SUBF F.3 1.0 F.2
    DATAF tmpf894
    DATA8 flag894
    DIVF -2.0 F.2 tmpf894
    CP_EQF 0.0 F.2 flag894
    SELECTF flag894 0.0 tmpf894 F.1

    MULF F.0 F.1 VLV_ENCODER_28
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds897
	MOVEF_32 100.0 milliseconds897
	DATA32 timer897
	TIMER_WAIT milliseconds897 timer897
	TIMER_READY timer897
    MATH NEGATE VLV_VELOCIDAD1_28 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_28 VLV_ENCODER_28 'True'

	DATA8 layer899
	DATA8 nos899
	DATA8 busy899
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer899 nos899
	JR_EQ8 0 nos899 motornotbusy899
  motorwaiting899:
	OUTPUT_TEST layer899 nos899 busy899
	JR_EQ8 busy899 0 motornotbusy899
	SLEEP
	JR motorwaiting899
  motornotbusy899:
    MOVEF_F 0.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 0.0 VLV_GRADOS_28
    DATA32 milliseconds900
	MOVEF_32 100.0 milliseconds900
	DATA32 timer900
	TIMER_WAIT milliseconds900 timer900
	TIMER_READY timer900
RETSUB_M_GIRO_GRADOS_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_GRADOS_3:
SUB_M_GIRO_NEGRO1F_3:
    MOVEF_F 50.0 VLV_LECTURA_29
  while901:
    JR_LTEQF VLV_LECTURA_29 15.0 endwhile901
  whilebody901:
    CALL SENSOR.READPERCENT VLV_SENS_29 F.2
    SUBF F.2 VPR_GIRO_NEGRO F.1
    DATAF tmpf904
    DATA8 flag904
    DIVF F.1 VPR_GIRO_BLANCO tmpf904
    CP_EQF 0.0 VPR_GIRO_BLANCO flag904
    SELECTF flag904 0.0 tmpf904 F.0

    SUBF 100.0 VPR_GIRO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_29
    MATH NEGATE VLV_VELOCIDAD1_29 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_29
    JR_GTF VLV_LECTURA_29 15.0 whilebody901
  endwhile901:
    CALL MOTOR.STOP 'BC' 'False'
RETSUB_M_GIRO_NEGRO1F_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_NEGRO1F_3:
SUB_M_GIRO_ENCODER_3:
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_GIRO_DIAMETRO F.2 F.1
    DATAF tmpf912
    DATA8 flag912
    DIVF VLV_DISTANCIA_30 F.1 tmpf912
    CP_EQF 0.0 F.1 flag912
    SELECTF flag912 0.0 tmpf912 F.0

    MULF F.0 360.0 VLV_ENCODER_30
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MATH NEGATE VLV_VELOCIDAD1_30 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_30 VLV_ENCODER_30 'True'

	DATA8 layer916
	DATA8 nos916
	DATA8 busy916
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer916 nos916
	JR_EQ8 0 nos916 motornotbusy916
  motorwaiting916:
	OUTPUT_TEST layer916 nos916 busy916
	JR_EQ8 busy916 0 motornotbusy916
	SLEEP
	JR motorwaiting916
  motornotbusy916:
RETSUB_M_GIRO_ENCODER_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_ENCODER_3:
SUB_M_GIRO_NEGRO1_3:
    MOVEF_F 50.0 VLV_LECTURA_31
  while917:
    JR_LTEQF VLV_LECTURA_31 15.0 endwhile917
  whilebody917:
    CALL SENSOR.READPERCENT VLV_SENS_31 F.2
    SUBF F.2 VPR_GIRO_NEGRO F.1
    DATAF tmpf920
    DATA8 flag920
    DIVF F.1 VPR_GIRO_BLANCO tmpf920
    CP_EQF 0.0 VPR_GIRO_BLANCO flag920
    SELECTF flag920 0.0 tmpf920 F.0

    SUBF 100.0 VPR_GIRO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_31
    MATH NEGATE VLV_VELOCIDAD1_31 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_31
    JR_GTF VLV_LECTURA_31 15.0 whilebody917
  endwhile917:
    CALL MOTOR.STOP 'BC' 'True'
RETSUB_M_GIRO_NEGRO1_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_NEGRO1_3:
SUB_M_RGB_DETECT_3:
    CALL SENSOR.GETMODE VLV_SENS_32 VLV_SENS_MODE_32
    DATA8 layer927
	DATA8 no927
	DATA8 mode8927
	
	MOVEF_8 VLV_SENS_32 no927
	SUB8 no927 1 no927
	DIV8 no927 4 layer927
	MATH MOD8 no927 4 no927

	MOVEF_8 4.0 mode8927
	
	INPUT_DEVICE READY_RAW layer927 no927 0 mode8927 0
    MOVEF_F 15.0 VLV_RED_32
    MOVEF_F 60.0 VLV_YELLOW_32
    MOVEF_F 170.0 VLV_GREEN_32
    MOVEF_F 330.0 VLV_BLUE_32
    MOVEF_F 0.0 VLV_HUE_32
    MOVEF_F 0.0 VLV_SAT_32
    MOVEF_F 0.0 VLV_VALUE_32
    MOVEF_F 0.0 VLV_COLOR_32
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_RNORMARRAY_32
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_GNORMARRAY_32
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_BNORMARRAY_32
    CALL LCD.CLEAR
    MOVEF_F 1.0 VLV_J_32
  for932:
    JR_GTF VLV_J_32 VLV_REPS_32 endfor932
  forbody932:
    CALL SENSOR.READRAW VLV_SENS_32 3.0 VLV_RGB_32
    CALL ARRAYGET_FLOAT 0.0 VLV_RRAW_32 VLV_RGB_32
    CALL ARRAYGET_FLOAT 1.0 VLV_GRAW_32 VLV_RGB_32
    CALL ARRAYGET_FLOAT 2.0 VLV_BRAW_32 VLV_RGB_32
    DATAF tmpf937
    DATA8 flag937
    DIVF VLV_RRAW_32 VPR_RGB_RWHITE tmpf937
    CP_EQF 0.0 VPR_RGB_RWHITE flag937
    SELECTF flag937 0.0 tmpf937 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_32 F.0 VLV_RNORMARRAY_32
    DATAF tmpf941
    DATA8 flag941
    DIVF VLV_GRAW_32 VPR_RGB_GWHITE tmpf941
    CP_EQF 0.0 VPR_RGB_GWHITE flag941
    SELECTF flag941 0.0 tmpf941 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_32 F.0 VLV_GNORMARRAY_32
    DATAF tmpf945
    DATA8 flag945
    DIVF VLV_BRAW_32 VPR_RGB_BWHITE tmpf945
    CP_EQF 0.0 VPR_RGB_BWHITE flag945
    SELECTF flag945 0.0 tmpf945 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_32 F.0 VLV_BNORMARRAY_32
    DATA32 milliseconds949
	MOVEF_32 5.0 milliseconds949
	DATA32 timer949
	TIMER_WAIT milliseconds949 timer949
	TIMER_READY timer949
    ADDF VLV_J_32 1.0 VLV_J_32
    JR_LTEQF VLV_J_32 VLV_REPS_32 forbody932
  endfor932:
    MOVEF_F 1.0 VLV_J_32
  for951:
    JR_GTF VLV_J_32 VLV_REPS_32 endfor951
  forbody951:
    CALL ARRAYGET_FLOAT VLV_J_32 F.0 VLV_RNORMARRAY_32
    ADDF VLV_J_32 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_RNORMARRAY_32
    ADDF F.0 F.1 VLV_RNORM_32
    CALL ARRAYGET_FLOAT VLV_J_32 F.0 VLV_GNORMARRAY_32
    ADDF VLV_J_32 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_GNORMARRAY_32
    ADDF F.0 F.1 VLV_GNORM_32
    CALL ARRAYGET_FLOAT VLV_J_32 F.0 VLV_BNORMARRAY_32
    ADDF VLV_J_32 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_BNORMARRAY_32
    ADDF F.0 F.1 VLV_BNORM_32
    ADDF VLV_J_32 2.0 VLV_J_32
    JR_LTEQF VLV_J_32 VLV_REPS_32 forbody951
  endfor951:
    DATAF tmpf965
    DATA8 flag965
    DIVF VLV_RNORM_32 VLV_REPS_32 tmpf965
    CP_EQF 0.0 VLV_REPS_32 flag965
    SELECTF flag965 0.0 tmpf965 VLV_RNORM_32

    DATAF tmpf966
    DATA8 flag966
    DIVF VLV_GNORM_32 VLV_REPS_32 tmpf966
    CP_EQF 0.0 VLV_REPS_32 flag966
    SELECTF flag966 0.0 tmpf966 VLV_GNORM_32

    DATAF tmpf967
    DATA8 flag967
    DIVF VLV_BNORM_32 VLV_REPS_32 tmpf967
    CP_EQF 0.0 VLV_REPS_32 flag967
    SELECTF flag967 0.0 tmpf967 VLV_BNORM_32

    DATA8 flag968
	CP_GTF VLV_RNORM_32 VLV_GNORM_32 flag968
	SELECTF flag968 VLV_RNORM_32 VLV_GNORM_32 F.0
    DATA8 flag969
	CP_GTF F.0 VLV_BNORM_32 flag969
	SELECTF flag969 F.0 VLV_BNORM_32 VLV_MAX_32
    DATA8 flag970
	CP_LTF VLV_RNORM_32 VLV_GNORM_32 flag970
	SELECTF flag970 VLV_RNORM_32 VLV_GNORM_32 F.0
    DATA8 flag971
	CP_LTF F.0 VLV_BNORM_32 flag971
	SELECTF flag971 F.0 VLV_BNORM_32 VLV_MIN_32
    JR_NEQF VLV_MAX_32 VLV_MIN_32 else972_1
    MOVEF_F 0.0 VLV_HUE_32
    JR endif972
  else972_1:
    JR_NEQF VLV_MAX_32 VLV_RNORM_32 else972_2
    JR_LTF VLV_GNORM_32 VLV_BNORM_32 else973_1
    SUBF VLV_GNORM_32 VLV_BNORM_32 F.1
    MULF 60.0 F.1 F.0
    SUBF VLV_MAX_32 VLV_MIN_32 F.1
    DATAF tmpf977
    DATA8 flag977
    DIVF F.0 F.1 tmpf977
    CP_EQF 0.0 F.1 flag977
    SELECTF flag977 0.0 tmpf977 VLV_HUE_32

    JR endif973
  else973_1:
    SUBF VLV_GNORM_32 VLV_BNORM_32 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_32 VLV_MIN_32 F.2
    DATAF tmpf981
    DATA8 flag981
    DIVF F.1 F.2 tmpf981
    CP_EQF 0.0 F.2 flag981
    SELECTF flag981 0.0 tmpf981 F.0

    ADDF F.0 360.0 VLV_HUE_32
  else973_2:
  endif973:
    JR endif972
  else972_2:
    JR_NEQF VLV_MAX_32 VLV_GNORM_32 else972_3
    SUBF VLV_BNORM_32 VLV_RNORM_32 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_32 VLV_MIN_32 F.2
    DATAF tmpf986
    DATA8 flag986
    DIVF F.1 F.2 tmpf986
    CP_EQF 0.0 F.2 flag986
    SELECTF flag986 0.0 tmpf986 F.0

    ADDF F.0 120.0 VLV_HUE_32
    JR endif972
  else972_3:
    SUBF VLV_RNORM_32 VLV_GNORM_32 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_32 VLV_MIN_32 F.2
    DATAF tmpf991
    DATA8 flag991
    DIVF F.1 F.2 tmpf991
    CP_EQF 0.0 F.2 flag991
    SELECTF flag991 0.0 tmpf991 F.0

    ADDF F.0 240.0 VLV_HUE_32
  else972_4:
  endif972:
    JR_NEQF VLV_MAX_32 0.0 else993_1
    MOVEF_F 0.0 VLV_SAT_32
    JR endif993
  else993_1:
    DATAF tmpf994
    DATA8 flag994
    DIVF VLV_MIN_32 VLV_MAX_32 tmpf994
    CP_EQF 0.0 VLV_MAX_32 flag994
    SELECTF flag994 0.0 tmpf994 F.0

    SUBF 1.0 F.0 VLV_SAT_32
  else993_2:
  endif993:
    MOVEF_F VLV_MAX_32 VLV_VALUE_32
    ADDF VPR_RGB_VALUEBLANCO VPR_RGB_VALUENEGRO F.0
    DATAF tmpf997
    DATA8 flag997
    DIVF F.0 2.0 tmpf997
    CP_EQF 0.0 2.0 flag997
    SELECTF flag997 0.0 tmpf997 VLV_RGBGREY_32

    ADDF VLV_RRAW_32 VLV_GRAW_32 F.1
    ADDF F.1 VLV_BRAW_32 F.0
    JR_GTF F.0 3.0 else998_1
    MOVEF_F 0.0 VLV_COLOR_32
    JR endif998
  else998_1:
    JR_GTEQF VLV_SAT_32 0.3 else1001_1
    JR_LTEQF VLV_VALUE_32 VLV_RGBGREY_32 else1002_1
    MOVEF_F 6.0 VLV_COLOR_32
    JR endif1002
  else1002_1:
    MOVEF_F 1.0 VLV_COLOR_32
  else1002_2:
  endif1002:
    JR endif1001
  else1001_1:
    JR_LTF VLV_HUE_32 0.0 else1003_1
    JR_GTEQF VLV_HUE_32 VLV_RED_32 else1003_1
    MOVEF_F 5.0 VLV_COLOR_32
    JR endif1003
  else1003_1:
    JR_LTF VLV_HUE_32 VLV_RED_32 else1003_2
    JR_GTEQF VLV_HUE_32 VLV_YELLOW_32 else1003_2
    MOVEF_F 4.0 VLV_COLOR_32
    JR endif1003
  else1003_2:
    JR_LTF VLV_HUE_32 VLV_YELLOW_32 else1003_3
    JR_GTEQF VLV_HUE_32 VLV_GREEN_32 else1003_3
    MOVEF_F 3.0 VLV_COLOR_32
    JR endif1003
  else1003_3:
    JR_LTF VLV_HUE_32 VLV_GREEN_32 else1003_4
    JR_GTEQF VLV_HUE_32 VLV_BLUE_32 else1003_4
    MOVEF_F 2.0 VLV_COLOR_32
    JR endif1003
  else1003_4:
    MOVEF_F 5.0 VLV_COLOR_32
  else1003_5:
  endif1003:
  else1001_2:
  endif1001:
  else998_2:
  endif998:
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    STRINGS VALUE_FORMATTED VLV_RRAW_32 '%g' 99 S.1
    CALL TEXT.APPEND 'R: ' S.1 S.0
    CALL LCD.WRITE 33.0 20.0 S.0
    STRINGS VALUE_FORMATTED VLV_GRAW_32 '%g' 99 S.1
    CALL TEXT.APPEND 'G: ' S.1 S.0
    CALL LCD.WRITE 33.0 35.0 S.0
    STRINGS VALUE_FORMATTED VLV_BRAW_32 '%g' 99 S.1
    CALL TEXT.APPEND 'B: ' S.1 S.0
    CALL LCD.WRITE 33.0 50.0 S.0
    STRINGS VALUE_FORMATTED VLV_COLOR_32 '%g' 99 S.1
    CALL TEXT.APPEND 'color: ' S.1 S.0
    CALL LCD.WRITE 33.0 70.0 S.0
    STRINGS VALUE_FORMATTED VLV_VALUE_32 '%g' 99 S.1
    CALL TEXT.APPEND 'Value: ' S.1 S.0
    CALL LCD.WRITE 33.0 90.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
    DATA8 layer1022
	DATA8 no1022
	DATA8 mode81022
	
	MOVEF_8 VLV_SENS_32 no1022
	SUB8 no1022 1 no1022
	DIV8 no1022 4 layer1022
	MATH MOD8 no1022 4 no1022

	MOVEF_8 VLV_SENS_MODE_32 mode81022
	
	INPUT_DEVICE READY_RAW layer1022 no1022 0 mode81022 0
RETSUB_M_RGB_DETECT_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RGB_DETECT_3:
SUB_M_RGB_GRITAR_1:
    JR_NEQF VLV_COLOR_33 0.0 else1023_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Zero'
    JR endif1023
  else1023_1:
    JR_NEQF VLV_COLOR_33 1.0 else1023_2
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Black'
    JR endif1023
  else1023_2:
    JR_NEQF VLV_COLOR_33 2.0 else1023_3
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/BLUE'
    JR endif1023
  else1023_3:
    JR_NEQF VLV_COLOR_33 3.0 else1023_4
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/GREEN'
    JR endif1023
  else1023_4:
    JR_NEQF VLV_COLOR_33 4.0 else1023_5
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/YELLOW'
    JR endif1023
  else1023_5:
    JR_NEQF VLV_COLOR_33 5.0 else1023_6
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/RED'
    JR endif1023
  else1023_6:
    JR_NEQF VLV_COLOR_33 6.0 else1023_7
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/White'
    JR endif1023
  else1023_7:
    JR_NEQF VLV_COLOR_33 7.0 else1023_8
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Brown'
  else1023_8:
  endif1023:
    SOUND_READY
RETSUB_M_RGB_GRITAR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RGB_GRITAR_1:
}
subcall ARRAYSTORE_FLOAT   // FFFV
{
	IN_F index
	IN_F value	
	IN_16 handle
	
	DATA32 index32
	DATA32 len	
	MOVEF_32 index index32

	ARRAY SIZE handle len
	JR_LT32 index32 0 negativeindex
	JR_LT32 index32 len arraybigenough

increasesize:	
	DATA32 doublelen
	ADD32 len len doublelen
	ARRAY RESIZE handle doublelen
writeloop:	
	ARRAY_WRITE handle len 0.0
	ADD32 len 1 len
	JR_LT32 len doublelen writeloop
	JR_GTEQ32 index32 len increasesize
	
arraybigenough:
	ARRAY_WRITE handle index32 value
negativeindex:
}
subcall SPEAKER.PLAY    // FSV 
{
	IN_F volume
	IN_S filename 252	

	// prepend a path to really reach the target file from the current working directory
	DATA8 vol 
	DATAS fullname 300
	MOVEF_8 volume vol

	STRINGS ADD '../../../..' filename fullname  // when using absolute path, go to file system top from the VM directory and then back down
	JR_EQ8 filename 47 absolutepath               // filename begins with a '/' - using absolute path
	STRINGS ADD '../prjs/' filename fullname      // by default use path relative to prjs folder (must go from the current VM directory to there)
absolutepath:
	
	SOUND PLAY vol fullname
}
subcall ARRAYGET_FLOAT     // FFF
{
	IN_F index
	OUT_F value
	IN_16 handle
	
	DATA32 index32
	DATA32 len
	MOVEF_32 index index32
	
	ARRAY SIZE handle len
	JR_LT32 index32 0 outofbounds
	JR_GTEQ32 index32 len outofbounds
	
	ARRAY_READ handle index32 value
	RETURN
outofbounds:
	MOVE8_F 0 value	
}
subcall MOTOR.SCHEDULE   // SFFFFSV    MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F step1
	IN_F step2
	IN_F step3
	IN_S brake 8
	
	DATA8 layer
	DATA8 nos
	DATA8 spd
	DATA32 stp1
	DATA32 stp2
	DATA32 stp3	
	DATA8 brk
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	JR_EQ8 nos 0 noport

	MOVEF_8 speed spd
	MATH ABS step1 step1
	MOVEF_32 step1 stp1
	MATH ABS step2 step2
	MOVEF_32 step2 stp2
	MATH ABS step3 step3
	MOVEF_32 step3 stp3	
	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	

	OUTPUT_STEP_SPEED layer nos spd stp1 stp2 stp3 brk
noport:
}
subcall MOTORDECODEPORTSDESCRIPTOR  //  V
{
	IN_S descriptor 8
	OUT_8 layer
	OUT_8 nos

	DATA8 i 
	DATA8 c

	MOVE8_8 0 layer
	MOVE8_8 0 nos	
	MOVE8_8 0 i
loop:
	READ8 descriptor i c
	JR_EQ8 c 0 decoding_end
	
	JR_LT8 c 65 no_uppercase_port
	JR_GT8 c 68 no_uppercase_port
	SUB8 c 65 c
	RL8  1 c c
	OR8  nos c nos
	JR loop_end
no_uppercase_port:
	JR_LT8 c 97 no_lowercase_port
	JR_GT8 c 100 no_lowercase_port
	SUB8 c 97 c
	RL8  1 c c
	OR8  nos c nos	
	JR loop_end
no_lowercase_port:
	JR_LT8 c 49 loop_end
	JR_GT8 c 52 loop_end
	SUB8 c 49 layer
loop_end:
	ADD8 1 i i
	JR loop	
	
decoding_end:
	RETURN
}
subcall MOTOR.STOP       // SSV      MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_S brake 8

	DATA8 layer
	DATA8 nos	
	DATA8 brk
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	JR_EQ8 nos 0 noport

	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	
	
	OUTPUT_STOP layer nos brk
noport:
}
subcall MOTOR.GETCOUNT    // SF     MOTORDECODEPORTDESCRIPTOR
{
	IN_S port 8
	OUT_F result
	
	DATA8 layer
	DATA8 no
	DATA32 tacho
	
	CALL MOTORDECODEPORTDESCRIPTOR port layer no
	JR_LT8 no 0 noport
	
	OUTPUT_GET_COUNT layer no tacho
	MOVE32_F tacho result

	DATA8 nos
	RL8 1 no nos
	DATA8 inv
	READ8 MOTORISINVERTED layer inv 
	AND8 inv nos inv
	JR_EQ8 inv 0 noinvert
	SUBF 0.0 result result
noinvert:
	RETURN

noport:	
	MOVE8_F 0 result	
}
subcall MOTORDECODEPORTDESCRIPTOR  //  V
{
	IN_S descriptor 8
	OUT_8 layer
	OUT_8 no

	DATA8 i 
	DATA8 c

	MOVE8_8 0 layer
	MOVE8_8 -1 no
	MOVE8_8 0 i
loop:
	READ8 descriptor i c
	JR_EQ8 c 0 decoding_end
	
	JR_LT8 c 65 no_uppercase_port
	JR_GT8 c 68 no_uppercase_port
	SUB8 c 65 c
	MOVE8_8 c no
	JR loop_end
no_uppercase_port:
	JR_LT8 c 97 no_lowercase_port
	JR_GT8 c 100 no_lowercase_port
	SUB8 c 97 c
	MOVE8_8 c no
	JR loop_end
no_lowercase_port:
	JR_LT8 c 49 loop_end
	JR_GT8 c 52 loop_end
	SUB8 c 49 layer
loop_end:
	ADD8 1 i i
	JR loop	
	
decoding_end:
	RETURN
}
subcall SENSOR.READPERCENT       // FF
{
	IN_F port
	OUT_F result

	DATA8 layer
	DATA8 no
	DATA8 percentage

	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	INPUT_READ layer no 0 -1 percentage
	JR_LT8 percentage 0 novalue
	
	MOVE8_F percentage result
	RETURN
novalue:	
	MOVE8_F 0 result
}
subcall MOTOR.STARTSYNC      // SFFV       MOTORSTARTSTEERIMPL
{
	IN_S ports 8
	IN_F speed1
	IN_F speed2

	JR_GTEQF speed1 -100.0 nottoosmall1
	MOVEF_F -100.0 speed1
nottoosmall1:
	JR_LTEQF speed1 100.0 nottoobig1
	MOVEF_F 100.0 speed1
nottoobig1:
	JR_GTEQF speed2 -100.0 nottoosmall2
	MOVEF_F -100.0 speed2
nottoosmall2:
	JR_LTEQF speed1 100.0 nottoobig2
	MOVEF_F 100.0 speed2
nottoobig2:

	DATAF speed  
	DATAF turn
	MOVE8_F 0 speed
	MOVE8_F 0 turn

	DATAF speed1abs
	DATAF speed2abs
	MATH ABS speed1 speed1abs
	MATH ABS speed2 speed2abs
	JR_LTF speed1abs speed2abs secondisfaster
	JR_EQF speed1abs 0.0 donecomputation
	 MOVEF_F speed1 speed
	 MULF 100.0 speed2 turn
	 DIVF turn speed1 turn
	 SUBF 100.0 turn turn
	JR donecomputation
secondisfaster:
	 MOVEF_F speed2 speed
	 MULF 100.0 speed1 turn
	 DIVF turn speed2 turn
	 SUBF turn 100.0 turn
donecomputation:

	CALL MOTORSTARTSTEERIMPL ports speed turn
}
subcall MOTORSTARTSTEERIMPL      // SFFV       MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F turn

	DATA8 layer
	DATA8 nos	
	DATA8 first
	DATA8 second
	DATA8 invfirst
	DATA8 invsecond

	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	READ8 FIRSTOF2 nos first
	JR_EQ8 0 first not_two_ports
	XOR8 first nos second
	READ8 MOTORISINVERTED layer invfirst
	AND8 first invfirst invfirst
	READ8 MOTORISINVERTED layer invsecond
	AND8 second invsecond invsecond

	JR_LTF turn 0.0 second_is_master
first_is_master:
	JR_EQ8 invfirst 0 non_invert_first
	SUBF 0.0 speed speed
	JR_NEQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion
non_invert_first:
	JR_EQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion

second_is_master:
	JR_EQ8 invsecond 0 non_invert_second
	SUBF 0.0 speed speed
	JR_NEQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion
non_invert_second:
	JR_EQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion

done_inversion:
	DATA8 spd  
	DATA16 trn
	MOVEF_16 turn trn
	MOVEF_8 speed spd
	OUTPUT_STEP_SYNC layer nos spd trn 0 0
not_two_ports:
}
subcall EV3.BATTERYVOLTAGE  // F
{
	OUT_F voltage
	UI_READ GET_VBATT voltage
}
subcall TEXT.APPEND     // SSS
{
	IN_S a 252
	IN_S b 252
    OUT_S result 252
	
	DATA16 len0
	DATA16 len1
	DATA16 sum

	STRINGS GET_SIZE a len0
	STRINGS GET_SIZE b len1
	ADD16 len0,len1,sum
	JR_GT16 sum,251,stringsizeexceeded

	STRINGS ADD a b result
	RETURN
	
stringsizeexceeded:	
    STRINGS DUPLICATE a result
}
subcall LCD.CLEAR   // V
{
	UI_DRAW(TOPLINE,0)
	UI_DRAW(CLEAN)
	
	JR_NEQ32 0 STOPLCDUPDATE skipupdate
	UI_DRAW UPDATE
skipupdate:
}
subcall LCD.WRITE     // FFSV
{
	IN_F x
	IN_F y
	IN_S text 252
	
	DATA16 x_16
	DATA16 y_16
	MOVEF_16 x x_16
	MOVEF_16 y y_16
	
	UI_DRAW SELECT_FONT 1
	UI_DRAW TEXT 1 x_16 y_16 text

	JR_NEQ32 0 STOPLCDUPDATE skipupdate
	UI_DRAW UPDATE
skipupdate:
}
subcall EQ_STRING       // SSS
{
	IN_S  a 252
	IN_S  b 252
	OUT_S result 8
	
	DATA8 flag
	
	// check if completely equal
	STRINGS COMPARE a b flag
	JR_NEQ8 FLAG 0 isequal
	// second chance: when both values are "True" in any casing, this also counts as equal
	AND8888_32 a -538976289 a        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE a 'TRUE' flag	
	JR_EQ8 0,flag,isnotequal
	AND8888_32 b -538976289 b        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE b 'TRUE' flag	
	JR_EQ8 0,flag,isnotequal
isequal:
	STRINGS DUPLICATE 'True' result
	RETURN
isnotequal:
	STRINGS DUPLICATE 'False' result
	RETURN
}
subcall MOTOR.SCHEDULESYNC   // SFFFSV    MOTORSCHEDULESTEERIMPL
{
	IN_S ports 8
	IN_F speed1
	IN_F speed2
	IN_F count
	IN_S brake 8
	
	JR_GTEQF speed1 -100.0 nottoosmall1
	MOVEF_F -100.0 speed1
nottoosmall1:
	JR_LTEQF speed1 100.0 nottoobig1
	MOVEF_F 100.0 speed1
nottoobig1:
	JR_GTEQF speed2 -100.0 nottoosmall2
	MOVEF_F -100.0 speed2
nottoosmall2:
	JR_LTEQF speed2 100.0 nottoobig2
	MOVEF_F 100.0 speed2
nottoobig2:

	DATAF speed  
	DATAF turn
	MOVE8_F 0 speed
	MOVE8_F 0 turn

	DATAF speed1abs
	DATAF speed2abs
	MATH ABS speed1 speed1abs
	MATH ABS speed2 speed2abs
	JR_LTF speed1abs speed2abs secondisfaster
	JR_EQF speed1abs 0.0 donecomputation
	 MOVEF_F speed1 speed
	 MULF 100.0 speed2 turn
	 DIVF turn speed1 turn
	 SUBF 100.0 turn turn
	JR donecomputation
secondisfaster:
	 MOVEF_F speed2 speed
	 MULF 100.0 speed1 turn
	 DIVF turn speed2 turn
	 SUBF turn 100.0 turn
donecomputation:
	
	CALL MOTORSCHEDULESTEERIMPL ports speed turn count brake
}
subcall MOTORSCHEDULESTEERIMPL   // SFFFSV    MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F turn
	IN_F count
	IN_S brake 8
	
	DATA8 layer
	DATA8 nos	
	DATA8 first
	DATA8 second
	DATA8 invfirst
	DATA8 invsecond
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	READ8 FIRSTOF2 nos first
	JR_EQ8 0 first not_two_ports
	XOR8 first nos second
	READ8 MOTORISINVERTED layer invfirst
	AND8 first invfirst invfirst
	READ8 MOTORISINVERTED layer invsecond
	AND8 second invsecond invsecond

	JR_LTF turn 0.0 second_is_master
first_is_master:
	JR_EQ8 invfirst 0 non_invert_first
	SUBF 0.0 speed speed
	JR_NEQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion
non_invert_first:
	JR_EQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion

second_is_master:
	JR_EQ8 invsecond 0 non_invert_second
	SUBF 0.0 speed speed
	JR_NEQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion
non_invert_second:
	JR_EQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion

done_inversion:
	DATA32 cnt
	DATA8 brk
	MATH ABS count count
	MOVEF_32 count cnt
	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	

	JR_LTEQ32 cnt 0 dontmove	

	DATA8 spd  
	DATA16 trn
	MOVEF_16 turn trn
	MOVEF_8 speed spd
	OUTPUT_STEP_SYNC layer nos spd trn cnt brk	
dontmove:	
not_two_ports:
}
subcall SENSOR.GETMODE		// FF
{
	IN_F port
	OUT_F result
	
	DATA8 layer
	DATA8 no
	DATA8 type
	DATA8 mode
	
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no
	
	INPUT_DEVICE GET_TYPEMODE layer no type mode
	MOVE8_F mode result
}
subcall SENSOR.READRAW            // FFA
{
	IN_F port
	IN_F values
	IN_16 resultarray
	
	DATA8 layer
	DATA8 no
	DATA32 values32
		
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	MOVEF_32 values values32

	JR_LTEQ32 values32 0 arrayempty
	ARRAY RESIZE resultarray values32

	DATA32 rawvalue0
	DATA32 rawvalue1
	DATA32 rawvalue2
	DATA32 rawvalue3
	DATA32 rawvalue4
	DATA32 rawvalue5
	DATA32 rawvalue6
	DATA32 rawvalue7
	INPUT_READEXT layer no 0 -1 18 8 rawvalue0 rawvalue1 rawvalue2 rawvalue3 rawvalue4 rawvalue5 rawvalue6 rawvalue7
	
	DATA32 i
	DATA32 rawtmp
	MOVE32_32 0 i
loop:
	DATA8 tmp8
	DATAF tmpf

	MOVEF_F 0.0 tmpf
	JR_GTEQ32 i 8 nomoredata

	MOVE32_8 i tmp8
	READ32 rawvalue0 tmp8 rawtmp
	JR_LT32 rawtmp -1000000000 nomoredata
	MOVE32_F rawtmp tmpf

nomoredata:	
	ARRAY_WRITE resultarray i tmpf

	ADD32 i 1 i
	JR_LT32 i values32 loop
	RETURN

arrayempty:
	ARRAY RESIZE resultarray 0
}
subcall ARRAYCREATE_FLOAT   // F
{
	OUT_16 handle
	
	ARRAY CREATEF 8 handle			// create with 8 elements
	ARRAY FILL handle 0.0
}
subcall GETANDINC32     // V
{
	IN_32 counterin
	IN_32 inc
	OUT_32 counterout
	OUT_32 prev

	MOVE32_32 counterin prev
	ADD32 counterin inc counterout
}
