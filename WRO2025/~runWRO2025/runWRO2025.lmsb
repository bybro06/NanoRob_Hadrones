DATA16 FD_NATIVECODECOMMAND
DATA16 FD_NATIVECODERESPONSE
DATA32 STOPLCDUPDATE
DATA32 NUMMAILBOXES
ARRAY8 MOTORISINVERTED 4     
ARRAY8 FIRSTOF2  16
ARRAY16 LOCKS 2           
DATA32 s1out1
DATA32 s1out2
DATA32 s1out3
DATA32 s2out1
DATA32 s2out2
DATA32 s2out3
DATA32 s3out1
DATA32 s3out2
DATA32 s3out3
DATA32 s4out1
DATA32 s4out2
DATA32 s4out3
DATA32 getTachoA
DATA32 tmpTachoA
DATA8 getSpeedA
DATA8 setSpeedA
DATA8 setPowerA
DATA32 getTachoB
DATA32 tmpTachoB
DATA8 getSpeedB
DATA8 setSpeedB
DATA8 setPowerB
DATA32 getTachoC
DATA32 tmpTachoC
DATA8 getSpeedC
DATA8 setSpeedC
DATA8 setPowerC
DATA32 getTachoD
DATA32 tmpTachoD
DATA8 getSpeedD
DATA8 setSpeedD
DATA8 setPowerD
DATA16 newArray1d
DATA32 newSize1d
DATA32 newIndex1d
DATA32 timeMC1
DATA32 timeMC2
DATA32 timeMC3
DATA32 timeMC4
DATA32 timeMC5
DATA32 timeMC6
DATA32 timeMC7
DATA32 timeMC8
DATA32 timeMC9
DATA32 timeMC1tmp
DATA32 timeMC2tmp
DATA32 timeMC3tmp
DATA32 timeMC4tmp
DATA32 timeMC5tmp
DATA32 timeMC6tmp
DATA32 timeMC7tmp
DATA32 timeMC8tmp
DATA32 timeMC9tmp
DATAF VPR_GIRO_G1
DATAF VPR_RGB_VALUENEGRO
DATAF VPR_RGB_VALUEBLANCO
DATAF VPR_RGB_RWHITE
DATAF VPR_RGB_GWHITE
DATAF VPR_RGB_BWHITE
DATAF VPR_RECTO_DIAMETRO
DATAF VPR_GIRO_DIAMETRO
DATAF VPR_SIGUELINEAS_DIAMETRO
DATAF VPR_SMART_DIAMETRO
DATAF VPR_SIGUELINEAS_NEGRO1
DATAF VPR_SIGUELINEAS_NEGRO3
DATAF VPR_SIGUELINEAS_NEGRO4
DATAF VPR_SIGUELINEAS_BLANCO1
DATAF VPR_SIGUELINEAS_BLANCO3
DATAF VPR_SIGUELINEAS_BLANCO4
DATAF VPR_SMART_NEGRO1
DATAF VPR_SMART_NEGRO3
DATAF VPR_SMART_NEGRO4
DATAF VPR_SMART_BLANCO1
DATAF VPR_SMART_BLANCO3
DATAF VPR_SMART_BLANCO4
DATAF VPR_RECTO_NEGRO
DATAF VPR_RECTO_BLANCO
DATAF VPR_GIRO_NEGRO
DATAF VPR_GIRO_BLANCO
DATAF VLV_VELOCIDAD_9
DATAF VLV_TIMER_9
DATAF VLV_VELOCIDAD_10
DATAF VLV_ENCODER_10
DATAF VLV_VELOCIDAD_11
DATAF VLV_DISTANCIA_11
DATAF VLV_VELOCIDAD_18
DATAF VLV_ENCODER_18
DATAF VLV_VELOCIDAD1_25
DATAF VLV_VELOCIDAD2_25
DATAF VLV_GRADOS_25
DATAF VLV_VELOCIDAD1_26
DATAF VLV_VELOCIDAD2_26
DATAF VLV_DISTANCIA_26
DATAF VLV_VELOCIDAD_12
DATAF VLV_SENSOR_12
DATAF VLV_VELOCIDAD_19
DATAF VLV_VELOCIDAD_20
DATAF VLV_ENCODER_20
DATAF VLV_VELOCIDAD_13
DATAF VLV_DISTANCIA_13
DATAF VLV_SENS_30
DATAF VLV_REPS_30
DATAF VLV_COLOR_30
DATAF VLV_VELOCIDAD_14
DATAF VLV_TIEMPO_14
DATAF VLV_VELOCIDAD1_27
DATAF VLV_VELOCIDAD2_27
DATAF VLV_SENS_27
DATAF VLV_VELOCIDAD1_28
DATAF VLV_VELOCIDAD2_28
DATAF VLV_SENS_28
DATAF VLV_VELOCIDAD_21
DATAF VLV_READER_21
DATAF VLV_VELOCIDAD1_29
DATAF VLV_VELOCIDAD2_29
DATAF VLV_DISTANCIA_29
DATAF VLV_VELOCIDAD_15
DATAF VLV_SENSOR_15
DATAF VLV_VELOCIDAD_22
DATAF VLV_READER_22
ARRAY16 VLV_MARKING_6 2
DATAF VLV_VELOCIDAD_16
DATAF VLV_SENSOR_16
DATAF VLV_VELOCIDAD_17
DATAF VLV_SENSOR_17
DATAF VLV_VELOCIDAD_23
DATAF VLV_ENCODER_23
DATAF VLV_VELOCIDAD_24
DATAF VLV_ENCODER_24
DATAF VLV_COLOR_31
DATAF VLV_NUMERO_2
ARRAY16 VLV_MARKING_4 2
DATAS VLV_CODIGO_4 252
DATAF VLV_GRADOS_5
DATAF VGV_MARKINGGRANDE
DATAS VLV_CODIGO_6 252
DATAF VGV_DIAMETRO
DATAF VGV_NEGRO1
DATAF VGV_NEGRO3
DATAF VGV_NEGRO4
DATAF VGV_BLANCO1
DATAF VGV_BLANCO3
DATAF VGV_BLANCO4
DATAF VGV_COLOR
ARRAY16 VGV_MARKING 2
DATAF VLV_VOLTAJE_1
DATAF VLV_AUX_4
DATAF VLV_I_4
DATAF VLV_SIGNO_5
DATAF VLV_ENCDIFF_10
DATAF VLV_SIGNO_10
DATAF VLV_SAFETYTIMER_11
DATAF VLV_CORRECCION_11
DATAF VLV_ENC_11
DATAF VLV_CORRECCION_12
DATAF VLV_LECTURA_12
DATAF VLV_SAFETYTIMER_13
DATAF VLV_CORRECCION_13
DATAF VLV_ENC_13
DATAF VLV_CORRECCION_14
DATAF VLV_CORRECCION_15
DATAF VLV_LECTURA_15
DATAF VLV_CORRECCION_16
DATAF VLV_LECTURA_16
DATAF VLV_CORRECCION_17
DATAF VLV_LECTURA_17
DATAF VLV_LECTURA1_18
DATAF VLV_LECTURA3_18
DATAF VLV_LECTURA4_18
DATAF VLV_KP_18
DATAF VLV_KD_18
DATAF VLV_ERROR_18
DATAF VLV_OLDERROR_18
DATAF VLV_U_18
DATAF VLV_SENTIDO_18
DATAF VLV_STARTC_18
DATAF VLV_ENCODERC_18
DATAF VLV_SAFETYTIMER_18
DATAF VLV_LECTURA1_19
DATAF VLV_LECTURA3_19
DATAF VLV_LECTURA4_19
DATAF VLV_KP_19
DATAF VLV_KD_19
DATAF VLV_ERROR_19
DATAF VLV_OLDERROR_19
DATAF VLV_U_19
DATAF VLV_SENTIDO_19
DATAF VLV_LECTURA1_20
DATAF VLV_LECTURA3_20
DATAF VLV_LECTURA4_20
DATAF VLV_KP_20
DATAF VLV_KD_20
DATAF VLV_ERROR_20
DATAF VLV_OLDERROR_20
DATAF VLV_U_20
DATAF VLV_SENTIDO_20
DATAF VLV_STARTC_20
DATAF VLV_ENCODERC_20
DATAF VLV_SAFETYTIMER_20
DATAF VLV_LECTURA1_21
DATAF VLV_LECTURA3_21
DATAF VLV_LECTURA4_21
DATAF VLV_KP_21
DATAF VLV_KD_21
DATAF VLV_ERROR_21
DATAF VLV_OLDERROR_21
DATAF VLV_U_21
DATAF VLV_SENTIDO_21
DATAF VLV_LECTURA_21
DATAF VLV_LECTURAIZQ_21
DATAF VLV_LECTURADCH_21
DATAF VLV_LECTURA1_22
DATAF VLV_LECTURA3_22
DATAF VLV_LECTURA4_22
DATAF VLV_KP_22
DATAF VLV_KD_22
DATAF VLV_ERROR_22
DATAF VLV_OLDERROR_22
DATAF VLV_U_22
DATAF VLV_SENTIDO_22
DATAF VLV_LECTURA_22
DATAF VLV_LECTURAIZQ_22
DATAF VLV_LECTURADCH_22
DATAF VLV_LECTURA1_23
DATAF VLV_LECTURA3_23
DATAF VLV_LECTURA4_23
DATAF VLV_KP_23
DATAF VLV_KD_23
DATAF VLV_ERROR_23
DATAF VLV_OLDERROR_23
DATAF VLV_U_23
DATAF VLV_SENTIDO_23
DATAF VLV_STARTC_23
DATAF VLV_ENCODERC_23
DATAF VLV_SAFETYTIMER_23
DATAF VLV_LECTURA1_24
DATAF VLV_LECTURA3_24
DATAF VLV_LECTURA4_24
DATAF VLV_KP_24
DATAF VLV_KD_24
DATAF VLV_ERROR_24
DATAF VLV_OLDERROR_24
DATAF VLV_U_24
DATAF VLV_SENTIDO_24
DATAF VLV_STARTC_24
DATAF VLV_ENCODERC_24
DATAF VLV_SAFETYTIMER_24
DATAF VLV_SIGNO_25
DATAF VLV_VMIN_25
DATAF VLV_VMAX_25
DATAF VLV_ENCODER_25
DATAF VLV_ENCODER_26
DATAF VLV_LECTURA_27
DATAF VLV_LECTURA_28
DATAF VLV_ENCODER_29
DATAF VLV_SENS_MODE_30
DATAF VLV_RED_30
DATAF VLV_YELLOW_30
DATAF VLV_GREEN_30
DATAF VLV_BLUE_30
DATAF VLV_HUE_30
DATAF VLV_SAT_30
DATAF VLV_VALUE_30
ARRAY16 VLV_RNORMARRAY_30 2
ARRAY16 VLV_GNORMARRAY_30 2
ARRAY16 VLV_BNORMARRAY_30 2
DATAF VLV_J_30
ARRAY16 VLV_RGB_30 2
DATAF VLV_RRAW_30
DATAF VLV_GRAW_30
DATAF VLV_BRAW_30
DATAF VLV_RNORM_30
DATAF VLV_GNORM_30
DATAF VLV_BNORM_30
DATAF VLV_MAX_30
DATAF VLV_MIN_30
DATAF VLV_RGBGREY_30

vmthread MAIN
{
    MOVE32_32 0 STOPLCDUPDATE
    MOVE32_32 0 NUMMAILBOXES
    OUTPUT_RESET 0 15

	WRITE8 0 0 MOTORISINVERTED
	WRITE8 0 1 MOTORISINVERTED
	WRITE8 0 2 MOTORISINVERTED
	WRITE8 0 3 MOTORISINVERTED
	WRITE8 0 0 FIRSTOF2
	WRITE8 0 1 FIRSTOF2
	WRITE8 0 2 FIRSTOF2
	WRITE8 1 3 FIRSTOF2
	WRITE8 0 4 FIRSTOF2
	WRITE8 1 5 FIRSTOF2
	WRITE8 2 6 FIRSTOF2
	WRITE8 0 7 FIRSTOF2
	WRITE8 0 8 FIRSTOF2
	WRITE8 1 9 FIRSTOF2
	WRITE8 2 10 FIRSTOF2
	WRITE8 0 11 FIRSTOF2
	WRITE8 4 12 FIRSTOF2
	WRITE8 0 13 FIRSTOF2
	WRITE8 0 14 FIRSTOF2
	WRITE8 0 15 FIRSTOF2
    INPUT_DEVICE CLR_ALL -1
    ARRAY CREATE8 0 LOCKS
    MOVE32_32 0 s1out1
	MOVE32_32 0 s1out2
	MOVE32_32 0 s1out3
    MOVE32_32 0 s2out1
	MOVE32_32 0 s2out2
	MOVE32_32 0 s2out3
    MOVE32_32 0 s3out1
	MOVE32_32 0 s3out2
	MOVE32_32 0 s3out3
    MOVE32_32 0 s4out1
	MOVE32_32 0 s4out2
	MOVE32_32 0 s4out3
    MOVE32_32 0 timeMC1
	MOVE32_32 0 timeMC2
	MOVE32_32 0 timeMC3
	MOVE32_32 0 timeMC4
	MOVE32_32 0 timeMC5
	MOVE32_32 0 timeMC6
	MOVE32_32 0 timeMC7
	MOVE32_32 0 timeMC8
	MOVE32_32 0 timeMC9
    MOVEF_F 0.0 VPR_GIRO_G1
    MOVEF_F 0.0 VPR_RGB_VALUENEGRO
    MOVEF_F 0.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 0.0 VPR_RGB_RWHITE
    MOVEF_F 0.0 VPR_RGB_GWHITE
    MOVEF_F 0.0 VPR_RGB_BWHITE
    MOVEF_F 0.0 VPR_RECTO_DIAMETRO
    MOVEF_F 0.0 VPR_GIRO_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F 0.0 VPR_SMART_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F 0.0 VPR_SMART_NEGRO1
    MOVEF_F 0.0 VPR_SMART_NEGRO3
    MOVEF_F 0.0 VPR_SMART_NEGRO4
    MOVEF_F 0.0 VPR_SMART_BLANCO1
    MOVEF_F 0.0 VPR_SMART_BLANCO3
    MOVEF_F 0.0 VPR_SMART_BLANCO4
    MOVEF_F 0.0 VPR_RECTO_NEGRO
    MOVEF_F 0.0 VPR_RECTO_BLANCO
    MOVEF_F 0.0 VPR_GIRO_NEGRO
    MOVEF_F 0.0 VPR_GIRO_BLANCO
    MOVEF_F 0.0 VLV_VELOCIDAD_9
    MOVEF_F 0.0 VLV_TIMER_9
    MOVEF_F 0.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    MOVEF_F 0.0 VLV_VELOCIDAD_11
    MOVEF_F 0.0 VLV_DISTANCIA_11
    MOVEF_F 0.0 VLV_VELOCIDAD_18
    MOVEF_F 0.0 VLV_ENCODER_18
    MOVEF_F 0.0 VLV_VELOCIDAD1_25
    MOVEF_F 0.0 VLV_VELOCIDAD2_25
    MOVEF_F 0.0 VLV_GRADOS_25
    MOVEF_F 0.0 VLV_VELOCIDAD1_26
    MOVEF_F 0.0 VLV_VELOCIDAD2_26
    MOVEF_F 0.0 VLV_DISTANCIA_26
    MOVEF_F 0.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_SENSOR_12
    MOVEF_F 0.0 VLV_VELOCIDAD_19
    MOVEF_F 0.0 VLV_VELOCIDAD_20
    MOVEF_F 0.0 VLV_ENCODER_20
    MOVEF_F 0.0 VLV_VELOCIDAD_13
    MOVEF_F 0.0 VLV_DISTANCIA_13
    MOVEF_F 0.0 VLV_SENS_30
    MOVEF_F 0.0 VLV_REPS_30
    MOVEF_F 0.0 VLV_COLOR_30
    MOVEF_F 0.0 VLV_VELOCIDAD_14
    MOVEF_F 0.0 VLV_TIEMPO_14
    MOVEF_F 0.0 VLV_VELOCIDAD1_27
    MOVEF_F 0.0 VLV_VELOCIDAD2_27
    MOVEF_F 0.0 VLV_SENS_27
    MOVEF_F 0.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 0.0 VLV_SENS_28
    MOVEF_F 0.0 VLV_VELOCIDAD_21
    MOVEF_F 0.0 VLV_READER_21
    MOVEF_F 0.0 VLV_VELOCIDAD1_29
    MOVEF_F 0.0 VLV_VELOCIDAD2_29
    MOVEF_F 0.0 VLV_DISTANCIA_29
    MOVEF_F 0.0 VLV_VELOCIDAD_15
    MOVEF_F 0.0 VLV_SENSOR_15
    MOVEF_F 0.0 VLV_VELOCIDAD_22
    MOVEF_F 0.0 VLV_READER_22
    CALL ARRAYCREATE_FLOAT VLV_MARKING_6
    MOVEF_F 0.0 VLV_VELOCIDAD_16
    MOVEF_F 0.0 VLV_SENSOR_16
    MOVEF_F 0.0 VLV_VELOCIDAD_17
    MOVEF_F 0.0 VLV_SENSOR_17
    MOVEF_F 0.0 VLV_VELOCIDAD_23
    MOVEF_F 0.0 VLV_ENCODER_23
    MOVEF_F 0.0 VLV_VELOCIDAD_24
    MOVEF_F 0.0 VLV_ENCODER_24
    MOVEF_F 0.0 VLV_COLOR_31
    MOVEF_F 0.0 VLV_NUMERO_2
    CALL ARRAYCREATE_FLOAT VLV_MARKING_4
    STRINGS DUPLICATE '' VLV_CODIGO_4
    MOVEF_F 0.0 VLV_GRADOS_5
    MOVEF_F 0.0 VGV_MARKINGGRANDE
    STRINGS DUPLICATE '' VLV_CODIGO_6
    MOVEF_F 0.0 VGV_DIAMETRO
    MOVEF_F 0.0 VGV_NEGRO1
    MOVEF_F 0.0 VGV_NEGRO3
    MOVEF_F 0.0 VGV_NEGRO4
    MOVEF_F 0.0 VGV_BLANCO1
    MOVEF_F 0.0 VGV_BLANCO3
    MOVEF_F 0.0 VGV_BLANCO4
    MOVEF_F 0.0 VGV_COLOR
    CALL ARRAYCREATE_FLOAT VGV_MARKING
    MOVEF_F 0.0 VLV_VOLTAJE_1
    MOVEF_F 0.0 VLV_AUX_4
    MOVEF_F 0.0 VLV_I_4
    MOVEF_F 0.0 VLV_SIGNO_5
    MOVEF_F 0.0 VLV_ENCDIFF_10
    MOVEF_F 0.0 VLV_SIGNO_10
    MOVEF_F 0.0 VLV_SAFETYTIMER_11
    MOVEF_F 0.0 VLV_CORRECCION_11
    MOVEF_F 0.0 VLV_ENC_11
    MOVEF_F 0.0 VLV_CORRECCION_12
    MOVEF_F 0.0 VLV_LECTURA_12
    MOVEF_F 0.0 VLV_SAFETYTIMER_13
    MOVEF_F 0.0 VLV_CORRECCION_13
    MOVEF_F 0.0 VLV_ENC_13
    MOVEF_F 0.0 VLV_CORRECCION_14
    MOVEF_F 0.0 VLV_CORRECCION_15
    MOVEF_F 0.0 VLV_LECTURA_15
    MOVEF_F 0.0 VLV_CORRECCION_16
    MOVEF_F 0.0 VLV_LECTURA_16
    MOVEF_F 0.0 VLV_CORRECCION_17
    MOVEF_F 0.0 VLV_LECTURA_17
    MOVEF_F 0.0 VLV_LECTURA1_18
    MOVEF_F 0.0 VLV_LECTURA3_18
    MOVEF_F 0.0 VLV_LECTURA4_18
    MOVEF_F 0.0 VLV_KP_18
    MOVEF_F 0.0 VLV_KD_18
    MOVEF_F 0.0 VLV_ERROR_18
    MOVEF_F 0.0 VLV_OLDERROR_18
    MOVEF_F 0.0 VLV_U_18
    MOVEF_F 0.0 VLV_SENTIDO_18
    MOVEF_F 0.0 VLV_STARTC_18
    MOVEF_F 0.0 VLV_ENCODERC_18
    MOVEF_F 0.0 VLV_SAFETYTIMER_18
    MOVEF_F 0.0 VLV_LECTURA1_19
    MOVEF_F 0.0 VLV_LECTURA3_19
    MOVEF_F 0.0 VLV_LECTURA4_19
    MOVEF_F 0.0 VLV_KP_19
    MOVEF_F 0.0 VLV_KD_19
    MOVEF_F 0.0 VLV_ERROR_19
    MOVEF_F 0.0 VLV_OLDERROR_19
    MOVEF_F 0.0 VLV_U_19
    MOVEF_F 0.0 VLV_SENTIDO_19
    MOVEF_F 0.0 VLV_LECTURA1_20
    MOVEF_F 0.0 VLV_LECTURA3_20
    MOVEF_F 0.0 VLV_LECTURA4_20
    MOVEF_F 0.0 VLV_KP_20
    MOVEF_F 0.0 VLV_KD_20
    MOVEF_F 0.0 VLV_ERROR_20
    MOVEF_F 0.0 VLV_OLDERROR_20
    MOVEF_F 0.0 VLV_U_20
    MOVEF_F 0.0 VLV_SENTIDO_20
    MOVEF_F 0.0 VLV_STARTC_20
    MOVEF_F 0.0 VLV_ENCODERC_20
    MOVEF_F 0.0 VLV_SAFETYTIMER_20
    MOVEF_F 0.0 VLV_LECTURA1_21
    MOVEF_F 0.0 VLV_LECTURA3_21
    MOVEF_F 0.0 VLV_LECTURA4_21
    MOVEF_F 0.0 VLV_KP_21
    MOVEF_F 0.0 VLV_KD_21
    MOVEF_F 0.0 VLV_ERROR_21
    MOVEF_F 0.0 VLV_OLDERROR_21
    MOVEF_F 0.0 VLV_U_21
    MOVEF_F 0.0 VLV_SENTIDO_21
    MOVEF_F 0.0 VLV_LECTURA_21
    MOVEF_F 0.0 VLV_LECTURAIZQ_21
    MOVEF_F 0.0 VLV_LECTURADCH_21
    MOVEF_F 0.0 VLV_LECTURA1_22
    MOVEF_F 0.0 VLV_LECTURA3_22
    MOVEF_F 0.0 VLV_LECTURA4_22
    MOVEF_F 0.0 VLV_KP_22
    MOVEF_F 0.0 VLV_KD_22
    MOVEF_F 0.0 VLV_ERROR_22
    MOVEF_F 0.0 VLV_OLDERROR_22
    MOVEF_F 0.0 VLV_U_22
    MOVEF_F 0.0 VLV_SENTIDO_22
    MOVEF_F 0.0 VLV_LECTURA_22
    MOVEF_F 0.0 VLV_LECTURAIZQ_22
    MOVEF_F 0.0 VLV_LECTURADCH_22
    MOVEF_F 0.0 VLV_LECTURA1_23
    MOVEF_F 0.0 VLV_LECTURA3_23
    MOVEF_F 0.0 VLV_LECTURA4_23
    MOVEF_F 0.0 VLV_KP_23
    MOVEF_F 0.0 VLV_KD_23
    MOVEF_F 0.0 VLV_ERROR_23
    MOVEF_F 0.0 VLV_OLDERROR_23
    MOVEF_F 0.0 VLV_U_23
    MOVEF_F 0.0 VLV_SENTIDO_23
    MOVEF_F 0.0 VLV_STARTC_23
    MOVEF_F 0.0 VLV_ENCODERC_23
    MOVEF_F 0.0 VLV_SAFETYTIMER_23
    MOVEF_F 0.0 VLV_LECTURA1_24
    MOVEF_F 0.0 VLV_LECTURA3_24
    MOVEF_F 0.0 VLV_LECTURA4_24
    MOVEF_F 0.0 VLV_KP_24
    MOVEF_F 0.0 VLV_KD_24
    MOVEF_F 0.0 VLV_ERROR_24
    MOVEF_F 0.0 VLV_OLDERROR_24
    MOVEF_F 0.0 VLV_U_24
    MOVEF_F 0.0 VLV_SENTIDO_24
    MOVEF_F 0.0 VLV_STARTC_24
    MOVEF_F 0.0 VLV_ENCODERC_24
    MOVEF_F 0.0 VLV_SAFETYTIMER_24
    MOVEF_F 0.0 VLV_SIGNO_25
    MOVEF_F 0.0 VLV_VMIN_25
    MOVEF_F 0.0 VLV_VMAX_25
    MOVEF_F 0.0 VLV_ENCODER_25
    MOVEF_F 0.0 VLV_ENCODER_26
    MOVEF_F 0.0 VLV_LECTURA_27
    MOVEF_F 0.0 VLV_LECTURA_28
    MOVEF_F 0.0 VLV_ENCODER_29
    MOVEF_F 0.0 VLV_SENS_MODE_30
    MOVEF_F 0.0 VLV_RED_30
    MOVEF_F 0.0 VLV_YELLOW_30
    MOVEF_F 0.0 VLV_GREEN_30
    MOVEF_F 0.0 VLV_BLUE_30
    MOVEF_F 0.0 VLV_HUE_30
    MOVEF_F 0.0 VLV_SAT_30
    MOVEF_F 0.0 VLV_VALUE_30
    CALL ARRAYCREATE_FLOAT VLV_RNORMARRAY_30
    CALL ARRAYCREATE_FLOAT VLV_GNORMARRAY_30
    CALL ARRAYCREATE_FLOAT VLV_BNORMARRAY_30
    MOVEF_F 0.0 VLV_J_30
    CALL ARRAYCREATE_FLOAT VLV_RGB_30
    MOVEF_F 0.0 VLV_RRAW_30
    MOVEF_F 0.0 VLV_GRAW_30
    MOVEF_F 0.0 VLV_BRAW_30
    MOVEF_F 0.0 VLV_RNORM_30
    MOVEF_F 0.0 VLV_GNORM_30
    MOVEF_F 0.0 VLV_BNORM_30
    MOVEF_F 0.0 VLV_MAX_30
    MOVEF_F 0.0 VLV_MIN_30
    MOVEF_F 0.0 VLV_RGBGREY_30
    ARRAY CREATE8 1 LOCKS
    CALL PROGRAM_MAIN -1
    PROGRAM_STOP -1
}
subcall PROGRAM_MAIN
{
    IN_32 SUBPROGRAM
    DATA32 INDEX
    ARRAY8 STACKPOINTER 4
    DATAF F.0
    DATAF F.1
    DATAF F.2
    DATAF F.3
    DATAF F.4
    ARRAY32 RETURNSTACK2 128
    ARRAY32 RETURNSTACK 128
    DATAS S.0 252
    DATAS S.1 252
    MOVE8_8 0 STACKPOINTER
    MOVEF_F 0.0 VPR_GIRO_G1
    MOVEF_F 0.0 VPR_RGB_VALUENEGRO
    MOVEF_F 0.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 0.0 VPR_RGB_RWHITE
    MOVEF_F 0.0 VPR_RGB_GWHITE
    MOVEF_F 0.0 VPR_RGB_BWHITE
    MOVEF_F 0.0 VPR_RECTO_DIAMETRO
    MOVEF_F 0.0 VPR_GIRO_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F 0.0 VPR_SMART_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F 0.0 VPR_SMART_NEGRO1
    MOVEF_F 0.0 VPR_SMART_NEGRO3
    MOVEF_F 0.0 VPR_SMART_NEGRO4
    MOVEF_F 0.0 VPR_SMART_BLANCO1
    MOVEF_F 0.0 VPR_SMART_BLANCO3
    MOVEF_F 0.0 VPR_SMART_BLANCO4
    MOVEF_F 0.0 VPR_RECTO_NEGRO
    MOVEF_F 0.0 VPR_RECTO_BLANCO
    MOVEF_F 0.0 VPR_GIRO_NEGRO
    MOVEF_F 0.0 VPR_GIRO_BLANCO
    MOVEF_F 0.0 VLV_VELOCIDAD_9
    MOVEF_F 0.0 VLV_TIMER_9
    MOVEF_F 0.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    MOVEF_F 0.0 VLV_VELOCIDAD_11
    MOVEF_F 0.0 VLV_DISTANCIA_11
    MOVEF_F 0.0 VLV_VELOCIDAD_18
    MOVEF_F 0.0 VLV_ENCODER_18
    MOVEF_F 0.0 VLV_VELOCIDAD1_25
    MOVEF_F 0.0 VLV_VELOCIDAD2_25
    MOVEF_F 0.0 VLV_GRADOS_25
    MOVEF_F 0.0 VLV_VELOCIDAD1_26
    MOVEF_F 0.0 VLV_VELOCIDAD2_26
    MOVEF_F 0.0 VLV_DISTANCIA_26
    MOVEF_F 0.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_SENSOR_12
    MOVEF_F 0.0 VLV_VELOCIDAD_19
    MOVEF_F 0.0 VLV_VELOCIDAD_20
    MOVEF_F 0.0 VLV_ENCODER_20
    MOVEF_F 0.0 VLV_VELOCIDAD_13
    MOVEF_F 0.0 VLV_DISTANCIA_13
    MOVEF_F 0.0 VLV_SENS_30
    MOVEF_F 0.0 VLV_REPS_30
    MOVEF_F 0.0 VLV_COLOR_30
    MOVEF_F 0.0 VLV_VELOCIDAD_14
    MOVEF_F 0.0 VLV_TIEMPO_14
    MOVEF_F 0.0 VLV_VELOCIDAD1_27
    MOVEF_F 0.0 VLV_VELOCIDAD2_27
    MOVEF_F 0.0 VLV_SENS_27
    MOVEF_F 0.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 0.0 VLV_SENS_28
    MOVEF_F 0.0 VLV_VELOCIDAD_21
    MOVEF_F 0.0 VLV_READER_21
    MOVEF_F 0.0 VLV_VELOCIDAD1_29
    MOVEF_F 0.0 VLV_VELOCIDAD2_29
    MOVEF_F 0.0 VLV_DISTANCIA_29
    MOVEF_F 0.0 VLV_VELOCIDAD_15
    MOVEF_F 0.0 VLV_SENSOR_15
    MOVEF_F 0.0 VLV_VELOCIDAD_22
    MOVEF_F 0.0 VLV_READER_22
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_MARKING_6
    MOVEF_F 0.0 VLV_VELOCIDAD_16
    MOVEF_F 0.0 VLV_SENSOR_16
    MOVEF_F 0.0 VLV_VELOCIDAD_17
    MOVEF_F 0.0 VLV_SENSOR_17
    MOVEF_F 0.0 VLV_VELOCIDAD_23
    MOVEF_F 0.0 VLV_ENCODER_23
    MOVEF_F 0.0 VLV_VELOCIDAD_24
    MOVEF_F 0.0 VLV_ENCODER_24
    MOVEF_F 0.0 VLV_COLOR_31
    MOVEF_F 0.0 VLV_NUMERO_2
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_MARKING_4
    STRINGS DUPLICATE '' VLV_CODIGO_4
    MOVEF_F 0.0 VLV_GRADOS_5
    MOVEF_F 0.0 VGV_MARKINGGRANDE
    STRINGS DUPLICATE '' VLV_CODIGO_6
    MOVEF_F 0.0 VGV_DIAMETRO
    MOVEF_F 0.0 VGV_NEGRO1
    MOVEF_F 0.0 VGV_NEGRO3
    MOVEF_F 0.0 VGV_NEGRO4
    MOVEF_F 0.0 VGV_BLANCO1
    MOVEF_F 0.0 VGV_BLANCO3
    MOVEF_F 0.0 VGV_BLANCO4
    MOVEF_F 0.0 VGV_COLOR
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VGV_MARKING
    WRITE32 ENDSUB_F_SETUP_0:CALLSUB3 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SETUP_0
CALLSUB3:
    WRITE32 ENDSUB_F_MAINPRUEBA_0:CALLSUB4 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_MAINPRUEBA_0
CALLSUB4:
ENDTHREAD:
    RETURN
SUB_F_SETUP_0:
    DATA8 layer5
	DATA8 no5
	DATA8 mode85
	
	MOVEF_8 1.0 no5
	SUB8 no5 1 no5
	DIV8 no5 4 layer5
	MATH MOD8 no5 4 no5

	MOVEF_8 0.0 mode85
	
	INPUT_DEVICE READY_RAW layer5 no5 0 mode85 0
    DATA8 layer6
	DATA8 no6
	DATA8 mode86
	
	MOVEF_8 2.0 no6
	SUB8 no6 1 no6
	DIV8 no6 4 layer6
	MATH MOD8 no6 4 no6

	MOVEF_8 4.0 mode86
	
	INPUT_DEVICE READY_RAW layer6 no6 0 mode86 0
    DATA8 layer7
	DATA8 no7
	DATA8 mode87
	
	MOVEF_8 3.0 no7
	SUB8 no7 1 no7
	DIV8 no7 4 layer7
	MATH MOD8 no7 4 no7

	MOVEF_8 0.0 mode87
	
	INPUT_DEVICE READY_RAW layer7 no7 0 mode87 0
    DATA8 layer8
	DATA8 no8
	DATA8 mode88
	
	MOVEF_8 4.0 no8
	SUB8 no8 1 no8
	DIV8 no8 4 layer8
	MATH MOD8 no8 4 no8

	MOVEF_8 0.0 mode88
	
	INPUT_DEVICE READY_RAW layer8 no8 0 mode88 0
    MOVEF_F 6.24 VGV_DIAMETRO
    MOVEF_F 2.68055555555556 VPR_GIRO_G1
    MOVEF_F 10.0 VGV_NEGRO1
    MOVEF_F 9.0 VGV_NEGRO3
    MOVEF_F 8.0 VGV_NEGRO4
    MOVEF_F 65.0 VGV_BLANCO1
    MOVEF_F 59.0 VGV_BLANCO3
    MOVEF_F 55.0 VGV_BLANCO4
    MOVEF_F 4.0 VPR_RGB_VALUENEGRO
    MOVEF_F 32.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 57.0 VPR_RGB_RWHITE
    MOVEF_F 71.0 VPR_RGB_GWHITE
    MOVEF_F 73.0 VPR_RGB_BWHITE
    MOVEF_F VGV_DIAMETRO VPR_RECTO_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_GIRO_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_SMART_DIAMETRO
    MOVEF_F VGV_NEGRO1 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F VGV_NEGRO3 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F VGV_NEGRO4 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F VGV_BLANCO1 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F VGV_BLANCO3 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F VGV_BLANCO4 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F VGV_NEGRO1 VPR_SMART_NEGRO1
    MOVEF_F VGV_NEGRO3 VPR_SMART_NEGRO3
    MOVEF_F VGV_NEGRO4 VPR_SMART_NEGRO4
    MOVEF_F VGV_BLANCO1 VPR_SMART_BLANCO1
    MOVEF_F VGV_BLANCO3 VPR_SMART_BLANCO3
    MOVEF_F VGV_BLANCO4 VPR_SMART_BLANCO4
    ADDF VGV_NEGRO1 VGV_NEGRO3 F.1
    ADDF F.1 VGV_NEGRO4 F.0
    DATAF tmpf11
    DATA8 flag11
    DIVF F.0 3.0 tmpf11
    CP_EQF 0.0 3.0 flag11
    SELECTF flag11 0.0 tmpf11 VPR_RECTO_NEGRO

    ADDF VGV_BLANCO1 VGV_BLANCO3 F.1
    ADDF F.1 VGV_BLANCO4 F.0
    DATAF tmpf14
    DATA8 flag14
    DIVF F.0 3.0 tmpf14
    CP_EQF 0.0 3.0 flag14
    SELECTF flag14 0.0 tmpf14 VPR_RECTO_BLANCO

    ADDF VGV_NEGRO1 VGV_NEGRO3 F.1
    ADDF F.1 VGV_NEGRO4 F.0
    DATAF tmpf17
    DATA8 flag17
    DIVF F.0 3.0 tmpf17
    CP_EQF 0.0 3.0 flag17
    SELECTF flag17 0.0 tmpf17 VPR_GIRO_NEGRO

    ADDF VGV_BLANCO1 VGV_BLANCO3 F.1
    ADDF F.1 VGV_BLANCO4 F.0
    DATAF tmpf20
    DATA8 flag20
    DIVF F.0 3.0 tmpf20
    CP_EQF 0.0 3.0 flag20
    SELECTF flag20 0.0 tmpf20 VPR_GIRO_BLANCO

    MOVEF_F 0.0 VGV_COLOR
RETSUB_F_SETUP_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SETUP_0:
SUB_F_STARTARM_0:
    MOVEF_F 100.0 VLV_VELOCIDAD_9
    MOVEF_F 1000.0 VLV_TIMER_9
    WRITE32 ENDSUB_M_BRAZO_ATIMER_2:CALLSUB21 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_ATIMER_2
CALLSUB21:
    OUTPUT_CLR_COUNT 0 1
    DATA32 milliseconds23
	MOVEF_32 100.0 milliseconds23
	DATA32 timer23
	TIMER_WAIT milliseconds23 timer23
	TIMER_READY timer23
    MOVEF_F 35.0 VLV_VELOCIDAD_10
    MOVEF_F -200.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB24 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB24:
    OUTPUT_CLR_COUNT 0 1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Connect'
    SOUND_READY
RETSUB_F_STARTARM_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_STARTARM_0:
SUB_F_MAINPRUEBA_0:
    MOVEF_F 5.0 VGV_MARKINGGRANDE
    CALL ARRAYSTORE_FLOAT 0.0 3.0 VGV_MARKING
    CALL ARRAYSTORE_FLOAT 1.0 4.0 VGV_MARKING
    CALL ARRAYSTORE_FLOAT 2.0 2.0 VGV_MARKING
    CALL ARRAYSTORE_FLOAT 3.0 5.0 VGV_MARKING
    WRITE32 ENDSUB_F_GRITARVOLTAJE_0:CALLSUB32 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARVOLTAJE_0
CALLSUB32:
    WRITE32 ENDSUB_F_STARTARM_0:CALLSUB33 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_STARTARM_0
CALLSUB33:
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Two'
    WRITE32 ENDSUB_F_S_0:CALLSUB35 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_S_0
CALLSUB35:
    OUTPUT_CLR_COUNT 0 8
    DATA32 milliseconds37
	MOVEF_32 150.0 milliseconds37
	DATA32 timer37
	TIMER_WAIT milliseconds37 timer37
	TIMER_READY timer37
    MOVEF_F 35.0 VLV_VELOCIDAD_10
    MOVEF_F -250.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB38 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB38:
    OUTPUT_POWER 0 1 0
	OUTPUT_STOP 0 1 1
    DATA32 milliseconds40
	MOVEF_32 500.0 milliseconds40
	DATA32 timer40
	TIMER_WAIT milliseconds40 timer40
	TIMER_READY timer40
    MOVEF_F 40.0 VLV_VELOCIDAD_22
    MOVEF_F 4.0 VLV_READER_22
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:CALLSUB41 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2
CALLSUB41:
    MOVEF_F 80.0 VLV_VELOCIDAD_20
    MOVEF_F 80.0 VLV_ENCODER_20
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB42 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB42:
    MOVEF_F 30.0 VLV_VELOCIDAD_20
    MOVEF_F 15.0 VLV_ENCODER_20
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31F_2:CALLSUB43 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31F_2
CALLSUB43:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 20.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB44 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB44:
    MOVEF_F 15.0 VLV_VELOCIDAD1_25
    MOVEF_F -15.0 VLV_VELOCIDAD2_25
    MOVEF_F 92.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB45 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB45:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 8.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB46 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB46:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -740.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB47 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB47:
    JR_NEQF VGV_MARKINGGRANDE 5.0 else48_1
    CALL MOTOR.SCHEDULE 'D' -60.0 0.0 90.0 0.0 'true' 

	DATA8 layer49
	DATA8 nos49
	DATA8 busy49
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer49 nos49
	JR_EQ8 0 nos49 motornotbusy49
  motorwaiting49:
	OUTPUT_TEST layer49 nos49 busy49
	JR_EQ8 busy49 0 motornotbusy49
	SLEEP
	JR motorwaiting49
  motornotbusy49:
    JR endif48
  else48_1:
    SUBF VGV_MARKINGGRANDE 2.0 F.1
    MULF F.1 90.0 F.0
    CALL MOTOR.SCHEDULE 'D' 60.0 0.0 F.0 0.0 'true' 

	DATA8 layer52
	DATA8 nos52
	DATA8 busy52
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer52 nos52
	JR_EQ8 0 nos52 motornotbusy52
  motorwaiting52:
	OUTPUT_TEST layer52 nos52 busy52
	JR_EQ8 busy52 0 motornotbusy52
	SLEEP
	JR motorwaiting52
  motornotbusy52:
  else48_2:
  endif48:
    MOVEF_F 80.0 VLV_VELOCIDAD1_26
    MOVEF_F 78.0 VLV_VELOCIDAD2_26
    MOVEF_F 28.0 VLV_DISTANCIA_26
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB53 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB53:
    MOVEF_F 40.0 VLV_VELOCIDAD_15
    MOVEF_F 1.0 VLV_SENSOR_15
    WRITE32 ENDSUB_M_RECTO_BLANCO1_2:CALLSUB54 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_BLANCO1_2
CALLSUB54:
    MOVEF_F -20.0 VLV_VELOCIDAD_13
    MOVEF_F 1.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB55 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB55:
    CALL MOTOR.STOP 'BC' 'True'
    DATA32 milliseconds57
	MOVEF_32 150.0 milliseconds57
	DATA32 timer57
	TIMER_WAIT milliseconds57 timer57
	TIMER_READY timer57
    MOVEF_F 15.0 VLV_VELOCIDAD1_25
    MOVEF_F -15.0 VLV_VELOCIDAD2_25
    MOVEF_F 100.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB58 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB58:
    MOVEF_F 80.0 VLV_VELOCIDAD_13
    MOVEF_F 56.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB59 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB59:
    MOVEF_F 40.0 VLV_VELOCIDAD_10
    MOVEF_F -500.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB60 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB60:
    JR_EQF VGV_MARKINGGRANDE 5.0 or62
    JR_NEQF VGV_MARKINGGRANDE 3.0 else61_1
  or62:
    CALL MOTOR.SCHEDULE 'D' 60.0 0.0 -90.0 0.0 'true' 

	DATA8 layer63
	DATA8 nos63
	DATA8 busy63
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer63 nos63
	JR_EQ8 0 nos63 motornotbusy63
  motorwaiting63:
	OUTPUT_TEST layer63 nos63 busy63
	JR_EQ8 busy63 0 motornotbusy63
	SLEEP
	JR motorwaiting63
  motornotbusy63:
  else61_1:
  endif61:
    MOVEF_F 40.0 VLV_VELOCIDAD_10
    MOVEF_F -330.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB64 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB64:
    MOVEF_F -60.0 VLV_VELOCIDAD_13
    MOVEF_F 27.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB65 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB65:
    MOVEF_F 30.0 VLV_VELOCIDAD1_25
    MOVEF_F -30.0 VLV_VELOCIDAD2_25
    MOVEF_F 90.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB66 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB66:
    MOVEF_F -70.0 VLV_VELOCIDAD_13
    MOVEF_F 12.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB67 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB67:
    MOVEF_F -30.0 VLV_VELOCIDAD_14
    MOVEF_F 800.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB68 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB68:
    MOVEF_F 30.0 VLV_VELOCIDAD_11
    MOVEF_F 3.0 VLV_DISTANCIA_11
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB69 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB69:
    MOVEF_F 100.0 VLV_VELOCIDAD_9
    MOVEF_F 600.0 VLV_TIMER_9
    WRITE32 ENDSUB_M_BRAZO_ATIMER_2:CALLSUB70 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_ATIMER_2
CALLSUB70:
    MOVEF_F 100.0 VLV_VELOCIDAD_10
    MOVEF_F -300.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB71 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB71:
    MOVEF_F 35.0 VLV_VELOCIDAD1_25
    MOVEF_F -3.0 VLV_VELOCIDAD2_25
    MOVEF_F 95.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB72 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB72:
    MOVEF_F 20.0 VLV_VELOCIDAD_22
    MOVEF_F 4.0 VLV_READER_22
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:CALLSUB73 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2
CALLSUB73:
    MOVEF_F 30.0 VLV_VELOCIDAD1_25
    MOVEF_F -8.0 VLV_VELOCIDAD2_25
    MOVEF_F 92.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB74 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB74:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 6.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB75 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB75:
    DATA32 milliseconds76
	MOVEF_32 200.0 milliseconds76
	DATA32 timer76
	TIMER_WAIT milliseconds76 timer76
	TIMER_READY timer76
    ARRAY COPY VGV_MARKING VLV_MARKING_6
    WRITE32 ENDSUB_F_ORDENARBLOQUES_1:CALLSUB77 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ORDENARBLOQUES_1
CALLSUB77:
    MOVEF_F 30.0 VLV_VELOCIDAD_13
    MOVEF_F 10.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB78 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB78:
    MOVEF_F 30.0 VLV_VELOCIDAD_21
    MOVEF_F 3.0 VLV_READER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB79 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB79:
    MOVEF_F -14.0 VLV_VELOCIDAD1_25
    MOVEF_F 30.0 VLV_VELOCIDAD2_25
    MOVEF_F 95.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB80 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB80:
    MOVEF_F 35.0 VLV_VELOCIDAD_18
    MOVEF_F 20.0 VLV_ENCODER_18
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB81 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB81:
    MOVEF_F 35.0 VLV_VELOCIDAD1_26
    MOVEF_F 34.0 VLV_VELOCIDAD2_26
    MOVEF_F 44.0 VLV_DISTANCIA_26
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB82 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB82:
    MOVEF_F 10.0 VLV_VELOCIDAD1_25
    MOVEF_F -10.0 VLV_VELOCIDAD2_25
    MOVEF_F 105.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB83 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB83:
    MOVEF_F -60.0 VLV_VELOCIDAD_14
    MOVEF_F 1000.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB84 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB84:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 3.5 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB85 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB85:
    MOVEF_F 20.0 VLV_VELOCIDAD1_25
    MOVEF_F -20.0 VLV_VELOCIDAD2_25
    MOVEF_F 105.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB86 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB86:
    MOVEF_F 35.0 VLV_VELOCIDAD_14
    MOVEF_F 700.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB87 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB87:
    MOVEF_F 50.0 VLV_VELOCIDAD_10
    MOVEF_F -330.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB88 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB88:
    MOVEF_F -15.0 VLV_VELOCIDAD_13
    MOVEF_F 9.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB89 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB89:
    MOVEF_F 15.0 VLV_VELOCIDAD_13
    MOVEF_F 8.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB90 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB90:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB91 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB91:
    MOVEF_F -15.0 VLV_VELOCIDAD_13
    MOVEF_F 9.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB92 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB92:
    MOVEF_F 15.0 VLV_VELOCIDAD_13
    MOVEF_F 17.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB93 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB93:
    MOVEF_F -15.0 VLV_VELOCIDAD_13
    MOVEF_F 5.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB94 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB94:
    MOVEF_F -15.0 VLV_VELOCIDAD1_25
    MOVEF_F 15.0 VLV_VELOCIDAD2_25
    MOVEF_F 88.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB95 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB95:
    MOVEF_F -30.0 VLV_VELOCIDAD_14
    MOVEF_F 500.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB96 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB96:
    MOVEF_F 15.0 VLV_VELOCIDAD_13
    MOVEF_F 12.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB97 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB97:
    MOVEF_F -10.0 VLV_VELOCIDAD1_25
    MOVEF_F 10.0 VLV_VELOCIDAD2_25
    MOVEF_F 9.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB98 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB98:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -170.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB99 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB99:
    MOVEF_F 10.0 VLV_VELOCIDAD_13
    MOVEF_F 5.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB100 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB100:
    MOVEF_F -10.0 VLV_VELOCIDAD_13
    MOVEF_F 5.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB101 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB101:
    MOVEF_F 50.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB102 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB102:
    MOVEF_F 10.0 VLV_VELOCIDAD1_25
    MOVEF_F -10.0 VLV_VELOCIDAD2_25
    MOVEF_F 25.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB103 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB103:
    MOVEF_F 100.0 VLV_VELOCIDAD_11
    MOVEF_F 60.0 VLV_DISTANCIA_11
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB104 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB104:
    MOVEF_F 40.0 VLV_VELOCIDAD_16
    MOVEF_F 1.0 VLV_SENSOR_16
    WRITE32 ENDSUB_M_RECTO_BLANCO1F_2:CALLSUB105 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_BLANCO1F_2
CALLSUB105:
    MOVEF_F 20.0 VLV_VELOCIDAD_17
    MOVEF_F 1.0 VLV_SENSOR_17
    WRITE32 ENDSUB_M_RECTO_NEGRO1F_2:CALLSUB106 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_NEGRO1F_2
CALLSUB106:
    MOVEF_F -18.0 VLV_VELOCIDAD1_25
    MOVEF_F 30.0 VLV_VELOCIDAD2_25
    MOVEF_F 93.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB107 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB107:
    MOVEF_F 40.0 VLV_VELOCIDAD_23
    MOVEF_F 10.0 VLV_ENCODER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB108 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB108:
    MOVEF_F 80.0 VLV_VELOCIDAD_23
    MOVEF_F 70.0 VLV_ENCODER_23
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14F_2:CALLSUB109 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14F_2
CALLSUB109:
    MOVEF_F 40.0 VLV_VELOCIDAD_21
    MOVEF_F 3.0 VLV_READER_21
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:CALLSUB110 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2
CALLSUB110:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 2.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB111 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB111:
    MOVEF_F -16.0 VLV_VELOCIDAD1_25
    MOVEF_F 30.0 VLV_VELOCIDAD2_25
    MOVEF_F 93.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB112 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB112:
    MOVEF_F 50.0 VLV_VELOCIDAD_24
    MOVEF_F 40.0 VLV_ENCODER_24
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER31_2:CALLSUB113 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER31_2
CALLSUB113:
    MOVEF_F 50.0 VLV_VELOCIDAD_13
    MOVEF_F 30.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB114 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB114:
    MOVEF_F 40.0 VLV_VELOCIDAD_14
    MOVEF_F 1000.0 VLV_TIEMPO_14
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB115 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB115:
    MOVEF_F 8.0 VLV_VELOCIDAD1_25
    MOVEF_F -32.0 VLV_VELOCIDAD2_25
    MOVEF_F 94.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB116 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB116:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -300.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB117 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB117:
    MOVEF_F 30.0 VLV_VELOCIDAD_13
    MOVEF_F 20.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB118 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB118:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB119 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB119:
    MOVEF_F -30.0 VLV_VELOCIDAD_13
    MOVEF_F 13.2 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB120 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB120:
RETSUB_F_MAINPRUEBA_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_MAINPRUEBA_0:
SUB_F_GRITARCOLOR_0:
    MOVEF_F VGV_COLOR VLV_COLOR_31
    WRITE32 ENDSUB_M_RGB_GRITAR_1:CALLSUB121 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_GRITAR_1
CALLSUB121:
RETSUB_F_GRITARCOLOR_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARCOLOR_0:
SUB_F_GRITARVOLTAJE_0:
    CALL EV3.BATTERYVOLTAGE VLV_VOLTAJE_1
    MATH FLOOR VLV_VOLTAJE_1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB124 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB124:
    MULF VLV_VOLTAJE_1 10.0 F.1
    MATH FLOOR F.1 F.0
    MATH FLOOR VLV_VOLTAJE_1 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB130 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB130:
    MULF VLV_VOLTAJE_1 100.0 F.1
    MATH FLOOR F.1 F.0
    MULF VLV_VOLTAJE_1 10.0 F.3
    MATH FLOOR F.3 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_2
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB137 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB137:
RETSUB_F_GRITARVOLTAJE_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARVOLTAJE_0:
SUB_F_GRITARNUMERO_1:
    JR_NEQF VLV_NUMERO_2 0.0 else138_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/ZERO'
    JR endif138
  else138_1:
    JR_NEQF VLV_NUMERO_2 1.0 else138_2
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/One'
    JR endif138
  else138_2:
    JR_NEQF VLV_NUMERO_2 2.0 else138_3
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Two'
    JR endif138
  else138_3:
    JR_NEQF VLV_NUMERO_2 3.0 else138_4
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Three'
    JR endif138
  else138_4:
    JR_NEQF VLV_NUMERO_2 4.0 else138_5
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Four'
    JR endif138
  else138_5:
    JR_NEQF VLV_NUMERO_2 5.0 else138_6
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Five'
    JR endif138
  else138_6:
    JR_NEQF VLV_NUMERO_2 6.0 else138_7
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Six'
    JR endif138
  else138_7:
    JR_NEQF VLV_NUMERO_2 7.0 else138_8
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Seven'
    JR endif138
  else138_8:
    JR_NEQF VLV_NUMERO_2 8.0 else138_9
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Eight'
    JR endif138
  else138_9:
    JR_NEQF VLV_NUMERO_2 9.0 else138_10
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Nine'
    JR endif138
  else138_10:
    JR_NEQF VLV_NUMERO_2 10.0 else138_11
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Ten'
  else138_11:
  endif138:
    SOUND_READY
RETSUB_F_GRITARNUMERO_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARNUMERO_1:
SUB_F_BAJARCUADRO_0:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -780.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB151 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB151:
RETSUB_F_BAJARCUADRO_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_BAJARCUADRO_0:
SUB_F_CODIGO_2:
    STRINGS DUPLICATE '' VLV_CODIGO_4
    CALL ARRAYGET_FLOAT 2.0 VLV_AUX_4 VLV_MARKING_4
    CALL ARRAYGET_FLOAT 3.0 F.0 VLV_MARKING_4
    CALL ARRAYSTORE_FLOAT 2.0 F.0 VLV_MARKING_4
    CALL ARRAYSTORE_FLOAT 3.0 VLV_AUX_4 VLV_MARKING_4
    MOVEF_F 0.0 VLV_I_4
  for156:
    JR_GTF VLV_I_4 4.0 endfor156
  forbody156:
    CALL ARRAYGET_FLOAT VLV_I_4 F.0 VLV_MARKING_4
    JR_NEQF F.0 2.0 else157_1
    CALL TEXT.APPEND VLV_CODIGO_4 'Z' VLV_CODIGO_4
    JR endif157
  else157_1:
    CALL ARRAYGET_FLOAT VLV_I_4 F.0 VLV_MARKING_4
    JR_NEQF F.0 3.0 else157_2
    CALL TEXT.APPEND VLV_CODIGO_4 'V' VLV_CODIGO_4
    JR endif157
  else157_2:
    CALL ARRAYGET_FLOAT VLV_I_4 F.0 VLV_MARKING_4
    JR_NEQF F.0 4.0 else157_3
    CALL TEXT.APPEND VLV_CODIGO_4 'A' VLV_CODIGO_4
    JR endif157
  else157_3:
    CALL ARRAYGET_FLOAT VLV_I_4 F.0 VLV_MARKING_4
    JR_NEQF F.0 5.0 else157_4
    CALL TEXT.APPEND VLV_CODIGO_4 'R' VLV_CODIGO_4
  else157_4:
  endif157:
    ADDF VLV_I_4 1.0 VLV_I_4
    JR_LTEQF VLV_I_4 4.0 forbody156
  endfor156:
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    CALL TEXT.APPEND 'Codigo: ' VLV_CODIGO_4 S.0
    CALL LCD.WRITE 5.0 5.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
RETSUB_F_CODIGO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_CODIGO_2:
SUB_F_ROTAR_1:
    MATH ABS VLV_GRADOS_5 F.0
    DATAF tmpf173
    DATA8 flag173
    DIVF VLV_GRADOS_5 F.0 tmpf173
    CP_EQF 0.0 F.0 flag173
    SELECTF flag173 0.0 tmpf173 VLV_SIGNO_5

    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB174 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB174:
    DATA32 milliseconds175
	MOVEF_32 100.0 milliseconds175
	DATA32 timer175
	TIMER_WAIT milliseconds175 timer175
	TIMER_READY timer175
    MULF 34.0 VLV_SIGNO_5 F.0
    MATH ABS VLV_GRADOS_5 F.2
    SUBF F.2 8.0 F.1
    CALL MOTOR.SCHEDULE 'D' F.0 0.0 F.1 0.0 'True' 

	DATA8 layer179
	DATA8 nos179
	DATA8 busy179
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer179 nos179
	JR_EQ8 0 nos179 motornotbusy179
  motorwaiting179:
	OUTPUT_TEST layer179 nos179 busy179
	JR_EQ8 busy179 0 motornotbusy179
	SLEEP
	JR motorwaiting179
  motornotbusy179:
    DATA32 milliseconds180
	MOVEF_32 200.0 milliseconds180
	DATA32 timer180
	TIMER_WAIT milliseconds180 timer180
	TIMER_READY timer180
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -360.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB181 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB181:
RETSUB_F_ROTAR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_ROTAR_1:
SUB_F_ORDENARBLOQUES_1:
    ARRAY COPY VLV_MARKING_6 VLV_MARKING_4
    WRITE32 ENDSUB_F_CODIGO_2:CALLSUB182 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_CODIGO_2
CALLSUB182:
    STRINGS DUPLICATE VLV_CODIGO_4 VLV_CODIGO_6
    CALL EQ_STRING VLV_CODIGO_6 'VRZA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_1
    JR endif183
  else183_1:
    CALL EQ_STRING VLV_CODIGO_6 'VRAZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_2
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB186 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB186:
    JR endif183
  else183_2:
    CALL EQ_STRING VLV_CODIGO_6 'VZRA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_3
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB188 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB188:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB189 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB189:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB190 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB190:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB191 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB191:
    JR endif183
  else183_3:
    CALL EQ_STRING VLV_CODIGO_6 'VZAR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_4
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB193 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB193:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB194 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB194:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB195 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB195:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB196 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB196:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB197 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB197:
    JR endif183
  else183_4:
    CALL EQ_STRING VLV_CODIGO_6 'VARZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_5
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB199 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB199:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB200 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB200:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB201 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB201:
    JR endif183
  else183_5:
    CALL EQ_STRING VLV_CODIGO_6 'VAZR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_6
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB203 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB203:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB204 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB204:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB205 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB205:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB206 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB206:
    JR endif183
  else183_6:
    CALL EQ_STRING VLV_CODIGO_6 'RVZA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_7
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB208 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB208:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB209 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB209:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB210 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB210:
    JR endif183
  else183_7:
    CALL EQ_STRING VLV_CODIGO_6 'RVAZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_8
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB212 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB212:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB213 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB213:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB214 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB214:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB215 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB215:
    JR endif183
  else183_8:
    CALL EQ_STRING VLV_CODIGO_6 'RZVA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_9
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB217 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB217:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB218 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB218:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB219 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB219:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB220 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB220:
    JR endif183
  else183_9:
    CALL EQ_STRING VLV_CODIGO_6 'RZAV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_10
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB222 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB222:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB223 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB223:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB224 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB224:
    JR endif183
  else183_10:
    CALL EQ_STRING VLV_CODIGO_6 'RAVZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_11
    MOVEF_F 90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB226 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB226:
    JR endif183
  else183_11:
    CALL EQ_STRING VLV_CODIGO_6 'RAZV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_12
    MOVEF_F 90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB228 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB228:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB229 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB229:
    JR endif183
  else183_12:
    CALL EQ_STRING VLV_CODIGO_6 'ZVAR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_13
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB231 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB231:
    JR endif183
  else183_13:
    CALL EQ_STRING VLV_CODIGO_6 'ZVRA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_14
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB233 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB233:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB234 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB234:
    JR endif183
  else183_14:
    CALL EQ_STRING VLV_CODIGO_6 'ZRVA' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_15
    MOVEF_F 90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB236 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB236:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB237 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB237:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB238 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB238:
    JR endif183
  else183_15:
    CALL EQ_STRING VLV_CODIGO_6 'ZRAV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_16
    MOVEF_F 90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB240 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB240:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB241 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB241:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB242 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB242:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB243 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB243:
    JR endif183
  else183_16:
    CALL EQ_STRING VLV_CODIGO_6 'ZAVR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_17
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB245 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB245:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB246 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB246:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB247 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB247:
    JR endif183
  else183_17:
    CALL EQ_STRING VLV_CODIGO_6 'ZARV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_18
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB249 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB249:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB250 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB250:
    JR endif183
  else183_18:
    CALL EQ_STRING VLV_CODIGO_6 'AVRZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_19
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB252 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB252:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB253 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB253:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB254 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB254:
    JR endif183
  else183_19:
    CALL EQ_STRING VLV_CODIGO_6 'AVZR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_20
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB256 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB256:
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB257 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB257:
    JR endif183
  else183_20:
    CALL EQ_STRING VLV_CODIGO_6 'ARVZ' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_21
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB259 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB259:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB260 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB260:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB261 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB261:
    JR endif183
  else183_21:
    CALL EQ_STRING VLV_CODIGO_6 'ARZV' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_22
    MOVEF_F -90.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB263 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB263:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB264 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB264:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB265 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB265:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB266 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB266:
    JR endif183
  else183_22:
    CALL EQ_STRING VLV_CODIGO_6 'AZVR' S.0
    AND8888_32 S.0 -538976289 S.0
    STRINGS COMPARE S.0 'TRUE' S.0
    JR_EQ8 S.0 0 else183_23
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB268 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB268:
    WRITE32 ENDSUB_F_SWAP_0:CALLSUB269 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SWAP_0
CALLSUB269:
    JR endif183
  else183_23:
    MOVEF_F 180.0 VLV_GRADOS_5
    WRITE32 ENDSUB_F_ROTAR_1:CALLSUB270 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_ROTAR_1
CALLSUB270:
  else183_24:
  endif183:
    MOVEF_F -20.0 VLV_VELOCIDAD_13
    MOVEF_F 8.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB271 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB271:
    MOVEF_F 15.0 VLV_VELOCIDAD1_25
    MOVEF_F -15.0 VLV_VELOCIDAD2_25
    MOVEF_F 182.0 VLV_GRADOS_25
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB272 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB272:
    MOVEF_F -30.0 VLV_VELOCIDAD_13
    MOVEF_F 23.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB273 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB273:
    MOVEF_F 20.0 VLV_VELOCIDAD_10
    MOVEF_F 24.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB274 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB274:
RETSUB_F_ORDENARBLOQUES_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_ORDENARBLOQUES_1:
SUB_F_SWAP_0:
    MOVEF_F -15.0 VLV_VELOCIDAD_13
    MOVEF_F 5.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB275 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB275:
    WRITE32 ENDSUB_F_BAJARCUADRO_0:CALLSUB276 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_BAJARCUADRO_0
CALLSUB276:
    MOVEF_F -15.0 VLV_VELOCIDAD_13
    MOVEF_F 10.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB277 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB277:
    CALL MOTOR.SCHEDULE 'D' 50.0 0.0 180.0 0.0 'True' 

	DATA8 layer278
	DATA8 nos278
	DATA8 busy278
	CALL MOTORDECODEPORTSDESCRIPTOR 'D' layer278 nos278
	JR_EQ8 0 nos278 motornotbusy278
  motorwaiting278:
	OUTPUT_TEST layer278 nos278 busy278
	JR_EQ8 busy278 0 motornotbusy278
	SLEEP
	JR motorwaiting278
  motornotbusy278:
    MOVEF_F 30.0 VLV_VELOCIDAD_10
    MOVEF_F -360.0 VLV_ENCODER_10
    WRITE32 ENDSUB_M_BRAZO_AENCODER_2:CALLSUB279 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_AENCODER_2
CALLSUB279:
    MOVEF_F 15.0 VLV_VELOCIDAD_13
    MOVEF_F 21.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB280 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB280:
    MOVEF_F -15.0 VLV_VELOCIDAD_13
    MOVEF_F 5.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB281 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB281:
RETSUB_F_SWAP_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SWAP_0:
SUB_F_S_0:
    UI_BUTTON FLUSH
    UI_BUTTON WAIT_FOR_PRESS
RETSUB_F_S_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_S_0:
SUB_M_BRAZO_ATIMER_2:
    TIMER_READ timeMC1
  while285:
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_GTEQF F.0 VLV_TIMER_9 endwhile285
  whilebody285:
    MOVEF_8 VLV_VELOCIDAD_9 setSpeedA
	OUTPUT_SPEED 0 1 setSpeedA
	OUTPUT_START 0 1
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_LTF F.0 VLV_TIMER_9 whilebody285
  endwhile285:
    CALL MOTOR.STOP 'A' 'True'
RETSUB_M_BRAZO_ATIMER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_ATIMER_2:
SUB_M_BRAZO_AENCODER_2:
    CALL MOTOR.GETCOUNT 'A' F.0
    SUBF VLV_ENCODER_10 F.0 VLV_ENCDIFF_10
    MATH ABS VLV_ENCDIFF_10 F.0
    DATAF tmpf293
    DATA8 flag293
    DIVF VLV_ENCDIFF_10 F.0 tmpf293
    CP_EQF 0.0 F.0 flag293
    SELECTF flag293 0.0 tmpf293 VLV_SIGNO_10

    JR_EQF VLV_ENCDIFF_10 0.0 else294_1
    MULF VLV_VELOCIDAD_10 VLV_SIGNO_10 F.0
    MATH ABS VLV_ENCDIFF_10 F.1
    CALL MOTOR.SCHEDULE 'A' F.0 0.0 F.1 0.0 'True' 

	DATA8 layer297
	DATA8 nos297
	DATA8 busy297
	CALL MOTORDECODEPORTSDESCRIPTOR 'A' layer297 nos297
	JR_EQ8 0 nos297 motornotbusy297
  motorwaiting297:
	OUTPUT_TEST layer297 nos297 busy297
	JR_EQ8 busy297 0 motornotbusy297
	SLEEP
	JR motorwaiting297
  motornotbusy297:
  else294_1:
  endif294:
    CALL MOTOR.STOP 'A' 'True'
RETSUB_M_BRAZO_AENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_AENCODER_2:
SUB_M_RECTO_ENCODERF_2:
    DATAF tmpf299
    DATA8 flag299
    DIVF VLV_VELOCIDAD_11 10.0 tmpf299
    CP_EQF 0.0 10.0 flag299
    SELECTF flag299 0.0 tmpf299 F.2

    DATAF tmpf300
    DATA8 flag300
    DIVF 11286.0 F.2 tmpf300
    CP_EQF 0.0 F.2 flag300
    SELECTF flag300 0.0 tmpf300 F.1

    DATAF tmpf301
    DATA8 flag301
    DIVF VLV_DISTANCIA_11 100.0 tmpf301
    CP_EQF 0.0 100.0 flag301
    SELECTF flag301 0.0 tmpf301 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf303
    DATA8 flag303
    DIVF VPR_RECTO_DIAMETRO 6.24 tmpf303
    CP_EQF 0.0 6.24 flag303
    SELECTF flag303 0.0 tmpf303 F.1

    DATAF tmpf304
    DATA8 flag304
    DIVF F.0 F.1 tmpf304
    CP_EQF 0.0 F.1 flag304
    SELECTF flag304 0.0 tmpf304 VLV_SAFETYTIMER_11

    MATH ABS VLV_VELOCIDAD_11 F.1
    SUBF F.1 20.0 F.0
    MULF F.0 0.05 VLV_CORRECCION_11
    SUBF VLV_DISTANCIA_11 VLV_CORRECCION_11 F.2
    MULF F.2 360.0 F.1
    MOVEF_F 3.1415926535897932384 F.2
    DATAF tmpf311
    DATA8 flag311
    DIVF F.1 F.2 tmpf311
    CP_EQF 0.0 F.2 flag311
    SELECTF flag311 0.0 tmpf311 F.0

    DATAF tmpf312
    DATA8 flag312
    DIVF F.0 VPR_RECTO_DIAMETRO tmpf312
    CP_EQF 0.0 VPR_RECTO_DIAMETRO flag312
    SELECTF flag312 0.0 tmpf312 VLV_ENC_11

    OUTPUT_CLR_COUNT 0 2
    OUTPUT_CLR_COUNT 0 4
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds316
	MOVEF_32 100.0 milliseconds316
	DATA32 timer316
	TIMER_WAIT milliseconds316 timer316
	TIMER_READY timer316
    TIMER_READ timeMC4
  while318:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_11 endwhile318
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_11 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile318
  whilebody318:
    MATH NEGATE VLV_VELOCIDAD_11 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD_11
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_11 and325
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_11 2000.0 F.1
    JR_LTF F.0 F.1 whilebody318
  and325:
  endwhile318:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_11 2000.0 F.1
    JR_LTEQF F.0 F.1 else330_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else330_1:
  endif330:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_ENCODERF_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ENCODERF_2:
SUB_M_RECTO_NEGRO1_2:
    MOVEF_F 0.0 VLV_CORRECCION_12
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_12
  while337:
    JR_LTEQF VLV_LECTURA_12 15.0 endwhile337
  whilebody337:
    CALL SENSOR.READPERCENT VLV_SENSOR_12 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf340
    DATA8 flag340
    DIVF F.1 VPR_RECTO_BLANCO tmpf340
    CP_EQF 0.0 VPR_RECTO_BLANCO flag340
    SELECTF flag340 0.0 tmpf340 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_12
    MATH NEGATE VLV_VELOCIDAD_12 F.1
    ADDF F.1 VLV_CORRECCION_12 F.0
    ADDF VLV_VELOCIDAD_12 VLV_CORRECCION_12 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_GTF VLV_LECTURA_12 15.0 whilebody337
  endwhile337:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_NEGRO1_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_NEGRO1_2:
SUB_M_RECTO_ENCODER_2:
    DATAF tmpf348
    DATA8 flag348
    DIVF VLV_VELOCIDAD_13 10.0 tmpf348
    CP_EQF 0.0 10.0 flag348
    SELECTF flag348 0.0 tmpf348 F.2

    DATAF tmpf349
    DATA8 flag349
    DIVF 11286.0 F.2 tmpf349
    CP_EQF 0.0 F.2 flag349
    SELECTF flag349 0.0 tmpf349 F.1

    DATAF tmpf350
    DATA8 flag350
    DIVF VLV_DISTANCIA_13 100.0 tmpf350
    CP_EQF 0.0 100.0 flag350
    SELECTF flag350 0.0 tmpf350 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf352
    DATA8 flag352
    DIVF VPR_RECTO_DIAMETRO 6.24 tmpf352
    CP_EQF 0.0 6.24 flag352
    SELECTF flag352 0.0 tmpf352 F.1

    DATAF tmpf353
    DATA8 flag353
    DIVF F.0 F.1 tmpf353
    CP_EQF 0.0 F.1 flag353
    SELECTF flag353 0.0 tmpf353 VLV_SAFETYTIMER_13

    MATH ABS VLV_VELOCIDAD_13 F.1
    SUBF F.1 20.0 F.0
    MULF F.0 0.05 VLV_CORRECCION_13
    SUBF VLV_DISTANCIA_13 VLV_CORRECCION_13 F.2
    MULF F.2 360.0 F.1
    MOVEF_F 3.1415926535897932384 F.2
    DATAF tmpf360
    DATA8 flag360
    DIVF F.1 F.2 tmpf360
    CP_EQF 0.0 F.2 flag360
    SELECTF flag360 0.0 tmpf360 F.0

    DATAF tmpf361
    DATA8 flag361
    DIVF F.0 VPR_RECTO_DIAMETRO tmpf361
    CP_EQF 0.0 VPR_RECTO_DIAMETRO flag361
    SELECTF flag361 0.0 tmpf361 VLV_ENC_13

    OUTPUT_CLR_COUNT 0 2
    OUTPUT_CLR_COUNT 0 4
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds365
	MOVEF_32 100.0 milliseconds365
	DATA32 timer365
	TIMER_WAIT milliseconds365 timer365
	TIMER_READY timer365
    TIMER_READ timeMC4
  while367:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_13 endwhile367
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_13 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile367
  whilebody367:
    MATH NEGATE VLV_VELOCIDAD_13 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD_13
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.1
    MATH ABS F.1 F.0
    JR_GTEQF F.0 VLV_ENC_13 and374
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_13 2000.0 F.1
    JR_LTF F.0 F.1 whilebody367
  and374:
  endwhile367:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_13 2000.0 F.1
    JR_LTEQF F.0 F.1 else379_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else379_1:
  endif379:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_ENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ENCODER_2:
SUB_M_RECTO_TIEMPO_2:
    MOVEF_F 0.0 VLV_CORRECCION_14
    TIMER_READ timeMC3
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
  while387:
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_TIEMPO_14 endwhile387
  whilebody387:
    MATH NEGATE VLV_VELOCIDAD_14 F.1
    ADDF F.1 VLV_CORRECCION_14 F.0
    ADDF VLV_VELOCIDAD_14 VLV_CORRECCION_14 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_TIEMPO_14 whilebody387
  endwhile387:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_TIEMPO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_TIEMPO_2:
SUB_M_RECTO_BLANCO1_2:
    MOVEF_F 0.0 VLV_CORRECCION_15
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_15
  while396:
    JR_GTEQF VLV_LECTURA_15 60.0 endwhile396
  whilebody396:
    CALL SENSOR.READPERCENT VLV_SENSOR_15 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf399
    DATA8 flag399
    DIVF F.1 VPR_RECTO_BLANCO tmpf399
    CP_EQF 0.0 VPR_RECTO_BLANCO flag399
    SELECTF flag399 0.0 tmpf399 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_15
    MATH NEGATE VLV_VELOCIDAD_15 F.1
    ADDF F.1 VLV_CORRECCION_15 F.0
    ADDF VLV_VELOCIDAD_15 VLV_CORRECCION_15 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_LTF VLV_LECTURA_15 60.0 whilebody396
  endwhile396:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_BLANCO1_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_BLANCO1_2:
SUB_M_RECTO_BLANCO1F_2:
    MOVEF_F 0.0 VLV_CORRECCION_16
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_16
  while408:
    JR_GTEQF VLV_LECTURA_16 60.0 endwhile408
  whilebody408:
    CALL SENSOR.READPERCENT VLV_SENSOR_16 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf411
    DATA8 flag411
    DIVF F.1 VPR_RECTO_BLANCO tmpf411
    CP_EQF 0.0 VPR_RECTO_BLANCO flag411
    SELECTF flag411 0.0 tmpf411 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_16
    MATH NEGATE VLV_VELOCIDAD_16 F.1
    ADDF F.1 VLV_CORRECCION_16 F.0
    ADDF VLV_VELOCIDAD_16 VLV_CORRECCION_16 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_LTF VLV_LECTURA_16 60.0 whilebody408
  endwhile408:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_BLANCO1F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_BLANCO1F_2:
SUB_M_RECTO_NEGRO1F_2:
    MOVEF_F 0.0 VLV_CORRECCION_17
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_17
  while420:
    JR_LTEQF VLV_LECTURA_17 15.0 endwhile420
  whilebody420:
    CALL SENSOR.READPERCENT VLV_SENSOR_17 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf423
    DATA8 flag423
    DIVF F.1 VPR_RECTO_BLANCO tmpf423
    CP_EQF 0.0 VPR_RECTO_BLANCO flag423
    SELECTF flag423 0.0 tmpf423 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_17
    MATH NEGATE VLV_VELOCIDAD_17 F.1
    ADDF F.1 VLV_CORRECCION_17 F.0
    ADDF VLV_VELOCIDAD_17 VLV_CORRECCION_17 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_GTF VLV_LECTURA_17 15.0 whilebody420
  endwhile420:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_NEGRO1F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_NEGRO1F_2:
SUB_M_SIGUELINEAS_ENCODER14_2:
    MULF VLV_VELOCIDAD_18 1.0 VLV_VELOCIDAD_18
    MOVEF_F 50.0 VLV_LECTURA1_18
    MOVEF_F 50.0 VLV_LECTURA3_18
    MOVEF_F 50.0 VLV_LECTURA4_18
    MATH POW VLV_VELOCIDAD_18 0.833333333333333 F.0
    DATAF tmpf433
    DATA8 flag433
    DIVF F.0 440.0 tmpf433
    CP_EQF 0.0 440.0 flag433
    SELECTF flag433 0.0 tmpf433 VLV_KP_18

    MULF VLV_KP_18 70.0 VLV_KD_18
    MOVEF_F 0.0 VLV_ERROR_18
    MOVEF_F 0.0 VLV_OLDERROR_18
    MOVEF_F 0.0 VLV_U_18
    MATH ABS VLV_VELOCIDAD_18 F.0
    DATAF tmpf436
    DATA8 flag436
    DIVF VLV_VELOCIDAD_18 F.0 tmpf436
    CP_EQF 0.0 F.0 flag436
    SELECTF flag436 0.0 tmpf436 VLV_SENTIDO_18

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf439
    DATA8 flag439
    DIVF VLV_ENCODER_18 F.1 tmpf439
    CP_EQF 0.0 F.1 flag439
    SELECTF flag439 0.0 tmpf439 F.0

    MULF F.0 360.0 VLV_ENCODER_18
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_18
    MOVEF_F 0.0 VLV_ENCODERC_18
    DATAF tmpf442
    DATA8 flag442
    DIVF VLV_VELOCIDAD_18 10.0 tmpf442
    CP_EQF 0.0 10.0 flag442
    SELECTF flag442 0.0 tmpf442 F.2

    DATAF tmpf443
    DATA8 flag443
    DIVF 11286.0 F.2 tmpf443
    CP_EQF 0.0 F.2 flag443
    SELECTF flag443 0.0 tmpf443 F.1

    DATAF tmpf444
    DATA8 flag444
    DIVF VLV_ENCODER_18 100.0 tmpf444
    CP_EQF 0.0 100.0 flag444
    SELECTF flag444 0.0 tmpf444 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf446
    DATA8 flag446
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf446
    CP_EQF 0.0 6.24 flag446
    SELECTF flag446 0.0 tmpf446 F.1

    DATAF tmpf447
    DATA8 flag447
    DIVF F.0 F.1 tmpf447
    CP_EQF 0.0 F.1 flag447
    SELECTF flag447 0.0 tmpf447 VLV_SAFETYTIMER_18

    TIMER_READ timeMC4
  while449:
    MATH ABS VLV_ENCODERC_18 F.0
    JR_GTEQF F.0 VLV_ENCODER_18 endwhile449
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_18 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile449
  whilebody449:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_18 VLV_ENCODERC_18
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf457
    DATA8 flag457
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf457
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag457
    SELECTF flag457 0.0 tmpf457 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_18
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf462
    DATA8 flag462
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf462
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag462
    SELECTF flag462 0.0 tmpf462 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_18
    SUBF VLV_LECTURA1_18 VLV_LECTURA4_18 F.1
    MULF F.1 VLV_SENTIDO_18 F.0
    MULF F.0 1.0 VLV_ERROR_18
    MULF VLV_ERROR_18 VLV_KP_18 F.0
    SUBF VLV_ERROR_18 VLV_OLDERROR_18 F.2
    MULF F.2 VLV_KD_18 F.1
    ADDF F.0 F.1 VLV_U_18
    ADDF VLV_VELOCIDAD_18 VLV_U_18 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_18 VLV_U_18 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_18 VLV_OLDERROR_18
    MATH ABS VLV_ENCODERC_18 F.0
    JR_GTEQF F.0 VLV_ENCODER_18 and476
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_18 2000.0 F.1
    JR_LTF F.0 F.1 whilebody449
  and476:
  endwhile449:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_18 2000.0 F.1
    JR_LTEQF F.0 F.1 else480_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else480_1:
  endif480:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_ENCODER14_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER14_2:
SUB_M_SIGUELINEAS_CRUCE14_1:
    MULF VLV_VELOCIDAD_19 1.0 VLV_VELOCIDAD_19
    MOVEF_F 50.0 VLV_LECTURA1_19
    MOVEF_F 50.0 VLV_LECTURA3_19
    MOVEF_F 50.0 VLV_LECTURA4_19
    MATH POW VLV_VELOCIDAD_19 0.833333333333333 F.0
    DATAF tmpf488
    DATA8 flag488
    DIVF F.0 440.0 tmpf488
    CP_EQF 0.0 440.0 flag488
    SELECTF flag488 0.0 tmpf488 VLV_KP_19

    MULF VLV_KP_19 70.0 VLV_KD_19
    MOVEF_F 0.0 VLV_ERROR_19
    MOVEF_F 0.0 VLV_OLDERROR_19
    MOVEF_F 0.0 VLV_U_19
    MATH ABS VLV_VELOCIDAD_19 F.0
    DATAF tmpf491
    DATA8 flag491
    DIVF VLV_VELOCIDAD_19 F.0 tmpf491
    CP_EQF 0.0 F.0 flag491
    SELECTF flag491 0.0 tmpf491 VLV_SENTIDO_19

  while492:
    JR_GTF VLV_LECTURA1_19 10.0 or493
    JR_LTEQF VLV_LECTURA4_19 10.0 endwhile492
  or493:
  whilebody492:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf496
    DATA8 flag496
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf496
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag496
    SELECTF flag496 0.0 tmpf496 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_19
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf501
    DATA8 flag501
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf501
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag501
    SELECTF flag501 0.0 tmpf501 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_19
    SUBF VLV_LECTURA1_19 VLV_LECTURA4_19 F.1
    MULF F.1 VLV_SENTIDO_19 F.0
    MULF F.0 1.0 VLV_ERROR_19
    MULF VLV_ERROR_19 VLV_KP_19 F.0
    SUBF VLV_ERROR_19 VLV_OLDERROR_19 F.2
    MULF F.2 VLV_KD_19 F.1
    ADDF F.0 F.1 VLV_U_19
    ADDF VLV_VELOCIDAD_19 VLV_U_19 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_19 VLV_U_19 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_19 VLV_OLDERROR_19
    JR_GTF VLV_LECTURA1_19 10.0 whilebody492
    JR_GTF VLV_LECTURA4_19 10.0 whilebody492
  endwhile492:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_CRUCE14_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE14_1:
SUB_M_SIGUELINEAS_ENCODER31F_2:
    MULF VLV_VELOCIDAD_20 1.0 VLV_VELOCIDAD_20
    MOVEF_F 50.0 VLV_LECTURA1_20
    MOVEF_F 50.0 VLV_LECTURA3_20
    MOVEF_F 50.0 VLV_LECTURA4_20
    MATH POW VLV_VELOCIDAD_20 0.833333333333333 F.0
    DATAF tmpf518
    DATA8 flag518
    DIVF F.0 440.0 tmpf518
    CP_EQF 0.0 440.0 flag518
    SELECTF flag518 0.0 tmpf518 VLV_KP_20

    MULF VLV_KP_20 70.0 VLV_KD_20
    MOVEF_F 0.0 VLV_ERROR_20
    MOVEF_F 0.0 VLV_OLDERROR_20
    MOVEF_F 0.0 VLV_U_20
    MATH ABS VLV_VELOCIDAD_20 F.0
    DATAF tmpf521
    DATA8 flag521
    DIVF VLV_VELOCIDAD_20 F.0 tmpf521
    CP_EQF 0.0 F.0 flag521
    SELECTF flag521 0.0 tmpf521 VLV_SENTIDO_20

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf524
    DATA8 flag524
    DIVF VLV_ENCODER_20 F.1 tmpf524
    CP_EQF 0.0 F.1 flag524
    SELECTF flag524 0.0 tmpf524 F.0

    MULF F.0 360.0 VLV_ENCODER_20
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_20
    MOVEF_F 0.0 VLV_ENCODERC_20
    DATAF tmpf527
    DATA8 flag527
    DIVF VLV_VELOCIDAD_20 10.0 tmpf527
    CP_EQF 0.0 10.0 flag527
    SELECTF flag527 0.0 tmpf527 F.2

    DATAF tmpf528
    DATA8 flag528
    DIVF 11286.0 F.2 tmpf528
    CP_EQF 0.0 F.2 flag528
    SELECTF flag528 0.0 tmpf528 F.1

    DATAF tmpf529
    DATA8 flag529
    DIVF VLV_ENCODER_20 100.0 tmpf529
    CP_EQF 0.0 100.0 flag529
    SELECTF flag529 0.0 tmpf529 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf531
    DATA8 flag531
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf531
    CP_EQF 0.0 6.24 flag531
    SELECTF flag531 0.0 tmpf531 F.1

    DATAF tmpf532
    DATA8 flag532
    DIVF F.0 F.1 tmpf532
    CP_EQF 0.0 F.1 flag532
    SELECTF flag532 0.0 tmpf532 VLV_SAFETYTIMER_20

    TIMER_READ timeMC4
  while534:
    MATH ABS VLV_ENCODERC_20 F.0
    JR_GTEQF F.0 VLV_ENCODER_20 endwhile534
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_20 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile534
  whilebody534:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_20 VLV_ENCODERC_20
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf542
    DATA8 flag542
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf542
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag542
    SELECTF flag542 0.0 tmpf542 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_20
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf547
    DATA8 flag547
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf547
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag547
    SELECTF flag547 0.0 tmpf547 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_20
    SUBF VLV_LECTURA3_20 VLV_LECTURA1_20 F.1
    MULF F.1 VLV_SENTIDO_20 F.0
    MULF F.0 1.0 VLV_ERROR_20
    MULF VLV_ERROR_20 VLV_KP_20 F.0
    SUBF VLV_ERROR_20 VLV_OLDERROR_20 F.2
    MULF F.2 VLV_KD_20 F.1
    ADDF F.0 F.1 VLV_U_20
    ADDF VLV_VELOCIDAD_20 VLV_U_20 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_20 VLV_U_20 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_20 VLV_OLDERROR_20
    MATH ABS VLV_ENCODERC_20 F.0
    JR_GTEQF F.0 VLV_ENCODER_20 and561
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_20 2000.0 F.1
    JR_LTF F.0 F.1 whilebody534
  and561:
  endwhile534:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_20 2000.0 F.1
    JR_LTEQF F.0 F.1 else565_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else565_1:
  endif565:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_ENCODER31F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER31F_2:
SUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
    MULF VLV_VELOCIDAD_21 1.0 VLV_VELOCIDAD_21
    MOVEF_F 50.0 VLV_LECTURA1_21
    MOVEF_F 50.0 VLV_LECTURA3_21
    MOVEF_F 50.0 VLV_LECTURA4_21
    MATH POW VLV_VELOCIDAD_21 0.833333333333333 F.0
    DATAF tmpf573
    DATA8 flag573
    DIVF F.0 440.0 tmpf573
    CP_EQF 0.0 440.0 flag573
    SELECTF flag573 0.0 tmpf573 VLV_KP_21

    MULF VLV_KP_21 70.0 VLV_KD_21
    MOVEF_F 0.0 VLV_ERROR_21
    MOVEF_F 0.0 VLV_OLDERROR_21
    MOVEF_F 0.0 VLV_U_21
    MATH ABS VLV_VELOCIDAD_21 F.0
    DATAF tmpf576
    DATA8 flag576
    DIVF VLV_VELOCIDAD_21 F.0 tmpf576
    CP_EQF 0.0 F.0 flag576
    SELECTF flag576 0.0 tmpf576 VLV_SENTIDO_21

    MOVEF_F 50.0 VLV_LECTURA_21
  while577:
    JR_LTEQF VLV_LECTURA_21 7.0 endwhile577
  whilebody577:
    JR_NEQF VLV_READER_21 3.0 else578_1
    MOVEF_F VLV_LECTURA3_21 VLV_LECTURA_21
    MOVEF_F VLV_LECTURA1_21 VLV_LECTURAIZQ_21
    MOVEF_F VLV_LECTURA4_21 VLV_LECTURADCH_21
    JR endif578
  else578_1:
    MOVEF_F VLV_LECTURA4_21 VLV_LECTURA_21
    MOVEF_F VLV_LECTURA3_21 VLV_LECTURAIZQ_21
    MOVEF_F VLV_LECTURA1_21 VLV_LECTURADCH_21
  else578_2:
  endif578:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf581
    DATA8 flag581
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf581
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag581
    SELECTF flag581 0.0 tmpf581 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_21
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf586
    DATA8 flag586
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf586
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag586
    SELECTF flag586 0.0 tmpf586 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_21
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf591
    DATA8 flag591
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf591
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag591
    SELECTF flag591 0.0 tmpf591 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_21
    SUBF VLV_LECTURAIZQ_21 VLV_LECTURADCH_21 F.1
    MULF F.1 VLV_SENTIDO_21 F.0
    MULF F.0 1.0 VLV_ERROR_21
    MULF VLV_ERROR_21 VLV_KP_21 F.0
    SUBF VLV_ERROR_21 VLV_OLDERROR_21 F.2
    MULF F.2 VLV_KD_21 F.1
    ADDF F.0 F.1 VLV_U_21
    ADDF VLV_VELOCIDAD_21 VLV_U_21 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_21 VLV_U_21 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_21 VLV_OLDERROR_21
    JR_GTF VLV_LECTURA_21 7.0 whilebody577
  endwhile577:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNO_2:
SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
    MULF VLV_VELOCIDAD_22 1.0 VLV_VELOCIDAD_22
    MOVEF_F 50.0 VLV_LECTURA1_22
    MOVEF_F 50.0 VLV_LECTURA3_22
    MOVEF_F 50.0 VLV_LECTURA4_22
    MATH POW VLV_VELOCIDAD_22 0.833333333333333 F.0
    DATAF tmpf608
    DATA8 flag608
    DIVF F.0 440.0 tmpf608
    CP_EQF 0.0 440.0 flag608
    SELECTF flag608 0.0 tmpf608 VLV_KP_22

    MULF VLV_KP_22 70.0 VLV_KD_22
    MOVEF_F 0.0 VLV_ERROR_22
    MOVEF_F 0.0 VLV_OLDERROR_22
    MOVEF_F 0.0 VLV_U_22
    MATH ABS VLV_VELOCIDAD_22 F.0
    DATAF tmpf611
    DATA8 flag611
    DIVF VLV_VELOCIDAD_22 F.0 tmpf611
    CP_EQF 0.0 F.0 flag611
    SELECTF flag611 0.0 tmpf611 VLV_SENTIDO_22

    MOVEF_F 50.0 VLV_LECTURA_22
  while612:
    JR_LTEQF VLV_LECTURA_22 7.0 endwhile612
  whilebody612:
    JR_NEQF VLV_READER_22 3.0 else613_1
    MOVEF_F VLV_LECTURA3_22 VLV_LECTURA_22
    MOVEF_F VLV_LECTURA1_22 VLV_LECTURAIZQ_22
    MOVEF_F VLV_LECTURA4_22 VLV_LECTURADCH_22
    JR endif613
  else613_1:
    MOVEF_F VLV_LECTURA4_22 VLV_LECTURA_22
    MOVEF_F VLV_LECTURA3_22 VLV_LECTURAIZQ_22
    MOVEF_F VLV_LECTURA1_22 VLV_LECTURADCH_22
  else613_2:
  endif613:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf616
    DATA8 flag616
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf616
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag616
    SELECTF flag616 0.0 tmpf616 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_22
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf621
    DATA8 flag621
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf621
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag621
    SELECTF flag621 0.0 tmpf621 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_22
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf626
    DATA8 flag626
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf626
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag626
    SELECTF flag626 0.0 tmpf626 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_22
    SUBF VLV_LECTURAIZQ_22 VLV_LECTURADCH_22 F.1
    MULF F.1 VLV_SENTIDO_22 F.0
    MULF F.0 1.0 VLV_ERROR_22
    MULF VLV_ERROR_22 VLV_KP_22 F.0
    SUBF VLV_ERROR_22 VLV_OLDERROR_22 F.2
    MULF F.2 VLV_KD_22 F.1
    ADDF F.0 F.1 VLV_U_22
    ADDF VLV_VELOCIDAD_22 VLV_U_22 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_22 VLV_U_22 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_22 VLV_OLDERROR_22
    JR_GTF VLV_LECTURA_22 7.0 whilebody612
  endwhile612:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
SUB_M_SIGUELINEAS_ENCODER14F_2:
    MULF VLV_VELOCIDAD_23 1.0 VLV_VELOCIDAD_23
    MOVEF_F 50.0 VLV_LECTURA1_23
    MOVEF_F 50.0 VLV_LECTURA3_23
    MOVEF_F 50.0 VLV_LECTURA4_23
    MATH POW VLV_VELOCIDAD_23 0.833333333333333 F.0
    DATAF tmpf643
    DATA8 flag643
    DIVF F.0 440.0 tmpf643
    CP_EQF 0.0 440.0 flag643
    SELECTF flag643 0.0 tmpf643 VLV_KP_23

    MULF VLV_KP_23 70.0 VLV_KD_23
    MOVEF_F 0.0 VLV_ERROR_23
    MOVEF_F 0.0 VLV_OLDERROR_23
    MOVEF_F 0.0 VLV_U_23
    MATH ABS VLV_VELOCIDAD_23 F.0
    DATAF tmpf646
    DATA8 flag646
    DIVF VLV_VELOCIDAD_23 F.0 tmpf646
    CP_EQF 0.0 F.0 flag646
    SELECTF flag646 0.0 tmpf646 VLV_SENTIDO_23

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf649
    DATA8 flag649
    DIVF VLV_ENCODER_23 F.1 tmpf649
    CP_EQF 0.0 F.1 flag649
    SELECTF flag649 0.0 tmpf649 F.0

    MULF F.0 360.0 VLV_ENCODER_23
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_23
    MOVEF_F 0.0 VLV_ENCODERC_23
    DATAF tmpf652
    DATA8 flag652
    DIVF VLV_VELOCIDAD_23 10.0 tmpf652
    CP_EQF 0.0 10.0 flag652
    SELECTF flag652 0.0 tmpf652 F.2

    DATAF tmpf653
    DATA8 flag653
    DIVF 11286.0 F.2 tmpf653
    CP_EQF 0.0 F.2 flag653
    SELECTF flag653 0.0 tmpf653 F.1

    DATAF tmpf654
    DATA8 flag654
    DIVF VLV_ENCODER_23 100.0 tmpf654
    CP_EQF 0.0 100.0 flag654
    SELECTF flag654 0.0 tmpf654 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf656
    DATA8 flag656
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf656
    CP_EQF 0.0 6.24 flag656
    SELECTF flag656 0.0 tmpf656 F.1

    DATAF tmpf657
    DATA8 flag657
    DIVF F.0 F.1 tmpf657
    CP_EQF 0.0 F.1 flag657
    SELECTF flag657 0.0 tmpf657 VLV_SAFETYTIMER_23

    TIMER_READ timeMC4
  while659:
    MATH ABS VLV_ENCODERC_23 F.0
    JR_GTEQF F.0 VLV_ENCODER_23 endwhile659
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_23 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile659
  whilebody659:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_23 VLV_ENCODERC_23
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf667
    DATA8 flag667
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf667
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag667
    SELECTF flag667 0.0 tmpf667 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_23
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf672
    DATA8 flag672
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf672
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag672
    SELECTF flag672 0.0 tmpf672 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_23
    SUBF VLV_LECTURA1_23 VLV_LECTURA4_23 F.1
    MULF F.1 VLV_SENTIDO_23 F.0
    MULF F.0 1.0 VLV_ERROR_23
    MULF VLV_ERROR_23 VLV_KP_23 F.0
    SUBF VLV_ERROR_23 VLV_OLDERROR_23 F.2
    MULF F.2 VLV_KD_23 F.1
    ADDF F.0 F.1 VLV_U_23
    ADDF VLV_VELOCIDAD_23 VLV_U_23 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_23 VLV_U_23 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_23 VLV_OLDERROR_23
    MATH ABS VLV_ENCODERC_23 F.0
    JR_GTEQF F.0 VLV_ENCODER_23 and686
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_23 2000.0 F.1
    JR_LTF F.0 F.1 whilebody659
  and686:
  endwhile659:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_23 2000.0 F.1
    JR_LTEQF F.0 F.1 else690_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else690_1:
  endif690:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_ENCODER14F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER14F_2:
SUB_M_SIGUELINEAS_ENCODER31_2:
    MULF VLV_VELOCIDAD_24 1.0 VLV_VELOCIDAD_24
    MOVEF_F 50.0 VLV_LECTURA1_24
    MOVEF_F 50.0 VLV_LECTURA3_24
    MOVEF_F 50.0 VLV_LECTURA4_24
    MATH POW VLV_VELOCIDAD_24 0.833333333333333 F.0
    DATAF tmpf698
    DATA8 flag698
    DIVF F.0 440.0 tmpf698
    CP_EQF 0.0 440.0 flag698
    SELECTF flag698 0.0 tmpf698 VLV_KP_24

    MULF VLV_KP_24 70.0 VLV_KD_24
    MOVEF_F 0.0 VLV_ERROR_24
    MOVEF_F 0.0 VLV_OLDERROR_24
    MOVEF_F 0.0 VLV_U_24
    MATH ABS VLV_VELOCIDAD_24 F.0
    DATAF tmpf701
    DATA8 flag701
    DIVF VLV_VELOCIDAD_24 F.0 tmpf701
    CP_EQF 0.0 F.0 flag701
    SELECTF flag701 0.0 tmpf701 VLV_SENTIDO_24

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf704
    DATA8 flag704
    DIVF VLV_ENCODER_24 F.1 tmpf704
    CP_EQF 0.0 F.1 flag704
    SELECTF flag704 0.0 tmpf704 F.0

    MULF F.0 360.0 VLV_ENCODER_24
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_24
    MOVEF_F 0.0 VLV_ENCODERC_24
    DATAF tmpf707
    DATA8 flag707
    DIVF VLV_VELOCIDAD_24 10.0 tmpf707
    CP_EQF 0.0 10.0 flag707
    SELECTF flag707 0.0 tmpf707 F.2

    DATAF tmpf708
    DATA8 flag708
    DIVF 11286.0 F.2 tmpf708
    CP_EQF 0.0 F.2 flag708
    SELECTF flag708 0.0 tmpf708 F.1

    DATAF tmpf709
    DATA8 flag709
    DIVF VLV_ENCODER_24 100.0 tmpf709
    CP_EQF 0.0 100.0 flag709
    SELECTF flag709 0.0 tmpf709 F.2

    MULF F.1 F.2 F.0
    DATAF tmpf711
    DATA8 flag711
    DIVF VPR_SIGUELINEAS_DIAMETRO 6.24 tmpf711
    CP_EQF 0.0 6.24 flag711
    SELECTF flag711 0.0 tmpf711 F.1

    DATAF tmpf712
    DATA8 flag712
    DIVF F.0 F.1 tmpf712
    CP_EQF 0.0 F.1 flag712
    SELECTF flag712 0.0 tmpf712 VLV_SAFETYTIMER_24

    TIMER_READ timeMC4
  while714:
    MATH ABS VLV_ENCODERC_24 F.0
    JR_GTEQF F.0 VLV_ENCODER_24 endwhile714
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_24 2000.0 F.1
    JR_GTEQF F.0 F.1 endwhile714
  whilebody714:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_24 VLV_ENCODERC_24
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf722
    DATA8 flag722
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf722
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag722
    SELECTF flag722 0.0 tmpf722 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_24
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf727
    DATA8 flag727
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf727
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag727
    SELECTF flag727 0.0 tmpf727 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_24
    SUBF VLV_LECTURA3_24 VLV_LECTURA1_24 F.1
    MULF F.1 VLV_SENTIDO_24 F.0
    MULF F.0 1.0 VLV_ERROR_24
    MULF VLV_ERROR_24 VLV_KP_24 F.0
    SUBF VLV_ERROR_24 VLV_OLDERROR_24 F.2
    MULF F.2 VLV_KD_24 F.1
    ADDF F.0 F.1 VLV_U_24
    ADDF VLV_VELOCIDAD_24 VLV_U_24 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_24 VLV_U_24 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_24 VLV_OLDERROR_24
    MATH ABS VLV_ENCODERC_24 F.0
    JR_GTEQF F.0 VLV_ENCODER_24 and741
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_24 2000.0 F.1
    JR_LTF F.0 F.1 whilebody714
  and741:
  endwhile714:
    TIMER_READ timeMC4tmp
	SUB32 timeMC4tmp timeMC4 timeMC4tmp
	MOVE32_F timeMC4tmp F.0
    ADDF VLV_SAFETYTIMER_24 2000.0 F.1
    JR_LTEQF F.0 F.1 else745_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/General alert'
    SOUND_READY
  else745_1:
  endif745:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_ENCODER31_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER31_2:
SUB_M_GIRO_GRADOS_3:
    DATAF tmpf751
    DATA8 flag751
    DIVF VLV_VELOCIDAD1_25 VLV_VELOCIDAD2_25 tmpf751
    CP_EQF 0.0 VLV_VELOCIDAD2_25 flag751
    SELECTF flag751 0.0 tmpf751 F.0

    DATAF tmpf752
    DATA8 flag752
    DIVF VLV_VELOCIDAD1_25 VLV_VELOCIDAD2_25 tmpf752
    CP_EQF 0.0 VLV_VELOCIDAD2_25 flag752
    SELECTF flag752 0.0 tmpf752 F.2

    MATH ABS F.2 F.1
    DATAF tmpf754
    DATA8 flag754
    DIVF F.0 F.1 tmpf754
    CP_EQF 0.0 F.1 flag754
    SELECTF flag754 0.0 tmpf754 VLV_SIGNO_25

    MATH ABS VLV_VELOCIDAD1_25 F.0
    MATH ABS VLV_VELOCIDAD2_25 F.1
    DATA8 flag757
	CP_LTF F.0 F.1 flag757
	SELECTF flag757 F.0 F.1 VLV_VMIN_25
    MATH ABS VLV_VELOCIDAD1_25 F.0
    MATH ABS VLV_VELOCIDAD2_25 F.1
    DATA8 flag760
	CP_GTF F.0 F.1 flag760
	SELECTF flag760 F.0 F.1 VLV_VMAX_25
    MULF VLV_GRADOS_25 VPR_GIRO_G1 F.0
    MULF VLV_SIGNO_25 VLV_VMIN_25 F.4
    DATAF tmpf763
    DATA8 flag763
    DIVF F.4 VLV_VMAX_25 tmpf763
    CP_EQF 0.0 VLV_VMAX_25 flag763
    SELECTF flag763 0.0 tmpf763 F.3

    SUBF F.3 1.0 F.2
    DATAF tmpf765
    DATA8 flag765
    DIVF -2.0 F.2 tmpf765
    CP_EQF 0.0 F.2 flag765
    SELECTF flag765 0.0 tmpf765 F.1

    MULF F.0 F.1 VLV_ENCODER_25
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds768
	MOVEF_32 100.0 milliseconds768
	DATA32 timer768
	TIMER_WAIT milliseconds768 timer768
	TIMER_READY timer768
    MATH NEGATE VLV_VELOCIDAD1_25 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_25 VLV_ENCODER_25 'True'

	DATA8 layer770
	DATA8 nos770
	DATA8 busy770
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer770 nos770
	JR_EQ8 0 nos770 motornotbusy770
  motorwaiting770:
	OUTPUT_TEST layer770 nos770 busy770
	JR_EQ8 busy770 0 motornotbusy770
	SLEEP
	JR motorwaiting770
  motornotbusy770:
    MOVEF_F 0.0 VLV_VELOCIDAD1_25
    MOVEF_F 0.0 VLV_VELOCIDAD2_25
    MOVEF_F 0.0 VLV_GRADOS_25
    DATA32 milliseconds771
	MOVEF_32 100.0 milliseconds771
	DATA32 timer771
	TIMER_WAIT milliseconds771 timer771
	TIMER_READY timer771
RETSUB_M_GIRO_GRADOS_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_GRADOS_3:
SUB_M_GIRO_ENCODER_3:
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_GIRO_DIAMETRO F.2 F.1
    DATAF tmpf774
    DATA8 flag774
    DIVF VLV_DISTANCIA_26 F.1 tmpf774
    CP_EQF 0.0 F.1 flag774
    SELECTF flag774 0.0 tmpf774 F.0

    MULF F.0 360.0 VLV_ENCODER_26
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MATH NEGATE VLV_VELOCIDAD1_26 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_26 VLV_ENCODER_26 'True'

	DATA8 layer778
	DATA8 nos778
	DATA8 busy778
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer778 nos778
	JR_EQ8 0 nos778 motornotbusy778
  motorwaiting778:
	OUTPUT_TEST layer778 nos778 busy778
	JR_EQ8 busy778 0 motornotbusy778
	SLEEP
	JR motorwaiting778
  motornotbusy778:
RETSUB_M_GIRO_ENCODER_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_ENCODER_3:
SUB_M_GIRO_NEGRO1F_3:
    MOVEF_F 50.0 VLV_LECTURA_27
  while779:
    JR_LTEQF VLV_LECTURA_27 15.0 endwhile779
  whilebody779:
    CALL SENSOR.READPERCENT VLV_SENS_27 F.2
    SUBF F.2 VPR_GIRO_NEGRO F.1
    DATAF tmpf782
    DATA8 flag782
    DIVF F.1 VPR_GIRO_BLANCO tmpf782
    CP_EQF 0.0 VPR_GIRO_BLANCO flag782
    SELECTF flag782 0.0 tmpf782 F.0

    SUBF 100.0 VPR_GIRO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_27
    MATH NEGATE VLV_VELOCIDAD1_27 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_27
    JR_GTF VLV_LECTURA_27 15.0 whilebody779
  endwhile779:
    CALL MOTOR.STOP 'BC' 'False'
RETSUB_M_GIRO_NEGRO1F_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_NEGRO1F_3:
SUB_M_GIRO_NEGRO1_3:
    MOVEF_F 50.0 VLV_LECTURA_28
  while788:
    JR_LTEQF VLV_LECTURA_28 15.0 endwhile788
  whilebody788:
    CALL SENSOR.READPERCENT VLV_SENS_28 F.2
    SUBF F.2 VPR_GIRO_NEGRO F.1
    DATAF tmpf791
    DATA8 flag791
    DIVF F.1 VPR_GIRO_BLANCO tmpf791
    CP_EQF 0.0 VPR_GIRO_BLANCO flag791
    SELECTF flag791 0.0 tmpf791 F.0

    SUBF 100.0 VPR_GIRO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_28
    MATH NEGATE VLV_VELOCIDAD1_28 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_28
    JR_GTF VLV_LECTURA_28 15.0 whilebody788
  endwhile788:
    CALL MOTOR.STOP 'BC' 'True'
RETSUB_M_GIRO_NEGRO1_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_NEGRO1_3:
SUB_M_GIRO_ENCODERF_3:
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_GIRO_DIAMETRO F.2 F.1
    DATAF tmpf799
    DATA8 flag799
    DIVF VLV_DISTANCIA_29 F.1 tmpf799
    CP_EQF 0.0 F.1 flag799
    SELECTF flag799 0.0 tmpf799 F.0

    MULF F.0 360.0 VLV_ENCODER_29
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MATH NEGATE VLV_VELOCIDAD1_29 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_29 VLV_ENCODER_29 'False'

	DATA8 layer803
	DATA8 nos803
	DATA8 busy803
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer803 nos803
	JR_EQ8 0 nos803 motornotbusy803
  motorwaiting803:
	OUTPUT_TEST layer803 nos803 busy803
	JR_EQ8 busy803 0 motornotbusy803
	SLEEP
	JR motorwaiting803
  motornotbusy803:
RETSUB_M_GIRO_ENCODERF_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_ENCODERF_3:
SUB_M_RGB_DETECT_3:
    CALL SENSOR.GETMODE VLV_SENS_30 VLV_SENS_MODE_30
    DATA8 layer805
	DATA8 no805
	DATA8 mode8805
	
	MOVEF_8 VLV_SENS_30 no805
	SUB8 no805 1 no805
	DIV8 no805 4 layer805
	MATH MOD8 no805 4 no805

	MOVEF_8 4.0 mode8805
	
	INPUT_DEVICE READY_RAW layer805 no805 0 mode8805 0
    MOVEF_F 15.0 VLV_RED_30
    MOVEF_F 60.0 VLV_YELLOW_30
    MOVEF_F 170.0 VLV_GREEN_30
    MOVEF_F 330.0 VLV_BLUE_30
    MOVEF_F 0.0 VLV_HUE_30
    MOVEF_F 0.0 VLV_SAT_30
    MOVEF_F 0.0 VLV_VALUE_30
    MOVEF_F 0.0 VLV_COLOR_30
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_RNORMARRAY_30
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_GNORMARRAY_30
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_BNORMARRAY_30
    CALL LCD.CLEAR
    MOVEF_F 1.0 VLV_J_30
  for810:
    JR_GTF VLV_J_30 VLV_REPS_30 endfor810
  forbody810:
    CALL SENSOR.READRAW VLV_SENS_30 3.0 VLV_RGB_30
    CALL ARRAYGET_FLOAT 0.0 VLV_RRAW_30 VLV_RGB_30
    CALL ARRAYGET_FLOAT 1.0 VLV_GRAW_30 VLV_RGB_30
    CALL ARRAYGET_FLOAT 2.0 VLV_BRAW_30 VLV_RGB_30
    DATAF tmpf815
    DATA8 flag815
    DIVF VLV_RRAW_30 VPR_RGB_RWHITE tmpf815
    CP_EQF 0.0 VPR_RGB_RWHITE flag815
    SELECTF flag815 0.0 tmpf815 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_30 F.0 VLV_RNORMARRAY_30
    DATAF tmpf819
    DATA8 flag819
    DIVF VLV_GRAW_30 VPR_RGB_GWHITE tmpf819
    CP_EQF 0.0 VPR_RGB_GWHITE flag819
    SELECTF flag819 0.0 tmpf819 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_30 F.0 VLV_GNORMARRAY_30
    DATAF tmpf823
    DATA8 flag823
    DIVF VLV_BRAW_30 VPR_RGB_BWHITE tmpf823
    CP_EQF 0.0 VPR_RGB_BWHITE flag823
    SELECTF flag823 0.0 tmpf823 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_30 F.0 VLV_BNORMARRAY_30
    DATA32 milliseconds827
	MOVEF_32 5.0 milliseconds827
	DATA32 timer827
	TIMER_WAIT milliseconds827 timer827
	TIMER_READY timer827
    ADDF VLV_J_30 1.0 VLV_J_30
    JR_LTEQF VLV_J_30 VLV_REPS_30 forbody810
  endfor810:
    MOVEF_F 1.0 VLV_J_30
  for829:
    JR_GTF VLV_J_30 VLV_REPS_30 endfor829
  forbody829:
    CALL ARRAYGET_FLOAT VLV_J_30 F.0 VLV_RNORMARRAY_30
    ADDF VLV_J_30 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_RNORMARRAY_30
    ADDF F.0 F.1 VLV_RNORM_30
    CALL ARRAYGET_FLOAT VLV_J_30 F.0 VLV_GNORMARRAY_30
    ADDF VLV_J_30 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_GNORMARRAY_30
    ADDF F.0 F.1 VLV_GNORM_30
    CALL ARRAYGET_FLOAT VLV_J_30 F.0 VLV_BNORMARRAY_30
    ADDF VLV_J_30 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_BNORMARRAY_30
    ADDF F.0 F.1 VLV_BNORM_30
    ADDF VLV_J_30 2.0 VLV_J_30
    JR_LTEQF VLV_J_30 VLV_REPS_30 forbody829
  endfor829:
    DATAF tmpf843
    DATA8 flag843
    DIVF VLV_RNORM_30 VLV_REPS_30 tmpf843
    CP_EQF 0.0 VLV_REPS_30 flag843
    SELECTF flag843 0.0 tmpf843 VLV_RNORM_30

    DATAF tmpf844
    DATA8 flag844
    DIVF VLV_GNORM_30 VLV_REPS_30 tmpf844
    CP_EQF 0.0 VLV_REPS_30 flag844
    SELECTF flag844 0.0 tmpf844 VLV_GNORM_30

    DATAF tmpf845
    DATA8 flag845
    DIVF VLV_BNORM_30 VLV_REPS_30 tmpf845
    CP_EQF 0.0 VLV_REPS_30 flag845
    SELECTF flag845 0.0 tmpf845 VLV_BNORM_30

    DATA8 flag846
	CP_GTF VLV_RNORM_30 VLV_GNORM_30 flag846
	SELECTF flag846 VLV_RNORM_30 VLV_GNORM_30 F.0
    DATA8 flag847
	CP_GTF F.0 VLV_BNORM_30 flag847
	SELECTF flag847 F.0 VLV_BNORM_30 VLV_MAX_30
    DATA8 flag848
	CP_LTF VLV_RNORM_30 VLV_GNORM_30 flag848
	SELECTF flag848 VLV_RNORM_30 VLV_GNORM_30 F.0
    DATA8 flag849
	CP_LTF F.0 VLV_BNORM_30 flag849
	SELECTF flag849 F.0 VLV_BNORM_30 VLV_MIN_30
    JR_NEQF VLV_MAX_30 VLV_MIN_30 else850_1
    MOVEF_F 0.0 VLV_HUE_30
    JR endif850
  else850_1:
    JR_NEQF VLV_MAX_30 VLV_RNORM_30 else850_2
    JR_LTF VLV_GNORM_30 VLV_BNORM_30 else851_1
    SUBF VLV_GNORM_30 VLV_BNORM_30 F.1
    MULF 60.0 F.1 F.0
    SUBF VLV_MAX_30 VLV_MIN_30 F.1
    DATAF tmpf855
    DATA8 flag855
    DIVF F.0 F.1 tmpf855
    CP_EQF 0.0 F.1 flag855
    SELECTF flag855 0.0 tmpf855 VLV_HUE_30

    JR endif851
  else851_1:
    SUBF VLV_GNORM_30 VLV_BNORM_30 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_30 VLV_MIN_30 F.2
    DATAF tmpf859
    DATA8 flag859
    DIVF F.1 F.2 tmpf859
    CP_EQF 0.0 F.2 flag859
    SELECTF flag859 0.0 tmpf859 F.0

    ADDF F.0 360.0 VLV_HUE_30
  else851_2:
  endif851:
    JR endif850
  else850_2:
    JR_NEQF VLV_MAX_30 VLV_GNORM_30 else850_3
    SUBF VLV_BNORM_30 VLV_RNORM_30 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_30 VLV_MIN_30 F.2
    DATAF tmpf864
    DATA8 flag864
    DIVF F.1 F.2 tmpf864
    CP_EQF 0.0 F.2 flag864
    SELECTF flag864 0.0 tmpf864 F.0

    ADDF F.0 120.0 VLV_HUE_30
    JR endif850
  else850_3:
    SUBF VLV_RNORM_30 VLV_GNORM_30 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_30 VLV_MIN_30 F.2
    DATAF tmpf869
    DATA8 flag869
    DIVF F.1 F.2 tmpf869
    CP_EQF 0.0 F.2 flag869
    SELECTF flag869 0.0 tmpf869 F.0

    ADDF F.0 240.0 VLV_HUE_30
  else850_4:
  endif850:
    JR_NEQF VLV_MAX_30 0.0 else871_1
    MOVEF_F 0.0 VLV_SAT_30
    JR endif871
  else871_1:
    DATAF tmpf872
    DATA8 flag872
    DIVF VLV_MIN_30 VLV_MAX_30 tmpf872
    CP_EQF 0.0 VLV_MAX_30 flag872
    SELECTF flag872 0.0 tmpf872 F.0

    SUBF 1.0 F.0 VLV_SAT_30
  else871_2:
  endif871:
    MOVEF_F VLV_MAX_30 VLV_VALUE_30
    ADDF VPR_RGB_VALUEBLANCO VPR_RGB_VALUENEGRO F.0
    DATAF tmpf875
    DATA8 flag875
    DIVF F.0 2.0 tmpf875
    CP_EQF 0.0 2.0 flag875
    SELECTF flag875 0.0 tmpf875 VLV_RGBGREY_30

    ADDF VLV_RRAW_30 VLV_GRAW_30 F.1
    ADDF F.1 VLV_BRAW_30 F.0
    JR_GTF F.0 3.0 else876_1
    MOVEF_F 0.0 VLV_COLOR_30
    JR endif876
  else876_1:
    JR_GTEQF VLV_SAT_30 0.3 else879_1
    JR_LTEQF VLV_VALUE_30 VLV_RGBGREY_30 else880_1
    MOVEF_F 6.0 VLV_COLOR_30
    JR endif880
  else880_1:
    MOVEF_F 1.0 VLV_COLOR_30
  else880_2:
  endif880:
    JR endif879
  else879_1:
    JR_LTF VLV_HUE_30 0.0 else881_1
    JR_GTEQF VLV_HUE_30 VLV_RED_30 else881_1
    MOVEF_F 5.0 VLV_COLOR_30
    JR endif881
  else881_1:
    JR_LTF VLV_HUE_30 VLV_RED_30 else881_2
    JR_GTEQF VLV_HUE_30 VLV_YELLOW_30 else881_2
    MOVEF_F 4.0 VLV_COLOR_30
    JR endif881
  else881_2:
    JR_LTF VLV_HUE_30 VLV_YELLOW_30 else881_3
    JR_GTEQF VLV_HUE_30 VLV_GREEN_30 else881_3
    MOVEF_F 3.0 VLV_COLOR_30
    JR endif881
  else881_3:
    JR_LTF VLV_HUE_30 VLV_GREEN_30 else881_4
    JR_GTEQF VLV_HUE_30 VLV_BLUE_30 else881_4
    MOVEF_F 2.0 VLV_COLOR_30
    JR endif881
  else881_4:
    MOVEF_F 5.0 VLV_COLOR_30
  else881_5:
  endif881:
  else879_2:
  endif879:
  else876_2:
  endif876:
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    STRINGS VALUE_FORMATTED VLV_RRAW_30 '%g' 99 S.1
    CALL TEXT.APPEND 'R: ' S.1 S.0
    CALL LCD.WRITE 33.0 20.0 S.0
    STRINGS VALUE_FORMATTED VLV_GRAW_30 '%g' 99 S.1
    CALL TEXT.APPEND 'G: ' S.1 S.0
    CALL LCD.WRITE 33.0 35.0 S.0
    STRINGS VALUE_FORMATTED VLV_BRAW_30 '%g' 99 S.1
    CALL TEXT.APPEND 'B: ' S.1 S.0
    CALL LCD.WRITE 33.0 50.0 S.0
    STRINGS VALUE_FORMATTED VLV_COLOR_30 '%g' 99 S.1
    CALL TEXT.APPEND 'color: ' S.1 S.0
    CALL LCD.WRITE 33.0 70.0 S.0
    STRINGS VALUE_FORMATTED VLV_VALUE_30 '%g' 99 S.1
    CALL TEXT.APPEND 'Value: ' S.1 S.0
    CALL LCD.WRITE 33.0 90.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
    DATA8 layer900
	DATA8 no900
	DATA8 mode8900
	
	MOVEF_8 VLV_SENS_30 no900
	SUB8 no900 1 no900
	DIV8 no900 4 layer900
	MATH MOD8 no900 4 no900

	MOVEF_8 VLV_SENS_MODE_30 mode8900
	
	INPUT_DEVICE READY_RAW layer900 no900 0 mode8900 0
RETSUB_M_RGB_DETECT_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RGB_DETECT_3:
SUB_M_RGB_GRITAR_1:
    JR_NEQF VLV_COLOR_31 0.0 else901_1
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Zero'
    JR endif901
  else901_1:
    JR_NEQF VLV_COLOR_31 1.0 else901_2
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Black'
    JR endif901
  else901_2:
    JR_NEQF VLV_COLOR_31 2.0 else901_3
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/BLUE'
    JR endif901
  else901_3:
    JR_NEQF VLV_COLOR_31 3.0 else901_4
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/GREEN'
    JR endif901
  else901_4:
    JR_NEQF VLV_COLOR_31 4.0 else901_5
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/YELLOW'
    JR endif901
  else901_5:
    JR_NEQF VLV_COLOR_31 5.0 else901_6
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/RED'
    JR endif901
  else901_6:
    JR_NEQF VLV_COLOR_31 6.0 else901_7
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/White'
    JR endif901
  else901_7:
    JR_NEQF VLV_COLOR_31 7.0 else901_8
    CALL SPEAKER.PLAY 100.0 'WRO2025/Media/Brown'
  else901_8:
  endif901:
    SOUND_READY
RETSUB_M_RGB_GRITAR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RGB_GRITAR_1:
}
subcall ARRAYSTORE_FLOAT   // FFFV
{
	IN_F index
	IN_F value	
	IN_16 handle
	
	DATA32 index32
	DATA32 len	
	MOVEF_32 index index32

	ARRAY SIZE handle len
	JR_LT32 index32 0 negativeindex
	JR_LT32 index32 len arraybigenough

increasesize:	
	DATA32 doublelen
	ADD32 len len doublelen
	ARRAY RESIZE handle doublelen
writeloop:	
	ARRAY_WRITE handle len 0.0
	ADD32 len 1 len
	JR_LT32 len doublelen writeloop
	JR_GTEQ32 index32 len increasesize
	
arraybigenough:
	ARRAY_WRITE handle index32 value
negativeindex:
}
subcall SPEAKER.PLAY    // FSV 
{
	IN_F volume
	IN_S filename 252	

	// prepend a path to really reach the target file from the current working directory
	DATA8 vol 
	DATAS fullname 300
	MOVEF_8 volume vol

	STRINGS ADD '../../../..' filename fullname  // when using absolute path, go to file system top from the VM directory and then back down
	JR_EQ8 filename 47 absolutepath               // filename begins with a '/' - using absolute path
	STRINGS ADD '../prjs/' filename fullname      // by default use path relative to prjs folder (must go from the current VM directory to there)
absolutepath:
	
	SOUND PLAY vol fullname
}
subcall MOTOR.SCHEDULE   // SFFFFSV    MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F step1
	IN_F step2
	IN_F step3
	IN_S brake 8
	
	DATA8 layer
	DATA8 nos
	DATA8 spd
	DATA32 stp1
	DATA32 stp2
	DATA32 stp3	
	DATA8 brk
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	JR_EQ8 nos 0 noport

	MOVEF_8 speed spd
	MATH ABS step1 step1
	MOVEF_32 step1 stp1
	MATH ABS step2 step2
	MOVEF_32 step2 stp2
	MATH ABS step3 step3
	MOVEF_32 step3 stp3	
	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	

	OUTPUT_STEP_SPEED layer nos spd stp1 stp2 stp3 brk
noport:
}
subcall MOTORDECODEPORTSDESCRIPTOR  //  V
{
	IN_S descriptor 8
	OUT_8 layer
	OUT_8 nos

	DATA8 i 
	DATA8 c

	MOVE8_8 0 layer
	MOVE8_8 0 nos	
	MOVE8_8 0 i
loop:
	READ8 descriptor i c
	JR_EQ8 c 0 decoding_end
	
	JR_LT8 c 65 no_uppercase_port
	JR_GT8 c 68 no_uppercase_port
	SUB8 c 65 c
	RL8  1 c c
	OR8  nos c nos
	JR loop_end
no_uppercase_port:
	JR_LT8 c 97 no_lowercase_port
	JR_GT8 c 100 no_lowercase_port
	SUB8 c 97 c
	RL8  1 c c
	OR8  nos c nos	
	JR loop_end
no_lowercase_port:
	JR_LT8 c 49 loop_end
	JR_GT8 c 52 loop_end
	SUB8 c 49 layer
loop_end:
	ADD8 1 i i
	JR loop	
	
decoding_end:
	RETURN
}
subcall MOTOR.STOP       // SSV      MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_S brake 8

	DATA8 layer
	DATA8 nos	
	DATA8 brk
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	JR_EQ8 nos 0 noport

	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	
	
	OUTPUT_STOP layer nos brk
noport:
}
subcall EV3.BATTERYVOLTAGE  // F
{
	OUT_F voltage
	UI_READ GET_VBATT voltage
}
subcall ARRAYGET_FLOAT     // FFF
{
	IN_F index
	OUT_F value
	IN_16 handle
	
	DATA32 index32
	DATA32 len
	MOVEF_32 index index32
	
	ARRAY SIZE handle len
	JR_LT32 index32 0 outofbounds
	JR_GTEQ32 index32 len outofbounds
	
	ARRAY_READ handle index32 value
	RETURN
outofbounds:
	MOVE8_F 0 value	
}
subcall TEXT.APPEND     // SSS
{
	IN_S a 252
	IN_S b 252
    OUT_S result 252
	
	DATA16 len0
	DATA16 len1
	DATA16 sum

	STRINGS GET_SIZE a len0
	STRINGS GET_SIZE b len1
	ADD16 len0,len1,sum
	JR_GT16 sum,251,stringsizeexceeded

	STRINGS ADD a b result
	RETURN
	
stringsizeexceeded:	
    STRINGS DUPLICATE a result
}
subcall LCD.CLEAR   // V
{
	UI_DRAW(TOPLINE,0)
	UI_DRAW(CLEAN)
	
	JR_NEQ32 0 STOPLCDUPDATE skipupdate
	UI_DRAW UPDATE
skipupdate:
}
subcall LCD.WRITE     // FFSV
{
	IN_F x
	IN_F y
	IN_S text 252
	
	DATA16 x_16
	DATA16 y_16
	MOVEF_16 x x_16
	MOVEF_16 y y_16
	
	UI_DRAW SELECT_FONT 1
	UI_DRAW TEXT 1 x_16 y_16 text

	JR_NEQ32 0 STOPLCDUPDATE skipupdate
	UI_DRAW UPDATE
skipupdate:
}
subcall EQ_STRING       // SSS
{
	IN_S  a 252
	IN_S  b 252
	OUT_S result 8
	
	DATA8 flag
	
	// check if completely equal
	STRINGS COMPARE a b flag
	JR_NEQ8 FLAG 0 isequal
	// second chance: when both values are "True" in any casing, this also counts as equal
	AND8888_32 a -538976289 a        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE a 'TRUE' flag	
	JR_EQ8 0,flag,isnotequal
	AND8888_32 b -538976289 b        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE b 'TRUE' flag	
	JR_EQ8 0,flag,isnotequal
isequal:
	STRINGS DUPLICATE 'True' result
	RETURN
isnotequal:
	STRINGS DUPLICATE 'False' result
	RETURN
}
subcall MOTOR.GETCOUNT    // SF     MOTORDECODEPORTDESCRIPTOR
{
	IN_S port 8
	OUT_F result
	
	DATA8 layer
	DATA8 no
	DATA32 tacho
	
	CALL MOTORDECODEPORTDESCRIPTOR port layer no
	JR_LT8 no 0 noport
	
	OUTPUT_GET_COUNT layer no tacho
	MOVE32_F tacho result

	DATA8 nos
	RL8 1 no nos
	DATA8 inv
	READ8 MOTORISINVERTED layer inv 
	AND8 inv nos inv
	JR_EQ8 inv 0 noinvert
	SUBF 0.0 result result
noinvert:
	RETURN

noport:	
	MOVE8_F 0 result	
}
subcall MOTORDECODEPORTDESCRIPTOR  //  V
{
	IN_S descriptor 8
	OUT_8 layer
	OUT_8 no

	DATA8 i 
	DATA8 c

	MOVE8_8 0 layer
	MOVE8_8 -1 no
	MOVE8_8 0 i
loop:
	READ8 descriptor i c
	JR_EQ8 c 0 decoding_end
	
	JR_LT8 c 65 no_uppercase_port
	JR_GT8 c 68 no_uppercase_port
	SUB8 c 65 c
	MOVE8_8 c no
	JR loop_end
no_uppercase_port:
	JR_LT8 c 97 no_lowercase_port
	JR_GT8 c 100 no_lowercase_port
	SUB8 c 97 c
	MOVE8_8 c no
	JR loop_end
no_lowercase_port:
	JR_LT8 c 49 loop_end
	JR_GT8 c 52 loop_end
	SUB8 c 49 layer
loop_end:
	ADD8 1 i i
	JR loop	
	
decoding_end:
	RETURN
}
subcall MOTOR.STARTSYNC      // SFFV       MOTORSTARTSTEERIMPL
{
	IN_S ports 8
	IN_F speed1
	IN_F speed2

	JR_GTEQF speed1 -100.0 nottoosmall1
	MOVEF_F -100.0 speed1
nottoosmall1:
	JR_LTEQF speed1 100.0 nottoobig1
	MOVEF_F 100.0 speed1
nottoobig1:
	JR_GTEQF speed2 -100.0 nottoosmall2
	MOVEF_F -100.0 speed2
nottoosmall2:
	JR_LTEQF speed1 100.0 nottoobig2
	MOVEF_F 100.0 speed2
nottoobig2:

	DATAF speed  
	DATAF turn
	MOVE8_F 0 speed
	MOVE8_F 0 turn

	DATAF speed1abs
	DATAF speed2abs
	MATH ABS speed1 speed1abs
	MATH ABS speed2 speed2abs
	JR_LTF speed1abs speed2abs secondisfaster
	JR_EQF speed1abs 0.0 donecomputation
	 MOVEF_F speed1 speed
	 MULF 100.0 speed2 turn
	 DIVF turn speed1 turn
	 SUBF 100.0 turn turn
	JR donecomputation
secondisfaster:
	 MOVEF_F speed2 speed
	 MULF 100.0 speed1 turn
	 DIVF turn speed2 turn
	 SUBF turn 100.0 turn
donecomputation:

	CALL MOTORSTARTSTEERIMPL ports speed turn
}
subcall MOTORSTARTSTEERIMPL      // SFFV       MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F turn

	DATA8 layer
	DATA8 nos	
	DATA8 first
	DATA8 second
	DATA8 invfirst
	DATA8 invsecond

	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	READ8 FIRSTOF2 nos first
	JR_EQ8 0 first not_two_ports
	XOR8 first nos second
	READ8 MOTORISINVERTED layer invfirst
	AND8 first invfirst invfirst
	READ8 MOTORISINVERTED layer invsecond
	AND8 second invsecond invsecond

	JR_LTF turn 0.0 second_is_master
first_is_master:
	JR_EQ8 invfirst 0 non_invert_first
	SUBF 0.0 speed speed
	JR_NEQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion
non_invert_first:
	JR_EQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion

second_is_master:
	JR_EQ8 invsecond 0 non_invert_second
	SUBF 0.0 speed speed
	JR_NEQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion
non_invert_second:
	JR_EQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion

done_inversion:
	DATA8 spd  
	DATA16 trn
	MOVEF_16 turn trn
	MOVEF_8 speed spd
	OUTPUT_STEP_SYNC layer nos spd trn 0 0
not_two_ports:
}
subcall SENSOR.READPERCENT       // FF
{
	IN_F port
	OUT_F result

	DATA8 layer
	DATA8 no
	DATA8 percentage

	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	INPUT_READ layer no 0 -1 percentage
	JR_LT8 percentage 0 novalue
	
	MOVE8_F percentage result
	RETURN
novalue:	
	MOVE8_F 0 result
}
subcall MOTOR.SCHEDULESYNC   // SFFFSV    MOTORSCHEDULESTEERIMPL
{
	IN_S ports 8
	IN_F speed1
	IN_F speed2
	IN_F count
	IN_S brake 8
	
	JR_GTEQF speed1 -100.0 nottoosmall1
	MOVEF_F -100.0 speed1
nottoosmall1:
	JR_LTEQF speed1 100.0 nottoobig1
	MOVEF_F 100.0 speed1
nottoobig1:
	JR_GTEQF speed2 -100.0 nottoosmall2
	MOVEF_F -100.0 speed2
nottoosmall2:
	JR_LTEQF speed2 100.0 nottoobig2
	MOVEF_F 100.0 speed2
nottoobig2:

	DATAF speed  
	DATAF turn
	MOVE8_F 0 speed
	MOVE8_F 0 turn

	DATAF speed1abs
	DATAF speed2abs
	MATH ABS speed1 speed1abs
	MATH ABS speed2 speed2abs
	JR_LTF speed1abs speed2abs secondisfaster
	JR_EQF speed1abs 0.0 donecomputation
	 MOVEF_F speed1 speed
	 MULF 100.0 speed2 turn
	 DIVF turn speed1 turn
	 SUBF 100.0 turn turn
	JR donecomputation
secondisfaster:
	 MOVEF_F speed2 speed
	 MULF 100.0 speed1 turn
	 DIVF turn speed2 turn
	 SUBF turn 100.0 turn
donecomputation:
	
	CALL MOTORSCHEDULESTEERIMPL ports speed turn count brake
}
subcall MOTORSCHEDULESTEERIMPL   // SFFFSV    MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F turn
	IN_F count
	IN_S brake 8
	
	DATA8 layer
	DATA8 nos	
	DATA8 first
	DATA8 second
	DATA8 invfirst
	DATA8 invsecond
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	READ8 FIRSTOF2 nos first
	JR_EQ8 0 first not_two_ports
	XOR8 first nos second
	READ8 MOTORISINVERTED layer invfirst
	AND8 first invfirst invfirst
	READ8 MOTORISINVERTED layer invsecond
	AND8 second invsecond invsecond

	JR_LTF turn 0.0 second_is_master
first_is_master:
	JR_EQ8 invfirst 0 non_invert_first
	SUBF 0.0 speed speed
	JR_NEQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion
non_invert_first:
	JR_EQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion

second_is_master:
	JR_EQ8 invsecond 0 non_invert_second
	SUBF 0.0 speed speed
	JR_NEQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion
non_invert_second:
	JR_EQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion

done_inversion:
	DATA32 cnt
	DATA8 brk
	MATH ABS count count
	MOVEF_32 count cnt
	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	

	JR_LTEQ32 cnt 0 dontmove	

	DATA8 spd  
	DATA16 trn
	MOVEF_16 turn trn
	MOVEF_8 speed spd
	OUTPUT_STEP_SYNC layer nos spd trn cnt brk	
dontmove:	
not_two_ports:
}
subcall SENSOR.GETMODE		// FF
{
	IN_F port
	OUT_F result
	
	DATA8 layer
	DATA8 no
	DATA8 type
	DATA8 mode
	
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no
	
	INPUT_DEVICE GET_TYPEMODE layer no type mode
	MOVE8_F mode result
}
subcall SENSOR.READRAW            // FFA
{
	IN_F port
	IN_F values
	IN_16 resultarray
	
	DATA8 layer
	DATA8 no
	DATA32 values32
		
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	MOVEF_32 values values32

	JR_LTEQ32 values32 0 arrayempty
	ARRAY RESIZE resultarray values32

	DATA32 rawvalue0
	DATA32 rawvalue1
	DATA32 rawvalue2
	DATA32 rawvalue3
	DATA32 rawvalue4
	DATA32 rawvalue5
	DATA32 rawvalue6
	DATA32 rawvalue7
	INPUT_READEXT layer no 0 -1 18 8 rawvalue0 rawvalue1 rawvalue2 rawvalue3 rawvalue4 rawvalue5 rawvalue6 rawvalue7
	
	DATA32 i
	DATA32 rawtmp
	MOVE32_32 0 i
loop:
	DATA8 tmp8
	DATAF tmpf

	MOVEF_F 0.0 tmpf
	JR_GTEQ32 i 8 nomoredata

	MOVE32_8 i tmp8
	READ32 rawvalue0 tmp8 rawtmp
	JR_LT32 rawtmp -1000000000 nomoredata
	MOVE32_F rawtmp tmpf

nomoredata:	
	ARRAY_WRITE resultarray i tmpf

	ADD32 i 1 i
	JR_LT32 i values32 loop
	RETURN

arrayempty:
	ARRAY RESIZE resultarray 0
}
subcall ARRAYCREATE_FLOAT   // F
{
	OUT_16 handle
	
	ARRAY CREATEF 8 handle			// create with 8 elements
	ARRAY FILL handle 0.0
}
