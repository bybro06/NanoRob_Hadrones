DATA16 FD_NATIVECODECOMMAND
DATA16 FD_NATIVECODERESPONSE
DATA32 STOPLCDUPDATE
DATA32 NUMMAILBOXES
ARRAY8 MOTORISINVERTED 4     
ARRAY8 FIRSTOF2  16
ARRAY16 LOCKS 2           
DATA32 s1out1
DATA32 s1out2
DATA32 s1out3
DATA32 s2out1
DATA32 s2out2
DATA32 s2out3
DATA32 s3out1
DATA32 s3out2
DATA32 s3out3
DATA32 s4out1
DATA32 s4out2
DATA32 s4out3
DATA32 getTachoA
DATA32 tmpTachoA
DATA8 getSpeedA
DATA8 setSpeedA
DATA8 setPowerA
DATA32 getTachoB
DATA32 tmpTachoB
DATA8 getSpeedB
DATA8 setSpeedB
DATA8 setPowerB
DATA32 getTachoC
DATA32 tmpTachoC
DATA8 getSpeedC
DATA8 setSpeedC
DATA8 setPowerC
DATA32 getTachoD
DATA32 tmpTachoD
DATA8 getSpeedD
DATA8 setSpeedD
DATA8 setPowerD
DATA16 newArray1d
DATA32 newSize1d
DATA32 newIndex1d
DATA32 timeMC1
DATA32 timeMC2
DATA32 timeMC3
DATA32 timeMC4
DATA32 timeMC5
DATA32 timeMC6
DATA32 timeMC7
DATA32 timeMC8
DATA32 timeMC9
DATA32 timeMC1tmp
DATA32 timeMC2tmp
DATA32 timeMC3tmp
DATA32 timeMC4tmp
DATA32 timeMC5tmp
DATA32 timeMC6tmp
DATA32 timeMC7tmp
DATA32 timeMC8tmp
DATA32 timeMC9tmp
DATAF VPR_GIRO_G1
DATAF VPR_RGB_VALUENEGRO
DATAF VPR_RGB_VALUEBLANCO
DATAF VPR_RECTO_DIAMETRO
DATAF VPR_GIRO_DIAMETRO
DATAF VPR_SIGUELINEAS_DIAMETRO
DATAF VPR_SMART_DIAMETRO
DATAF VPR_SIGUELINEAS_NEGRO1
DATAF VPR_SIGUELINEAS_NEGRO3
DATAF VPR_SIGUELINEAS_NEGRO4
DATAF VPR_SIGUELINEAS_BLANCO1
DATAF VPR_SIGUELINEAS_BLANCO3
DATAF VPR_SIGUELINEAS_BLANCO4
DATAF VPR_SMART_NEGRO1
DATAF VPR_SMART_NEGRO3
DATAF VPR_SMART_NEGRO4
DATAF VPR_SMART_BLANCO1
DATAF VPR_SMART_BLANCO3
DATAF VPR_SMART_BLANCO4
DATAF VPR_RECTO_NEGRO
DATAF VPR_RECTO_BLANCO
DATAF VPR_GIRO_NEGRO
DATAF VPR_GIRO_BLANCO
DATAF VPR_RGB_RWHITE
DATAF VPR_RGB_GWHITE
DATAF VPR_RGB_BWHITE
DATAF VLV_VELOCIDAD_10
DATAF VLV_TIMER_10
DATAF VLV_VELOCIDAD_4
DATAF VLV_ENCODER_4
DATAF VLV_VELOCIDAD_11
DATAF VLV_ENCODER_11
DATAF VLV_VELOCIDAD_12
DATAF VLV_TIEMPO_12
DATAF VLV_VELOCIDAD_13
DATAF VLV_DISTANCIA_13
DATAF VLV_VELOCIDAD1_21
DATAF VLV_VELOCIDAD2_21
DATAF VLV_GRADOS_21
DATAF VLV_VELOCIDAD1_22
DATAF VLV_VELOCIDAD2_22
DATAF VLV_TIEMPO_22
DATAF VLV_V0_14
DATAF VLV_VMAX_14
DATAF VLV_DISTANCIAACCEL_14
DATAF VLV_DISTANCIACRUCERO_14
DATAF VLV_DISTANCIADECEL_14
DATAF VLV_VELOCIDAD1_23
DATAF VLV_VELOCIDAD2_23
DATAF VLV_GRADOS_23
DATAF VLV_VELOCIDAD1_24
DATAF VLV_VELOCIDAD2_24
DATAF VLV_TIEMPO_24
DATAF VLV_V0_15
DATAF VLV_VMAX_15
DATAF VLV_DISTANCIAACCEL_15
DATAF VLV_DISTANCIACRUCERO_15
DATAF VLV_DISTANCIADECEL_15
DATAF VLV_VELOCIDAD_16
DATAF VLV_DISTANCIA_16
DATAF VLV_VELOCIDAD_17
DATAF VLV_SENSOR_17
DATAF VLV_VELOCIDAD_30
DATAF VLV_ENCODER_30
DATAF VLV_VELOCIDAD_31
DATAF VLV_READER_31
DATAF VLV_VELOCIDAD_32
DATAF VLV_ENCODER_32
DATAF VLV_VELOCIDAD1_25
DATAF VLV_VELOCIDAD2_25
DATAF VLV_DISTANCIA_25
DATAF VLV_VELOCIDAD1_26
DATAF VLV_VELOCIDAD2_26
DATAF VLV_DISTANCIA_26
DATAF VLV_VELOCIDAD1_27
DATAF VLV_VELOCIDAD2_27
DATAF VLV_SENS_27
DATAF VLV_COLOR_27
DATAF VLV_VELOCIDAD1_28
DATAF VLV_VELOCIDAD2_28
DATAF VLV_SENS_28
DATAF VLV_COLOR_28
DATAF VLV_VELOCIDAD_33
DATAF VLV_ENCODER_33
DATAF VLV_ALTURA_3
DATAF VLV_VELOCIDAD_18
DATAF VLV_SENSOR_18
DATAF VLV_VELOCIDAD_34
DATAF VLV_COLOR_34
DATAF VLV_COLOR_6
DATAF VLV_VELOCIDAD_19
DATAF VLV_SENSOR_19
DATAF VLV_COLOR_19
DATAF VLV_VELOCIDAD_35
DATAF VLV_COLOR_35
DATAF VLV_VELOCIDAD_20
DATAF VLV_SENSOR_20
DATAF VLV_COLOR_20
DATAF VLV_VELOCIDAD1_29
DATAF VLV_VELOCIDAD2_29
DATAF VLV_SENS_29
DATAF VLV_SENS_36
DATAF VLV_REPS_36
DATAF VLV_COLOR_36
DATAF VLV_COLOR_37
DATAF VLV_NUMERO_7
DATAF VGV_BASE
DATAF VGV_COLOR
DATAF VGV_ENCODERA
DATAF VGV_ENCODERD
DATAF VGV_ERRORA
DATAF VGV_OLDERRORA
DATAF VGV_ERRORD
DATAF VGV_OLDERRORD
DATAF VGV_DIAMETRO
DATAF VGV_NEGRO1
DATAF VGV_NEGRO3
DATAF VGV_NEGRO4
DATAF VGV_BLANCO1
DATAF VGV_BLANCO3
DATAF VGV_BLANCO4
DATAF VGV_CORRECCIONA
DATAF VLV_ENCDIFF_4
DATAF VLV_SIGNO_4
DATAF VLV_SAFETYTIMER_4
DATAF VLV_VOLTAJE_8
DATAF VLV_ENCDIFF_11
DATAF VLV_SIGNO_11
DATAF VLV_SAFETYTIMER_11
DATAF VLV_CORRECCION_12
DATAF VLV_CORRECCION_13
DATAF VLV_ENC_13
DATAF VLV_STARTB_14
DATAF VLV_STARTC_14
DATAF VLV_ENCODERB_14
DATAF VLV_ENCODERC_14
DATAF VLV_SIGNO_14
DATAF VLV_VEL_14
DATAF VLV_KP_14
DATAF VLV_KD_14
DATAF VLV_ERROR_14
DATAF VLV_OLDERROR_14
DATAF VLV_GRADOSACCEL_14
DATAF VLV_GRADOSCRUCERO_14
DATAF VLV_GRADOSDECEL_14
DATAF VLV_PENDIENTE_14
DATAF VLV_CORRECCION_14
DATAF VLV_STARTB_15
DATAF VLV_STARTC_15
DATAF VLV_ENCODERB_15
DATAF VLV_ENCODERC_15
DATAF VLV_SIGNO_15
DATAF VLV_VEL_15
DATAF VLV_KP_15
DATAF VLV_KD_15
DATAF VLV_ERROR_15
DATAF VLV_OLDERROR_15
DATAF VLV_GRADOSACCEL_15
DATAF VLV_GRADOSCRUCERO_15
DATAF VLV_GRADOSDECEL_15
DATAF VLV_PENDIENTE_15
DATAF VLV_CORRECCION_15
DATAF VLV_CORRECCION_16
DATAF VLV_ENC_16
DATAF VLV_CORRECCION_17
DATAF VLV_LECTURA_17
DATAF VLV_CORRECCION_18
DATAF VLV_LECTURA_18
DATAF VLV_CORRECCION_19
DATAF VLV_MODE_19
DATAF VLV_CORRECCION_20
DATAF VLV_MODE_20
DATAF VLV_SIGNO_21
DATAF VLV_VMIN_21
DATAF VLV_VMAX_21
DATAF VLV_ENCODER_21
DATAF VLV_SIGNO_23
DATAF VLV_VMIN_23
DATAF VLV_VMAX_23
DATAF VLV_ENCODER_23
DATAF VLV_ENCODER_25
DATAF VLV_ENCODER_26
DATAF VLV_MODE_27
DATAF VLV_MODE_28
DATAF VLV_LECTURA_29
DATAF VLV_LECTURA1_30
DATAF VLV_LECTURA3_30
DATAF VLV_LECTURA4_30
DATAF VLV_KP_30
DATAF VLV_KD_30
DATAF VLV_DISTANCIA_30
DATAF VLV_ERROR_30
DATAF VLV_OLDERROR_30
DATAF VLV_U_30
DATAF VLV_SENTIDO_30
DATAF VLV_STARTVELOCIDAD_30
DATAF VLV_STARTKP_30
DATAF VLV_STARTKD_30
DATAF VLV_STARTC_30
DATAF VLV_ENCODERC_30
DATAF VLV_LECTURA1_31
DATAF VLV_LECTURA3_31
DATAF VLV_LECTURA4_31
DATAF VLV_KP_31
DATAF VLV_KD_31
DATAF VLV_ERROR_31
DATAF VLV_OLDERROR_31
DATAF VLV_U_31
DATAF VLV_SENTIDO_31
DATAF VLV_LECTURA_31
DATAF VLV_LECTURAIZQ_31
DATAF VLV_LECTURADCH_31
DATAF VLV_LECTURA1_32
DATAF VLV_LECTURA3_32
DATAF VLV_LECTURA4_32
DATAF VLV_KP_32
DATAF VLV_KD_32
DATAF VLV_ERROR_32
DATAF VLV_OLDERROR_32
DATAF VLV_U_32
DATAF VLV_SENTIDO_32
DATAF VLV_STARTC_32
DATAF VLV_ENCODERC_32
DATAF VLV_LECTURA1_33
DATAF VLV_LECTURA3_33
DATAF VLV_LECTURA4_33
DATAF VLV_KP_33
DATAF VLV_KD_33
DATAF VLV_ERROR_33
DATAF VLV_OLDERROR_33
DATAF VLV_U_33
DATAF VLV_SENTIDO_33
DATAF VLV_STARTC_33
DATAF VLV_ENCODERC_33
DATAF VLV_MODE_34
DATAF VLV_LECTURA1_34
DATAF VLV_LECTURA3_34
DATAF VLV_LECTURA4_34
DATAF VLV_KP_34
DATAF VLV_KD_34
DATAF VLV_ERROR_34
DATAF VLV_OLDERROR_34
DATAF VLV_U_34
DATAF VLV_SENTIDO_34
DATAF VLV_MODE_35
DATAF VLV_LECTURA1_35
DATAF VLV_LECTURA3_35
DATAF VLV_LECTURA4_35
DATAF VLV_KP_35
DATAF VLV_KD_35
DATAF VLV_ERROR_35
DATAF VLV_OLDERROR_35
DATAF VLV_U_35
DATAF VLV_SENTIDO_35
DATAF VLV_SENS_MODE_36
DATAF VLV_RED_36
DATAF VLV_YELLOW_36
DATAF VLV_GREEN_36
DATAF VLV_BLUE_36
DATAF VLV_HUE_36
DATAF VLV_SAT_36
DATAF VLV_VALUE_36
ARRAY16 VLV_RNORMARRAY_36 2
ARRAY16 VLV_GNORMARRAY_36 2
ARRAY16 VLV_BNORMARRAY_36 2
DATAF VLV_J_36
ARRAY16 VLV_RGB_36 2
DATAF VLV_RRAW_36
DATAF VLV_GRAW_36
DATAF VLV_BRAW_36
DATAF VLV_RNORM_36
DATAF VLV_GNORM_36
DATAF VLV_BNORM_36
DATAF VLV_MAX_36
DATAF VLV_MIN_36
DATAF VLV_RGBGREY_36
DATA32 RUNCOUNTER_F_CONTROLBRAZO_0
DATA32 RUNCOUNTER_F_DETECTA_0

vmthread MAIN
{
    MOVE32_32 0 STOPLCDUPDATE
    MOVE32_32 0 NUMMAILBOXES
    OUTPUT_RESET 0 15

	WRITE8 0 0 MOTORISINVERTED
	WRITE8 0 1 MOTORISINVERTED
	WRITE8 0 2 MOTORISINVERTED
	WRITE8 0 3 MOTORISINVERTED
	WRITE8 0 0 FIRSTOF2
	WRITE8 0 1 FIRSTOF2
	WRITE8 0 2 FIRSTOF2
	WRITE8 1 3 FIRSTOF2
	WRITE8 0 4 FIRSTOF2
	WRITE8 1 5 FIRSTOF2
	WRITE8 2 6 FIRSTOF2
	WRITE8 0 7 FIRSTOF2
	WRITE8 0 8 FIRSTOF2
	WRITE8 1 9 FIRSTOF2
	WRITE8 2 10 FIRSTOF2
	WRITE8 0 11 FIRSTOF2
	WRITE8 4 12 FIRSTOF2
	WRITE8 0 13 FIRSTOF2
	WRITE8 0 14 FIRSTOF2
	WRITE8 0 15 FIRSTOF2
    INPUT_DEVICE CLR_ALL -1
    ARRAY CREATE8 0 LOCKS
    MOVE32_32 0 s1out1
	MOVE32_32 0 s1out2
	MOVE32_32 0 s1out3
    MOVE32_32 0 s2out1
	MOVE32_32 0 s2out2
	MOVE32_32 0 s2out3
    MOVE32_32 0 s3out1
	MOVE32_32 0 s3out2
	MOVE32_32 0 s3out3
    MOVE32_32 0 s4out1
	MOVE32_32 0 s4out2
	MOVE32_32 0 s4out3
    MOVE32_32 0 timeMC1
	MOVE32_32 0 timeMC2
	MOVE32_32 0 timeMC3
	MOVE32_32 0 timeMC4
	MOVE32_32 0 timeMC5
	MOVE32_32 0 timeMC6
	MOVE32_32 0 timeMC7
	MOVE32_32 0 timeMC8
	MOVE32_32 0 timeMC9
    MOVEF_F 0.0 VPR_GIRO_G1
    MOVEF_F 0.0 VPR_RGB_VALUENEGRO
    MOVEF_F 0.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 0.0 VPR_RECTO_DIAMETRO
    MOVEF_F 0.0 VPR_GIRO_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F 0.0 VPR_SMART_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F 0.0 VPR_SMART_NEGRO1
    MOVEF_F 0.0 VPR_SMART_NEGRO3
    MOVEF_F 0.0 VPR_SMART_NEGRO4
    MOVEF_F 0.0 VPR_SMART_BLANCO1
    MOVEF_F 0.0 VPR_SMART_BLANCO3
    MOVEF_F 0.0 VPR_SMART_BLANCO4
    MOVEF_F 0.0 VPR_RECTO_NEGRO
    MOVEF_F 0.0 VPR_RECTO_BLANCO
    MOVEF_F 0.0 VPR_GIRO_NEGRO
    MOVEF_F 0.0 VPR_GIRO_BLANCO
    MOVEF_F 0.0 VPR_RGB_RWHITE
    MOVEF_F 0.0 VPR_RGB_GWHITE
    MOVEF_F 0.0 VPR_RGB_BWHITE
    MOVEF_F 0.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_TIMER_10
    MOVEF_F 0.0 VLV_VELOCIDAD_4
    MOVEF_F 0.0 VLV_ENCODER_4
    MOVEF_F 0.0 VLV_VELOCIDAD_11
    MOVEF_F 0.0 VLV_ENCODER_11
    MOVEF_F 0.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_TIEMPO_12
    MOVEF_F 0.0 VLV_VELOCIDAD_13
    MOVEF_F 0.0 VLV_DISTANCIA_13
    MOVEF_F 0.0 VLV_VELOCIDAD1_21
    MOVEF_F 0.0 VLV_VELOCIDAD2_21
    MOVEF_F 0.0 VLV_GRADOS_21
    MOVEF_F 0.0 VLV_VELOCIDAD1_22
    MOVEF_F 0.0 VLV_VELOCIDAD2_22
    MOVEF_F 0.0 VLV_TIEMPO_22
    MOVEF_F 0.0 VLV_V0_14
    MOVEF_F 0.0 VLV_VMAX_14
    MOVEF_F 0.0 VLV_DISTANCIAACCEL_14
    MOVEF_F 0.0 VLV_DISTANCIACRUCERO_14
    MOVEF_F 0.0 VLV_DISTANCIADECEL_14
    MOVEF_F 0.0 VLV_VELOCIDAD1_23
    MOVEF_F 0.0 VLV_VELOCIDAD2_23
    MOVEF_F 0.0 VLV_GRADOS_23
    MOVEF_F 0.0 VLV_VELOCIDAD1_24
    MOVEF_F 0.0 VLV_VELOCIDAD2_24
    MOVEF_F 0.0 VLV_TIEMPO_24
    MOVEF_F 0.0 VLV_V0_15
    MOVEF_F 0.0 VLV_VMAX_15
    MOVEF_F 0.0 VLV_DISTANCIAACCEL_15
    MOVEF_F 0.0 VLV_DISTANCIACRUCERO_15
    MOVEF_F 0.0 VLV_DISTANCIADECEL_15
    MOVEF_F 0.0 VLV_VELOCIDAD_16
    MOVEF_F 0.0 VLV_DISTANCIA_16
    MOVEF_F 0.0 VLV_VELOCIDAD_17
    MOVEF_F 0.0 VLV_SENSOR_17
    MOVEF_F 0.0 VLV_VELOCIDAD_30
    MOVEF_F 0.0 VLV_ENCODER_30
    MOVEF_F 0.0 VLV_VELOCIDAD_31
    MOVEF_F 0.0 VLV_READER_31
    MOVEF_F 0.0 VLV_VELOCIDAD_32
    MOVEF_F 0.0 VLV_ENCODER_32
    MOVEF_F 0.0 VLV_VELOCIDAD1_25
    MOVEF_F 0.0 VLV_VELOCIDAD2_25
    MOVEF_F 0.0 VLV_DISTANCIA_25
    MOVEF_F 0.0 VLV_VELOCIDAD1_26
    MOVEF_F 0.0 VLV_VELOCIDAD2_26
    MOVEF_F 0.0 VLV_DISTANCIA_26
    MOVEF_F 0.0 VLV_VELOCIDAD1_27
    MOVEF_F 0.0 VLV_VELOCIDAD2_27
    MOVEF_F 0.0 VLV_SENS_27
    MOVEF_F 0.0 VLV_COLOR_27
    MOVEF_F 0.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 0.0 VLV_SENS_28
    MOVEF_F 0.0 VLV_COLOR_28
    MOVEF_F 0.0 VLV_VELOCIDAD_33
    MOVEF_F 0.0 VLV_ENCODER_33
    MOVEF_F 0.0 VLV_ALTURA_3
    MOVEF_F 0.0 VLV_VELOCIDAD_18
    MOVEF_F 0.0 VLV_SENSOR_18
    MOVEF_F 0.0 VLV_VELOCIDAD_34
    MOVEF_F 0.0 VLV_COLOR_34
    MOVEF_F 0.0 VLV_COLOR_6
    MOVEF_F 0.0 VLV_VELOCIDAD_19
    MOVEF_F 0.0 VLV_SENSOR_19
    MOVEF_F 0.0 VLV_COLOR_19
    MOVEF_F 0.0 VLV_VELOCIDAD_35
    MOVEF_F 0.0 VLV_COLOR_35
    MOVEF_F 0.0 VLV_VELOCIDAD_20
    MOVEF_F 0.0 VLV_SENSOR_20
    MOVEF_F 0.0 VLV_COLOR_20
    MOVEF_F 0.0 VLV_VELOCIDAD1_29
    MOVEF_F 0.0 VLV_VELOCIDAD2_29
    MOVEF_F 0.0 VLV_SENS_29
    MOVEF_F 0.0 VLV_SENS_36
    MOVEF_F 0.0 VLV_REPS_36
    MOVEF_F 0.0 VLV_COLOR_36
    MOVEF_F 0.0 VLV_COLOR_37
    MOVEF_F 0.0 VLV_NUMERO_7
    MOVEF_F 0.0 VGV_BASE
    MOVEF_F 0.0 VGV_COLOR
    MOVEF_F 0.0 VGV_ENCODERA
    MOVEF_F 0.0 VGV_ENCODERD
    MOVEF_F 0.0 VGV_ERRORA
    MOVEF_F 0.0 VGV_OLDERRORA
    MOVEF_F 0.0 VGV_ERRORD
    MOVEF_F 0.0 VGV_OLDERRORD
    MOVEF_F 0.0 VGV_DIAMETRO
    MOVEF_F 0.0 VGV_NEGRO1
    MOVEF_F 0.0 VGV_NEGRO3
    MOVEF_F 0.0 VGV_NEGRO4
    MOVEF_F 0.0 VGV_BLANCO1
    MOVEF_F 0.0 VGV_BLANCO3
    MOVEF_F 0.0 VGV_BLANCO4
    MOVEF_F 0.0 VGV_CORRECCIONA
    MOVEF_F 0.0 VLV_ENCDIFF_4
    MOVEF_F 0.0 VLV_SIGNO_4
    MOVEF_F 0.0 VLV_SAFETYTIMER_4
    MOVEF_F 0.0 VLV_VOLTAJE_8
    MOVEF_F 0.0 VLV_ENCDIFF_11
    MOVEF_F 0.0 VLV_SIGNO_11
    MOVEF_F 0.0 VLV_SAFETYTIMER_11
    MOVEF_F 0.0 VLV_CORRECCION_12
    MOVEF_F 0.0 VLV_CORRECCION_13
    MOVEF_F 0.0 VLV_ENC_13
    MOVEF_F 0.0 VLV_STARTB_14
    MOVEF_F 0.0 VLV_STARTC_14
    MOVEF_F 0.0 VLV_ENCODERB_14
    MOVEF_F 0.0 VLV_ENCODERC_14
    MOVEF_F 0.0 VLV_SIGNO_14
    MOVEF_F 0.0 VLV_VEL_14
    MOVEF_F 0.0 VLV_KP_14
    MOVEF_F 0.0 VLV_KD_14
    MOVEF_F 0.0 VLV_ERROR_14
    MOVEF_F 0.0 VLV_OLDERROR_14
    MOVEF_F 0.0 VLV_GRADOSACCEL_14
    MOVEF_F 0.0 VLV_GRADOSCRUCERO_14
    MOVEF_F 0.0 VLV_GRADOSDECEL_14
    MOVEF_F 0.0 VLV_PENDIENTE_14
    MOVEF_F 0.0 VLV_CORRECCION_14
    MOVEF_F 0.0 VLV_STARTB_15
    MOVEF_F 0.0 VLV_STARTC_15
    MOVEF_F 0.0 VLV_ENCODERB_15
    MOVEF_F 0.0 VLV_ENCODERC_15
    MOVEF_F 0.0 VLV_SIGNO_15
    MOVEF_F 0.0 VLV_VEL_15
    MOVEF_F 0.0 VLV_KP_15
    MOVEF_F 0.0 VLV_KD_15
    MOVEF_F 0.0 VLV_ERROR_15
    MOVEF_F 0.0 VLV_OLDERROR_15
    MOVEF_F 0.0 VLV_GRADOSACCEL_15
    MOVEF_F 0.0 VLV_GRADOSCRUCERO_15
    MOVEF_F 0.0 VLV_GRADOSDECEL_15
    MOVEF_F 0.0 VLV_PENDIENTE_15
    MOVEF_F 0.0 VLV_CORRECCION_15
    MOVEF_F 0.0 VLV_CORRECCION_16
    MOVEF_F 0.0 VLV_ENC_16
    MOVEF_F 0.0 VLV_CORRECCION_17
    MOVEF_F 0.0 VLV_LECTURA_17
    MOVEF_F 0.0 VLV_CORRECCION_18
    MOVEF_F 0.0 VLV_LECTURA_18
    MOVEF_F 0.0 VLV_CORRECCION_19
    MOVEF_F 0.0 VLV_MODE_19
    MOVEF_F 0.0 VLV_CORRECCION_20
    MOVEF_F 0.0 VLV_MODE_20
    MOVEF_F 0.0 VLV_SIGNO_21
    MOVEF_F 0.0 VLV_VMIN_21
    MOVEF_F 0.0 VLV_VMAX_21
    MOVEF_F 0.0 VLV_ENCODER_21
    MOVEF_F 0.0 VLV_SIGNO_23
    MOVEF_F 0.0 VLV_VMIN_23
    MOVEF_F 0.0 VLV_VMAX_23
    MOVEF_F 0.0 VLV_ENCODER_23
    MOVEF_F 0.0 VLV_ENCODER_25
    MOVEF_F 0.0 VLV_ENCODER_26
    MOVEF_F 0.0 VLV_MODE_27
    MOVEF_F 0.0 VLV_MODE_28
    MOVEF_F 0.0 VLV_LECTURA_29
    MOVEF_F 0.0 VLV_LECTURA1_30
    MOVEF_F 0.0 VLV_LECTURA3_30
    MOVEF_F 0.0 VLV_LECTURA4_30
    MOVEF_F 0.0 VLV_KP_30
    MOVEF_F 0.0 VLV_KD_30
    MOVEF_F 0.0 VLV_DISTANCIA_30
    MOVEF_F 0.0 VLV_ERROR_30
    MOVEF_F 0.0 VLV_OLDERROR_30
    MOVEF_F 0.0 VLV_U_30
    MOVEF_F 0.0 VLV_SENTIDO_30
    MOVEF_F 0.0 VLV_STARTVELOCIDAD_30
    MOVEF_F 0.0 VLV_STARTKP_30
    MOVEF_F 0.0 VLV_STARTKD_30
    MOVEF_F 0.0 VLV_STARTC_30
    MOVEF_F 0.0 VLV_ENCODERC_30
    MOVEF_F 0.0 VLV_LECTURA1_31
    MOVEF_F 0.0 VLV_LECTURA3_31
    MOVEF_F 0.0 VLV_LECTURA4_31
    MOVEF_F 0.0 VLV_KP_31
    MOVEF_F 0.0 VLV_KD_31
    MOVEF_F 0.0 VLV_ERROR_31
    MOVEF_F 0.0 VLV_OLDERROR_31
    MOVEF_F 0.0 VLV_U_31
    MOVEF_F 0.0 VLV_SENTIDO_31
    MOVEF_F 0.0 VLV_LECTURA_31
    MOVEF_F 0.0 VLV_LECTURAIZQ_31
    MOVEF_F 0.0 VLV_LECTURADCH_31
    MOVEF_F 0.0 VLV_LECTURA1_32
    MOVEF_F 0.0 VLV_LECTURA3_32
    MOVEF_F 0.0 VLV_LECTURA4_32
    MOVEF_F 0.0 VLV_KP_32
    MOVEF_F 0.0 VLV_KD_32
    MOVEF_F 0.0 VLV_ERROR_32
    MOVEF_F 0.0 VLV_OLDERROR_32
    MOVEF_F 0.0 VLV_U_32
    MOVEF_F 0.0 VLV_SENTIDO_32
    MOVEF_F 0.0 VLV_STARTC_32
    MOVEF_F 0.0 VLV_ENCODERC_32
    MOVEF_F 0.0 VLV_LECTURA1_33
    MOVEF_F 0.0 VLV_LECTURA3_33
    MOVEF_F 0.0 VLV_LECTURA4_33
    MOVEF_F 0.0 VLV_KP_33
    MOVEF_F 0.0 VLV_KD_33
    MOVEF_F 0.0 VLV_ERROR_33
    MOVEF_F 0.0 VLV_OLDERROR_33
    MOVEF_F 0.0 VLV_U_33
    MOVEF_F 0.0 VLV_SENTIDO_33
    MOVEF_F 0.0 VLV_STARTC_33
    MOVEF_F 0.0 VLV_ENCODERC_33
    MOVEF_F 0.0 VLV_MODE_34
    MOVEF_F 0.0 VLV_LECTURA1_34
    MOVEF_F 0.0 VLV_LECTURA3_34
    MOVEF_F 0.0 VLV_LECTURA4_34
    MOVEF_F 0.0 VLV_KP_34
    MOVEF_F 0.0 VLV_KD_34
    MOVEF_F 0.0 VLV_ERROR_34
    MOVEF_F 0.0 VLV_OLDERROR_34
    MOVEF_F 0.0 VLV_U_34
    MOVEF_F 0.0 VLV_SENTIDO_34
    MOVEF_F 0.0 VLV_MODE_35
    MOVEF_F 0.0 VLV_LECTURA1_35
    MOVEF_F 0.0 VLV_LECTURA3_35
    MOVEF_F 0.0 VLV_LECTURA4_35
    MOVEF_F 0.0 VLV_KP_35
    MOVEF_F 0.0 VLV_KD_35
    MOVEF_F 0.0 VLV_ERROR_35
    MOVEF_F 0.0 VLV_OLDERROR_35
    MOVEF_F 0.0 VLV_U_35
    MOVEF_F 0.0 VLV_SENTIDO_35
    MOVEF_F 0.0 VLV_SENS_MODE_36
    MOVEF_F 0.0 VLV_RED_36
    MOVEF_F 0.0 VLV_YELLOW_36
    MOVEF_F 0.0 VLV_GREEN_36
    MOVEF_F 0.0 VLV_BLUE_36
    MOVEF_F 0.0 VLV_HUE_36
    MOVEF_F 0.0 VLV_SAT_36
    MOVEF_F 0.0 VLV_VALUE_36
    CALL ARRAYCREATE_FLOAT VLV_RNORMARRAY_36
    CALL ARRAYCREATE_FLOAT VLV_GNORMARRAY_36
    CALL ARRAYCREATE_FLOAT VLV_BNORMARRAY_36
    MOVEF_F 0.0 VLV_J_36
    CALL ARRAYCREATE_FLOAT VLV_RGB_36
    MOVEF_F 0.0 VLV_RRAW_36
    MOVEF_F 0.0 VLV_GRAW_36
    MOVEF_F 0.0 VLV_BRAW_36
    MOVEF_F 0.0 VLV_RNORM_36
    MOVEF_F 0.0 VLV_GNORM_36
    MOVEF_F 0.0 VLV_BNORM_36
    MOVEF_F 0.0 VLV_MAX_36
    MOVEF_F 0.0 VLV_MIN_36
    MOVEF_F 0.0 VLV_RGBGREY_36
    MOVE32_32 0 RUNCOUNTER_F_CONTROLBRAZO_0
    MOVE32_32 0 RUNCOUNTER_F_DETECTA_0
    ARRAY CREATE8 1 LOCKS
    CALL PROGRAM_MAIN -1
    PROGRAM_STOP -1
}
vmthread TF_CONTROLBRAZO_0
{
    DATA32 tmp
  launch:
    CALL PROGRAM_F_CONTROLBRAZO_0 0
    CALL GETANDINC32 RUNCOUNTER_F_CONTROLBRAZO_0 -1 RUNCOUNTER_F_CONTROLBRAZO_0 tmp
    JR_GT32 tmp 1 launch
}
vmthread TF_DETECTA_0
{
    DATA32 tmp
  launch:
    CALL PROGRAM_F_DETECTA_0 1
    CALL GETANDINC32 RUNCOUNTER_F_DETECTA_0 -1 RUNCOUNTER_F_DETECTA_0 tmp
    JR_GT32 tmp 1 launch
}
subcall PROGRAM_MAIN
subcall PROGRAM_F_CONTROLBRAZO_0
subcall PROGRAM_F_DETECTA_0
{
    IN_32 SUBPROGRAM
    DATA32 INDEX
    ARRAY8 STACKPOINTER 4
    DATAF F.0
    DATAF F.1
    DATAF F.2
    DATAF F.3
    DATAF F.4
    ARRAY32 RETURNSTACK2 128
    ARRAY32 RETURNSTACK 128
    DATAS S.0 252
    DATAS S.1 252
    MOVE8_8 0 STACKPOINTER
    JR_NEQ32 SUBPROGRAM 0 dispatch880
    WRITE32 ENDSUB_F_CONTROLBRAZO_0:ENDTHREAD STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_CONTROLBRAZO_0
  dispatch880:
    JR_NEQ32 SUBPROGRAM 1 dispatch881
    WRITE32 ENDSUB_F_DETECTA_0:ENDTHREAD STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_DETECTA_0
  dispatch881:
    MOVEF_F 0.0 VPR_GIRO_G1
    MOVEF_F 0.0 VPR_RGB_VALUENEGRO
    MOVEF_F 0.0 VPR_RGB_VALUEBLANCO
    MOVEF_F 0.0 VPR_RECTO_DIAMETRO
    MOVEF_F 0.0 VPR_GIRO_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F 0.0 VPR_SMART_DIAMETRO
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F 0.0 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F 0.0 VPR_SMART_NEGRO1
    MOVEF_F 0.0 VPR_SMART_NEGRO3
    MOVEF_F 0.0 VPR_SMART_NEGRO4
    MOVEF_F 0.0 VPR_SMART_BLANCO1
    MOVEF_F 0.0 VPR_SMART_BLANCO3
    MOVEF_F 0.0 VPR_SMART_BLANCO4
    MOVEF_F 0.0 VPR_RECTO_NEGRO
    MOVEF_F 0.0 VPR_RECTO_BLANCO
    MOVEF_F 0.0 VPR_GIRO_NEGRO
    MOVEF_F 0.0 VPR_GIRO_BLANCO
    MOVEF_F 0.0 VPR_RGB_RWHITE
    MOVEF_F 0.0 VPR_RGB_GWHITE
    MOVEF_F 0.0 VPR_RGB_BWHITE
    MOVEF_F 0.0 VLV_VELOCIDAD_10
    MOVEF_F 0.0 VLV_TIMER_10
    MOVEF_F 0.0 VLV_VELOCIDAD_4
    MOVEF_F 0.0 VLV_ENCODER_4
    MOVEF_F 0.0 VLV_VELOCIDAD_11
    MOVEF_F 0.0 VLV_ENCODER_11
    MOVEF_F 0.0 VLV_VELOCIDAD_12
    MOVEF_F 0.0 VLV_TIEMPO_12
    MOVEF_F 0.0 VLV_VELOCIDAD_13
    MOVEF_F 0.0 VLV_DISTANCIA_13
    MOVEF_F 0.0 VLV_VELOCIDAD1_21
    MOVEF_F 0.0 VLV_VELOCIDAD2_21
    MOVEF_F 0.0 VLV_GRADOS_21
    MOVEF_F 0.0 VLV_VELOCIDAD1_22
    MOVEF_F 0.0 VLV_VELOCIDAD2_22
    MOVEF_F 0.0 VLV_TIEMPO_22
    MOVEF_F 0.0 VLV_V0_14
    MOVEF_F 0.0 VLV_VMAX_14
    MOVEF_F 0.0 VLV_DISTANCIAACCEL_14
    MOVEF_F 0.0 VLV_DISTANCIACRUCERO_14
    MOVEF_F 0.0 VLV_DISTANCIADECEL_14
    MOVEF_F 0.0 VLV_VELOCIDAD1_23
    MOVEF_F 0.0 VLV_VELOCIDAD2_23
    MOVEF_F 0.0 VLV_GRADOS_23
    MOVEF_F 0.0 VLV_VELOCIDAD1_24
    MOVEF_F 0.0 VLV_VELOCIDAD2_24
    MOVEF_F 0.0 VLV_TIEMPO_24
    MOVEF_F 0.0 VLV_V0_15
    MOVEF_F 0.0 VLV_VMAX_15
    MOVEF_F 0.0 VLV_DISTANCIAACCEL_15
    MOVEF_F 0.0 VLV_DISTANCIACRUCERO_15
    MOVEF_F 0.0 VLV_DISTANCIADECEL_15
    MOVEF_F 0.0 VLV_VELOCIDAD_16
    MOVEF_F 0.0 VLV_DISTANCIA_16
    MOVEF_F 0.0 VLV_VELOCIDAD_17
    MOVEF_F 0.0 VLV_SENSOR_17
    MOVEF_F 0.0 VLV_VELOCIDAD_30
    MOVEF_F 0.0 VLV_ENCODER_30
    MOVEF_F 0.0 VLV_VELOCIDAD_31
    MOVEF_F 0.0 VLV_READER_31
    MOVEF_F 0.0 VLV_VELOCIDAD_32
    MOVEF_F 0.0 VLV_ENCODER_32
    MOVEF_F 0.0 VLV_VELOCIDAD1_25
    MOVEF_F 0.0 VLV_VELOCIDAD2_25
    MOVEF_F 0.0 VLV_DISTANCIA_25
    MOVEF_F 0.0 VLV_VELOCIDAD1_26
    MOVEF_F 0.0 VLV_VELOCIDAD2_26
    MOVEF_F 0.0 VLV_DISTANCIA_26
    MOVEF_F 0.0 VLV_VELOCIDAD1_27
    MOVEF_F 0.0 VLV_VELOCIDAD2_27
    MOVEF_F 0.0 VLV_SENS_27
    MOVEF_F 0.0 VLV_COLOR_27
    MOVEF_F 0.0 VLV_VELOCIDAD1_28
    MOVEF_F 0.0 VLV_VELOCIDAD2_28
    MOVEF_F 0.0 VLV_SENS_28
    MOVEF_F 0.0 VLV_COLOR_28
    MOVEF_F 0.0 VLV_VELOCIDAD_33
    MOVEF_F 0.0 VLV_ENCODER_33
    MOVEF_F 0.0 VLV_ALTURA_3
    MOVEF_F 0.0 VLV_VELOCIDAD_18
    MOVEF_F 0.0 VLV_SENSOR_18
    MOVEF_F 0.0 VLV_VELOCIDAD_34
    MOVEF_F 0.0 VLV_COLOR_34
    MOVEF_F 0.0 VLV_COLOR_6
    MOVEF_F 0.0 VLV_VELOCIDAD_19
    MOVEF_F 0.0 VLV_SENSOR_19
    MOVEF_F 0.0 VLV_COLOR_19
    MOVEF_F 0.0 VLV_VELOCIDAD_35
    MOVEF_F 0.0 VLV_COLOR_35
    MOVEF_F 0.0 VLV_VELOCIDAD_20
    MOVEF_F 0.0 VLV_SENSOR_20
    MOVEF_F 0.0 VLV_COLOR_20
    MOVEF_F 0.0 VLV_VELOCIDAD1_29
    MOVEF_F 0.0 VLV_VELOCIDAD2_29
    MOVEF_F 0.0 VLV_SENS_29
    MOVEF_F 0.0 VLV_SENS_36
    MOVEF_F 0.0 VLV_REPS_36
    MOVEF_F 0.0 VLV_COLOR_36
    MOVEF_F 0.0 VLV_COLOR_37
    MOVEF_F 0.0 VLV_NUMERO_7
    MOVEF_F 0.0 VGV_BASE
    MOVEF_F 0.0 VGV_COLOR
    MOVEF_F 0.0 VLV_COLOR_6
    MOVEF_F 0.0 VGV_ENCODERA
    MOVEF_F 0.0 VGV_ENCODERD
    MOVEF_F 0.0 VGV_ERRORA
    MOVEF_F 0.0 VGV_OLDERRORA
    MOVEF_F 0.0 VGV_ERRORD
    MOVEF_F 0.0 VGV_OLDERRORD
    MOVEF_F 0.0 VGV_DIAMETRO
    MOVEF_F 0.0 VGV_NEGRO1
    MOVEF_F 0.0 VGV_NEGRO3
    MOVEF_F 0.0 VGV_NEGRO4
    MOVEF_F 0.0 VGV_BLANCO1
    MOVEF_F 0.0 VGV_BLANCO3
    MOVEF_F 0.0 VGV_BLANCO4
    MOVEF_F 0.0 VGV_ENCODERA
    MOVEF_F 0.0 VGV_ENCODERD
    MOVEF_F 0.0 VGV_ERRORA
    MOVEF_F 0.0 VGV_OLDERRORA
    MOVEF_F 0.0 VGV_ERRORD
    MOVEF_F 0.0 VGV_OLDERRORD
    WRITE32 ENDSUB_F_SETUP_0:CALLSUB0 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SETUP_0
CALLSUB0:
    DATA32 tmp1
    CALL GETANDINC32 RUNCOUNTER_F_CONTROLBRAZO_0 1  RUNCOUNTER_F_CONTROLBRAZO_0 tmp1
    JR_NEQ32 0 tmp1 alreadylaunched1
    OBJECT_START TF_CONTROLBRAZO_0
  alreadylaunched1:
    WRITE32 ENDSUB_F_MAINPRUEBA_0:CALLSUB2 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_MAINPRUEBA_0
CALLSUB2:
ENDTHREAD:
    RETURN
SUB_F_SETUP_0:
    DATA8 layer3
	DATA8 no3
	DATA8 mode83
	
	MOVEF_8 1.0 no3
	SUB8 no3 1 no3
	DIV8 no3 4 layer3
	MATH MOD8 no3 4 no3

	MOVEF_8 0.0 mode83
	
	INPUT_DEVICE READY_RAW layer3 no3 0 mode83 0
    DATA8 layer4
	DATA8 no4
	DATA8 mode84
	
	MOVEF_8 2.0 no4
	SUB8 no4 1 no4
	DIV8 no4 4 layer4
	MATH MOD8 no4 4 no4

	MOVEF_8 4.0 mode84
	
	INPUT_DEVICE READY_RAW layer4 no4 0 mode84 0
    DATA8 layer5
	DATA8 no5
	DATA8 mode85
	
	MOVEF_8 3.0 no5
	SUB8 no5 1 no5
	DIV8 no5 4 layer5
	MATH MOD8 no5 4 no5

	MOVEF_8 0.0 mode85
	
	INPUT_DEVICE READY_RAW layer5 no5 0 mode85 0
    DATA8 layer6
	DATA8 no6
	DATA8 mode86
	
	MOVEF_8 4.0 no6
	SUB8 no6 1 no6
	DIV8 no6 4 layer6
	MATH MOD8 no6 4 no6

	MOVEF_8 0.0 mode86
	
	INPUT_DEVICE READY_RAW layer6 no6 0 mode86 0
    MOVEF_F 6.24 VGV_DIAMETRO
    MOVEF_F 2.73611111111111 VPR_GIRO_G1
    MOVEF_F 10.0 VGV_NEGRO1
    MOVEF_F 11.0 VGV_NEGRO3
    MOVEF_F 8.0 VGV_NEGRO4
    MOVEF_F 62.0 VGV_BLANCO1
    MOVEF_F 66.0 VGV_BLANCO3
    MOVEF_F 50.0 VGV_BLANCO4
    MOVEF_F 4.0 VPR_RGB_VALUENEGRO
    MOVEF_F 32.0 VPR_RGB_VALUEBLANCO
    MOVEF_F VGV_DIAMETRO VPR_RECTO_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_GIRO_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_SIGUELINEAS_DIAMETRO
    MOVEF_F VGV_DIAMETRO VPR_SMART_DIAMETRO
    MOVEF_F VGV_NEGRO1 VPR_SIGUELINEAS_NEGRO1
    MOVEF_F VGV_NEGRO3 VPR_SIGUELINEAS_NEGRO3
    MOVEF_F VGV_NEGRO4 VPR_SIGUELINEAS_NEGRO4
    MOVEF_F VGV_BLANCO1 VPR_SIGUELINEAS_BLANCO1
    MOVEF_F VGV_BLANCO3 VPR_SIGUELINEAS_BLANCO3
    MOVEF_F VGV_BLANCO4 VPR_SIGUELINEAS_BLANCO4
    MOVEF_F VGV_NEGRO1 VPR_SMART_NEGRO1
    MOVEF_F VGV_NEGRO3 VPR_SMART_NEGRO3
    MOVEF_F VGV_NEGRO4 VPR_SMART_NEGRO4
    MOVEF_F VGV_BLANCO1 VPR_SMART_BLANCO1
    MOVEF_F VGV_BLANCO3 VPR_SMART_BLANCO3
    MOVEF_F VGV_BLANCO4 VPR_SMART_BLANCO4
    ADDF VGV_NEGRO1 VGV_NEGRO3 F.1
    ADDF F.1 VGV_NEGRO4 F.0
    DATAF tmpf9
    DATA8 flag9
    DIVF F.0 3.0 tmpf9
    CP_EQF 0.0 3.0 flag9
    SELECTF flag9 0.0 tmpf9 VPR_RECTO_NEGRO

    ADDF VGV_BLANCO1 VGV_BLANCO3 F.1
    ADDF F.1 VGV_BLANCO4 F.0
    DATAF tmpf12
    DATA8 flag12
    DIVF F.0 3.0 tmpf12
    CP_EQF 0.0 3.0 flag12
    SELECTF flag12 0.0 tmpf12 VPR_RECTO_BLANCO

    ADDF VGV_NEGRO1 VGV_NEGRO3 F.1
    ADDF F.1 VGV_NEGRO4 F.0
    DATAF tmpf15
    DATA8 flag15
    DIVF F.0 3.0 tmpf15
    CP_EQF 0.0 3.0 flag15
    SELECTF flag15 0.0 tmpf15 VPR_GIRO_NEGRO

    ADDF VGV_BLANCO1 VGV_BLANCO3 F.1
    ADDF F.1 VGV_BLANCO4 F.0
    DATAF tmpf18
    DATA8 flag18
    DIVF F.0 3.0 tmpf18
    CP_EQF 0.0 3.0 flag18
    SELECTF flag18 0.0 tmpf18 VPR_GIRO_BLANCO

RETSUB_F_SETUP_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SETUP_0:
SUB_F_STARTARM_0:
    MOVEF_F -50.0 VLV_VELOCIDAD_10
    MOVEF_F 800.0 VLV_TIMER_10
    WRITE32 ENDSUB_M_BRAZO_DTIMER_2:CALLSUB19 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DTIMER_2
CALLSUB19:
    MOVEF_F 50.0 VLV_VELOCIDAD_4
    MOVEF_F -1100.0 VLV_ENCODER_4
    WRITE32 ENDSUB_F_AENCODER_2:CALLSUB20 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_AENCODER_2
CALLSUB20:
    MOVEF_F 0.0 VGV_ENCODERA
    OUTPUT_CLR_COUNT 0 1
    OUTPUT_CLR_COUNT 0 8
    MOVEF_F 50.0 VLV_VELOCIDAD_4
    MOVEF_F 650.0 VLV_ENCODER_4
    WRITE32 ENDSUB_F_AENCODER_2:CALLSUB23 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_AENCODER_2
CALLSUB23:
    OUTPUT_CLR_COUNT 0 1
    OUTPUT_CLR_COUNT 0 8
    MOVEF_F 0.0 VGV_ENCODERA
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 80.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB26 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB26:
RETSUB_F_STARTARM_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_STARTARM_0:
SUB_F_MAINPRUEBA_0:
    WRITE32 ENDSUB_F_STARTARM_0:CALLSUB27 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_STARTARM_0
CALLSUB27:
    MOVEF_F 70.0 VLV_VELOCIDAD_34
    MOVEF_F 5.0 VLV_COLOR_34
    WRITE32 ENDSUB_M_SIGUELINEAS_COLOR31_2:CALLSUB28 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_COLOR31_2
CALLSUB28:
    MOVEF_F 8.0 VLV_VELOCIDAD1_23
    MOVEF_F 20.0 VLV_VELOCIDAD2_23
    MOVEF_F 46.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB29 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB29:
    MOVEF_F 20.0 VLV_VELOCIDAD1_23
    MOVEF_F 8.0 VLV_VELOCIDAD2_23
    MOVEF_F 46.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB30 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB30:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 800.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB31 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB31:
    MOVEF_F 30.0 VLV_VELOCIDAD_13
    MOVEF_F 11.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB32 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB32:
    WRITE32 ENDSUB_F_COGERALTO_0:CALLSUB33 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_COGERALTO_0
CALLSUB33:
    MOVEF_F 80.0 VLV_VELOCIDAD_11
    MOVEF_F 50.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB34 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB34:
    MOVEF_F 30.0 VLV_VELOCIDAD_4
    MOVEF_F 0.0 VLV_ENCODER_4
    WRITE32 ENDSUB_F_AENCODER_2:CALLSUB35 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_AENCODER_2
CALLSUB35:
    MOVEF_F 80.0 VLV_VELOCIDAD_11
    MOVEF_F 0.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB36 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB36:
    MOVEF_F 30.0 VLV_VELOCIDAD_4
    MOVEF_F -200.0 VLV_ENCODER_4
    WRITE32 ENDSUB_F_AENCODER_2:CALLSUB37 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_AENCODER_2
CALLSUB37:
    MOVEF_F 80.0 VLV_VELOCIDAD_11
    MOVEF_F 150.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB38 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB38:
    MOVEF_F 40.0 VLV_VELOCIDAD1_23
    MOVEF_F -40.0 VLV_VELOCIDAD2_23
    MOVEF_F 85.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB39 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB39:
    MOVEF_F -60.0 VLV_VELOCIDAD_16
    MOVEF_F 15.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB40 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB40:
    MOVEF_F -40.0 VLV_VELOCIDAD_12
    MOVEF_F 600.0 VLV_TIEMPO_12
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB41 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB41:
    MOVEF_F 40.0 VLV_VELOCIDAD_13
    MOVEF_F 35.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB42 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB42:
    MOVEF_F -10.0 VLV_VELOCIDAD1_23
    MOVEF_F 20.0 VLV_VELOCIDAD2_23
    MOVEF_F 95.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB43 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB43:
    MOVEF_F 40.0 VLV_VELOCIDAD_13
    MOVEF_F 15.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB44 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB44:
    MOVEF_F 0.0 VLV_VELOCIDAD1_23
    MOVEF_F 15.0 VLV_VELOCIDAD2_23
    MOVEF_F 14.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB45 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB45:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 280.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB46 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB46:
    MOVEF_F 10.0 VLV_VELOCIDAD_13
    MOVEF_F 7.25 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB47 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB47:
    MOVEF_F 80.0 VLV_VELOCIDAD_11
    MOVEF_F 900.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB48 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB48:
    MOVEF_F 30.0 VLV_VELOCIDAD1_23
    MOVEF_F -40.0 VLV_VELOCIDAD2_23
    MOVEF_F 10.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB49 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB49:
    MOVEF_F -30.0 VLV_VELOCIDAD1_23
    MOVEF_F 40.0 VLV_VELOCIDAD2_23
    MOVEF_F 5.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB50 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB50:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 240.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB51 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB51:
    MOVEF_F -10.0 VLV_VELOCIDAD_13
    MOVEF_F 3.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB52 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB52:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 180.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB53 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB53:
    MOVEF_F -40.0 VLV_VELOCIDAD_13
    MOVEF_F 11.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB54 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB54:
    MOVEF_F -20.0 VLV_VELOCIDAD1_23
    MOVEF_F -70.0 VLV_VELOCIDAD2_23
    MOVEF_F 90.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB55 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB55:
    MOVEF_F -60.0 VLV_VELOCIDAD_12
    MOVEF_F 1200.0 VLV_TIEMPO_12
    WRITE32 ENDSUB_M_RECTO_TIEMPO_2:CALLSUB56 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_TIEMPO_2
CALLSUB56:
    MOVEF_F 30.0 VLV_VELOCIDAD_13
    MOVEF_F 4.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB57 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB57:
    MOVEF_F 50.0 VLV_VELOCIDAD1_23
    MOVEF_F -16.0 VLV_VELOCIDAD2_23
    MOVEF_F 102.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB58 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB58:
    MOVEF_F 60.0 VLV_VELOCIDAD1_25
    MOVEF_F 58.0 VLV_VELOCIDAD2_25
    MOVEF_F 35.0 VLV_DISTANCIA_25
    WRITE32 ENDSUB_M_GIRO_ENCODERF_3:CALLSUB59 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODERF_3
CALLSUB59:
    MOVEF_F 30.0 VLV_VELOCIDAD1_29
    MOVEF_F 28.0 VLV_VELOCIDAD2_29
    MOVEF_F 4.25 VLV_SENS_29
    WRITE32 ENDSUB_M_GIRO_BLANCO1_3:CALLSUB60 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_BLANCO1_3
CALLSUB60:
    DATA32 tmp61
    CALL GETANDINC32 RUNCOUNTER_F_DETECTA_0 1  RUNCOUNTER_F_DETECTA_0 tmp61
    JR_NEQ32 0 tmp61 alreadylaunched61
    OBJECT_START TF_DETECTA_0
  alreadylaunched61:
    MOVEF_F 80.0 VLV_VELOCIDAD_11
    MOVEF_F 300.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB62 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB62:
    WRITE32 ENDSUB_F_COGER_0:CALLSUB63 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_COGER_0
CALLSUB63:
    MOVEF_F 80.0 VLV_VELOCIDAD_11
    MOVEF_F 300.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB64 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB64:
    WRITE32 ENDSUB_F_COGERCOLOR_1:CALLSUB65 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_COGERCOLOR_1
CALLSUB65:
    MOVEF_F VLV_COLOR_6 VGV_BASE
    MOVEF_F 60.0 VLV_VELOCIDAD_11
    MOVEF_F 50.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB66 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB66:
    MOVEF_F 30.0 VLV_VELOCIDAD_13
    MOVEF_F 24.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB67 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB67:
    MOVEF_F -26.0 VLV_VELOCIDAD1_26
    MOVEF_F -30.0 VLV_VELOCIDAD2_26
    MOVEF_F 15.0 VLV_DISTANCIA_26
    WRITE32 ENDSUB_M_GIRO_ENCODER_3:CALLSUB68 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_ENCODER_3
CALLSUB68:
    MOVEF_F -50.0 VLV_VELOCIDAD1_23
    MOVEF_F 70.0 VLV_VELOCIDAD2_23
    MOVEF_F 55.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB69 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB69:
    MOVEF_F 70.0 VLV_VELOCIDAD_13
    MOVEF_F 98.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB70 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB70:
    MOVEF_F 80.0 VLV_VELOCIDAD_11
    MOVEF_F 600.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB71 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB71:
    MOVEF_F -30.0 VLV_VELOCIDAD_13
    MOVEF_F 11.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB72 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB72:
    MOVEF_F 0.0 VLV_VELOCIDAD1_23
    MOVEF_F -30.0 VLV_VELOCIDAD2_23
    MOVEF_F 42.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB73 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB73:
    MOVEF_F 80.0 VLV_VELOCIDAD_11
    MOVEF_F 280.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB74 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB74:
    MOVEF_F 10.0 VLV_VELOCIDAD_13
    MOVEF_F 13.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB75 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB75:
    MOVEF_F 80.0 VLV_VELOCIDAD_11
    MOVEF_F 900.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB76 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB76:
    MOVEF_F 30.0 VLV_VELOCIDAD1_23
    MOVEF_F -40.0 VLV_VELOCIDAD2_23
    MOVEF_F 245.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB77 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB77:
    MOVEF_F 80.0 VLV_VELOCIDAD_11
    MOVEF_F 160.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB78 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB78:
    MOVEF_F 40.0 VLV_VELOCIDAD_19
    MOVEF_F 4.0 VLV_SENSOR_19
    MOVEF_F 5.0 VLV_COLOR_19
    WRITE32 ENDSUB_M_RECTO_COLOR1F_3:CALLSUB79 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_COLOR1F_3
CALLSUB79:
    MOVEF_F 40.0 VLV_VELOCIDAD_16
    MOVEF_F 5.0 VLV_DISTANCIA_16
    WRITE32 ENDSUB_M_RECTO_ENCODERF_2:CALLSUB80 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODERF_2
CALLSUB80:
    MOVEF_F 40.0 VLV_VELOCIDAD1_27
    MOVEF_F 38.0 VLV_VELOCIDAD2_27
    MOVEF_F 4.0 VLV_SENS_27
    MOVEF_F 5.0 VLV_COLOR_27
    WRITE32 ENDSUB_M_GIRO_COLOR1_4:CALLSUB81 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_COLOR1_4
CALLSUB81:
    MOVEF_F -30.0 VLV_VELOCIDAD1_23
    MOVEF_F 40.0 VLV_VELOCIDAD2_23
    MOVEF_F 105.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB82 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB82:
    MOVEF_F 40.0 VLV_VELOCIDAD_18
    MOVEF_F 4.0 VLV_SENSOR_18
    WRITE32 ENDSUB_M_RECTO_BLANCO1_2:CALLSUB83 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_BLANCO1_2
CALLSUB83:
    MOVEF_F 40.0 VLV_VELOCIDAD1_23
    MOVEF_F 0.0 VLV_VELOCIDAD2_23
    MOVEF_F 95.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB84 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB84:
    MOVEF_F 40.0 VLV_VELOCIDAD_31
    MOVEF_F 3.0 VLV_READER_31
    WRITE32 ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:CALLSUB85 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2
CALLSUB85:
    MOVEF_F 40.0 VLV_VELOCIDAD_33
    MOVEF_F 40.0 VLV_ENCODER_33
    WRITE32 ENDSUB_M_SIGUELINEAS_ENCODER14_2:CALLSUB86 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_SIGUELINEAS_ENCODER14_2
CALLSUB86:
    JR_NEQF VGV_COLOR 0.0 else87_1
    MOVEF_F -30.0 VLV_VELOCIDAD1_23
    MOVEF_F 30.0 VLV_VELOCIDAD2_23
    MOVEF_F 135.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB88 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB88:
    MOVEF_F 30.0 VLV_VELOCIDAD_13
    MOVEF_F 18.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB89 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB89:
    MOVEF_F 3.0 VLV_ALTURA_3
    WRITE32 ENDSUB_F_SOLTAR_1:CALLSUB90 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SOLTAR_1
CALLSUB90:
    JR endif87
  else87_1:
    MOVEF_F -30.0 VLV_VELOCIDAD1_23
    MOVEF_F 30.0 VLV_VELOCIDAD2_23
    MOVEF_F 105.0 VLV_GRADOS_23
    WRITE32 ENDSUB_M_GIRO_GRADOS_3:CALLSUB91 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_GIRO_GRADOS_3
CALLSUB91:
    MOVEF_F 30.0 VLV_VELOCIDAD_13
    MOVEF_F 13.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB92 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB92:
    MOVEF_F 3.0 VLV_ALTURA_3
    WRITE32 ENDSUB_F_SOLTAR_1:CALLSUB93 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_SOLTAR_1
CALLSUB93:
  else87_2:
  endif87:
RETSUB_F_MAINPRUEBA_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_MAINPRUEBA_0:
SUB_F_CONTROLBRAZO_0:
  while94:
  whilebody94:
    OUTPUT_GET_COUNT 0 0 getTachoA
	MOVE32_F getTachoA F.0
    SUBF VGV_ENCODERA F.0 VGV_ERRORA
    MULF VGV_ERRORA 1.0 F.0
    SUBF VGV_ERRORA VGV_OLDERRORA F.2
    MULF F.2 0.6 F.1
    ADDF F.0 F.1 VGV_CORRECCIONA
    MOVEF_8 VGV_CORRECCIONA setSpeedA
	OUTPUT_SPEED 0 1 setSpeedA
	OUTPUT_START 0 1
    JR whilebody94
  endwhile94:
RETSUB_F_CONTROLBRAZO_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_CONTROLBRAZO_0:
SUB_F_DETECTA_0:
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Connect'
RETSUB_F_DETECTA_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_DETECTA_0:
SUB_F_COGER_0:
    MOVEF_F 70.0 VLV_VELOCIDAD_11
    MOVEF_F 350.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB103 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB103:
    MOVEF_F 15.0 VLV_V0_14
    MOVEF_F 30.0 VLV_VMAX_14
    MOVEF_F 5.0 VLV_DISTANCIAACCEL_14
    MOVEF_F 0.0 VLV_DISTANCIACRUCERO_14
    MOVEF_F 4.75 VLV_DISTANCIADECEL_14
    WRITE32 ENDSUB_M_RECTO_ACCELDECEL_5:CALLSUB104 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ACCELDECEL_5
CALLSUB104:
    MOVEF_F 70.0 VLV_VELOCIDAD_11
    MOVEF_F 250.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB105 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB105:
    MOVEF_F 50.0 VLV_VELOCIDAD_4
    MOVEF_F 0.0 VLV_ENCODER_4
    WRITE32 ENDSUB_F_AENCODER_2:CALLSUB106 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_AENCODER_2
CALLSUB106:
    MOVEF_F 70.0 VLV_VELOCIDAD_11
    MOVEF_F -10.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB107 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB107:
    MOVEF_F 50.0 VLV_VELOCIDAD_4
    MOVEF_F -220.0 VLV_ENCODER_4
    WRITE32 ENDSUB_F_AENCODER_2:CALLSUB108 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_AENCODER_2
CALLSUB108:
    MOVEF_F 70.0 VLV_VELOCIDAD_11
    MOVEF_F 100.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB109 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB109:
RETSUB_F_COGER_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_COGER_0:
SUB_F_COGERALTO_0:
    MOVEF_F 20.0 VLV_VELOCIDAD_13
    MOVEF_F 6.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB110 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB110:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 400.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB111 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB111:
    MOVEF_F 50.0 VLV_VELOCIDAD_4
    MOVEF_F 0.0 VLV_ENCODER_4
    WRITE32 ENDSUB_F_AENCODER_2:CALLSUB112 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_AENCODER_2
CALLSUB112:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 120.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB113 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB113:
    MOVEF_F 50.0 VLV_VELOCIDAD_4
    MOVEF_F -225.0 VLV_ENCODER_4
    WRITE32 ENDSUB_F_AENCODER_2:CALLSUB114 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_AENCODER_2
CALLSUB114:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 400.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB115 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB115:
    MOVEF_F -40.0 VLV_VELOCIDAD_13
    MOVEF_F 20.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB116 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB116:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 100.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB117 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB117:
RETSUB_F_COGERALTO_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_COGERALTO_0:
SUB_F_SOLTAR_1:
    MULF VLV_ALTURA_3 0.75 VLV_ALTURA_3
    MOVEF_F 70.0 VLV_VELOCIDAD_11
    MOVEF_F 50.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB119 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB119:
    MOVEF_F 50.0 VLV_VELOCIDAD_4
    MOVEF_F 50.0 VLV_ENCODER_4
    WRITE32 ENDSUB_F_AENCODER_2:CALLSUB120 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_AENCODER_2
CALLSUB120:
    MOVEF_F 70.0 VLV_VELOCIDAD_11
    MULF 245.0 VLV_ALTURA_3 F.0
    DATA8 flag122
	CP_LTF F.0 2000.0 flag122
	SELECTF flag122 F.0 2000.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB123 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB123:
    MOVEF_F 50.0 VLV_VELOCIDAD_4
    MOVEF_F -200.0 VLV_ENCODER_4
    WRITE32 ENDSUB_F_AENCODER_2:CALLSUB124 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_AENCODER_2
CALLSUB124:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    OUTPUT_GET_COUNT 0 3 getTachoD
	MOVE32_F getTachoD F.0
    ADDF F.0 200.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB127 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB127:
    DATA32 milliseconds128
	MOVEF_32 200.0 milliseconds128
	DATA32 timer128
	TIMER_WAIT milliseconds128 timer128
	TIMER_READY timer128
    MOVEF_F -10.0 VLV_VELOCIDAD_13
    MOVEF_F 10.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB129 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB129:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 350.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB130 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB130:
RETSUB_F_SOLTAR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_SOLTAR_1:
SUB_F_AENCODER_2:
    OUTPUT_GET_COUNT 0 0 getTachoA
	MOVE32_F getTachoA F.0
    SUBF VLV_ENCODER_4 F.0 VLV_ENCDIFF_4
    MATH ABS VLV_ENCDIFF_4 F.0
    DATAF tmpf134
    DATA8 flag134
    DIVF F.0 VLV_ENCDIFF_4 tmpf134
    CP_EQF 0.0 VLV_ENCDIFF_4 flag134
    SELECTF flag134 0.0 tmpf134 VLV_SIGNO_4

    MOVEF_F 1200.0 VLV_SAFETYTIMER_4
    TIMER_READ timeMC3
    JR_EQF VLV_ENCDIFF_4 0.0 else136_1
  while137:
    OUTPUT_GET_COUNT 0 0 getTachoA
	MOVE32_F getTachoA F.2
    SUBF F.2 VLV_ENCODER_4 F.1
    MATH ABS F.1 F.0
    JR_LTEQF F.0 15.0 endwhile137
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_SAFETYTIMER_4 endwhile137
  whilebody137:
    DATAF tmpf142
    DATA8 flag142
    DIVF VLV_VELOCIDAD_4 15.5 tmpf142
    CP_EQF 0.0 15.5 flag142
    SELECTF flag142 0.0 tmpf142 F.1

    MULF F.1 VLV_SIGNO_4 F.0
    ADDF VGV_ENCODERA F.0 VGV_ENCODERA
    JR_LTEQF VLV_SIGNO_4 0.0 else145_1
    DATA8 flag146
	CP_LTF VGV_ENCODERA VLV_ENCODER_4 flag146
	SELECTF flag146 VGV_ENCODERA VLV_ENCODER_4 VGV_ENCODERA
    JR endif145
  else145_1:
    DATA8 flag147
	CP_GTF VGV_ENCODERA VLV_ENCODER_4 flag147
	SELECTF flag147 VGV_ENCODERA VLV_ENCODER_4 VGV_ENCODERA
  else145_2:
  endif145:
    OUTPUT_GET_COUNT 0 0 getTachoA
	MOVE32_F getTachoA F.2
    SUBF F.2 VLV_ENCODER_4 F.1
    MATH ABS F.1 F.0
    JR_LTEQF F.0 15.0 and148
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_SAFETYTIMER_4 whilebody137
  and148:
  endwhile137:
    MOVEF_F VLV_ENCODER_4 VGV_ENCODERA
    OUTPUT_POWER 0 1 0
	OUTPUT_STOP 0 1 1
  else136_1:
  endif136:
RETSUB_F_AENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_AENCODER_2:
SUB_F_COGERCOLOR_1:
    MOVEF_F 50.0 VLV_VELOCIDAD_13
    MOVEF_F 5.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB154 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB154:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 200.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB155 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB155:
    DATA8 layer156
	DATA8 no156
	DATA8 mode8156
	
	MOVEF_8 2.0 no156
	SUB8 no156 1 no156
	DIV8 no156 4 layer156
	MATH MOD8 no156 4 no156

	MOVEF_8 4.0 mode8156
	
	INPUT_DEVICE READY_RAW layer156 no156 0 mode8156 0
    MOVEF_F 2.0 VLV_SENS_36
    MOVEF_F 5.0 VLV_REPS_36
    WRITE32 ENDSUB_M_RGB_DETECT_3:CALLSUB157 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_DETECT_3
CALLSUB157:
    MOVEF_F VLV_COLOR_36 VLV_COLOR_6
    MOVEF_F VLV_COLOR_6 VLV_COLOR_37
    WRITE32 ENDSUB_M_RGB_GRITAR_1:CALLSUB158 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RGB_GRITAR_1
CALLSUB158:
    DATA8 layer159
	DATA8 no159
	DATA8 mode8159
	
	MOVEF_8 2.0 no159
	SUB8 no159 1 no159
	DIV8 no159 4 layer159
	MATH MOD8 no159 4 no159

	MOVEF_8 4.0 mode8159
	
	INPUT_DEVICE READY_RAW layer159 no159 0 mode8159 0
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 310.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB160 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB160:
    MOVEF_F 50.0 VLV_VELOCIDAD_13
    MOVEF_F 6.0 VLV_DISTANCIA_13
    WRITE32 ENDSUB_M_RECTO_ENCODER_2:CALLSUB161 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_RECTO_ENCODER_2
CALLSUB161:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 250.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB162 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB162:
    MOVEF_F 50.0 VLV_VELOCIDAD_4
    MOVEF_F 0.0 VLV_ENCODER_4
    WRITE32 ENDSUB_F_AENCODER_2:CALLSUB163 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_AENCODER_2
CALLSUB163:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 0.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB164 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB164:
    MOVEF_F 50.0 VLV_VELOCIDAD_4
    MOVEF_F -175.0 VLV_ENCODER_4
    WRITE32 ENDSUB_F_AENCODER_2:CALLSUB165 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_AENCODER_2
CALLSUB165:
    MOVEF_F 50.0 VLV_VELOCIDAD_11
    MOVEF_F 300.0 VLV_ENCODER_11
    WRITE32 ENDSUB_M_BRAZO_DENCODER_2:CALLSUB166 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_M_BRAZO_DENCODER_2
CALLSUB166:
RETSUB_F_COGERCOLOR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_COGERCOLOR_1:
SUB_F_GRITARNUMERO_1:
    JR_NEQF VLV_NUMERO_7 0.0 else167_1
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/ZERO'
    JR endif167
  else167_1:
    JR_NEQF VLV_NUMERO_7 1.0 else167_2
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/One'
    JR endif167
  else167_2:
    JR_NEQF VLV_NUMERO_7 2.0 else167_3
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Two'
    JR endif167
  else167_3:
    JR_NEQF VLV_NUMERO_7 3.0 else167_4
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Three'
    JR endif167
  else167_4:
    JR_NEQF VLV_NUMERO_7 4.0 else167_5
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Four'
    JR endif167
  else167_5:
    JR_NEQF VLV_NUMERO_7 5.0 else167_6
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Five'
    JR endif167
  else167_6:
    JR_NEQF VLV_NUMERO_7 6.0 else167_7
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Six'
    JR endif167
  else167_7:
    JR_NEQF VLV_NUMERO_7 7.0 else167_8
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Seven'
    JR endif167
  else167_8:
    JR_NEQF VLV_NUMERO_7 8.0 else167_9
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Eight'
    JR endif167
  else167_9:
    JR_NEQF VLV_NUMERO_7 9.0 else167_10
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Nine'
    JR endif167
  else167_10:
    JR_NEQF VLV_NUMERO_7 10.0 else167_11
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Ten'
  else167_11:
  endif167:
    SOUND_READY
RETSUB_F_GRITARNUMERO_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARNUMERO_1:
SUB_F_GRITARVOLTAJE_0:
    CALL EV3.BATTERYVOLTAGE VLV_VOLTAJE_8
    MATH FLOOR VLV_VOLTAJE_8 VLV_NUMERO_7
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB182 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB182:
    MULF VLV_VOLTAJE_8 10.0 F.1
    MATH FLOOR F.1 F.0
    MATH FLOOR VLV_VOLTAJE_8 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_7
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB188 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB188:
    MULF VLV_VOLTAJE_8 100.0 F.1
    MATH FLOOR F.1 F.0
    MULF VLV_VOLTAJE_8 10.0 F.3
    MATH FLOOR F.3 F.2
    MULF F.2 10.0 F.1
    SUBF F.0 F.1 VLV_NUMERO_7
    WRITE32 ENDSUB_F_GRITARNUMERO_1:CALLSUB195 STACKPOINTER RETURNSTACK
    ADD8 STACKPOINTER 1 STACKPOINTER
    JR SUB_F_GRITARNUMERO_1
CALLSUB195:
RETSUB_F_GRITARVOLTAJE_0:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_F_GRITARVOLTAJE_0:
SUB_M_BRAZO_DTIMER_2:
    TIMER_READ timeMC1
  while197:
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_GTEQF F.0 VLV_TIMER_10 endwhile197
  whilebody197:
    MOVEF_8 VLV_VELOCIDAD_10 setSpeedD
	OUTPUT_SPEED 0 8 setSpeedD
	OUTPUT_START 0 8
    TIMER_READ timeMC1tmp
	SUB32 timeMC1tmp timeMC1 timeMC1tmp
	MOVE32_F timeMC1tmp F.0
    JR_LTF F.0 VLV_TIMER_10 whilebody197
  endwhile197:
    OUTPUT_POWER 0 8 0
	OUTPUT_STOP 0 8 1
RETSUB_M_BRAZO_DTIMER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_DTIMER_2:
SUB_M_BRAZO_DENCODER_2:
    CALL MOTOR.GETCOUNT 'D' F.0
    SUBF VLV_ENCODER_11 F.0 VLV_ENCDIFF_11
    MATH ABS VLV_ENCDIFF_11 F.0
    DATAF tmpf205
    DATA8 flag205
    DIVF VLV_ENCDIFF_11 F.0 tmpf205
    CP_EQF 0.0 F.0 flag205
    SELECTF flag205 0.0 tmpf205 VLV_SIGNO_11

    MATH ABS VLV_ENCDIFF_11 F.4
    DATAF tmpf207
    DATA8 flag207
    DIVF F.4 100.0 tmpf207
    CP_EQF 0.0 100.0 flag207
    SELECTF flag207 0.0 tmpf207 F.3

    DATAF tmpf208
    DATA8 flag208
    DIVF VLV_VELOCIDAD_11 20.0 tmpf208
    CP_EQF 0.0 20.0 flag208
    SELECTF flag208 0.0 tmpf208 F.4

    DATAF tmpf209
    DATA8 flag209
    DIVF F.3 F.4 tmpf209
    CP_EQF 0.0 F.4 flag209
    SELECTF flag209 0.0 tmpf209 F.2

    MULF F.2 650.0 F.1
    MULF F.1 2.0 F.0
    DATA8 flag212
	CP_GTF F.0 400.0 flag212
	SELECTF flag212 F.0 400.0 VLV_SAFETYTIMER_11
    TIMER_READ timeMC3
    JR_EQF VLV_ENCDIFF_11 0.0 else214_1
  while215:
    CALL MOTOR.GETCOUNT 'D' F.2
    SUBF F.2 VLV_ENCODER_11 F.1
    MATH ABS F.1 F.0
    JR_LTEQF F.0 15.0 endwhile215
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_SAFETYTIMER_11 endwhile215
  whilebody215:
    MULF VLV_SIGNO_11 VLV_VELOCIDAD_11 F.0
    MOVEF_8 F.0 setSpeedD
	OUTPUT_SPEED 0 8 setSpeedD
	OUTPUT_START 0 8
    CALL LCD.CLEAR
    STRINGS VALUE_FORMATTED VLV_SAFETYTIMER_11 '%g' 99 S.1
    CALL TEXT.APPEND 'safetyTimer: ' S.1 S.0
    CALL LCD.WRITE 5.0 30.0 S.0
    CALL MOTOR.GETCOUNT 'D' F.2
    SUBF F.2 VLV_ENCODER_11 F.1
    MATH ABS F.1 F.0
    JR_LTEQF F.0 15.0 and226
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_SAFETYTIMER_11 whilebody215
  and226:
  endwhile215:
    CALL MOTOR.STOP 'D' 'True'
  else214_1:
  endif214:
RETSUB_M_BRAZO_DENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_BRAZO_DENCODER_2:
SUB_M_RECTO_TIEMPO_2:
    MOVEF_F 0.0 VLV_CORRECCION_12
    TIMER_READ timeMC3
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
  while234:
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_TIEMPO_12 endwhile234
  whilebody234:
    MATH NEGATE VLV_VELOCIDAD_12 F.1
    ADDF F.1 VLV_CORRECCION_12 F.0
    ADDF VLV_VELOCIDAD_12 VLV_CORRECCION_12 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_TIEMPO_12 whilebody234
  endwhile234:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_TIEMPO_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_TIEMPO_2:
SUB_M_RECTO_ENCODER_2:
    MATH ABS VLV_VELOCIDAD_13 F.1
    SUBF F.1 20.0 F.0
    MULF F.0 0.05 VLV_CORRECCION_13
    SUBF VLV_DISTANCIA_13 VLV_CORRECCION_13 F.2
    MULF F.2 360.0 F.1
    MOVEF_F 3.1415926535897932384 F.2
    DATAF tmpf248
    DATA8 flag248
    DIVF F.1 F.2 tmpf248
    CP_EQF 0.0 F.2 flag248
    SELECTF flag248 0.0 tmpf248 F.0

    DATAF tmpf249
    DATA8 flag249
    DIVF F.0 VPR_RECTO_DIAMETRO tmpf249
    CP_EQF 0.0 VPR_RECTO_DIAMETRO flag249
    SELECTF flag249 0.0 tmpf249 VLV_ENC_13

    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds251
	MOVEF_32 100.0 milliseconds251
	DATA32 timer251
	TIMER_WAIT milliseconds251 timer251
	TIMER_READY timer251
    MATH NEGATE VLV_VELOCIDAD_13 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD_13 VLV_ENC_13 'True'

	DATA8 layer253
	DATA8 nos253
	DATA8 busy253
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer253 nos253
	JR_EQ8 0 nos253 motornotbusy253
  motorwaiting253:
	OUTPUT_TEST layer253 nos253 busy253
	JR_EQ8 busy253 0 motornotbusy253
	SLEEP
	JR motorwaiting253
  motornotbusy253:
RETSUB_M_RECTO_ENCODER_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ENCODER_2:
SUB_M_RECTO_ACCELDECEL_5:
    CALL MOTOR.GETCOUNT 'B' VLV_STARTB_14
    CALL MOTOR.GETCOUNT 'C' VLV_STARTC_14
    MOVEF_F 0.0 VLV_ENCODERB_14
    MOVEF_F 0.0 VLV_ENCODERC_14
    MATH ABS VLV_V0_14 F.0
    DATAF tmpf257
    DATA8 flag257
    DIVF VLV_V0_14 F.0 tmpf257
    CP_EQF 0.0 F.0 flag257
    SELECTF flag257 0.0 tmpf257 VLV_SIGNO_14

    MATH ABS VLV_V0_14 F.1
    DATA8 flag259
	CP_GTF 8.0 F.1 flag259
	SELECTF flag259 8.0 F.1 F.0
    MULF F.0 VLV_SIGNO_14 VLV_V0_14
    MATH ABS VLV_VMAX_14 F.1
    DATA8 flag262
	CP_LTF 90.0 F.1 flag262
	SELECTF flag262 90.0 F.1 F.0
    MULF F.0 VLV_SIGNO_14 VLV_VMAX_14
    MOVEF_F 0.0 VLV_VEL_14
    MOVEF_F 0.4 VLV_KP_14
    MOVEF_F 0.5 VLV_KD_14
    MOVEF_F 0.0 VLV_ERROR_14
    MOVEF_F 0.0 VLV_OLDERROR_14
    MULF VLV_DISTANCIAACCEL_14 360.0 F.0
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_RECTO_DIAMETRO F.2 F.1
    DATAF tmpf267
    DATA8 flag267
    DIVF F.0 F.1 tmpf267
    CP_EQF 0.0 F.1 flag267
    SELECTF flag267 0.0 tmpf267 VLV_GRADOSACCEL_14

    MULF VLV_DISTANCIACRUCERO_14 360.0 F.0
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_RECTO_DIAMETRO F.2 F.1
    DATAF tmpf271
    DATA8 flag271
    DIVF F.0 F.1 tmpf271
    CP_EQF 0.0 F.1 flag271
    SELECTF flag271 0.0 tmpf271 VLV_GRADOSCRUCERO_14

    MULF VLV_DISTANCIADECEL_14 360.0 F.0
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_RECTO_DIAMETRO F.2 F.1
    DATAF tmpf275
    DATA8 flag275
    DIVF F.0 F.1 tmpf275
    CP_EQF 0.0 F.1 flag275
    SELECTF flag275 0.0 tmpf275 VLV_GRADOSDECEL_14

  while276:
    MATH ABS VLV_ENCODERC_14 F.0
    ADDF VLV_GRADOSACCEL_14 VLV_GRADOSCRUCERO_14 F.2
    ADDF F.2 VLV_GRADOSDECEL_14 F.1
    JR_GTEQF F.0 F.1 endwhile276
  whilebody276:
    CALL MOTOR.GETCOUNT 'B' F.1
    MULF F.1 1.0 F.0
    SUBF F.0 VLV_STARTB_14 VLV_ENCODERB_14
    CALL MOTOR.GETCOUNT 'C' F.0
    SUBF F.0 VLV_STARTC_14 VLV_ENCODERC_14
    MATH ABS VLV_ENCODERC_14 F.0
    ADDF VLV_GRADOSACCEL_14 VLV_GRADOSCRUCERO_14 F.1
    JR_GTEQF F.0 F.1 else285_1
    SUBF VLV_VMAX_14 VLV_V0_14 F.1
    DATAF tmpf289
    DATA8 flag289
    DIVF F.1 VLV_GRADOSACCEL_14 tmpf289
    CP_EQF 0.0 VLV_GRADOSACCEL_14 flag289
    SELECTF flag289 0.0 tmpf289 F.0

    MULF F.0 VLV_SIGNO_14 VLV_PENDIENTE_14
    JR_LTEQF VLV_SIGNO_14 0.0 else291_1
    MULF VLV_PENDIENTE_14 VLV_ENCODERC_14 F.1
    ADDF F.1 VLV_V0_14 F.0
    DATA8 flag294
	CP_LTF VLV_VMAX_14 F.0 flag294
	SELECTF flag294 VLV_VMAX_14 F.0 VLV_VEL_14
    JR endif291
  else291_1:
    MULF VLV_PENDIENTE_14 VLV_ENCODERC_14 F.1
    ADDF F.1 VLV_V0_14 F.0
    DATA8 flag297
	CP_GTF VLV_VMAX_14 F.0 flag297
	SELECTF flag297 VLV_VMAX_14 F.0 VLV_VEL_14
  else291_2:
  endif291:
    JR endif285
  else285_1:
    SUBF VLV_V0_14 VLV_VMAX_14 F.1
    DATAF tmpf299
    DATA8 flag299
    DIVF F.1 VLV_GRADOSDECEL_14 tmpf299
    CP_EQF 0.0 VLV_GRADOSDECEL_14 flag299
    SELECTF flag299 0.0 tmpf299 F.0

    MULF F.0 VLV_SIGNO_14 VLV_PENDIENTE_14
    JR_LTEQF VLV_SIGNO_14 0.0 else301_1
    SUBF VLV_ENCODERC_14 VLV_GRADOSACCEL_14 F.3
    SUBF F.3 VLV_GRADOSCRUCERO_14 F.2
    MULF VLV_PENDIENTE_14 F.2 F.1
    ADDF F.1 VLV_VMAX_14 F.0
    DATA8 flag306
	CP_GTF VLV_V0_14 F.0 flag306
	SELECTF flag306 VLV_V0_14 F.0 VLV_VEL_14
    JR endif301
  else301_1:
    ADDF VLV_ENCODERC_14 VLV_GRADOSACCEL_14 F.3
    ADDF F.3 VLV_GRADOSCRUCERO_14 F.2
    MULF VLV_PENDIENTE_14 F.2 F.1
    ADDF F.1 VLV_VMAX_14 F.0
    DATA8 flag311
	CP_LTF VLV_V0_14 F.0 flag311
	SELECTF flag311 VLV_V0_14 F.0 VLV_VEL_14
  else301_2:
  endif301:
  else285_2:
  endif285:
    MULF -1.0 VLV_ENCODERB_14 F.1
    SUBF F.1 VLV_ENCODERC_14 F.0
    MULF F.0 1.0 VLV_ERROR_14
    MULF VLV_ERROR_14 VLV_KP_14 F.0
    SUBF VLV_ERROR_14 VLV_OLDERROR_14 F.2
    MULF F.2 VLV_KD_14 F.1
    ADDF F.0 F.1 VLV_CORRECCION_14
    SUBF VLV_VEL_14 VLV_CORRECCION_14 F.1
    MATH NEGATE F.1 F.0
    ADDF VLV_VEL_14 VLV_CORRECCION_14 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_14 VLV_OLDERROR_14
    MATH ABS VLV_ENCODERC_14 F.0
    ADDF VLV_GRADOSACCEL_14 VLV_GRADOSCRUCERO_14 F.2
    ADDF F.2 VLV_GRADOSDECEL_14 F.1
    JR_LTF F.0 F.1 whilebody276
  endwhile276:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_ACCELDECEL_5:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ACCELDECEL_5:
SUB_M_RECTO_ACCELDECELF_5:
    CALL MOTOR.GETCOUNT 'B' VLV_STARTB_15
    CALL MOTOR.GETCOUNT 'C' VLV_STARTC_15
    MOVEF_F 0.0 VLV_ENCODERB_15
    MOVEF_F 0.0 VLV_ENCODERC_15
    MATH ABS VLV_V0_15 F.0
    DATAF tmpf330
    DATA8 flag330
    DIVF VLV_V0_15 F.0 tmpf330
    CP_EQF 0.0 F.0 flag330
    SELECTF flag330 0.0 tmpf330 VLV_SIGNO_15

    MATH ABS VLV_V0_15 F.1
    DATA8 flag332
	CP_GTF 8.0 F.1 flag332
	SELECTF flag332 8.0 F.1 F.0
    MULF F.0 VLV_SIGNO_15 VLV_V0_15
    MATH ABS VLV_VMAX_15 F.1
    DATA8 flag335
	CP_LTF 90.0 F.1 flag335
	SELECTF flag335 90.0 F.1 F.0
    MULF F.0 VLV_SIGNO_15 VLV_VMAX_15
    MOVEF_F 0.0 VLV_VEL_15
    MOVEF_F 0.4 VLV_KP_15
    MOVEF_F 0.5 VLV_KD_15
    MOVEF_F 0.0 VLV_ERROR_15
    MOVEF_F 0.0 VLV_OLDERROR_15
    MULF VLV_DISTANCIAACCEL_15 360.0 F.0
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_RECTO_DIAMETRO F.2 F.1
    DATAF tmpf340
    DATA8 flag340
    DIVF F.0 F.1 tmpf340
    CP_EQF 0.0 F.1 flag340
    SELECTF flag340 0.0 tmpf340 VLV_GRADOSACCEL_15

    MULF VLV_DISTANCIACRUCERO_15 360.0 F.0
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_RECTO_DIAMETRO F.2 F.1
    DATAF tmpf344
    DATA8 flag344
    DIVF F.0 F.1 tmpf344
    CP_EQF 0.0 F.1 flag344
    SELECTF flag344 0.0 tmpf344 VLV_GRADOSCRUCERO_15

    MULF VLV_DISTANCIADECEL_15 360.0 F.0
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_RECTO_DIAMETRO F.2 F.1
    DATAF tmpf348
    DATA8 flag348
    DIVF F.0 F.1 tmpf348
    CP_EQF 0.0 F.1 flag348
    SELECTF flag348 0.0 tmpf348 VLV_GRADOSDECEL_15

  while349:
    MATH ABS VLV_ENCODERC_15 F.0
    ADDF VLV_GRADOSACCEL_15 VLV_GRADOSCRUCERO_15 F.2
    ADDF F.2 VLV_GRADOSDECEL_15 F.1
    JR_GTEQF F.0 F.1 endwhile349
  whilebody349:
    CALL MOTOR.GETCOUNT 'B' F.1
    MULF F.1 1.0 F.0
    SUBF F.0 VLV_STARTB_15 VLV_ENCODERB_15
    CALL MOTOR.GETCOUNT 'C' F.0
    SUBF F.0 VLV_STARTC_15 VLV_ENCODERC_15
    MATH ABS VLV_ENCODERC_15 F.0
    ADDF VLV_GRADOSACCEL_15 VLV_GRADOSCRUCERO_15 F.1
    JR_GTEQF F.0 F.1 else358_1
    SUBF VLV_VMAX_15 VLV_V0_15 F.1
    DATAF tmpf362
    DATA8 flag362
    DIVF F.1 VLV_GRADOSACCEL_15 tmpf362
    CP_EQF 0.0 VLV_GRADOSACCEL_15 flag362
    SELECTF flag362 0.0 tmpf362 F.0

    MULF F.0 VLV_SIGNO_15 VLV_PENDIENTE_15
    JR_LTEQF VLV_SIGNO_15 0.0 else364_1
    MULF VLV_PENDIENTE_15 VLV_ENCODERC_15 F.1
    ADDF F.1 VLV_V0_15 F.0
    DATA8 flag367
	CP_LTF VLV_VMAX_15 F.0 flag367
	SELECTF flag367 VLV_VMAX_15 F.0 VLV_VEL_15
    JR endif364
  else364_1:
    MULF VLV_PENDIENTE_15 VLV_ENCODERC_15 F.1
    ADDF F.1 VLV_V0_15 F.0
    DATA8 flag370
	CP_GTF VLV_VMAX_15 F.0 flag370
	SELECTF flag370 VLV_VMAX_15 F.0 VLV_VEL_15
  else364_2:
  endif364:
    JR endif358
  else358_1:
    SUBF VLV_V0_15 VLV_VMAX_15 F.1
    DATAF tmpf372
    DATA8 flag372
    DIVF F.1 VLV_GRADOSDECEL_15 tmpf372
    CP_EQF 0.0 VLV_GRADOSDECEL_15 flag372
    SELECTF flag372 0.0 tmpf372 F.0

    MULF F.0 VLV_SIGNO_15 VLV_PENDIENTE_15
    JR_LTEQF VLV_SIGNO_15 0.0 else374_1
    SUBF VLV_ENCODERC_15 VLV_GRADOSACCEL_15 F.3
    SUBF F.3 VLV_GRADOSCRUCERO_15 F.2
    MULF VLV_PENDIENTE_15 F.2 F.1
    ADDF F.1 VLV_VMAX_15 F.0
    DATA8 flag379
	CP_GTF VLV_V0_15 F.0 flag379
	SELECTF flag379 VLV_V0_15 F.0 VLV_VEL_15
    JR endif374
  else374_1:
    ADDF VLV_ENCODERC_15 VLV_GRADOSACCEL_15 F.3
    ADDF F.3 VLV_GRADOSCRUCERO_15 F.2
    MULF VLV_PENDIENTE_15 F.2 F.1
    ADDF F.1 VLV_VMAX_15 F.0
    DATA8 flag384
	CP_LTF VLV_V0_15 F.0 flag384
	SELECTF flag384 VLV_V0_15 F.0 VLV_VEL_15
  else374_2:
  endif374:
  else358_2:
  endif358:
    MULF -1.0 VLV_ENCODERB_15 F.1
    SUBF F.1 VLV_ENCODERC_15 F.0
    MULF F.0 1.0 VLV_ERROR_15
    MULF VLV_ERROR_15 VLV_KP_15 F.0
    SUBF VLV_ERROR_15 VLV_OLDERROR_15 F.2
    MULF F.2 VLV_KD_15 F.1
    ADDF F.0 F.1 VLV_CORRECCION_15
    SUBF VLV_VEL_15 VLV_CORRECCION_15 F.1
    MATH NEGATE F.1 F.0
    ADDF VLV_VEL_15 VLV_CORRECCION_15 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_15 VLV_OLDERROR_15
    MATH ABS VLV_ENCODERC_15 F.0
    ADDF VLV_GRADOSACCEL_15 VLV_GRADOSCRUCERO_15 F.2
    ADDF F.2 VLV_GRADOSDECEL_15 F.1
    JR_LTF F.0 F.1 whilebody349
  endwhile349:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_ACCELDECELF_5:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ACCELDECELF_5:
SUB_M_RECTO_ENCODERF_2:
    MATH ABS VLV_VELOCIDAD_16 F.1
    SUBF F.1 20.0 F.0
    MULF F.0 0.05 VLV_CORRECCION_16
    SUBF VLV_DISTANCIA_16 VLV_CORRECCION_16 F.2
    MULF F.2 360.0 F.1
    MOVEF_F 3.1415926535897932384 F.2
    DATAF tmpf406
    DATA8 flag406
    DIVF F.1 F.2 tmpf406
    CP_EQF 0.0 F.2 flag406
    SELECTF flag406 0.0 tmpf406 F.0

    DATAF tmpf407
    DATA8 flag407
    DIVF F.0 VPR_RECTO_DIAMETRO tmpf407
    CP_EQF 0.0 VPR_RECTO_DIAMETRO flag407
    SELECTF flag407 0.0 tmpf407 VLV_ENC_16

    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds409
	MOVEF_32 100.0 milliseconds409
	DATA32 timer409
	TIMER_WAIT milliseconds409 timer409
	TIMER_READY timer409
    MATH NEGATE VLV_VELOCIDAD_16 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD_16 VLV_ENC_16 'False'

	DATA8 layer411
	DATA8 nos411
	DATA8 busy411
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer411 nos411
	JR_EQ8 0 nos411 motornotbusy411
  motorwaiting411:
	OUTPUT_TEST layer411 nos411 busy411
	JR_EQ8 busy411 0 motornotbusy411
	SLEEP
	JR motorwaiting411
  motornotbusy411:
RETSUB_M_RECTO_ENCODERF_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_ENCODERF_2:
SUB_M_RECTO_BLANCO1F_2:
    MOVEF_F 0.0 VLV_CORRECCION_17
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_17
  while413:
    JR_GTEQF VLV_LECTURA_17 60.0 endwhile413
  whilebody413:
    CALL SENSOR.READPERCENT VLV_SENSOR_17 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf416
    DATA8 flag416
    DIVF F.1 VPR_RECTO_BLANCO tmpf416
    CP_EQF 0.0 VPR_RECTO_BLANCO flag416
    SELECTF flag416 0.0 tmpf416 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_17
    MATH NEGATE VLV_VELOCIDAD_17 F.1
    ADDF F.1 VLV_CORRECCION_17 F.0
    ADDF VLV_VELOCIDAD_17 VLV_CORRECCION_17 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_LTF VLV_LECTURA_17 60.0 whilebody413
  endwhile413:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_RECTO_BLANCO1F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_BLANCO1F_2:
SUB_M_RECTO_BLANCO1_2:
    MOVEF_F 0.0 VLV_CORRECCION_18
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MOVEF_F 50.0 VLV_LECTURA_18
  while425:
    JR_GTEQF VLV_LECTURA_18 60.0 endwhile425
  whilebody425:
    CALL SENSOR.READPERCENT VLV_SENSOR_18 F.2
    SUBF F.2 VPR_RECTO_NEGRO F.1
    DATAF tmpf428
    DATA8 flag428
    DIVF F.1 VPR_RECTO_BLANCO tmpf428
    CP_EQF 0.0 VPR_RECTO_BLANCO flag428
    SELECTF flag428 0.0 tmpf428 F.0

    SUBF 100.0 VPR_RECTO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_18
    MATH NEGATE VLV_VELOCIDAD_18 F.1
    ADDF F.1 VLV_CORRECCION_18 F.0
    ADDF VLV_VELOCIDAD_18 VLV_CORRECCION_18 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    JR_LTF VLV_LECTURA_18 60.0 whilebody425
  endwhile425:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_RECTO_BLANCO1_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_BLANCO1_2:
SUB_M_RECTO_COLOR1F_3:
    MOVEF_F 0.0 VLV_CORRECCION_19
    CALL SENSOR.GETMODE VLV_SENSOR_19 VLV_MODE_19
    DATA8 layer437
	DATA8 no437
	DATA8 mode8437
	
	MOVEF_8 VLV_SENSOR_19 no437
	SUB8 no437 1 no437
	DIV8 no437 4 layer437
	MATH MOD8 no437 4 no437

	MOVEF_8 2.0 mode8437
	
	INPUT_DEVICE READY_RAW layer437 no437 0 mode8437 0
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
  while439:
    CALL SENSOR.READRAWVALUE VLV_SENSOR_19 0.0 F.0
    JR_EQF F.0 VLV_COLOR_19 endwhile439
  whilebody439:
    MATH NEGATE VLV_VELOCIDAD_19 F.1
    ADDF F.1 VLV_CORRECCION_19 F.0
    ADDF VLV_VELOCIDAD_19 VLV_CORRECCION_19 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    CALL SENSOR.READRAWVALUE VLV_SENSOR_19 0.0 F.0
    JR_NEQF F.0 VLV_COLOR_19 whilebody439
  endwhile439:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA8 layer447
	DATA8 no447
	DATA8 mode8447
	
	MOVEF_8 VLV_SENSOR_19 no447
	SUB8 no447 1 no447
	DIV8 no447 4 layer447
	MATH MOD8 no447 4 no447

	MOVEF_8 VLV_MODE_19 mode8447
	
	INPUT_DEVICE READY_RAW layer447 no447 0 mode8447 0
RETSUB_M_RECTO_COLOR1F_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_COLOR1F_3:
SUB_M_RECTO_COLOR1_3:
    MOVEF_F 0.0 VLV_CORRECCION_20
    CALL SENSOR.GETMODE VLV_SENSOR_20 VLV_MODE_20
    DATA8 layer449
	DATA8 no449
	DATA8 mode8449
	
	MOVEF_8 VLV_SENSOR_20 no449
	SUB8 no449 1 no449
	DIV8 no449 4 layer449
	MATH MOD8 no449 4 no449

	MOVEF_8 2.0 mode8449
	
	INPUT_DEVICE READY_RAW layer449 no449 0 mode8449 0
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
  while451:
    CALL SENSOR.READRAWVALUE VLV_SENSOR_20 0.0 F.0
    JR_EQF F.0 VLV_COLOR_20 endwhile451
  whilebody451:
    MATH NEGATE VLV_VELOCIDAD_20 F.1
    ADDF F.1 VLV_CORRECCION_20 F.0
    ADDF VLV_VELOCIDAD_20 VLV_CORRECCION_20 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    CALL SENSOR.READRAWVALUE VLV_SENSOR_20 0.0 F.0
    JR_NEQF F.0 VLV_COLOR_20 whilebody451
  endwhile451:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
    DATA8 layer459
	DATA8 no459
	DATA8 mode8459
	
	MOVEF_8 VLV_SENSOR_20 no459
	SUB8 no459 1 no459
	DIV8 no459 4 layer459
	MATH MOD8 no459 4 no459

	MOVEF_8 VLV_MODE_20 mode8459
	
	INPUT_DEVICE READY_RAW layer459 no459 0 mode8459 0
RETSUB_M_RECTO_COLOR1_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RECTO_COLOR1_3:
SUB_M_GIRO_GRADOSF_3:
    DATAF tmpf460
    DATA8 flag460
    DIVF VLV_VELOCIDAD1_21 VLV_VELOCIDAD2_21 tmpf460
    CP_EQF 0.0 VLV_VELOCIDAD2_21 flag460
    SELECTF flag460 0.0 tmpf460 F.0

    DATAF tmpf461
    DATA8 flag461
    DIVF VLV_VELOCIDAD1_21 VLV_VELOCIDAD2_21 tmpf461
    CP_EQF 0.0 VLV_VELOCIDAD2_21 flag461
    SELECTF flag461 0.0 tmpf461 F.2

    MATH ABS F.2 F.1
    DATAF tmpf463
    DATA8 flag463
    DIVF F.0 F.1 tmpf463
    CP_EQF 0.0 F.1 flag463
    SELECTF flag463 0.0 tmpf463 VLV_SIGNO_21

    MATH ABS VLV_VELOCIDAD1_21 F.0
    MATH ABS VLV_VELOCIDAD2_21 F.1
    DATA8 flag466
	CP_LTF F.0 F.1 flag466
	SELECTF flag466 F.0 F.1 VLV_VMIN_21
    MATH ABS VLV_VELOCIDAD1_21 F.0
    MATH ABS VLV_VELOCIDAD2_21 F.1
    DATA8 flag469
	CP_GTF F.0 F.1 flag469
	SELECTF flag469 F.0 F.1 VLV_VMAX_21
    MULF VLV_GRADOS_21 VPR_GIRO_G1 F.0
    MULF VLV_SIGNO_21 VLV_VMIN_21 F.4
    DATAF tmpf472
    DATA8 flag472
    DIVF F.4 VLV_VMAX_21 tmpf472
    CP_EQF 0.0 VLV_VMAX_21 flag472
    SELECTF flag472 0.0 tmpf472 F.3

    SUBF F.3 1.0 F.2
    DATAF tmpf474
    DATA8 flag474
    DIVF -2.0 F.2 tmpf474
    CP_EQF 0.0 F.2 flag474
    SELECTF flag474 0.0 tmpf474 F.1

    MULF F.0 F.1 VLV_ENCODER_21
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds477
	MOVEF_32 100.0 milliseconds477
	DATA32 timer477
	TIMER_WAIT milliseconds477 timer477
	TIMER_READY timer477
    MATH NEGATE VLV_VELOCIDAD1_21 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_21 VLV_ENCODER_21 'False'

	DATA8 layer479
	DATA8 nos479
	DATA8 busy479
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer479 nos479
	JR_EQ8 0 nos479 motornotbusy479
  motorwaiting479:
	OUTPUT_TEST layer479 nos479 busy479
	JR_EQ8 busy479 0 motornotbusy479
	SLEEP
	JR motorwaiting479
  motornotbusy479:
    MOVEF_F 0.0 VLV_VELOCIDAD1_21
    MOVEF_F 0.0 VLV_VELOCIDAD2_21
    MOVEF_F 0.0 VLV_GRADOS_21
    DATA32 milliseconds480
	MOVEF_32 100.0 milliseconds480
	DATA32 timer480
	TIMER_WAIT milliseconds480 timer480
	TIMER_READY timer480
RETSUB_M_GIRO_GRADOSF_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_GRADOSF_3:
SUB_M_GIRO_TIEMPOF_3:
    TIMER_READ timeMC3
  while482:
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_TIEMPO_22 endwhile482
  whilebody482:
    MATH NEGATE VLV_VELOCIDAD1_22 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_22
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_TIEMPO_22 whilebody482
  endwhile482:
    CALL MOTOR.STOP 'BC' 'False'
RETSUB_M_GIRO_TIEMPOF_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_TIEMPOF_3:
SUB_M_GIRO_GRADOS_3:
    DATAF tmpf488
    DATA8 flag488
    DIVF VLV_VELOCIDAD1_23 VLV_VELOCIDAD2_23 tmpf488
    CP_EQF 0.0 VLV_VELOCIDAD2_23 flag488
    SELECTF flag488 0.0 tmpf488 F.0

    DATAF tmpf489
    DATA8 flag489
    DIVF VLV_VELOCIDAD1_23 VLV_VELOCIDAD2_23 tmpf489
    CP_EQF 0.0 VLV_VELOCIDAD2_23 flag489
    SELECTF flag489 0.0 tmpf489 F.2

    MATH ABS F.2 F.1
    DATAF tmpf491
    DATA8 flag491
    DIVF F.0 F.1 tmpf491
    CP_EQF 0.0 F.1 flag491
    SELECTF flag491 0.0 tmpf491 VLV_SIGNO_23

    MATH ABS VLV_VELOCIDAD1_23 F.0
    MATH ABS VLV_VELOCIDAD2_23 F.1
    DATA8 flag494
	CP_LTF F.0 F.1 flag494
	SELECTF flag494 F.0 F.1 VLV_VMIN_23
    MATH ABS VLV_VELOCIDAD1_23 F.0
    MATH ABS VLV_VELOCIDAD2_23 F.1
    DATA8 flag497
	CP_GTF F.0 F.1 flag497
	SELECTF flag497 F.0 F.1 VLV_VMAX_23
    MULF VLV_GRADOS_23 VPR_GIRO_G1 F.0
    MULF VLV_SIGNO_23 VLV_VMIN_23 F.4
    DATAF tmpf500
    DATA8 flag500
    DIVF F.4 VLV_VMAX_23 tmpf500
    CP_EQF 0.0 VLV_VMAX_23 flag500
    SELECTF flag500 0.0 tmpf500 F.3

    SUBF F.3 1.0 F.2
    DATAF tmpf502
    DATA8 flag502
    DIVF -2.0 F.2 tmpf502
    CP_EQF 0.0 F.2 flag502
    SELECTF flag502 0.0 tmpf502 F.1

    MULF F.0 F.1 VLV_ENCODER_23
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA32 milliseconds505
	MOVEF_32 100.0 milliseconds505
	DATA32 timer505
	TIMER_WAIT milliseconds505 timer505
	TIMER_READY timer505
    MATH NEGATE VLV_VELOCIDAD1_23 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_23 VLV_ENCODER_23 'True'

	DATA8 layer507
	DATA8 nos507
	DATA8 busy507
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer507 nos507
	JR_EQ8 0 nos507 motornotbusy507
  motorwaiting507:
	OUTPUT_TEST layer507 nos507 busy507
	JR_EQ8 busy507 0 motornotbusy507
	SLEEP
	JR motorwaiting507
  motornotbusy507:
    MOVEF_F 0.0 VLV_VELOCIDAD1_23
    MOVEF_F 0.0 VLV_VELOCIDAD2_23
    MOVEF_F 0.0 VLV_GRADOS_23
    DATA32 milliseconds508
	MOVEF_32 100.0 milliseconds508
	DATA32 timer508
	TIMER_WAIT milliseconds508 timer508
	TIMER_READY timer508
RETSUB_M_GIRO_GRADOS_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_GRADOS_3:
SUB_M_GIRO_TIEMPO_3:
    TIMER_READ timeMC3
  while510:
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_GTEQF F.0 VLV_TIEMPO_24 endwhile510
  whilebody510:
    MATH NEGATE VLV_VELOCIDAD1_24 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_24
    TIMER_READ timeMC3tmp
	SUB32 timeMC3tmp timeMC3 timeMC3tmp
	MOVE32_F timeMC3tmp F.0
    JR_LTF F.0 VLV_TIEMPO_24 whilebody510
  endwhile510:
    CALL MOTOR.STOP 'BC' 'True'
RETSUB_M_GIRO_TIEMPO_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_TIEMPO_3:
SUB_M_GIRO_ENCODERF_3:
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_GIRO_DIAMETRO F.2 F.1
    DATAF tmpf518
    DATA8 flag518
    DIVF VLV_DISTANCIA_25 F.1 tmpf518
    CP_EQF 0.0 F.1 flag518
    SELECTF flag518 0.0 tmpf518 F.0

    MULF F.0 360.0 VLV_ENCODER_25
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MATH NEGATE VLV_VELOCIDAD1_25 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_25 VLV_ENCODER_25 'False'

	DATA8 layer522
	DATA8 nos522
	DATA8 busy522
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer522 nos522
	JR_EQ8 0 nos522 motornotbusy522
  motorwaiting522:
	OUTPUT_TEST layer522 nos522 busy522
	JR_EQ8 busy522 0 motornotbusy522
	SLEEP
	JR motorwaiting522
  motornotbusy522:
RETSUB_M_GIRO_ENCODERF_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_ENCODERF_3:
SUB_M_GIRO_ENCODER_3:
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_GIRO_DIAMETRO F.2 F.1
    DATAF tmpf525
    DATA8 flag525
    DIVF VLV_DISTANCIA_26 F.1 tmpf525
    CP_EQF 0.0 F.1 flag525
    SELECTF flag525 0.0 tmpf525 F.0

    MULF F.0 360.0 VLV_ENCODER_26
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    MATH NEGATE VLV_VELOCIDAD1_26 F.0
    CALL MOTOR.SCHEDULESYNC 'BC' F.0 VLV_VELOCIDAD2_26 VLV_ENCODER_26 'True'

	DATA8 layer529
	DATA8 nos529
	DATA8 busy529
	CALL MOTORDECODEPORTSDESCRIPTOR 'BC' layer529 nos529
	JR_EQ8 0 nos529 motornotbusy529
  motorwaiting529:
	OUTPUT_TEST layer529 nos529 busy529
	JR_EQ8 busy529 0 motornotbusy529
	SLEEP
	JR motorwaiting529
  motornotbusy529:
RETSUB_M_GIRO_ENCODER_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_ENCODER_3:
SUB_M_GIRO_COLOR1_4:
    CALL SENSOR.GETMODE VLV_SENS_27 VLV_MODE_27
    DATA8 layer531
	DATA8 no531
	DATA8 mode8531
	
	MOVEF_8 VLV_SENS_27 no531
	SUB8 no531 1 no531
	DIV8 no531 4 layer531
	MATH MOD8 no531 4 no531

	MOVEF_8 2.0 mode8531
	
	INPUT_DEVICE READY_RAW layer531 no531 0 mode8531 0
  while532:
    CALL SENSOR.READRAWVALUE VLV_SENS_27 0.0 F.0
    JR_EQF F.0 VLV_COLOR_27 endwhile532
  whilebody532:
    MATH NEGATE VLV_VELOCIDAD1_27 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_27
    CALL SENSOR.READRAWVALUE VLV_SENS_27 0.0 F.0
    JR_NEQF F.0 VLV_COLOR_27 whilebody532
  endwhile532:
    CALL MOTOR.STOP 'BC' 'True'
    DATA8 layer538
	DATA8 no538
	DATA8 mode8538
	
	MOVEF_8 VLV_SENS_27 no538
	SUB8 no538 1 no538
	DIV8 no538 4 layer538
	MATH MOD8 no538 4 no538

	MOVEF_8 VLV_MODE_27 mode8538
	
	INPUT_DEVICE READY_RAW layer538 no538 0 mode8538 0
RETSUB_M_GIRO_COLOR1_4:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_COLOR1_4:
SUB_M_GIRO_COLOR1F_4:
    CALL SENSOR.GETMODE VLV_SENS_28 VLV_MODE_28
    DATA8 layer540
	DATA8 no540
	DATA8 mode8540
	
	MOVEF_8 VLV_SENS_28 no540
	SUB8 no540 1 no540
	DIV8 no540 4 layer540
	MATH MOD8 no540 4 no540

	MOVEF_8 2.0 mode8540
	
	INPUT_DEVICE READY_RAW layer540 no540 0 mode8540 0
  while541:
    CALL SENSOR.READRAWVALUE VLV_SENS_28 0.0 F.0
    JR_EQF F.0 VLV_COLOR_28 endwhile541
  whilebody541:
    MATH NEGATE VLV_VELOCIDAD1_28 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_28
    CALL SENSOR.READRAWVALUE VLV_SENS_28 0.0 F.0
    JR_NEQF F.0 VLV_COLOR_28 whilebody541
  endwhile541:
    CALL MOTOR.STOP 'BC' 'False'
    DATA8 layer547
	DATA8 no547
	DATA8 mode8547
	
	MOVEF_8 VLV_SENS_28 no547
	SUB8 no547 1 no547
	DIV8 no547 4 layer547
	MATH MOD8 no547 4 no547

	MOVEF_8 VLV_MODE_28 mode8547
	
	INPUT_DEVICE READY_RAW layer547 no547 0 mode8547 0
RETSUB_M_GIRO_COLOR1F_4:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_COLOR1F_4:
SUB_M_GIRO_BLANCO1_3:
    MOVEF_F 50.0 VLV_LECTURA_29
  while548:
    JR_GTEQF VLV_LECTURA_29 60.0 endwhile548
  whilebody548:
    CALL SENSOR.READPERCENT VLV_SENS_29 F.2
    SUBF F.2 VPR_GIRO_NEGRO F.1
    DATAF tmpf551
    DATA8 flag551
    DIVF F.1 VPR_GIRO_BLANCO tmpf551
    CP_EQF 0.0 VPR_GIRO_BLANCO flag551
    SELECTF flag551 0.0 tmpf551 F.0

    SUBF 100.0 VPR_GIRO_NEGRO F.1
    MULF F.0 F.1 VLV_LECTURA_29
    MATH NEGATE VLV_VELOCIDAD1_29 F.0
    CALL MOTOR.STARTSYNC 'BC' F.0 VLV_VELOCIDAD2_29
    JR_LTF VLV_LECTURA_29 60.0 whilebody548
  endwhile548:
    CALL MOTOR.STOP 'BC' 'True'
RETSUB_M_GIRO_BLANCO1_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_GIRO_BLANCO1_3:
SUB_M_SMART_ENCODER31F_2:
    MULF VLV_VELOCIDAD_30 1.0 VLV_VELOCIDAD_30
    MOVEF_F 50.0 VLV_LECTURA1_30
    MOVEF_F 50.0 VLV_LECTURA3_30
    MOVEF_F 50.0 VLV_LECTURA4_30
    DATAF tmpf558
    DATA8 flag558
    DIVF VLV_VELOCIDAD_30 220.0 tmpf558
    CP_EQF 0.0 220.0 flag558
    SELECTF flag558 0.0 tmpf558 VLV_KP_30

    MULF VLV_KP_30 28.0 VLV_KD_30
    MOVEF_F 3.1415926535897932384 F.1
    MULF VPR_SMART_DIAMETRO F.1 F.0
    DATAF tmpf562
    DATA8 flag562
    DIVF 2520.0 F.0 tmpf562
    CP_EQF 0.0 F.0 flag562
    SELECTF flag562 0.0 tmpf562 VLV_DISTANCIA_30

    MOVEF_F 0.0 VLV_ERROR_30
    MOVEF_F 0.0 VLV_OLDERROR_30
    MOVEF_F 0.0 VLV_U_30
    MATH ABS VLV_VELOCIDAD_30 F.0
    DATAF tmpf564
    DATA8 flag564
    DIVF VLV_VELOCIDAD_30 F.0 tmpf564
    CP_EQF 0.0 F.0 flag564
    SELECTF flag564 0.0 tmpf564 VLV_SENTIDO_30

    MOVEF_F VLV_VELOCIDAD_30 VLV_STARTVELOCIDAD_30
    MOVEF_F VLV_KP_30 VLV_STARTKP_30
    MOVEF_F VLV_KD_30 VLV_STARTKD_30
    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SMART_DIAMETRO F.2 F.1
    DATAF tmpf567
    DATA8 flag567
    DIVF VLV_ENCODER_30 F.1 tmpf567
    CP_EQF 0.0 F.1 flag567
    SELECTF flag567 0.0 tmpf567 F.0

    MULF F.0 360.0 VLV_ENCODER_30
    CALL MOTOR.GETCOUNT 'C' VLV_STARTC_30
    MOVEF_F 0.0 VLV_ENCODERC_30
  while570:
    MATH ABS VLV_ENCODERC_30 F.0
    JR_GTEQF F.0 VLV_ENCODER_30 endwhile570
  whilebody570:
    CALL MOTOR.GETCOUNT 'C' F.0
    SUBF F.0 VLV_STARTC_30 VLV_ENCODERC_30
    JR_GTEQF VLV_ENCODERC_30 VLV_DISTANCIA_30 else574_1
    MOVEF_F 20.0 VLV_VELOCIDAD_30
    MOVEF_F 0.1 VLV_KP_30
    MULF VLV_KP_30 28.0 VLV_KD_30
    JR endif574
  else574_1:
    MOVEF_F VLV_STARTVELOCIDAD_30 VLV_VELOCIDAD_30
    MOVEF_F VLV_STARTKP_30 VLV_KP_30
    MOVEF_F VLV_STARTKD_30 VLV_KD_30
  else574_2:
  endif574:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SMART_NEGRO1 F.1
    DATAF tmpf578
    DATA8 flag578
    DIVF F.1 VPR_SMART_BLANCO1 tmpf578
    CP_EQF 0.0 VPR_SMART_BLANCO1 flag578
    SELECTF flag578 0.0 tmpf578 F.0

    SUBF 100.0 VPR_SMART_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_30
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SMART_NEGRO3 F.1
    DATAF tmpf583
    DATA8 flag583
    DIVF F.1 VPR_SMART_BLANCO3 tmpf583
    CP_EQF 0.0 VPR_SMART_BLANCO3 flag583
    SELECTF flag583 0.0 tmpf583 F.0

    SUBF 100.0 VPR_SMART_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_30
    SUBF VLV_LECTURA3_30 VLV_LECTURA1_30 F.1
    MULF F.1 VLV_SENTIDO_30 F.0
    MULF F.0 1.0 VLV_ERROR_30
    MULF VLV_ERROR_30 VLV_KP_30 F.0
    SUBF VLV_ERROR_30 VLV_OLDERROR_30 F.2
    MULF F.2 VLV_KD_30 F.1
    ADDF F.0 F.1 VLV_U_30
    ADDF VLV_VELOCIDAD_30 VLV_U_30 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_30 VLV_U_30 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_30 VLV_OLDERROR_30
    MATH ABS VLV_ENCODERC_30 F.0
    JR_LTF F.0 VLV_ENCODER_30 whilebody570
  endwhile570:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SMART_ENCODER31F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SMART_ENCODER31F_2:
SUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
    MULF VLV_VELOCIDAD_31 1.0 VLV_VELOCIDAD_31
    MOVEF_F 50.0 VLV_LECTURA1_31
    MOVEF_F 50.0 VLV_LECTURA3_31
    MOVEF_F 50.0 VLV_LECTURA4_31
    DATAF tmpf600
    DATA8 flag600
    DIVF VLV_VELOCIDAD_31 220.0 tmpf600
    CP_EQF 0.0 220.0 flag600
    SELECTF flag600 0.0 tmpf600 VLV_KP_31

    MULF VLV_KP_31 24.0 VLV_KD_31
    MOVEF_F 0.0 VLV_ERROR_31
    MOVEF_F 0.0 VLV_OLDERROR_31
    MOVEF_F 0.0 VLV_U_31
    MATH ABS VLV_VELOCIDAD_31 F.0
    DATAF tmpf603
    DATA8 flag603
    DIVF VLV_VELOCIDAD_31 F.0 tmpf603
    CP_EQF 0.0 F.0 flag603
    SELECTF flag603 0.0 tmpf603 VLV_SENTIDO_31

    MOVEF_F 50.0 VLV_LECTURA_31
  while604:
    JR_LTEQF VLV_LECTURA_31 10.0 endwhile604
  whilebody604:
    JR_NEQF VLV_READER_31 3.0 else605_1
    MOVEF_F VLV_LECTURA3_31 VLV_LECTURA_31
    MOVEF_F VLV_LECTURA1_31 VLV_LECTURAIZQ_31
    MOVEF_F VLV_LECTURA4_31 VLV_LECTURADCH_31
    JR endif605
  else605_1:
    MOVEF_F VLV_LECTURA4_31 VLV_LECTURA_31
    MOVEF_F VLV_LECTURA3_31 VLV_LECTURAIZQ_31
    MOVEF_F VLV_LECTURA1_31 VLV_LECTURADCH_31
  else605_2:
  endif605:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf608
    DATA8 flag608
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf608
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag608
    SELECTF flag608 0.0 tmpf608 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_31
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf613
    DATA8 flag613
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf613
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag613
    SELECTF flag613 0.0 tmpf613 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_31
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf618
    DATA8 flag618
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf618
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag618
    SELECTF flag618 0.0 tmpf618 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_31
    SUBF VLV_LECTURAIZQ_31 VLV_LECTURADCH_31 F.1
    MULF F.1 VLV_SENTIDO_31 F.0
    MULF F.0 1.0 VLV_ERROR_31
    MULF VLV_ERROR_31 VLV_KP_31 F.0
    SUBF VLV_ERROR_31 VLV_OLDERROR_31 F.2
    MULF F.2 VLV_KD_31 F.1
    ADDF F.0 F.1 VLV_U_31
    ADDF VLV_VELOCIDAD_31 VLV_U_31 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_31 VLV_U_31 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_31 VLV_OLDERROR_31
    JR_GTF VLV_LECTURA_31 10.0 whilebody604
  endwhile604:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_CRUCE_EXTERNOF_2:
SUB_M_SIGUELINEAS_ENCODER31F_2:
    MULF VLV_VELOCIDAD_32 1.0 VLV_VELOCIDAD_32
    MOVEF_F 50.0 VLV_LECTURA1_32
    MOVEF_F 50.0 VLV_LECTURA3_32
    MOVEF_F 50.0 VLV_LECTURA4_32
    DATAF tmpf634
    DATA8 flag634
    DIVF VLV_VELOCIDAD_32 220.0 tmpf634
    CP_EQF 0.0 220.0 flag634
    SELECTF flag634 0.0 tmpf634 VLV_KP_32

    MULF VLV_KP_32 24.0 VLV_KD_32
    MOVEF_F 0.0 VLV_ERROR_32
    MOVEF_F 0.0 VLV_OLDERROR_32
    MOVEF_F 0.0 VLV_U_32
    MATH ABS VLV_VELOCIDAD_32 F.0
    DATAF tmpf637
    DATA8 flag637
    DIVF VLV_VELOCIDAD_32 F.0 tmpf637
    CP_EQF 0.0 F.0 flag637
    SELECTF flag637 0.0 tmpf637 VLV_SENTIDO_32

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf640
    DATA8 flag640
    DIVF VLV_ENCODER_32 F.1 tmpf640
    CP_EQF 0.0 F.1 flag640
    SELECTF flag640 0.0 tmpf640 F.0

    MULF F.0 360.0 VLV_ENCODER_32
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_32
    MOVEF_F 0.0 VLV_ENCODERC_32
  while643:
    MATH ABS VLV_ENCODERC_32 F.0
    JR_GTEQF F.0 VLV_ENCODER_32 endwhile643
  whilebody643:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_32 VLV_ENCODERC_32
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf649
    DATA8 flag649
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf649
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag649
    SELECTF flag649 0.0 tmpf649 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_32
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO3 F.1
    DATAF tmpf654
    DATA8 flag654
    DIVF F.1 VPR_SIGUELINEAS_BLANCO3 tmpf654
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO3 flag654
    SELECTF flag654 0.0 tmpf654 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO3 F.1
    MULF F.0 F.1 VLV_LECTURA3_32
    SUBF VLV_LECTURA3_32 VLV_LECTURA1_32 F.1
    MULF F.1 VLV_SENTIDO_32 F.0
    MULF F.0 1.0 VLV_ERROR_32
    MULF VLV_ERROR_32 VLV_KP_32 F.0
    SUBF VLV_ERROR_32 VLV_OLDERROR_32 F.2
    MULF F.2 VLV_KD_32 F.1
    ADDF F.0 F.1 VLV_U_32
    ADDF VLV_VELOCIDAD_32 VLV_U_32 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_32 VLV_U_32 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_32 VLV_OLDERROR_32
    MATH ABS VLV_ENCODERC_32 F.0
    JR_LTF F.0 VLV_ENCODER_32 whilebody643
  endwhile643:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
RETSUB_M_SIGUELINEAS_ENCODER31F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER31F_2:
SUB_M_SIGUELINEAS_ENCODER14_2:
    MULF VLV_VELOCIDAD_33 1.0 VLV_VELOCIDAD_33
    MOVEF_F 50.0 VLV_LECTURA1_33
    MOVEF_F 50.0 VLV_LECTURA3_33
    MOVEF_F 50.0 VLV_LECTURA4_33
    DATAF tmpf671
    DATA8 flag671
    DIVF VLV_VELOCIDAD_33 220.0 tmpf671
    CP_EQF 0.0 220.0 flag671
    SELECTF flag671 0.0 tmpf671 VLV_KP_33

    MULF VLV_KP_33 24.0 VLV_KD_33
    MOVEF_F 0.0 VLV_ERROR_33
    MOVEF_F 0.0 VLV_OLDERROR_33
    MOVEF_F 0.0 VLV_U_33
    MATH ABS VLV_VELOCIDAD_33 F.0
    DATAF tmpf674
    DATA8 flag674
    DIVF VLV_VELOCIDAD_33 F.0 tmpf674
    CP_EQF 0.0 F.0 flag674
    SELECTF flag674 0.0 tmpf674 VLV_SENTIDO_33

    MOVEF_F 3.1415926535897932384 F.2
    MULF VPR_SIGUELINEAS_DIAMETRO F.2 F.1
    DATAF tmpf677
    DATA8 flag677
    DIVF VLV_ENCODER_33 F.1 tmpf677
    CP_EQF 0.0 F.1 flag677
    SELECTF flag677 0.0 tmpf677 F.0

    MULF F.0 360.0 VLV_ENCODER_33
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC VLV_STARTC_33
    MOVEF_F 0.0 VLV_ENCODERC_33
  while680:
    MATH ABS VLV_ENCODERC_33 F.0
    JR_GTEQF F.0 VLV_ENCODER_33 endwhile680
  whilebody680:
    OUTPUT_GET_COUNT 0 2 getTachoC
	MOVE32_F getTachoC F.0
    SUBF F.0 VLV_STARTC_33 VLV_ENCODERC_33
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf686
    DATA8 flag686
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf686
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag686
    SELECTF flag686 0.0 tmpf686 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_33
    CALL SENSOR.READPERCENT 4.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf691
    DATA8 flag691
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf691
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag691
    SELECTF flag691 0.0 tmpf691 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA4_33
    SUBF VLV_LECTURA1_33 VLV_LECTURA4_33 F.1
    MULF F.1 VLV_SENTIDO_33 F.0
    MULF F.0 1.0 VLV_ERROR_33
    MULF VLV_ERROR_33 VLV_KP_33 F.0
    SUBF VLV_ERROR_33 VLV_OLDERROR_33 F.2
    MULF F.2 VLV_KD_33 F.1
    ADDF F.0 F.1 VLV_U_33
    ADDF VLV_VELOCIDAD_33 VLV_U_33 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_33 VLV_U_33 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_33 VLV_OLDERROR_33
    MATH ABS VLV_ENCODERC_33 F.0
    JR_LTF F.0 VLV_ENCODER_33 whilebody680
  endwhile680:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
RETSUB_M_SIGUELINEAS_ENCODER14_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_ENCODER14_2:
SUB_M_SIGUELINEAS_COLOR31_2:
    CALL SENSOR.GETMODE 4.0 VLV_MODE_34
    DATA8 layer708
	DATA8 no708
	DATA8 mode8708
	
	MOVEF_8 4.0 no708
	SUB8 no708 1 no708
	DIV8 no708 4 layer708
	MATH MOD8 no708 4 no708

	MOVEF_8 2.0 mode8708
	
	INPUT_DEVICE READY_RAW layer708 no708 0 mode8708 0
    MULF VLV_VELOCIDAD_34 1.0 VLV_VELOCIDAD_34
    MOVEF_F 50.0 VLV_LECTURA1_34
    MOVEF_F 50.0 VLV_LECTURA3_34
    MOVEF_F 50.0 VLV_LECTURA4_34
    DATAF tmpf710
    DATA8 flag710
    DIVF VLV_VELOCIDAD_34 220.0 tmpf710
    CP_EQF 0.0 220.0 flag710
    SELECTF flag710 0.0 tmpf710 VLV_KP_34

    MULF VLV_KP_34 24.0 VLV_KD_34
    MOVEF_F 0.0 VLV_ERROR_34
    MOVEF_F 0.0 VLV_OLDERROR_34
    MOVEF_F 0.0 VLV_U_34
    MATH ABS VLV_VELOCIDAD_34 F.0
    DATAF tmpf713
    DATA8 flag713
    DIVF VLV_VELOCIDAD_34 F.0 tmpf713
    CP_EQF 0.0 F.0 flag713
    SELECTF flag713 0.0 tmpf713 VLV_SENTIDO_34

  while714:
    CALL SENSOR.READRAWVALUE 4.0 0.0 F.0
    JR_EQF F.0 VLV_COLOR_34 endwhile714
  whilebody714:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf718
    DATA8 flag718
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf718
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag718
    SELECTF flag718 0.0 tmpf718 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_34
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf723
    DATA8 flag723
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf723
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag723
    SELECTF flag723 0.0 tmpf723 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA3_34
    SUBF VLV_LECTURA3_34 VLV_LECTURA1_34 F.1
    MULF F.1 VLV_SENTIDO_34 F.0
    MULF F.0 1.0 VLV_ERROR_34
    MULF VLV_ERROR_34 VLV_KP_34 F.0
    SUBF VLV_ERROR_34 VLV_OLDERROR_34 F.2
    MULF F.2 VLV_KD_34 F.1
    ADDF F.0 F.1 VLV_U_34
    ADDF VLV_VELOCIDAD_34 VLV_U_34 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_34 VLV_U_34 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_34 VLV_OLDERROR_34
    CALL SENSOR.READRAWVALUE 4.0 0.0 F.0
    JR_NEQF F.0 VLV_COLOR_34 whilebody714
  endwhile714:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 1
    DATA8 layer739
	DATA8 no739
	DATA8 mode8739
	
	MOVEF_8 4.0 no739
	SUB8 no739 1 no739
	DIV8 no739 4 layer739
	MATH MOD8 no739 4 no739

	MOVEF_8 VLV_MODE_34 mode8739
	
	INPUT_DEVICE READY_RAW layer739 no739 0 mode8739 0
RETSUB_M_SIGUELINEAS_COLOR31_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_COLOR31_2:
SUB_M_SIGUELINEAS_COLOR31F_2:
    CALL SENSOR.GETMODE 4.0 VLV_MODE_35
    DATA8 layer741
	DATA8 no741
	DATA8 mode8741
	
	MOVEF_8 4.0 no741
	SUB8 no741 1 no741
	DIV8 no741 4 layer741
	MATH MOD8 no741 4 no741

	MOVEF_8 2.0 mode8741
	
	INPUT_DEVICE READY_RAW layer741 no741 0 mode8741 0
    MULF VLV_VELOCIDAD_35 1.0 VLV_VELOCIDAD_35
    MOVEF_F 50.0 VLV_LECTURA1_35
    MOVEF_F 50.0 VLV_LECTURA3_35
    MOVEF_F 50.0 VLV_LECTURA4_35
    DATAF tmpf743
    DATA8 flag743
    DIVF VLV_VELOCIDAD_35 220.0 tmpf743
    CP_EQF 0.0 220.0 flag743
    SELECTF flag743 0.0 tmpf743 VLV_KP_35

    MULF VLV_KP_35 24.0 VLV_KD_35
    MOVEF_F 0.0 VLV_ERROR_35
    MOVEF_F 0.0 VLV_OLDERROR_35
    MOVEF_F 0.0 VLV_U_35
    MATH ABS VLV_VELOCIDAD_35 F.0
    DATAF tmpf746
    DATA8 flag746
    DIVF VLV_VELOCIDAD_35 F.0 tmpf746
    CP_EQF 0.0 F.0 flag746
    SELECTF flag746 0.0 tmpf746 VLV_SENTIDO_35

  while747:
    CALL SENSOR.READRAWVALUE 4.0 0.0 F.0
    JR_EQF F.0 VLV_COLOR_35 endwhile747
  whilebody747:
    CALL SENSOR.READPERCENT 1.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO1 F.1
    DATAF tmpf751
    DATA8 flag751
    DIVF F.1 VPR_SIGUELINEAS_BLANCO1 tmpf751
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO1 flag751
    SELECTF flag751 0.0 tmpf751 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO1 F.1
    MULF F.0 F.1 VLV_LECTURA1_35
    CALL SENSOR.READPERCENT 3.0 F.2
    SUBF F.2 VPR_SIGUELINEAS_NEGRO4 F.1
    DATAF tmpf756
    DATA8 flag756
    DIVF F.1 VPR_SIGUELINEAS_BLANCO4 tmpf756
    CP_EQF 0.0 VPR_SIGUELINEAS_BLANCO4 flag756
    SELECTF flag756 0.0 tmpf756 F.0

    SUBF 100.0 VPR_SIGUELINEAS_NEGRO4 F.1
    MULF F.0 F.1 VLV_LECTURA3_35
    SUBF VLV_LECTURA3_35 VLV_LECTURA1_35 F.1
    MULF F.1 VLV_SENTIDO_35 F.0
    MULF F.0 1.0 VLV_ERROR_35
    MULF VLV_ERROR_35 VLV_KP_35 F.0
    SUBF VLV_ERROR_35 VLV_OLDERROR_35 F.2
    MULF F.2 VLV_KD_35 F.1
    ADDF F.0 F.1 VLV_U_35
    ADDF VLV_VELOCIDAD_35 VLV_U_35 F.1
    MATH NEGATE F.1 F.0
    SUBF VLV_VELOCIDAD_35 VLV_U_35 F.1
    CALL MOTOR.STARTSYNC 'BC' F.0 F.1
    MOVEF_F VLV_ERROR_35 VLV_OLDERROR_35
    CALL SENSOR.READRAWVALUE 4.0 0.0 F.0
    JR_NEQF F.0 VLV_COLOR_35 whilebody747
  endwhile747:
    OUTPUT_POWER 0 6 0
	OUTPUT_STOP 0 6 0
    DATA8 layer772
	DATA8 no772
	DATA8 mode8772
	
	MOVEF_8 4.0 no772
	SUB8 no772 1 no772
	DIV8 no772 4 layer772
	MATH MOD8 no772 4 no772

	MOVEF_8 VLV_MODE_35 mode8772
	
	INPUT_DEVICE READY_RAW layer772 no772 0 mode8772 0
RETSUB_M_SIGUELINEAS_COLOR31F_2:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_SIGUELINEAS_COLOR31F_2:
SUB_M_RGB_DETECT_3:
    CALL SENSOR.GETMODE VLV_SENS_36 VLV_SENS_MODE_36
    DATA8 layer774
	DATA8 no774
	DATA8 mode8774
	
	MOVEF_8 VLV_SENS_36 no774
	SUB8 no774 1 no774
	DIV8 no774 4 layer774
	MATH MOD8 no774 4 no774

	MOVEF_8 4.0 mode8774
	
	INPUT_DEVICE READY_RAW layer774 no774 0 mode8774 0
    MOVEF_F 15.0 VLV_RED_36
    MOVEF_F 60.0 VLV_YELLOW_36
    MOVEF_F 170.0 VLV_GREEN_36
    MOVEF_F 330.0 VLV_BLUE_36
    MOVEF_F 0.0 VLV_HUE_36
    MOVEF_F 0.0 VLV_SAT_36
    MOVEF_F 0.0 VLV_VALUE_36
    MOVEF_F 0.0 VLV_COLOR_36
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_RNORMARRAY_36
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_GNORMARRAY_36
    CALL ARRAYSTORE_FLOAT 0.0 0.0 VLV_BNORMARRAY_36
    CALL LCD.CLEAR
    MOVEF_F 1.0 VLV_J_36
  for779:
    JR_GTF VLV_J_36 VLV_REPS_36 endfor779
  forbody779:
    CALL SENSOR.READRAW VLV_SENS_36 3.0 VLV_RGB_36
    CALL ARRAYGET_FLOAT 0.0 VLV_RRAW_36 VLV_RGB_36
    CALL ARRAYGET_FLOAT 1.0 VLV_GRAW_36 VLV_RGB_36
    CALL ARRAYGET_FLOAT 2.0 VLV_BRAW_36 VLV_RGB_36
    DATAF tmpf784
    DATA8 flag784
    DIVF VLV_RRAW_36 VPR_RGB_RWHITE tmpf784
    CP_EQF 0.0 VPR_RGB_RWHITE flag784
    SELECTF flag784 0.0 tmpf784 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_36 F.0 VLV_RNORMARRAY_36
    DATAF tmpf788
    DATA8 flag788
    DIVF VLV_GRAW_36 VPR_RGB_GWHITE tmpf788
    CP_EQF 0.0 VPR_RGB_GWHITE flag788
    SELECTF flag788 0.0 tmpf788 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_36 F.0 VLV_GNORMARRAY_36
    DATAF tmpf792
    DATA8 flag792
    DIVF VLV_BRAW_36 VPR_RGB_BWHITE tmpf792
    CP_EQF 0.0 VPR_RGB_BWHITE flag792
    SELECTF flag792 0.0 tmpf792 F.2

    MULF F.2 255.0 F.1
    MATH ROUND F.1 F.0
    CALL ARRAYSTORE_FLOAT VLV_J_36 F.0 VLV_BNORMARRAY_36
    DATA32 milliseconds796
	MOVEF_32 5.0 milliseconds796
	DATA32 timer796
	TIMER_WAIT milliseconds796 timer796
	TIMER_READY timer796
    ADDF VLV_J_36 1.0 VLV_J_36
    JR_LTEQF VLV_J_36 VLV_REPS_36 forbody779
  endfor779:
    MOVEF_F 1.0 VLV_J_36
  for798:
    JR_GTF VLV_J_36 VLV_REPS_36 endfor798
  forbody798:
    CALL ARRAYGET_FLOAT VLV_J_36 F.0 VLV_RNORMARRAY_36
    ADDF VLV_J_36 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_RNORMARRAY_36
    ADDF F.0 F.1 VLV_RNORM_36
    CALL ARRAYGET_FLOAT VLV_J_36 F.0 VLV_GNORMARRAY_36
    ADDF VLV_J_36 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_GNORMARRAY_36
    ADDF F.0 F.1 VLV_GNORM_36
    CALL ARRAYGET_FLOAT VLV_J_36 F.0 VLV_BNORMARRAY_36
    ADDF VLV_J_36 1.0 F.2
    CALL ARRAYGET_FLOAT F.2 F.1 VLV_BNORMARRAY_36
    ADDF F.0 F.1 VLV_BNORM_36
    ADDF VLV_J_36 2.0 VLV_J_36
    JR_LTEQF VLV_J_36 VLV_REPS_36 forbody798
  endfor798:
    DATAF tmpf812
    DATA8 flag812
    DIVF VLV_RNORM_36 VLV_REPS_36 tmpf812
    CP_EQF 0.0 VLV_REPS_36 flag812
    SELECTF flag812 0.0 tmpf812 VLV_RNORM_36

    DATAF tmpf813
    DATA8 flag813
    DIVF VLV_GNORM_36 VLV_REPS_36 tmpf813
    CP_EQF 0.0 VLV_REPS_36 flag813
    SELECTF flag813 0.0 tmpf813 VLV_GNORM_36

    DATAF tmpf814
    DATA8 flag814
    DIVF VLV_BNORM_36 VLV_REPS_36 tmpf814
    CP_EQF 0.0 VLV_REPS_36 flag814
    SELECTF flag814 0.0 tmpf814 VLV_BNORM_36

    DATA8 flag815
	CP_GTF VLV_RNORM_36 VLV_GNORM_36 flag815
	SELECTF flag815 VLV_RNORM_36 VLV_GNORM_36 F.0
    DATA8 flag816
	CP_GTF F.0 VLV_BNORM_36 flag816
	SELECTF flag816 F.0 VLV_BNORM_36 VLV_MAX_36
    DATA8 flag817
	CP_LTF VLV_RNORM_36 VLV_GNORM_36 flag817
	SELECTF flag817 VLV_RNORM_36 VLV_GNORM_36 F.0
    DATA8 flag818
	CP_LTF F.0 VLV_BNORM_36 flag818
	SELECTF flag818 F.0 VLV_BNORM_36 VLV_MIN_36
    JR_NEQF VLV_MAX_36 VLV_MIN_36 else819_1
    MOVEF_F 0.0 VLV_HUE_36
    JR endif819
  else819_1:
    JR_NEQF VLV_MAX_36 VLV_RNORM_36 else819_2
    JR_LTF VLV_GNORM_36 VLV_BNORM_36 else820_1
    SUBF VLV_GNORM_36 VLV_BNORM_36 F.1
    MULF 60.0 F.1 F.0
    SUBF VLV_MAX_36 VLV_MIN_36 F.1
    DATAF tmpf824
    DATA8 flag824
    DIVF F.0 F.1 tmpf824
    CP_EQF 0.0 F.1 flag824
    SELECTF flag824 0.0 tmpf824 VLV_HUE_36

    JR endif820
  else820_1:
    SUBF VLV_GNORM_36 VLV_BNORM_36 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_36 VLV_MIN_36 F.2
    DATAF tmpf828
    DATA8 flag828
    DIVF F.1 F.2 tmpf828
    CP_EQF 0.0 F.2 flag828
    SELECTF flag828 0.0 tmpf828 F.0

    ADDF F.0 360.0 VLV_HUE_36
  else820_2:
  endif820:
    JR endif819
  else819_2:
    JR_NEQF VLV_MAX_36 VLV_GNORM_36 else819_3
    SUBF VLV_BNORM_36 VLV_RNORM_36 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_36 VLV_MIN_36 F.2
    DATAF tmpf833
    DATA8 flag833
    DIVF F.1 F.2 tmpf833
    CP_EQF 0.0 F.2 flag833
    SELECTF flag833 0.0 tmpf833 F.0

    ADDF F.0 120.0 VLV_HUE_36
    JR endif819
  else819_3:
    SUBF VLV_RNORM_36 VLV_GNORM_36 F.2
    MULF 60.0 F.2 F.1
    SUBF VLV_MAX_36 VLV_MIN_36 F.2
    DATAF tmpf838
    DATA8 flag838
    DIVF F.1 F.2 tmpf838
    CP_EQF 0.0 F.2 flag838
    SELECTF flag838 0.0 tmpf838 F.0

    ADDF F.0 240.0 VLV_HUE_36
  else819_4:
  endif819:
    JR_NEQF VLV_MAX_36 0.0 else840_1
    MOVEF_F 0.0 VLV_SAT_36
    JR endif840
  else840_1:
    DATAF tmpf841
    DATA8 flag841
    DIVF VLV_MIN_36 VLV_MAX_36 tmpf841
    CP_EQF 0.0 VLV_MAX_36 flag841
    SELECTF flag841 0.0 tmpf841 F.0

    SUBF 1.0 F.0 VLV_SAT_36
  else840_2:
  endif840:
    MOVEF_F VLV_MAX_36 VLV_VALUE_36
    ADDF VPR_RGB_VALUEBLANCO VPR_RGB_VALUENEGRO F.0
    DATAF tmpf844
    DATA8 flag844
    DIVF F.0 2.0 tmpf844
    CP_EQF 0.0 2.0 flag844
    SELECTF flag844 0.0 tmpf844 VLV_RGBGREY_36

    ADDF VLV_RNORM_36 VLV_GNORM_36 F.1
    ADDF F.1 VLV_BNORM_36 F.0
    JR_GTF F.0 3.0 else845_1
    MOVEF_F 0.0 VLV_COLOR_36
    JR endif845
  else845_1:
    JR_GTEQF VLV_SAT_36 0.2 else848_1
    JR_LTEQF VLV_VALUE_36 VLV_RGBGREY_36 else849_1
    MOVEF_F 6.0 VLV_COLOR_36
    JR endif849
  else849_1:
    MOVEF_F 1.0 VLV_COLOR_36
  else849_2:
  endif849:
    JR endif848
  else848_1:
    JR_LTF VLV_HUE_36 0.0 else850_1
    JR_GTEQF VLV_HUE_36 VLV_RED_36 else850_1
    MOVEF_F 5.0 VLV_COLOR_36
    JR endif850
  else850_1:
    JR_LTF VLV_HUE_36 VLV_RED_36 else850_2
    JR_GTEQF VLV_HUE_36 VLV_YELLOW_36 else850_2
    MOVEF_F 4.0 VLV_COLOR_36
    JR endif850
  else850_2:
    JR_LTF VLV_HUE_36 VLV_YELLOW_36 else850_3
    JR_GTEQF VLV_HUE_36 VLV_GREEN_36 else850_3
    MOVEF_F 3.0 VLV_COLOR_36
    JR endif850
  else850_3:
    JR_LTF VLV_HUE_36 VLV_GREEN_36 else850_4
    JR_GTEQF VLV_HUE_36 VLV_BLUE_36 else850_4
    MOVEF_F 2.0 VLV_COLOR_36
    JR endif850
  else850_4:
    MOVEF_F 5.0 VLV_COLOR_36
  else850_5:
  endif850:
  else848_2:
  endif848:
  else845_2:
  endif845:
    MOVE32_32 1 STOPLCDUPDATE
    CALL LCD.CLEAR
    STRINGS VALUE_FORMATTED VLV_RRAW_36 '%g' 99 S.1
    CALL TEXT.APPEND 'R: ' S.1 S.0
    CALL LCD.WRITE 33.0 20.0 S.0
    STRINGS VALUE_FORMATTED VLV_GRAW_36 '%g' 99 S.1
    CALL TEXT.APPEND 'G: ' S.1 S.0
    CALL LCD.WRITE 33.0 35.0 S.0
    STRINGS VALUE_FORMATTED VLV_BRAW_36 '%g' 99 S.1
    CALL TEXT.APPEND 'B: ' S.1 S.0
    CALL LCD.WRITE 33.0 50.0 S.0
    STRINGS VALUE_FORMATTED VLV_COLOR_36 '%g' 99 S.1
    CALL TEXT.APPEND 'color: ' S.1 S.0
    CALL LCD.WRITE 33.0 70.0 S.0
    STRINGS VALUE_FORMATTED VLV_VALUE_36 '%g' 99 S.1
    CALL TEXT.APPEND 'Value: ' S.1 S.0
    CALL LCD.WRITE 33.0 90.0 S.0
    MOVE32_32 0 STOPLCDUPDATE
	UI_DRAW UPDATE
    DATA8 layer869
	DATA8 no869
	DATA8 mode8869
	
	MOVEF_8 VLV_SENS_36 no869
	SUB8 no869 1 no869
	DIV8 no869 4 layer869
	MATH MOD8 no869 4 no869

	MOVEF_8 VLV_SENS_MODE_36 mode8869
	
	INPUT_DEVICE READY_RAW layer869 no869 0 mode8869 0
RETSUB_M_RGB_DETECT_3:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RGB_DETECT_3:
SUB_M_RGB_GRITAR_1:
    JR_NEQF VLV_COLOR_37 0.0 else870_1
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Zero'
    JR endif870
  else870_1:
    JR_NEQF VLV_COLOR_37 1.0 else870_2
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Black'
    JR endif870
  else870_2:
    JR_NEQF VLV_COLOR_37 2.0 else870_3
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/BLUE'
    JR endif870
  else870_3:
    JR_NEQF VLV_COLOR_37 3.0 else870_4
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/GREEN'
    JR endif870
  else870_4:
    JR_NEQF VLV_COLOR_37 4.0 else870_5
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/YELLOW'
    JR endif870
  else870_5:
    JR_NEQF VLV_COLOR_37 5.0 else870_6
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/RED'
    JR endif870
  else870_6:
    JR_NEQF VLV_COLOR_37 6.0 else870_7
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/White'
    JR endif870
  else870_7:
    JR_NEQF VLV_COLOR_37 7.0 else870_8
    CALL SPEAKER.PLAY 100.0 'WRO2024/Media/Brown'
  else870_8:
  endif870:
    SOUND_READY
RETSUB_M_RGB_GRITAR_1:
    SUB8 STACKPOINTER 1 STACKPOINTER
    READ32 RETURNSTACK STACKPOINTER INDEX
    JR_DYNAMIC INDEX
ENDSUB_M_RGB_GRITAR_1:
}
subcall SPEAKER.PLAY    // FSV 
{
	IN_F volume
	IN_S filename 252	

	// prepend a path to really reach the target file from the current working directory
	DATA8 vol 
	DATAS fullname 300
	MOVEF_8 volume vol

	STRINGS ADD '../../../..' filename fullname  // when using absolute path, go to file system top from the VM directory and then back down
	JR_EQ8 filename 47 absolutepath               // filename begins with a '/' - using absolute path
	STRINGS ADD '../prjs/' filename fullname      // by default use path relative to prjs folder (must go from the current VM directory to there)
absolutepath:
	
	SOUND PLAY vol fullname
}
subcall EV3.BATTERYVOLTAGE  // F
{
	OUT_F voltage
	UI_READ GET_VBATT voltage
}
subcall MOTOR.GETCOUNT    // SF     MOTORDECODEPORTDESCRIPTOR
{
	IN_S port 8
	OUT_F result
	
	DATA8 layer
	DATA8 no
	DATA32 tacho
	
	CALL MOTORDECODEPORTDESCRIPTOR port layer no
	JR_LT8 no 0 noport
	
	OUTPUT_GET_COUNT layer no tacho
	MOVE32_F tacho result

	DATA8 nos
	RL8 1 no nos
	DATA8 inv
	READ8 MOTORISINVERTED layer inv 
	AND8 inv nos inv
	JR_EQ8 inv 0 noinvert
	SUBF 0.0 result result
noinvert:
	RETURN

noport:	
	MOVE8_F 0 result	
}
subcall MOTORDECODEPORTDESCRIPTOR  //  V
{
	IN_S descriptor 8
	OUT_8 layer
	OUT_8 no

	DATA8 i 
	DATA8 c

	MOVE8_8 0 layer
	MOVE8_8 -1 no
	MOVE8_8 0 i
loop:
	READ8 descriptor i c
	JR_EQ8 c 0 decoding_end
	
	JR_LT8 c 65 no_uppercase_port
	JR_GT8 c 68 no_uppercase_port
	SUB8 c 65 c
	MOVE8_8 c no
	JR loop_end
no_uppercase_port:
	JR_LT8 c 97 no_lowercase_port
	JR_GT8 c 100 no_lowercase_port
	SUB8 c 97 c
	MOVE8_8 c no
	JR loop_end
no_lowercase_port:
	JR_LT8 c 49 loop_end
	JR_GT8 c 52 loop_end
	SUB8 c 49 layer
loop_end:
	ADD8 1 i i
	JR loop	
	
decoding_end:
	RETURN
}
subcall LCD.CLEAR   // V
{
	UI_DRAW(TOPLINE,0)
	UI_DRAW(CLEAN)
	
	JR_NEQ32 0 STOPLCDUPDATE skipupdate
	UI_DRAW UPDATE
skipupdate:
}
subcall TEXT.APPEND     // SSS
{
	IN_S a 252
	IN_S b 252
    OUT_S result 252
	
	DATA16 len0
	DATA16 len1
	DATA16 sum

	STRINGS GET_SIZE a len0
	STRINGS GET_SIZE b len1
	ADD16 len0,len1,sum
	JR_GT16 sum,251,stringsizeexceeded

	STRINGS ADD a b result
	RETURN
	
stringsizeexceeded:	
    STRINGS DUPLICATE a result
}
subcall LCD.WRITE     // FFSV
{
	IN_F x
	IN_F y
	IN_S text 252
	
	DATA16 x_16
	DATA16 y_16
	MOVEF_16 x x_16
	MOVEF_16 y y_16
	
	UI_DRAW SELECT_FONT 1
	UI_DRAW TEXT 1 x_16 y_16 text

	JR_NEQ32 0 STOPLCDUPDATE skipupdate
	UI_DRAW UPDATE
skipupdate:
}
subcall MOTOR.STOP       // SSV      MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_S brake 8

	DATA8 layer
	DATA8 nos	
	DATA8 brk
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	JR_EQ8 nos 0 noport

	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	
	
	OUTPUT_STOP layer nos brk
noport:
}
subcall MOTORDECODEPORTSDESCRIPTOR  //  V
{
	IN_S descriptor 8
	OUT_8 layer
	OUT_8 nos

	DATA8 i 
	DATA8 c

	MOVE8_8 0 layer
	MOVE8_8 0 nos	
	MOVE8_8 0 i
loop:
	READ8 descriptor i c
	JR_EQ8 c 0 decoding_end
	
	JR_LT8 c 65 no_uppercase_port
	JR_GT8 c 68 no_uppercase_port
	SUB8 c 65 c
	RL8  1 c c
	OR8  nos c nos
	JR loop_end
no_uppercase_port:
	JR_LT8 c 97 no_lowercase_port
	JR_GT8 c 100 no_lowercase_port
	SUB8 c 97 c
	RL8  1 c c
	OR8  nos c nos	
	JR loop_end
no_lowercase_port:
	JR_LT8 c 49 loop_end
	JR_GT8 c 52 loop_end
	SUB8 c 49 layer
loop_end:
	ADD8 1 i i
	JR loop	
	
decoding_end:
	RETURN
}
subcall MOTOR.STARTSYNC      // SFFV       MOTORSTARTSTEERIMPL
{
	IN_S ports 8
	IN_F speed1
	IN_F speed2

	JR_GTEQF speed1 -100.0 nottoosmall1
	MOVEF_F -100.0 speed1
nottoosmall1:
	JR_LTEQF speed1 100.0 nottoobig1
	MOVEF_F 100.0 speed1
nottoobig1:
	JR_GTEQF speed2 -100.0 nottoosmall2
	MOVEF_F -100.0 speed2
nottoosmall2:
	JR_LTEQF speed1 100.0 nottoobig2
	MOVEF_F 100.0 speed2
nottoobig2:

	DATAF speed  
	DATAF turn
	MOVE8_F 0 speed
	MOVE8_F 0 turn

	DATAF speed1abs
	DATAF speed2abs
	MATH ABS speed1 speed1abs
	MATH ABS speed2 speed2abs
	JR_LTF speed1abs speed2abs secondisfaster
	JR_EQF speed1abs 0.0 donecomputation
	 MOVEF_F speed1 speed
	 MULF 100.0 speed2 turn
	 DIVF turn speed1 turn
	 SUBF 100.0 turn turn
	JR donecomputation
secondisfaster:
	 MOVEF_F speed2 speed
	 MULF 100.0 speed1 turn
	 DIVF turn speed2 turn
	 SUBF turn 100.0 turn
donecomputation:

	CALL MOTORSTARTSTEERIMPL ports speed turn
}
subcall MOTORSTARTSTEERIMPL      // SFFV       MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F turn

	DATA8 layer
	DATA8 nos	
	DATA8 first
	DATA8 second
	DATA8 invfirst
	DATA8 invsecond

	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	READ8 FIRSTOF2 nos first
	JR_EQ8 0 first not_two_ports
	XOR8 first nos second
	READ8 MOTORISINVERTED layer invfirst
	AND8 first invfirst invfirst
	READ8 MOTORISINVERTED layer invsecond
	AND8 second invsecond invsecond

	JR_LTF turn 0.0 second_is_master
first_is_master:
	JR_EQ8 invfirst 0 non_invert_first
	SUBF 0.0 speed speed
	JR_NEQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion
non_invert_first:
	JR_EQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion

second_is_master:
	JR_EQ8 invsecond 0 non_invert_second
	SUBF 0.0 speed speed
	JR_NEQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion
non_invert_second:
	JR_EQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion

done_inversion:
	DATA8 spd  
	DATA16 trn
	MOVEF_16 turn trn
	MOVEF_8 speed spd
	OUTPUT_STEP_SYNC layer nos spd trn 0 0
not_two_ports:
}
subcall MOTOR.SCHEDULESYNC   // SFFFSV    MOTORSCHEDULESTEERIMPL
{
	IN_S ports 8
	IN_F speed1
	IN_F speed2
	IN_F count
	IN_S brake 8
	
	JR_GTEQF speed1 -100.0 nottoosmall1
	MOVEF_F -100.0 speed1
nottoosmall1:
	JR_LTEQF speed1 100.0 nottoobig1
	MOVEF_F 100.0 speed1
nottoobig1:
	JR_GTEQF speed2 -100.0 nottoosmall2
	MOVEF_F -100.0 speed2
nottoosmall2:
	JR_LTEQF speed2 100.0 nottoobig2
	MOVEF_F 100.0 speed2
nottoobig2:

	DATAF speed  
	DATAF turn
	MOVE8_F 0 speed
	MOVE8_F 0 turn

	DATAF speed1abs
	DATAF speed2abs
	MATH ABS speed1 speed1abs
	MATH ABS speed2 speed2abs
	JR_LTF speed1abs speed2abs secondisfaster
	JR_EQF speed1abs 0.0 donecomputation
	 MOVEF_F speed1 speed
	 MULF 100.0 speed2 turn
	 DIVF turn speed1 turn
	 SUBF 100.0 turn turn
	JR donecomputation
secondisfaster:
	 MOVEF_F speed2 speed
	 MULF 100.0 speed1 turn
	 DIVF turn speed2 turn
	 SUBF turn 100.0 turn
donecomputation:
	
	CALL MOTORSCHEDULESTEERIMPL ports speed turn count brake
}
subcall MOTORSCHEDULESTEERIMPL   // SFFFSV    MOTORDECODEPORTSDESCRIPTOR
{
	IN_S ports 8
	IN_F speed
	IN_F turn
	IN_F count
	IN_S brake 8
	
	DATA8 layer
	DATA8 nos	
	DATA8 first
	DATA8 second
	DATA8 invfirst
	DATA8 invsecond
	
	CALL MOTORDECODEPORTSDESCRIPTOR ports layer nos
	READ8 FIRSTOF2 nos first
	JR_EQ8 0 first not_two_ports
	XOR8 first nos second
	READ8 MOTORISINVERTED layer invfirst
	AND8 first invfirst invfirst
	READ8 MOTORISINVERTED layer invsecond
	AND8 second invsecond invsecond

	JR_LTF turn 0.0 second_is_master
first_is_master:
	JR_EQ8 invfirst 0 non_invert_first
	SUBF 0.0 speed speed
	JR_NEQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion
non_invert_first:
	JR_EQ8 invsecond 0 done_inversion
	SUBF 200.0 turn turn
	JR done_inversion

second_is_master:
	JR_EQ8 invsecond 0 non_invert_second
	SUBF 0.0 speed speed
	JR_NEQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion
non_invert_second:
	JR_EQ8 invfirst 0 done_inversion
	SUBF -200.0 turn turn
	JR done_inversion

done_inversion:
	DATA32 cnt
	DATA8 brk
	MATH ABS count count
	MOVEF_32 count cnt
	AND8888_32 brake -538976289 brake        // AND 0xdfdfdfdf performs an upcase for 4 letters
    STRINGS COMPARE brake 'TRUE' brk	

	JR_LTEQ32 cnt 0 dontmove	

	DATA8 spd  
	DATA16 trn
	MOVEF_16 turn trn
	MOVEF_8 speed spd
	OUTPUT_STEP_SYNC layer nos spd trn cnt brk	
dontmove:	
not_two_ports:
}
subcall SENSOR.READPERCENT       // FF
{
	IN_F port
	OUT_F result

	DATA8 layer
	DATA8 no
	DATA8 percentage

	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	INPUT_READ layer no 0 -1 percentage
	JR_LT8 percentage 0 novalue
	
	MOVE8_F percentage result
	RETURN
novalue:	
	MOVE8_F 0 result
}
subcall SENSOR.GETMODE		// FF
{
	IN_F port
	OUT_F result
	
	DATA8 layer
	DATA8 no
	DATA8 type
	DATA8 mode
	
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no
	
	INPUT_DEVICE GET_TYPEMODE layer no type mode
	MOVE8_F mode result
}
subcall SENSOR.READRAWVALUE            // FFF
{
	IN_F port
	IN_F index
	OUT_F result

	DATA8 layer
	DATA8 no
	DATA8 index8
		
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	MOVEF_8 index index8
	JR_LT8 index8 0 outofbounds
	JR_GT8 index8 7 outofbounds

	DATA32 rawvalue0
	DATA32 rawvalue1
	DATA32 rawvalue2
	DATA32 rawvalue3
	DATA32 rawvalue4
	DATA32 rawvalue5
	DATA32 rawvalue6
	DATA32 rawvalue7
	INPUT_READEXT layer no 0 -1 18 8 rawvalue0 rawvalue1 rawvalue2 rawvalue3 rawvalue4 rawvalue5 rawvalue6 rawvalue7
	
	DATA32 rawtmp
	READ32 rawvalue0 index8 rawtmp

	JR_LT32 rawtmp -1000000000 nomoredata
	MOVE32_F rawtmp result
	RETURN

nomoredata:
outofbounds:
	MOVEF_F 0.0 result
}
subcall ARRAYSTORE_FLOAT   // FFFV
{
	IN_F index
	IN_F value	
	IN_16 handle
	
	DATA32 index32
	DATA32 len	
	MOVEF_32 index index32

	ARRAY SIZE handle len
	JR_LT32 index32 0 negativeindex
	JR_LT32 index32 len arraybigenough

increasesize:	
	DATA32 doublelen
	ADD32 len len doublelen
	ARRAY RESIZE handle doublelen
writeloop:	
	ARRAY_WRITE handle len 0.0
	ADD32 len 1 len
	JR_LT32 len doublelen writeloop
	JR_GTEQ32 index32 len increasesize
	
arraybigenough:
	ARRAY_WRITE handle index32 value
negativeindex:
}
subcall SENSOR.READRAW            // FFA
{
	IN_F port
	IN_F values
	IN_16 resultarray
	
	DATA8 layer
	DATA8 no
	DATA32 values32
		
	MOVEF_8 port no
	SUB8 no 1 no
	DIV8 no 4 layer
	MATH MOD8 no 4 no

	MOVEF_32 values values32

	JR_LTEQ32 values32 0 arrayempty
	ARRAY RESIZE resultarray values32

	DATA32 rawvalue0
	DATA32 rawvalue1
	DATA32 rawvalue2
	DATA32 rawvalue3
	DATA32 rawvalue4
	DATA32 rawvalue5
	DATA32 rawvalue6
	DATA32 rawvalue7
	INPUT_READEXT layer no 0 -1 18 8 rawvalue0 rawvalue1 rawvalue2 rawvalue3 rawvalue4 rawvalue5 rawvalue6 rawvalue7
	
	DATA32 i
	DATA32 rawtmp
	MOVE32_32 0 i
loop:
	DATA8 tmp8
	DATAF tmpf

	MOVEF_F 0.0 tmpf
	JR_GTEQ32 i 8 nomoredata

	MOVE32_8 i tmp8
	READ32 rawvalue0 tmp8 rawtmp
	JR_LT32 rawtmp -1000000000 nomoredata
	MOVE32_F rawtmp tmpf

nomoredata:	
	ARRAY_WRITE resultarray i tmpf

	ADD32 i 1 i
	JR_LT32 i values32 loop
	RETURN

arrayempty:
	ARRAY RESIZE resultarray 0
}
subcall ARRAYGET_FLOAT     // FFF
{
	IN_F index
	OUT_F value
	IN_16 handle
	
	DATA32 index32
	DATA32 len
	MOVEF_32 index index32
	
	ARRAY SIZE handle len
	JR_LT32 index32 0 outofbounds
	JR_GTEQ32 index32 len outofbounds
	
	ARRAY_READ handle index32 value
	RETURN
outofbounds:
	MOVE8_F 0 value	
}
subcall ARRAYCREATE_FLOAT   // F
{
	OUT_16 handle
	
	ARRAY CREATEF 8 handle			// create with 8 elements
	ARRAY FILL handle 0.0
}
subcall GETANDINC32     // V
{
	IN_32 counterin
	IN_32 inc
	OUT_32 counterout
	OUT_32 prev

	MOVE32_32 counterin prev
	ADD32 counterin inc counterout
}
